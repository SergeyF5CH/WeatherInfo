2026-02-04 17:43:44.356 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 17:43:44.427 +03:00 [DBG] Hosting starting
2026-02-04 17:43:44.434 +03:00 [DBG] Middleware loaded
2026-02-04 17:43:44.435 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 17:43:44.437 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 17:43:44.485 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 17:43:44.545 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 17:43:44.546 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 17:43:44.547 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 17:43:44.547 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 17:43:44.548 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 17:43:44.548 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 17:43:44.574 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 17:43:44.574 +03:00 [INF] Hosting environment: Development
2026-02-04 17:43:44.575 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 17:43:44.576 +03:00 [DBG] Hosting started
2026-02-04 17:43:44.975 +03:00 [DBG] Connection id "0HNJ3VF65P79F" accepted.
2026-02-04 17:43:44.975 +03:00 [DBG] Connection id "0HNJ3VF65P79G" accepted.
2026-02-04 17:43:44.977 +03:00 [DBG] Connection id "0HNJ3VF65P79F" started.
2026-02-04 17:43:44.977 +03:00 [DBG] Connection id "0HNJ3VF65P79G" started.
2026-02-04 17:43:44.998 +03:00 [DBG] Connection id "0HNJ3VF65P79G" received FIN.
2026-02-04 17:43:44.998 +03:00 [DBG] Connection id "0HNJ3VF65P79F" received FIN.
2026-02-04 17:43:45.007 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 17:43:45.007 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 17:43:45.052 +03:00 [DBG] Connection id "0HNJ3VF65P79F" stopped.
2026-02-04 17:43:45.052 +03:00 [DBG] Connection id "0HNJ3VF65P79G" stopped.
2026-02-04 17:43:45.056 +03:00 [DBG] Connection id "0HNJ3VF65P79F" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 17:43:45.056 +03:00 [DBG] Connection id "0HNJ3VF65P79G" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 17:43:45.517 +03:00 [DBG] Connection id "0HNJ3VF65P79H" accepted.
2026-02-04 17:43:45.518 +03:00 [DBG] Connection id "0HNJ3VF65P79H" started.
2026-02-04 17:43:45.553 +03:00 [DBG] Connection 0HNJ3VF65P79H established using the following protocol: "Tls13"
2026-02-04 17:43:45.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 17:43:45.742 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 17:43:45.760 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 17:43:45.762 +03:00 [DBG] Request did not match any endpoints
2026-02-04 17:43:45.805 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 17:43:45.806 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 17:43:45.816 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 17:43:45.817 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 17:43:45.819 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 200.7553ms
2026-02-04 17:43:45.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 17:43:45.848 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 17:43:45.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 12.7385ms
2026-02-04 17:43:45.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 17:43:45.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.1529ms
2026-02-04 17:43:46.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 17:43:46.021 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 17:43:46.022 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/favicon-32x32.png - null null
2026-02-04 17:43:46.023 +03:00 [DBG] Request did not match any endpoints
2026-02-04 17:43:46.025 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-04 17:43:46.027 +03:00 [DBG] Request did not match any endpoints
2026-02-04 17:43:46.032 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.728ms
2026-02-04 17:43:46.035 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-04 17:43:46.036 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/favicon-32x32.png - 200 628 image/png 14.5342ms
2026-02-04 17:44:42.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week - null null
2026-02-04 17:44:42.525 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week'
2026-02-04 17:44:42.527 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Москва/week'
2026-02-04 17:44:42.528 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:44:42.529 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:44:42.532 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:44:42.549 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:44:42.551 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:44:42.552 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:44:42.553 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:44:42.553 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:44:42.554 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:44:42.556 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:44:42.686 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 17:44:42.693 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:44:42.702 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:44:42.704 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:44:42.705 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:44:42.706 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:44:42.707 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:44:42.711 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:44:42.726 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 17:44:42.727 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 17:44:43.029 +03:00 [INF] Received HTTP response headers after 300.4856ms - 200
2026-02-04 17:44:43.030 +03:00 [INF] End processing HTTP request after 305.3252ms - 200
2026-02-04 17:44:43.043 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 17:44:43.044 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 17:44:43.319 +03:00 [INF] Received HTTP response headers after 274.1074ms - 200
2026-02-04 17:44:43.320 +03:00 [INF] End processing HTTP request after 276.6418ms - 200
2026-02-04 17:44:43.644 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:44:43.662 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:44:43.690 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:44:43.693 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:44:43.696 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:44:43.703 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:44:43.735 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:44:43.742 +03:00 [DBG] Created DbConnection. (6ms).
2026-02-04 17:44:43.744 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:44:43.754 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:44:43.759 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:44:43.763 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-04 17:44:43.766 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-04 17:44:43.770 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:44:43.785 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:44:43.793 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:44:43.802 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:44:43.805 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 17ms reading results.
2026-02-04 17:44:43.808 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:44:43.810 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 17:44:43.816 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:44:43.818 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:44:43.821 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:44:43.825 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:44:43.825 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:44:43.826 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:44:43.827 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:44:43.828 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 17:44:43.835 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1278.4353ms
2026-02-04 17:44:43.836 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:44:43.838 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:44:43.840 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:44:43.842 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 17:44:43.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week - 200 null application/json; charset=utf-8 1326.7157ms
2026-02-04 17:45:18.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - null null
2026-02-04 17:45:18.882 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Санкт-Петербург/week'
2026-02-04 17:45:18.883 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Санкт-Петербург/week'
2026-02-04 17:45:18.884 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:45:18.885 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:45:18.885 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:45:18.886 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:45:18.887 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:45:18.888 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:45:18.889 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:45:18.890 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:45:18.891 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:45:18.892 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:45:18.894 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:45:18.898 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:45:18.899 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:45:18.899 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:45:18.900 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:45:18.901 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:45:18.902 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:45:18.902 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3&count=1&language=ru
2026-02-04 17:45:18.903 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3&count=1&language=ru
2026-02-04 17:45:19.182 +03:00 [INF] Received HTTP response headers after 278.0769ms - 200
2026-02-04 17:45:19.183 +03:00 [INF] End processing HTTP request after 280.1758ms - 200
2026-02-04 17:45:19.184 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 17:45:19.184 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 17:45:19.416 +03:00 [INF] Received HTTP response headers after 231.524ms - 200
2026-02-04 17:45:19.417 +03:00 [INF] End processing HTTP request after 233.8532ms - 200
2026-02-04 17:45:19.445 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:45:19.447 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:45:19.448 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:45:19.449 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:45:19.449 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:45:19.450 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:45:19.451 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:45:19.452 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:45:19.452 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:45:19.453 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:45:19.453 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:45:19.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:45:19.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:45:19.456 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:45:19.457 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:45:19.459 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:45:19.461 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:45:19.462 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 17:45:19.462 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:45:19.463 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:45:19.464 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:45:19.465 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:45:19.466 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:45:19.467 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:45:19.468 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:45:19.468 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:45:19.469 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:45:19.469 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 17:45:19.470 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 578.437ms
2026-02-04 17:45:19.471 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:45:19.472 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:45:19.472 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:45:19.473 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:45:19.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - 200 null application/json; charset=utf-8 594.416ms
2026-02-04 17:45:55.725 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow/week - null null
2026-02-04 17:45:55.730 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow/week'
2026-02-04 17:45:55.731 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Moscow/week'
2026-02-04 17:45:55.732 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:45:55.733 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:45:55.733 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:45:55.734 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:45:55.735 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:45:55.735 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:45:55.736 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:45:55.737 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:45:55.738 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:45:55.739 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:45:55.742 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:45:55.743 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:45:55.744 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:45:55.745 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:45:55.746 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:45:55.747 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:45:55.747 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:45:55.748 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 17:45:55.749 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 17:45:55.808 +03:00 [INF] Received HTTP response headers after 58.2897ms - 200
2026-02-04 17:45:55.809 +03:00 [INF] End processing HTTP request after 60.3516ms - 200
2026-02-04 17:45:55.809 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 17:45:55.810 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 17:45:56.040 +03:00 [INF] Received HTTP response headers after 228.9394ms - 200
2026-02-04 17:45:56.040 +03:00 [INF] End processing HTTP request after 231.0349ms - 200
2026-02-04 17:45:56.047 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:45:56.048 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:45:56.049 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:45:56.050 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:45:56.051 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:45:56.051 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:45:56.052 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:45:56.053 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:45:56.053 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:45:56.054 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:45:56.055 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:45:56.055 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:45:56.056 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:45:56.057 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:45:56.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:45:56.060 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:45:56.062 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:45:56.063 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 17:45:56.064 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:45:56.065 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:45:56.065 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:45:56.066 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:45:56.067 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:45:56.068 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:45:56.069 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:45:56.069 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:45:56.069 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:45:56.070 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 17:45:56.071 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 332.4145ms
2026-02-04 17:45:56.072 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:45:56.073 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:45:56.073 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:45:56.074 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:45:56.075 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow/week - 200 null application/json; charset=utf-8 349.869ms
2026-02-04 17:46:21.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week - null null
2026-02-04 17:46:21.818 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week'
2026-02-04 17:46:21.819 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Москва/week'
2026-02-04 17:46:21.819 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:46:21.820 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:46:21.820 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:46:21.821 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:46:21.822 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:46:21.823 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:46:21.823 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:46:21.825 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:46:21.825 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:46:21.826 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:46:21.827 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:46:21.828 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:46:21.829 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:46:21.830 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:46:21.830 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:46:21.831 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:46:21.832 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:46:21.833 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:46:21.834 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:46:21.835 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:46:21.835 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:46:21.836 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:46:21.836 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:46:21.837 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:46:21.838 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:46:21.838 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:46:21.839 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:46:21.839 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:46:21.840 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:46:21.841 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:46:21.842 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:46:21.843 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:46:21.844 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:46:21.847 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:46:21.848 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 17:46:21.849 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:46:21.849 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:46:21.850 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:46:21.851 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:46:21.852 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:46:21.853 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:46:21.853 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:46:21.854 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:46:21.854 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:46:21.855 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 17:46:21.856 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 29.4457ms
2026-02-04 17:46:21.856 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:46:21.857 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:46:21.858 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:46:21.859 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:46:21.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week - 200 null application/json; charset=utf-8 46.4849ms
2026-02-04 17:46:39.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - null null
2026-02-04 17:46:39.581 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Санкт-Петербург/week'
2026-02-04 17:46:39.581 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Санкт-Петербург/week'
2026-02-04 17:46:39.582 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:46:39.583 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:46:39.583 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:46:39.584 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:46:39.585 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:46:39.586 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:46:39.586 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:46:39.587 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:46:39.588 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:46:39.589 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:46:39.590 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:46:39.590 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:46:39.591 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:46:39.592 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:46:39.593 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:46:39.594 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:46:39.594 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:46:39.595 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:46:39.596 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:46:39.597 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:46:39.598 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:46:39.598 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:46:39.599 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:46:39.600 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:46:39.600 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:46:39.601 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:46:39.601 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:46:39.602 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:46:39.602 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:46:39.603 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:46:39.604 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:46:39.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:46:39.606 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:46:39.609 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:46:39.609 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 17:46:39.610 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:46:39.611 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:46:39.612 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:46:39.613 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:46:39.614 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:46:39.615 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:46:39.615 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:46:39.616 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:46:39.616 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:46:39.617 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 17:46:39.618 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 28.6644ms
2026-02-04 17:46:39.618 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:46:39.619 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:46:39.620 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:46:39.620 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:46:39.621 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - 200 null application/json; charset=utf-8 42.6842ms
2026-02-04 17:46:42.740 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 17:46:52.749 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:46:52.752 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0327ms - processed: 0 items - remaining: 1 items
2026-02-04 17:47:02.759 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:47:02.760 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 17:47:07.404 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Алагамор/week - null null
2026-02-04 17:47:07.405 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алагамор/week'
2026-02-04 17:47:07.406 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Алагамор/week'
2026-02-04 17:47:07.407 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:47:07.407 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:47:07.408 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:47:07.408 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:47:07.409 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:47:07.410 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:47:07.411 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:47:07.412 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:47:07.412 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:47:07.413 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:47:07.414 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:47:07.415 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:47:07.415 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:47:07.416 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:47:07.417 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:47:07.417 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:47:07.418 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:47:07.419 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%B0%D0%B3%D0%B0%D0%BC%D0%BE%D1%80&count=1&language=ru
2026-02-04 17:47:07.420 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%B0%D0%B3%D0%B0%D0%BC%D0%BE%D1%80&count=1&language=ru
2026-02-04 17:47:07.662 +03:00 [INF] Received HTTP response headers after 241.2474ms - 200
2026-02-04 17:47:07.663 +03:00 [INF] End processing HTTP request after 243.3703ms - 200
2026-02-04 17:47:07.664 +03:00 [WRN] City not found in Geocoding API: Алагамор
2026-02-04 17:47:07.720 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 306.4251ms
2026-02-04 17:47:07.721 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 17:47:07.750 +03:00 [ERR] HTTP 404 - City 'Алагамор' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алагамор' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherWeekAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 116
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 17:47:07.762 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Алагамор/week - 404 null application/json 358.3881ms
2026-02-04 17:47:12.776 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:47:12.777 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 17:47:22.783 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:47:22.784 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 17:47:24.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Алагамор?date=%20 - null null
2026-02-04 17:47:24.277 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алагамор'
2026-02-04 17:47:24.278 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алагамор'
2026-02-04 17:47:24.279 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:47:24.280 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:47:24.280 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:47:24.284 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:47:24.285 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:47:24.286 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:47:24.287 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:47:24.288 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:47:24.288 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:47:24.289 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:47:24.290 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:47:24.294 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:47:24.294 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:47:24.295 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:47:24.296 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:47:24.296 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:47:24.297 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:47:24.298 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:47:24.299 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 17:47:24.300 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:47:24.301 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:47:24.301 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:47:24.302 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:47:24.329 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 39.7061ms
2026-02-04 17:47:24.330 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:47:24.338 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 17:47:24.341 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Алагамор?date=%20 - 500 null application/json 69.8218ms
2026-02-04 17:47:32.786 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:47:32.788 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 17:47:42.799 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:47:42.800 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 17:47:46.669 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=%20 - null null
2026-02-04 17:47:46.671 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 17:47:46.672 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 17:47:46.673 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:47:46.674 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:47:46.674 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:47:46.675 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:47:46.676 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:47:46.677 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:47:46.678 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:47:46.679 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:47:46.680 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:47:46.680 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:47:46.681 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:47:46.682 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:47:46.683 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:47:46.684 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:47:46.684 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:47:46.685 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:47:46.686 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:47:46.687 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:47:46.687 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 17:47:46.688 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:47:46.689 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:47:46.689 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:47:46.690 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:47:46.702 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 22.0737ms
2026-02-04 17:47:46.703 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:47:46.712 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 17:47:46.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=%20 - 500 null application/json 45.5627ms
2026-02-04 17:47:52.803 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:47:52.804 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 17:48:02.806 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:48:02.806 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 17:48:06.221 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - null null
2026-02-04 17:48:06.223 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 17:48:06.223 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 17:48:06.225 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:48:06.225 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:48:06.226 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:48:06.226 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:48:06.227 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:48:06.228 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:48:06.229 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:48:06.230 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:48:06.231 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:48:06.232 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:48:06.232 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:48:06.233 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:48:06.234 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:48:06.235 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:48:06.235 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:48:06.236 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:48:06.237 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:48:06.238 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:48:06.238 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 17:48:06.240 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:48:06.241 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:48:06.241 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:48:06.243 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:48:06.244 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 17:48:06.245 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 17:48:06.305 +03:00 [INF] Received HTTP response headers after 59.724ms - 200
2026-02-04 17:48:06.306 +03:00 [INF] End processing HTTP request after 61.8606ms - 200
2026-02-04 17:48:06.308 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 17:48:06.309 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 17:48:06.529 +03:00 [INF] Received HTTP response headers after 219.2083ms - 200
2026-02-04 17:48:06.529 +03:00 [INF] End processing HTTP request after 221.6205ms - 200
2026-02-04 17:48:06.531 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:48:06.532 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:48:06.533 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:48:06.533 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:48:06.534 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:48:06.535 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:48:06.536 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:48:06.537 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:48:06.537 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:48:06.538 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:48:06.539 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:48:06.539 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:48:06.540 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:48:06.540 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:48:06.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:48:06.543 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:48:06.545 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:48:06.546 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 17:48:06.547 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:48:06.548 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:48:06.549 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:48:06.550 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:48:06.551 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:48:06.552 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:48:06.552 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:48:06.553 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:48:06.553 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:48:06.554 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 17:48:06.555 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 323.124ms
2026-02-04 17:48:06.555 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:48:06.556 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:48:06.557 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:48:06.557 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:48:06.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - 200 null application/json; charset=utf-8 337.0934ms
2026-02-04 17:48:12.816 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:48:12.816 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 17:48:13.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - null null
2026-02-04 17:48:13.147 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 17:48:13.147 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 17:48:13.148 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:48:13.149 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:48:13.149 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:48:13.150 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:48:13.151 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:48:13.152 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:48:13.152 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:48:13.153 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:48:13.154 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:48:13.155 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:48:13.155 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:48:13.156 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:48:13.157 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:48:13.158 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:48:13.158 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:48:13.159 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:48:13.160 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:48:13.161 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:48:13.162 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 17:48:13.162 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:48:13.163 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:48:13.164 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:48:13.165 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:48:13.166 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:48:13.167 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:48:13.168 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:48:13.169 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:48:13.170 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:48:13.170 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:48:13.171 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:48:13.172 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:48:13.172 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:48:13.173 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:48:13.174 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:48:13.174 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:48:13.175 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:48:13.176 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:48:13.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:48:13.178 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:48:13.180 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:48:13.181 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 17:48:13.181 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:48:13.182 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:48:13.183 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:48:13.184 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:48:13.184 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:48:13.185 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:48:13.186 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:48:13.186 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:48:13.187 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:48:13.187 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 17:48:13.188 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.2635ms
2026-02-04 17:48:13.189 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:48:13.189 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:48:13.190 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:48:13.191 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:48:13.192 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - 200 null application/json; charset=utf-8 46.9075ms
2026-02-04 17:48:22.820 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:48:22.821 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 17:48:32.832 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:48:32.833 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 17:48:42.848 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:48:42.848 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-04 17:48:52.864 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:48:52.865 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-04 17:49:02.882 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 17:49:02.882 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 17:49:07.425 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 17:49:12.892 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:49:12.893 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-04 17:49:22.899 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:49:22.900 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-04 17:49:25.120 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 17:49:25.124 +03:00 [DBG] 1 candidate(s) found for the request path '/top-cities'
2026-02-04 17:49:25.125 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'top-cities' is valid for the request path '/top-cities'
2026-02-04 17:49:25.126 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 17:49:25.126 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:49:25.127 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 17:49:25.130 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 17:49:25.131 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:49:25.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:49:25.132 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 17:49:25.133 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:49:25.134 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 17:49:25.135 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:49:25.136 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:49:25.136 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:49:25.137 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 17:49:25.138 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:49:25.139 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:49:25.139 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:49:25.140 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:49:25.141 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:49:25.141 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 17:49:25.142 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:49:25.143 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:49:25.144 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:49:25.144 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:49:25.145 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 17:49:25.146 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 17:49:25.147 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 17:49:25.147 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 17:49:25.148 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 17:49:25.149 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 17:49:25.161 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:49:25.181 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 17:49:25.293 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 17:49:25.306 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:49:25.307 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:49:25.307 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:49:25.308 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:25.309 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:49:25.309 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:49:25.310 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:49:25.311 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 17:49:25.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 17:49:25.314 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:25.315 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 17:49:25.316 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:25.317 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:49:25.317 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:49:25.319 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:49:25.319 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:49:25.319 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:49:25.320 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:49:25.321 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 17:49:25.322 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 187.1253ms
2026-02-04 17:49:25.323 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 17:49:25.323 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:49:25.324 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:49:25.324 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:49:25.325 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 205.6522ms
2026-02-04 17:49:32.904 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:49:32.906 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2026-02-04 17:49:42.916 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:49:42.916 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2026-02-04 17:49:52.932 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:49:52.933 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-04 17:49:55.086 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-04 17:49:55.091 +03:00 [DBG] 1 candidate(s) found for the request path '/requests'
2026-02-04 17:49:55.091 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'requests' is valid for the request path '/requests'
2026-02-04 17:49:55.092 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:49:55.093 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:49:55.093 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:49:55.097 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 17:49:55.098 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:49:55.099 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:49:55.099 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 17:49:55.100 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:49:55.101 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 17:49:55.102 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:49:55.102 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:49:55.103 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:49:55.104 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 17:49:55.105 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:49:55.105 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:49:55.106 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:49:55.106 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:49:55.107 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:49:55.108 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 17:49:55.109 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:49:55.109 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:49:55.110 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:49:55.111 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:49:55.112 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 17:49:55.112 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 17:49:55.113 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:49:55.114 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:49:55.114 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 17:49:55.115 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 17:49:55.116 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:49:55.116 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 17:49:55.117 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:49:55.118 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:49:55.118 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:49:55.119 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:49:55.121 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:49:55.122 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-04 17:49:55.126 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-04 17:49:55.130 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:49:55.130 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:49:55.131 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:49:55.131 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:55.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:49:55.132 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:49:55.133 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:49:55.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:49:55.135 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:49:55.136 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:55.137 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 17:49:55.137 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:55.138 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:49:55.140 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-04 17:49:55.156 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 17:49:55.157 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:49:55.158 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:55.158 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:49:55.159 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:49:55.160 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:49:55.161 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:49:55.162 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:49:55.164 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.165 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.166 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.166 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.167 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.168 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.168 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:49:55.169 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:55.170 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-04 17:49:55.171 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:49:55.172 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:49:55.173 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:49:55.174 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:49:55.174 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:49:55.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:49:55.175 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:49:55.176 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 17:49:55.182 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 79.9373ms
2026-02-04 17:49:55.182 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:49:55.183 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:49:55.183 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:49:55.184 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:49:55.185 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 98.9152ms
2026-02-04 17:50:02.941 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:50:02.941 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2026-02-04 17:50:12.948 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:50:12.949 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2026-02-04 17:50:22.958 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:50:22.959 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2026-02-04 17:50:32.966 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:50:32.966 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 2 items
2026-02-04 17:50:36.249 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=3 - null null
2026-02-04 17:50:36.255 +03:00 [DBG] 1 candidate(s) found for the request path '/requests'
2026-02-04 17:50:36.256 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'requests' is valid for the request path '/requests'
2026-02-04 17:50:36.256 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:36.257 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:50:36.258 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:36.258 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 17:50:36.259 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:50:36.260 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:50:36.261 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 17:50:36.261 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:50:36.262 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 17:50:36.263 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:36.264 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:36.264 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:36.265 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 17:50:36.266 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:36.267 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:36.267 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:36.268 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:36.269 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:36.269 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 17:50:36.270 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:36.271 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:36.271 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:36.272 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:36.272 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:36.273 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 17:50:36.274 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:36.274 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:36.275 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:36.276 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:36.276 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:36.277 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 17:50:36.278 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:36.279 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:36.279 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:36.280 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:36.281 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:50:36.284 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:50:36.284 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:50:36.285 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:36.285 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:36.286 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:36.287 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:36.287 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:36.288 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:36.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:36.290 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:36.291 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 17:50:36.291 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:36.292 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:36.293 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:36.294 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:36.294 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:36.295 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:36.296 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:36.296 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:50:36.297 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:50:36.299 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:36.299 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:36.300 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:36.301 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:36.301 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 17:50:36.302 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:36.303 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:36.304 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:50:36.305 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:50:36.305 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:50:36.306 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:50:36.306 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:50:36.307 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 17:50:36.308 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 44.6374ms
2026-02-04 17:50:36.308 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:36.309 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:50:36.309 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:36.310 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:36.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=3 - 200 null application/json; charset=utf-8 62.2276ms
2026-02-04 17:50:41.655 +03:00 [DBG] Connection id "0HNJ3VF65P79H" received FIN.
2026-02-04 17:50:41.657 +03:00 [DBG] Connection id "0HNJ3VF65P79H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 17:50:41.657 +03:00 [DBG] Connection id "0HNJ3VF65P79H" is closed. The last processed stream ID was 35.
2026-02-04 17:50:41.659 +03:00 [DBG] The connection queue processing loop for 0HNJ3VF65P79H completed.
2026-02-04 17:50:41.660 +03:00 [DBG] Connection id "0HNJ3VF65P79H" stopped.
2026-02-04 17:50:42.232 +03:00 [DBG] Connection id "0HNJ3VF65P79I" accepted.
2026-02-04 17:50:42.232 +03:00 [DBG] Connection id "0HNJ3VF65P79I" started.
2026-02-04 17:50:42.240 +03:00 [DBG] Connection 0HNJ3VF65P79I established using the following protocol: "Tls13"
2026-02-04 17:50:42.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=2&pageSize=3 - null null
2026-02-04 17:50:42.247 +03:00 [DBG] 1 candidate(s) found for the request path '/requests'
2026-02-04 17:50:42.248 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'requests' is valid for the request path '/requests'
2026-02-04 17:50:42.249 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:42.249 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:50:42.250 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:42.250 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 17:50:42.251 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:50:42.252 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:50:42.252 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 17:50:42.253 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:50:42.254 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 17:50:42.255 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:42.255 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:42.256 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:42.257 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 17:50:42.258 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:42.259 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:42.260 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:42.261 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:42.262 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:42.263 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 17:50:42.264 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:42.264 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:42.265 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:42.266 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:42.266 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:42.267 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 17:50:42.268 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:42.268 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:42.269 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:42.270 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:42.270 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:42.271 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 17:50:42.272 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:42.273 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:42.273 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:42.274 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:42.275 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:50:42.276 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:50:42.277 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:50:42.277 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:42.278 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:42.279 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:42.280 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:42.280 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:42.281 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:42.282 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:42.283 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:42.284 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 17:50:42.284 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:42.285 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:42.286 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_2)'
2026-02-04 17:50:42.289 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 17:50:42.290 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:42.291 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:42.292 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:42.292 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:42.293 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:42.293 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_2 OFFSET @__p_2
2026-02-04 17:50:42.295 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_2 OFFSET @__p_2
2026-02-04 17:50:42.296 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:42.297 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:42.297 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:42.298 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:42.299 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 17:50:42.300 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:42.300 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:42.301 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:50:42.302 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:50:42.303 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:50:42.303 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:50:42.303 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:50:42.304 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 17:50:42.305 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 50.2753ms
2026-02-04 17:50:42.306 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:42.306 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:50:42.307 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:42.307 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:42.308 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=2&pageSize=3 - 200 null application/json; charset=utf-8 63.3032ms
2026-02-04 17:50:42.974 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:50:42.974 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2026-02-04 17:50:48.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=3&pageSize=3 - null null
2026-02-04 17:50:48.351 +03:00 [DBG] 1 candidate(s) found for the request path '/requests'
2026-02-04 17:50:48.352 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'requests' is valid for the request path '/requests'
2026-02-04 17:50:48.353 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:48.353 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:50:48.354 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:48.355 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 17:50:48.356 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:50:48.356 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:50:48.357 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 17:50:48.358 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:50:48.359 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 17:50:48.359 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:48.360 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:48.361 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:48.362 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 17:50:48.363 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:48.363 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:48.364 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:48.365 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:48.366 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:48.366 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 17:50:48.367 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:48.368 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:48.368 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:48.369 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:48.370 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:48.370 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 17:50:48.371 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:48.372 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:48.373 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:48.373 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:48.374 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:48.375 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 17:50:48.376 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:48.376 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:48.377 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:48.378 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:48.379 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:50:48.380 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:50:48.381 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:50:48.381 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:48.382 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:48.383 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:48.383 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:48.384 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:48.385 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:48.386 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:48.387 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:48.387 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 17:50:48.388 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:48.389 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:48.390 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:48.391 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:48.392 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:48.392 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:48.393 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:48.393 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:50:48.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:50:48.396 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:50:48.397 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:48.397 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 17:50:48.398 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:48.399 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:48.400 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:50:48.401 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:50:48.401 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:50:48.402 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:50:48.402 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:50:48.403 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 17:50:48.404 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 44.2344ms
2026-02-04 17:50:48.405 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:48.405 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:50:48.406 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:48.407 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:48.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=3&pageSize=3 - 200 null application/json; charset=utf-8 58.393ms
2026-02-04 17:50:52.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=4&pageSize=3 - null null
2026-02-04 17:50:52.616 +03:00 [DBG] 1 candidate(s) found for the request path '/requests'
2026-02-04 17:50:52.617 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'requests' is valid for the request path '/requests'
2026-02-04 17:50:52.618 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:52.619 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:50:52.619 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:52.620 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 17:50:52.621 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:50:52.622 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:50:52.622 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 17:50:52.623 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:50:52.624 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 17:50:52.625 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:52.626 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 17:50:52.626 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:52.627 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 17:50:52.628 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:52.629 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:52.629 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 17:50:52.630 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 17:50:52.631 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:52.631 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 17:50:52.632 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:52.633 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:52.634 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 17:50:52.634 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 17:50:52.635 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:52.635 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 17:50:52.636 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:52.637 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:52.638 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 17:50:52.638 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 17:50:52.639 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:52.640 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 17:50:52.641 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:52.641 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:52.642 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 17:50:52.642 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 17:50:52.643 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:50:52.645 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:50:52.645 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:50:52.646 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:52.646 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:52.647 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:52.648 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:52.648 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:52.649 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:52.650 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 17:50:52.651 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:52.652 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 17:50:52.653 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:52.653 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:52.654 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:52.655 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:52.656 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:50:52.656 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:50:52.657 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:50:52.657 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:50:52.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 17:50:52.660 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:52.660 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 17:50:52.661 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:50:52.662 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:52.663 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:50:52.664 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:50:52.664 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:50:52.665 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:50:52.665 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:50:52.666 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 17:50:52.667 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 41.7524ms
2026-02-04 17:50:52.667 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 17:50:52.668 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:50:52.668 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:50:52.669 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:50:52.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/requests?from=2026-02-04&to=2026-02-04&page=4&pageSize=3 - 200 null application/json; charset=utf-8 56.0685ms
2026-02-04 17:50:52.981 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:50:52.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-04 17:51:02.992 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:51:02.993 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2026-02-04 17:51:13.009 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:51:13.010 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2026-02-04 17:51:23.017 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:51:23.017 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-04 17:51:33.029 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:51:33.030 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2026-02-04 17:51:43.034 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:51:43.035 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 2 items
2026-02-04 17:51:53.050 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:51:53.050 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2026-02-04 17:52:03.067 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:52:03.068 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-04 17:52:13.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:52:13.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2026-02-04 17:52:23.089 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:52:23.090 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-04 17:52:33.092 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:52:33.093 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 17:52:43.098 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:52:43.098 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 17:52:51.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - null null
2026-02-04 17:52:51.340 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-04 17:52:51.341 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-04 17:52:51.342 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:52:51.342 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 17:52:51.342 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:52:51.343 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 17:52:51.344 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 17:52:51.345 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 17:52:51.345 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 17:52:51.347 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 17:52:51.348 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 17:52:51.348 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:52:51.349 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 17:52:51.350 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 17:52:51.351 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 17:52:51.352 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:52:51.352 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 17:52:51.353 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 17:52:51.354 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 17:52:51.354 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:52:51.355 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 17:52:51.356 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:52:51.357 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:52:51.357 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 17:52:51.358 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 17:52:51.359 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 17:52:51.360 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 17:52:51.644 +03:00 [INF] Received HTTP response headers after 283.2785ms - 200
2026-02-04 17:52:51.644 +03:00 [INF] End processing HTTP request after 285.2962ms - 200
2026-02-04 17:52:51.646 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 17:52:51.646 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 17:52:51.923 +03:00 [INF] Received HTTP response headers after 275.7082ms - 200
2026-02-04 17:52:51.926 +03:00 [INF] End processing HTTP request after 279.9689ms - 200
2026-02-04 17:52:51.927 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 17:52:51.928 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:52:51.929 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:52:51.930 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 17:52:51.931 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 17:52:51.931 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 17:52:51.932 +03:00 [DBG] Creating DbConnection.
2026-02-04 17:52:51.932 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 17:52:51.933 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:52:51.933 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:52:51.934 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 17:52:51.934 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 17:52:51.935 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 17:52:51.936 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:52:51.937 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 17:52:51.938 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 17:52:51.940 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:52:51.941 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 17:52:51.942 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 17:52:51.942 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:52:51.943 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 17:52:51.944 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 17:52:51.945 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 17:52:51.946 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 17:52:51.946 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 17:52:51.947 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 17:52:51.947 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 17:52:51.948 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 17:52:51.949 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 600.1794ms
2026-02-04 17:52:51.949 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 17:52:51.950 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 17:52:51.951 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 17:52:51.951 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 17:52:51.952 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - 200 null application/json; charset=utf-8 616.1037ms
2026-02-04 17:52:53.102 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:52:53.103 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-04 17:53:03.108 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:53:03.110 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4774ms - processed: 0 items - remaining: 2 items
2026-02-04 17:53:13.114 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:53:13.114 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-04 17:53:23.117 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:53:23.118 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0082ms - processed: 0 items - remaining: 2 items
2026-02-04 17:53:33.135 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:53:33.136 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 17:53:43.152 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:53:43.153 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-04 17:53:53.166 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:53:53.167 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-04 17:54:03.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:54:03.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 17:54:13.181 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:54:13.182 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-04 17:54:23.185 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:54:23.186 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-04 17:54:33.196 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:54:33.197 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-04 17:54:43.206 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 17:54:43.207 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 17:54:51.359 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 17:54:53.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:54:53.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 17:55:03.218 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:55:03.219 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 17:55:13.225 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:55:13.226 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 17:55:23.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:55:23.240 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 17:55:33.256 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:55:33.257 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 17:55:43.273 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:55:43.273 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 17:55:53.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:55:53.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 17:56:03.292 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:56:03.293 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 17:56:13.299 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:56:13.300 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 3 items
2026-02-04 17:56:23.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:56:23.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 17:56:33.330 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:56:33.331 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 17:56:43.335 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:56:43.336 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 17:56:53.344 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 17:56:53.344 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 17:57:34.991 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 17:57:35.084 +03:00 [DBG] Hosting starting
2026-02-04 17:57:35.091 +03:00 [DBG] Middleware loaded
2026-02-04 17:57:35.092 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 17:57:35.093 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 17:57:35.140 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 17:57:35.196 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 17:57:35.197 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 17:57:35.198 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 17:57:35.198 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 17:57:35.199 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 17:57:35.200 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 17:57:35.229 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 17:57:35.231 +03:00 [INF] Hosting environment: Development
2026-02-04 17:57:35.232 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 17:57:35.233 +03:00 [DBG] Hosting started
2026-02-04 17:57:35.636 +03:00 [DBG] Connection id "0HNJ3VMTNITOM" accepted.
2026-02-04 17:57:35.638 +03:00 [DBG] Connection id "0HNJ3VMTNITOM" started.
2026-02-04 17:57:35.647 +03:00 [DBG] Connection id "0HNJ3VMTNITON" accepted.
2026-02-04 17:57:35.647 +03:00 [DBG] Connection id "0HNJ3VMTNITON" started.
2026-02-04 17:57:35.662 +03:00 [DBG] Connection id "0HNJ3VMTNITON" received FIN.
2026-02-04 17:57:35.662 +03:00 [DBG] Connection id "0HNJ3VMTNITOM" received FIN.
2026-02-04 17:57:35.669 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 17:57:35.669 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 17:57:35.688 +03:00 [DBG] Connection id "0HNJ3VMTNITOM" stopped.
2026-02-04 17:57:35.688 +03:00 [DBG] Connection id "0HNJ3VMTNITON" stopped.
2026-02-04 17:57:35.690 +03:00 [DBG] Connection id "0HNJ3VMTNITOM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 17:57:35.690 +03:00 [DBG] Connection id "0HNJ3VMTNITON" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 17:57:35.797 +03:00 [DBG] Connection id "0HNJ3VMTNITOO" accepted.
2026-02-04 17:57:35.800 +03:00 [DBG] Connection id "0HNJ3VMTNITOO" started.
2026-02-04 17:57:35.825 +03:00 [DBG] Connection 0HNJ3VMTNITOO established using the following protocol: "Tls13"
2026-02-04 17:57:35.859 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 17:57:35.919 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 17:57:35.928 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 17:57:35.928 +03:00 [DBG] Request did not match any endpoints
2026-02-04 17:57:35.960 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 17:57:35.962 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 17:57:35.972 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 17:57:35.972 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 17:57:35.974 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 118.9817ms
2026-02-04 17:57:35.994 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 17:57:35.998 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 17:57:36.000 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 5.8897ms
2026-02-04 17:57:36.012 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 17:57:36.042 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.8568ms
2026-02-04 17:57:36.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 17:57:36.199 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 17:57:36.199 +03:00 [DBG] Request did not match any endpoints
2026-02-04 17:57:36.205 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.737ms
2026-02-04 18:01:49.709 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 18:01:49.795 +03:00 [DBG] Hosting starting
2026-02-04 18:01:49.805 +03:00 [DBG] Middleware loaded
2026-02-04 18:01:49.807 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 18:01:49.809 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 18:01:49.857 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 18:01:49.912 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 18:01:49.912 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 18:01:49.913 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 18:01:49.913 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 18:01:49.914 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 18:01:49.914 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 18:01:49.941 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 18:01:49.942 +03:00 [INF] Hosting environment: Development
2026-02-04 18:01:49.942 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 18:01:49.943 +03:00 [DBG] Hosting started
2026-02-04 18:01:50.358 +03:00 [DBG] Connection id "0HNJ3VP9KPTC9" accepted.
2026-02-04 18:01:50.360 +03:00 [DBG] Connection id "0HNJ3VP9KPTC9" started.
2026-02-04 18:01:50.369 +03:00 [DBG] Connection id "0HNJ3VP9KPTCA" accepted.
2026-02-04 18:01:50.371 +03:00 [DBG] Connection id "0HNJ3VP9KPTCA" started.
2026-02-04 18:01:50.401 +03:00 [DBG] Connection id "0HNJ3VP9KPTCA" received FIN.
2026-02-04 18:01:50.401 +03:00 [DBG] Connection id "0HNJ3VP9KPTC9" received FIN.
2026-02-04 18:01:50.406 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:01:50.406 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:01:50.426 +03:00 [DBG] Connection id "0HNJ3VP9KPTCA" stopped.
2026-02-04 18:01:50.426 +03:00 [DBG] Connection id "0HNJ3VP9KPTC9" stopped.
2026-02-04 18:01:50.429 +03:00 [DBG] Connection id "0HNJ3VP9KPTC9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:01:50.429 +03:00 [DBG] Connection id "0HNJ3VP9KPTCA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:01:50.502 +03:00 [DBG] Connection id "0HNJ3VP9KPTCB" accepted.
2026-02-04 18:01:50.503 +03:00 [DBG] Connection id "0HNJ3VP9KPTCB" started.
2026-02-04 18:01:50.531 +03:00 [DBG] Connection 0HNJ3VP9KPTCB established using the following protocol: "Tls13"
2026-02-04 18:01:50.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 18:01:50.619 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 18:01:50.630 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 18:01:50.631 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:01:50.664 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 18:01:50.666 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 18:01:50.676 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 18:01:50.679 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 18:01:50.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 121.9331ms
2026-02-04 18:01:50.700 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 18:01:50.704 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 18:01:50.705 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 5.523ms
2026-02-04 18:01:50.721 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 18:01:50.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.9748ms
2026-02-04 18:01:50.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 18:01:50.859 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 18:01:50.860 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:01:50.866 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.0667ms
2026-02-04 18:03:00.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Алагамор?date=2026-02-04 - null null
2026-02-04 18:03:00.367 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алагамор'
2026-02-04 18:03:00.369 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алагамор'
2026-02-04 18:03:00.370 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:03:00.373 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:03:00.375 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:03:00.387 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:03:00.389 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:03:00.390 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:03:00.391 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:03:00.392 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:03:00.393 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:03:00.395 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:03:00.452 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:03:00.458 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:03:00.465 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:03:00.467 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:03:00.468 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:03:00.469 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:03:00.470 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:03:00.473 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:03:00.474 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:03:00.475 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:03:00.477 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:03:00.477 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:03:00.478 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:03:00.479 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:03:00.491 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%B0%D0%B3%D0%B0%D0%BC%D0%BE%D1%80&count=1&language=ru
2026-02-04 18:03:00.493 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%B0%D0%B3%D0%B0%D0%BC%D0%BE%D1%80&count=1&language=ru
2026-02-04 18:03:00.778 +03:00 [INF] Received HTTP response headers after 283.9787ms - 200
2026-02-04 18:03:00.780 +03:00 [INF] End processing HTTP request after 288.8289ms - 200
2026-02-04 18:03:00.787 +03:00 [WRN] City not found in Geocoding API: Алагамор
2026-02-04 18:03:00.840 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 444.2633ms
2026-02-04 18:03:00.842 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:03:00.869 +03:00 [ERR] HTTP 404 - City 'Алагамор' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алагамор' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 18:03:00.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Алагамор?date=2026-02-04 - 404 null application/json 522.4178ms
2026-02-04 18:03:16.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Алагамор/week - null null
2026-02-04 18:03:16.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алагамор/week'
2026-02-04 18:03:16.823 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Алагамор/week'
2026-02-04 18:03:16.824 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 18:03:16.824 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:03:16.825 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 18:03:16.828 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:03:16.829 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:03:16.830 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:03:16.830 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:03:16.831 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:03:16.832 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:03:16.833 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:03:16.838 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:03:16.839 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:03:16.840 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:03:16.841 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:03:16.841 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:03:16.842 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:03:16.843 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:03:16.845 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%B0%D0%B3%D0%B0%D0%BC%D0%BE%D1%80&count=1&language=ru
2026-02-04 18:03:16.846 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%B0%D0%B3%D0%B0%D0%BC%D0%BE%D1%80&count=1&language=ru
2026-02-04 18:03:16.907 +03:00 [INF] Received HTTP response headers after 60.8639ms - 200
2026-02-04 18:03:16.908 +03:00 [INF] End processing HTTP request after 63.1415ms - 200
2026-02-04 18:03:16.909 +03:00 [WRN] City not found in Geocoding API: Алагамор
2026-02-04 18:03:16.946 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 112.6275ms
2026-02-04 18:03:16.947 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 18:03:16.965 +03:00 [ERR] HTTP 404 - City 'Алагамор' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алагамор' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherWeekAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 116
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 18:03:16.968 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Алагамор/week - 404 null application/json 148.8327ms
2026-02-04 18:04:44.750 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - null null
2026-02-04 18:04:44.752 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 18:04:44.753 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 18:04:44.754 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:04:44.755 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:04:44.755 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:04:44.756 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:04:44.757 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:04:44.758 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:04:44.759 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:04:44.760 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:04:44.760 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:04:44.761 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:04:44.765 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:04:44.766 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:04:44.766 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:04:44.767 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:04:44.768 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:04:44.768 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:04:44.769 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:04:44.770 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:04:44.771 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:04:44.771 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:04:44.772 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:04:44.773 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:04:44.774 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:04:44.775 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 18:04:44.775 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 18:04:45.011 +03:00 [INF] Received HTTP response headers after 235.0112ms - 200
2026-02-04 18:04:45.012 +03:00 [INF] End processing HTTP request after 237.1979ms - 200
2026-02-04 18:04:45.016 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:04:45.017 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:04:45.291 +03:00 [INF] Received HTTP response headers after 272.871ms - 200
2026-02-04 18:04:45.291 +03:00 [INF] End processing HTTP request after 275.2043ms - 200
2026-02-04 18:04:45.514 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:04:45.531 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:04:45.561 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:04:45.564 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:04:45.569 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:04:45.578 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:04:45.608 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:04:45.613 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 18:04:45.616 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:04:45.626 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:04:45.629 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:04:45.633 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:04:45.635 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 18:04:45.639 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:04:45.650 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:04:45.658 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:04:45.662 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:04:45.665 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 11ms reading results.
2026-02-04 18:04:45.668 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:04:45.670 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:04:45.675 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:04:45.677 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:04:45.679 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:04:45.680 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:04:45.681 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:04:45.682 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:04:45.682 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:04:45.683 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:04:45.688 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 926.3803ms
2026-02-04 18:04:45.688 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:04:45.689 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:04:45.692 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:04:45.693 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:04:45.694 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - 200 null application/json; charset=utf-8 944.1594ms
2026-02-04 18:05:00.329 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - null null
2026-02-04 18:05:00.331 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-04 18:05:00.332 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-04 18:05:00.333 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:05:00.333 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:05:00.334 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:05:00.334 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:05:00.335 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:05:00.336 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:05:00.337 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:05:00.338 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:05:00.339 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:05:00.340 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:05:00.341 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:05:00.342 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:05:00.342 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:05:00.343 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:05:00.344 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:05:00.345 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:05:00.345 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:05:00.346 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:05:00.347 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:05:00.347 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:05:00.348 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:05:00.349 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:05:00.349 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:05:00.350 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 18:05:00.351 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 18:05:00.414 +03:00 [INF] Received HTTP response headers after 62.6396ms - 200
2026-02-04 18:05:00.415 +03:00 [INF] End processing HTTP request after 64.6401ms - 200
2026-02-04 18:05:00.416 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:05:00.416 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:05:00.471 +03:00 [INF] Received HTTP response headers after 54.4194ms - 200
2026-02-04 18:05:00.472 +03:00 [INF] End processing HTTP request after 56.4391ms - 200
2026-02-04 18:05:00.498 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 18:05:00.501 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:05:00.503 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:05:00.504 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:05:00.505 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:05:00.506 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:05:00.507 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:05:00.508 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:05:00.508 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:05:00.509 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:05:00.510 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:05:00.510 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:05:00.511 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:05:00.512 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:05:00.513 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:05:00.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:05:00.515 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:05:00.516 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:05:00.517 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:05:00.518 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:05:00.518 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:05:00.519 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:05:00.520 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:05:00.521 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:05:00.522 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:05:00.523 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:05:00.523 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:05:00.524 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:05:00.524 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:05:00.525 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 185.5318ms
2026-02-04 18:05:00.526 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:05:00.527 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:05:00.527 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:05:00.528 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:05:00.529 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - 200 null application/json; charset=utf-8 200.0248ms
2026-02-04 18:05:10.507 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:05:10.509 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0308ms - processed: 0 items - remaining: 1 items
2026-02-04 18:05:20.517 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:05:20.518 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 18:05:30.528 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:05:30.529 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 18:05:40.540 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:05:40.541 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 18:05:50.545 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:05:50.545 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 18:06:00.550 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:06:00.551 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 18:06:10.555 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:06:10.556 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5489ms - processed: 0 items - remaining: 1 items
2026-02-04 18:06:20.566 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:06:20.567 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:06:30.573 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:06:30.574 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:06:40.586 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:06:40.587 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-04 18:06:50.589 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:06:50.590 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 18:07:00.592 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:07:00.593 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-04 18:07:10.608 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:07:10.609 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-04 18:07:20.614 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:07:20.615 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-04 18:07:30.626 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:07:30.627 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-04 18:07:40.638 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:07:40.639 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 18:07:50.644 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:07:50.645 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 18:08:00.655 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:08:00.656 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 18:08:10.668 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:08:10.669 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 18:08:20.683 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:08:20.684 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0072ms - processed: 0 items - remaining: 1 items
2026-02-04 18:08:30.694 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:08:30.696 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4903ms - processed: 0 items - remaining: 1 items
2026-02-04 18:08:40.704 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:08:40.705 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-04 18:08:50.721 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:08:50.721 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-04 18:09:00.723 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:09:00.724 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-04 18:09:10.735 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:09:10.736 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-04 18:09:20.744 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:09:20.745 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-04 18:09:30.760 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:09:30.761 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-04 18:09:40.766 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:09:40.767 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-04 18:09:50.782 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:09:50.783 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-04 18:10:00.784 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:10:00.786 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-04 18:10:10.800 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:10:10.803 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-04 18:10:11.715 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/top-cities?from=2026-05-04&to=2026-05-04&limit=10 - null null
2026-02-04 18:10:11.720 +03:00 [DBG] 1 candidate(s) found for the request path '/top-cities'
2026-02-04 18:10:11.721 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'top-cities' is valid for the request path '/top-cities'
2026-02-04 18:10:11.721 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:10:11.722 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:10:11.722 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:10:11.726 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:10:11.727 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:10:11.728 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:10:11.729 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 18:10:11.730 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:10:11.731 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 18:10:11.731 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:10:11.732 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:10:11.733 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:10:11.734 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:10:11.734 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:10:11.735 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:10:11.736 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:10:11.736 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:10:11.737 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:10:11.738 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:10:11.739 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:10:11.739 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:10:11.740 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:10:11.740 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:10:11.741 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:10:11.742 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:10:11.742 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:10:11.743 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:10:11.744 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:10:11.745 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:10:11.756 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:10:11.777 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 18:10:11.880 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:10:11.893 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:10:11.893 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:10:11.894 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:10:11.895 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:10:11.896 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:10:11.897 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:10:11.897 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:10:11.898 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:10:11.901 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:10:11.903 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:10:11.903 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 18:10:11.904 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:10:11.905 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:10:11.906 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:10:11.907 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:10:11.907 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:10:11.908 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:10:11.908 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:10:11.909 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:10:11.910 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 178.9574ms
2026-02-04 18:10:11.911 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:10:11.912 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:10:11.912 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:10:11.913 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:10:11.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/top-cities?from=2026-05-04&to=2026-05-04&limit=10 - 200 null application/json; charset=utf-8 199.1181ms
2026-02-04 18:10:20.806 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:10:20.807 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 18:10:22.424 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:10:22.428 +03:00 [DBG] 1 candidate(s) found for the request path '/top-cities'
2026-02-04 18:10:22.429 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'top-cities' is valid for the request path '/top-cities'
2026-02-04 18:10:22.430 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:10:22.430 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:10:22.431 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:10:22.431 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:10:22.432 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:10:22.433 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:10:22.434 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2026-02-04 18:10:22.435 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:10:22.435 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2026-02-04 18:10:22.436 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:10:22.437 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:10:22.438 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:10:22.438 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:10:22.439 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:10:22.440 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:10:22.440 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:10:22.441 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:10:22.442 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:10:22.442 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:10:22.443 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:10:22.444 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:10:22.445 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:10:22.445 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:10:22.446 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:10:22.447 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:10:22.447 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:10:22.448 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:10:22.449 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:10:22.449 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:10:22.450 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:10:22.454 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:10:22.454 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:10:22.455 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:10:22.455 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:10:22.456 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:10:22.457 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:10:22.458 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:10:22.458 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:10:22.459 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:10:22.462 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:10:22.462 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 18:10:22.463 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:10:22.464 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:10:22.464 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:10:22.466 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:10:22.466 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:10:22.466 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:10:22.467 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:10:22.467 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:10:22.468 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 32.1674ms
2026-02-04 18:10:22.469 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:10:22.470 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:10:22.470 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:10:22.471 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:10:22.472 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 48.7692ms
2026-02-04 18:10:30.814 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:10:30.815 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-04 18:10:40.826 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:10:40.827 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 18:13:09.411 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 18:13:09.492 +03:00 [DBG] Hosting starting
2026-02-04 18:13:09.499 +03:00 [DBG] Middleware loaded
2026-02-04 18:13:09.501 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 18:13:09.502 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 18:13:09.543 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 18:13:09.602 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 18:13:09.603 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 18:13:09.604 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 18:13:09.606 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 18:13:09.607 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 18:13:09.607 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 18:13:09.638 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 18:13:09.639 +03:00 [INF] Hosting environment: Development
2026-02-04 18:13:09.640 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 18:13:09.640 +03:00 [DBG] Hosting started
2026-02-04 18:13:10.029 +03:00 [DBG] Connection id "0HNJ3VVK6L166" accepted.
2026-02-04 18:13:10.030 +03:00 [DBG] Connection id "0HNJ3VVK6L166" started.
2026-02-04 18:13:10.037 +03:00 [DBG] Connection id "0HNJ3VVK6L166" received FIN.
2026-02-04 18:13:10.041 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:13:10.059 +03:00 [DBG] Connection id "0HNJ3VVK6L166" stopped.
2026-02-04 18:13:10.062 +03:00 [DBG] Connection id "0HNJ3VVK6L166" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:13:10.193 +03:00 [DBG] Connection id "0HNJ3VVK6L167" accepted.
2026-02-04 18:13:10.195 +03:00 [DBG] Connection id "0HNJ3VVK6L167" started.
2026-02-04 18:13:10.222 +03:00 [DBG] Connection 0HNJ3VVK6L167 established using the following protocol: "Tls13"
2026-02-04 18:13:10.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 18:13:10.311 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 18:13:10.319 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 18:13:10.320 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:13:10.345 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 18:13:10.346 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 18:13:10.356 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 18:13:10.357 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 18:13:10.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 107.0479ms
2026-02-04 18:13:10.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 18:13:10.383 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 18:13:10.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.3143ms
2026-02-04 18:13:10.399 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 18:13:10.426 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.4743ms
2026-02-04 18:13:10.518 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 18:13:10.520 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 18:13:10.521 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:13:10.528 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.1771ms
2026-02-04 18:13:37.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:13:37.312 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 18:13:37.314 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 18:13:37.315 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:13:37.317 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:13:37.319 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:13:37.332 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:13:37.333 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:13:37.334 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:13:37.335 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:13:37.336 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:13:37.337 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:13:37.339 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:13:37.390 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:13:37.396 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:13:37.404 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:13:37.406 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:13:37.407 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:13:37.408 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:13:37.409 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:13:37.410 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:13:37.411 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:13:37.412 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:13:37.413 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:13:37.414 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:13:37.415 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:13:37.416 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:13:37.417 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:13:37.417 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:13:37.418 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:13:37.419 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:13:37.420 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:13:37.421 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:13:37.651 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:13:37.672 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City.ToLower())
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 18:13:37.798 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) t.Key AS City, COUNT(*) AS RequestsCount
        FROM 
        (
            SELECT lower(w.City) AS Key
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ) AS t
        GROUP BY t.Key
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:13:37.815 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:13:37.820 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 18:13:37.822 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:13:37.828 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:13:37.831 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:13:37.834 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:13:37.840 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2026-02-04 18:13:37.845 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:13:37.858 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:13:37.864 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:13:37.868 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 5ms reading results.
2026-02-04 18:13:37.870 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:13:37.872 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-04 18:13:37.874 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:13:37.876 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:13:37.876 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:13:37.877 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:13:37.878 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:13:37.878 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:13:37.884 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 544.1502ms
2026-02-04 18:13:37.885 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:13:37.886 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:13:37.888 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:13:37.890 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:13:37.891 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 587.2149ms
2026-02-04 18:14:42.175 +03:00 [DBG] Connection id "0HNJ3VVK6L167" received FIN.
2026-02-04 18:14:42.178 +03:00 [DBG] Connection id "0HNJ3VVK6L167" is closed. The last processed stream ID was 9.
2026-02-04 18:14:42.178 +03:00 [DBG] Connection id "0HNJ3VVK6L167" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:14:42.184 +03:00 [DBG] The connection queue processing loop for 0HNJ3VVK6L167 completed.
2026-02-04 18:14:42.186 +03:00 [DBG] Connection id "0HNJ3VVK6L167" stopped.
2026-02-04 18:14:59.357 +03:00 [DBG] Connection id "0HNJ3VVK6L168" accepted.
2026-02-04 18:14:59.359 +03:00 [DBG] Connection id "0HNJ3VVK6L168" started.
2026-02-04 18:14:59.366 +03:00 [DBG] Connection 0HNJ3VVK6L168 established using the following protocol: "Tls13"
2026-02-04 18:14:59.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/новосибирск?date=2026-02-04 - null null
2026-02-04 18:14:59.373 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/новосибирск'
2026-02-04 18:14:59.374 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/новосибирск'
2026-02-04 18:14:59.375 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:14:59.376 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:14:59.376 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:14:59.380 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:14:59.381 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:14:59.382 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:14:59.382 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:14:59.383 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:14:59.384 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:14:59.385 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:14:59.388 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:14:59.389 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:14:59.390 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:14:59.391 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:14:59.391 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:14:59.392 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:14:59.395 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:14:59.396 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:14:59.396 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:14:59.397 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:14:59.398 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:14:59.399 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:14:59.400 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:14:59.412 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%BD%D0%BE%D0%B2%D0%BE%D1%81%D0%B8%D0%B1%D0%B8%D1%80%D1%81%D0%BA&count=1&language=ru
2026-02-04 18:14:59.413 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%BD%D0%BE%D0%B2%D0%BE%D1%81%D0%B8%D0%B1%D0%B8%D1%80%D1%81%D0%BA&count=1&language=ru
2026-02-04 18:14:59.689 +03:00 [INF] Received HTTP response headers after 273.7074ms - 200
2026-02-04 18:14:59.690 +03:00 [INF] End processing HTTP request after 278.5555ms - 200
2026-02-04 18:14:59.700 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.03442&longitude=82.94339&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:14:59.700 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.03442&longitude=82.94339&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:14:59.981 +03:00 [INF] Received HTTP response headers after 279.9012ms - 200
2026-02-04 18:14:59.982 +03:00 [INF] End processing HTTP request after 282.5946ms - 200
2026-02-04 18:15:00.015 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:15:00.030 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:00.056 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:00.058 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:00.060 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:00.068 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:15:00.094 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:15:00.094 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:15:00.095 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:00.096 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:00.097 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:15:00.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:15:00.099 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:15:00.099 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:00.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:00.106 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:15:00.110 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:00.110 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 8ms reading results.
2026-02-04 18:15:00.111 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:00.112 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:00.118 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:00.119 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:15:00.121 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:15:00.122 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:15:00.123 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:15:00.123 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:15:00.123 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:15:00.124 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:15:00.128 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 743.1373ms
2026-02-04 18:15:00.129 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:00.130 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:15:00.131 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:00.132 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:00.133 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/новосибирск?date=2026-02-04 - 200 null application/json; charset=utf-8 764.0468ms
2026-02-04 18:15:08.151 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/новосибирсК?date=2026-02-04 - null null
2026-02-04 18:15:08.152 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/новосибирсК'
2026-02-04 18:15:08.153 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/новосибирсК'
2026-02-04 18:15:08.155 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:08.156 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:15:08.157 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:08.157 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:15:08.158 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:15:08.159 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:15:08.160 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:15:08.161 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:15:08.162 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:15:08.163 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:15:08.164 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:15:08.165 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:15:08.166 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:15:08.167 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:15:08.167 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:15:08.168 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:15:08.169 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:15:08.170 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:15:08.171 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:15:08.172 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:08.172 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:08.173 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:15:08.174 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:08.182 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:15:08.183 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:08.184 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:08.185 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:08.186 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:08.187 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:15:08.188 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:15:08.188 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:15:08.189 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:08.190 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:08.190 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:15:08.191 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:15:08.192 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:15:08.192 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:08.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:08.194 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:15:08.196 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:08.197 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:15:08.197 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:08.198 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:08.199 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:08.200 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:15:08.201 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:15:08.202 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:15:08.203 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:15:08.203 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:15:08.203 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:15:08.204 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:15:08.205 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 42.2599ms
2026-02-04 18:15:08.205 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:08.206 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:15:08.207 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:08.207 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:08.208 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/новосибирсК?date=2026-02-04 - 200 null application/json; charset=utf-8 57.5137ms
2026-02-04 18:15:15.472 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/НовосибирсК?date=2026-02-04 - null null
2026-02-04 18:15:15.474 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/НовосибирсК'
2026-02-04 18:15:15.475 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/НовосибирсК'
2026-02-04 18:15:15.476 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:15.477 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:15:15.477 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:15.478 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:15:15.480 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:15:15.480 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:15:15.481 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:15:15.482 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:15:15.483 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:15:15.484 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:15:15.487 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:15:15.488 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:15:15.489 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:15:15.490 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:15:15.490 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:15:15.491 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:15:15.492 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:15:15.492 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:15:15.493 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:15:15.494 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:15.494 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:15.495 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:15:15.496 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:15.497 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:15:15.498 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:15.499 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:15.499 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:15.500 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:15.500 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:15:15.501 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:15:15.502 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:15:15.502 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:15.503 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:15.503 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:15:15.504 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:15:15.505 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:15:15.505 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:15.506 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:15.507 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:15:15.509 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:15.510 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:15:15.510 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:15.511 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:15.512 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:15.513 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:15:15.514 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:15:15.515 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:15:15.515 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:15:15.516 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:15:15.516 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:15:15.517 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:15:15.518 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.5748ms
2026-02-04 18:15:15.518 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:15.519 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:15:15.520 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:15.520 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:15.521 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/НовосибирсК?date=2026-02-04 - 200 null application/json; charset=utf-8 49.2825ms
2026-02-04 18:15:22.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/НОВОСИБИРСК?date=2026-02-04 - null null
2026-02-04 18:15:22.744 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/НОВОСИБИРСК'
2026-02-04 18:15:22.745 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/НОВОСИБИРСК'
2026-02-04 18:15:22.746 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:22.747 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:15:22.748 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:22.748 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:15:22.749 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:15:22.750 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:15:22.751 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:15:22.752 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:15:22.753 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:15:22.754 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:15:22.755 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:15:22.755 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:15:22.756 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:15:22.757 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:15:22.758 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:15:22.758 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:15:22.759 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:15:22.760 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:15:22.760 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:15:22.761 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:22.762 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:22.762 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:15:22.763 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:15:22.764 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:15:22.765 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:22.767 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:22.767 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:22.768 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:15:22.768 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:15:22.769 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:15:22.770 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:15:22.770 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:22.771 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:22.772 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:15:22.772 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:15:22.773 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:15:22.774 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:22.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 11), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:15:22.776 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:15:22.777 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:22.778 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:15:22.779 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:22.779 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:22.780 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:15:22.781 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:15:22.782 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:15:22.784 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:15:22.784 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:15:22.784 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:15:22.785 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:15:22.786 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:15:22.787 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.1247ms
2026-02-04 18:15:22.788 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:15:22.789 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:15:22.790 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:22.790 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:22.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/НОВОСИБИРСК?date=2026-02-04 - 200 null application/json; charset=utf-8 49.0183ms
2026-02-04 18:15:26.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:15:26.601 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 18:15:26.602 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 18:15:26.603 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:15:26.603 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:15:26.604 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:15:26.605 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:15:26.606 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:15:26.606 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:15:26.607 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:15:26.608 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:15:26.609 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:15:26.609 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:15:26.610 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:15:26.611 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:15:26.612 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:15:26.612 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:15:26.613 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:15:26.614 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:15:26.614 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:15:26.615 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:15:26.616 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:15:26.617 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:15:26.617 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:15:26.618 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:15:26.619 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:15:26.619 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:15:26.620 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:15:26.621 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:15:26.622 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:15:26.622 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:15:26.623 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:15:26.624 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:15:26.627 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:15:26.628 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:15:26.629 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:26.629 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:26.630 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:15:26.630 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:15:26.631 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:15:26.632 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:15:26.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:15:26.634 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:26.635 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 18:15:26.636 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:15:26.637 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:26.637 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:15:26.639 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:15:26.639 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:15:26.639 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:15:26.640 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:15:26.640 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:15:26.641 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 31.7697ms
2026-02-04 18:15:26.642 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:15:26.642 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:15:26.643 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:15:26.644 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:15:26.644 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 45.2391ms
2026-02-04 18:15:54.282 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 18:15:54.340 +03:00 [DBG] Hosting starting
2026-02-04 18:15:54.346 +03:00 [DBG] Middleware loaded
2026-02-04 18:15:54.348 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 18:15:54.349 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 18:15:54.390 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 18:15:54.456 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 18:15:54.457 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 18:15:54.458 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 18:15:54.458 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 18:15:54.459 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 18:15:54.460 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 18:15:54.484 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 18:15:54.485 +03:00 [INF] Hosting environment: Development
2026-02-04 18:15:54.485 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 18:15:54.486 +03:00 [DBG] Hosting started
2026-02-04 18:15:54.877 +03:00 [DBG] Connection id "0HNJ4015AOJ06" accepted.
2026-02-04 18:15:54.878 +03:00 [DBG] Connection id "0HNJ4015AOJ06" started.
2026-02-04 18:15:54.886 +03:00 [DBG] Connection id "0HNJ4015AOJ07" accepted.
2026-02-04 18:15:54.887 +03:00 [DBG] Connection id "0HNJ4015AOJ07" started.
2026-02-04 18:15:54.917 +03:00 [DBG] Connection id "0HNJ4015AOJ07" received FIN.
2026-02-04 18:15:54.917 +03:00 [DBG] Connection id "0HNJ4015AOJ06" received FIN.
2026-02-04 18:15:54.923 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:15:54.923 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:15:54.941 +03:00 [DBG] Connection id "0HNJ4015AOJ07" stopped.
2026-02-04 18:15:54.941 +03:00 [DBG] Connection id "0HNJ4015AOJ06" stopped.
2026-02-04 18:15:54.943 +03:00 [DBG] Connection id "0HNJ4015AOJ07" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:15:54.943 +03:00 [DBG] Connection id "0HNJ4015AOJ06" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:15:55.169 +03:00 [DBG] Connection id "0HNJ4015AOJ08" accepted.
2026-02-04 18:15:55.171 +03:00 [DBG] Connection id "0HNJ4015AOJ08" started.
2026-02-04 18:15:55.200 +03:00 [DBG] Connection 0HNJ4015AOJ08 established using the following protocol: "Tls13"
2026-02-04 18:15:55.234 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 18:15:55.300 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 18:15:55.309 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 18:15:55.310 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:15:55.339 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 18:15:55.341 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 18:15:55.350 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 18:15:55.351 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 18:15:55.353 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 122.6372ms
2026-02-04 18:15:55.374 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 18:15:55.380 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 18:15:55.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 8.851ms
2026-02-04 18:15:55.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 18:15:55.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.8841ms
2026-02-04 18:15:55.501 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 18:15:55.504 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 18:15:55.505 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:15:55.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4954ms
2026-02-04 18:16:16.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/КАИР?date=2026-02-04 - null null
2026-02-04 18:16:16.235 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/КАИР'
2026-02-04 18:16:16.237 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/КАИР'
2026-02-04 18:16:16.238 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:16.240 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:16:16.242 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:16.254 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:16:16.256 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:16:16.257 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:16:16.258 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:16:16.258 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:16:16.259 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:16:16.261 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:16:16.314 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:16:16.320 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:16:16.327 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:16:16.329 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:16:16.330 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:16:16.331 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:16:16.332 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:16:16.335 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:16:16.336 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:16:16.337 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:16:16.339 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:16.340 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:16.340 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:16:16.341 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:16.353 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%90%D0%98%D0%A0&count=1&language=ru
2026-02-04 18:16:16.355 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%90%D0%98%D0%A0&count=1&language=ru
2026-02-04 18:16:16.602 +03:00 [INF] Received HTTP response headers after 245.3579ms - 200
2026-02-04 18:16:16.603 +03:00 [INF] End processing HTTP request after 250.2076ms - 200
2026-02-04 18:16:16.613 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=30.06263&longitude=31.24967&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:16:16.613 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=30.06263&longitude=31.24967&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:16:16.880 +03:00 [INF] Received HTTP response headers after 266.2193ms - 200
2026-02-04 18:16:16.881 +03:00 [INF] End processing HTTP request after 268.4508ms - 200
2026-02-04 18:16:17.111 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:16:17.129 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:17.156 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:17.159 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:16:17.161 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:16:17.170 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:16:17.202 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:16:17.207 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 18:16:17.209 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:17.216 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:17.220 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:16:17.224 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:16:17.226 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 18:16:17.230 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:16:17.242 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:16:17.250 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:16:17.255 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:17.258 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-04 18:16:17.261 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:17.263 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:16:17.269 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:17.271 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:16:17.274 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:16:17.276 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:16:17.276 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:16:17.277 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:16:17.277 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:16:17.278 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:16:17.285 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1023.1674ms
2026-02-04 18:16:17.286 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:17.288 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:16:17.290 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:17.292 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:16:17.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/КАИР?date=2026-02-04 - 200 null application/json; charset=utf-8 1066.1186ms
2026-02-04 18:16:23.855 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Каир?date=2026-02-04 - null null
2026-02-04 18:16:23.857 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Каир'
2026-02-04 18:16:23.858 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Каир'
2026-02-04 18:16:23.859 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:23.859 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:16:23.860 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:23.861 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:16:23.862 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:16:23.863 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:16:23.864 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:16:23.864 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:16:23.865 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:16:23.866 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:16:23.871 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:16:23.872 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:16:23.873 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:16:23.874 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:16:23.874 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:16:23.875 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:16:23.876 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:16:23.877 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:16:23.878 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:16:23.878 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:23.879 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:23.880 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:16:23.880 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:23.907 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:16:23.910 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:23.911 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:23.911 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:16:23.912 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:16:23.913 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:16:23.914 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:16:23.914 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:16:23.915 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:23.916 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:23.917 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:16:23.918 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:16:23.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:16:23.920 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:16:23.921 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:16:23.922 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:16:23.923 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:23.924 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:16:23.925 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:23.926 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:16:23.927 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:23.927 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:16:23.928 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:16:23.929 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:16:23.930 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:16:23.930 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:16:23.931 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:16:23.931 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:16:23.932 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 66.1962ms
2026-02-04 18:16:23.933 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:23.934 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:16:23.935 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:23.935 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:16:23.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Каир?date=2026-02-04 - 200 null application/json; charset=utf-8 81.3922ms
2026-02-04 18:16:31.453 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/КаИР?date=2026-02-04 - null null
2026-02-04 18:16:31.455 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/КаИР'
2026-02-04 18:16:31.456 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/КаИР'
2026-02-04 18:16:31.457 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:31.457 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:16:31.458 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:31.458 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:16:31.460 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:16:31.461 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:16:31.461 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:16:31.462 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:16:31.463 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:16:31.464 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:16:31.467 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:16:31.468 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:16:31.469 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:16:31.469 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:16:31.470 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:16:31.471 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:16:31.471 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:16:31.472 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:16:31.473 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:16:31.473 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:31.474 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:31.475 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:16:31.475 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:16:31.483 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:16:31.485 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:31.485 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:31.486 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:16:31.487 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:16:31.487 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:16:31.488 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:16:31.489 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:16:31.489 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:31.490 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:31.490 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:16:31.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:16:31.492 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:16:31.492 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:16:31.493 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:16:31.494 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:16:31.496 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:31.497 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:16:31.497 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:31.498 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:16:31.499 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:16:31.500 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:16:31.501 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:16:31.502 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:16:31.502 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:16:31.503 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:16:31.503 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:16:31.504 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:16:31.504 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 40.7727ms
2026-02-04 18:16:31.505 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:16:31.506 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:16:31.506 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:31.507 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:16:31.508 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/КаИР?date=2026-02-04 - 200 null application/json; charset=utf-8 55.2839ms
2026-02-04 18:16:41.436 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:16:41.437 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 18:16:41.438 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 18:16:41.439 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:16:41.440 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:16:41.440 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:16:41.443 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:16:41.444 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:16:41.445 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:16:41.446 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:16:41.447 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:16:41.448 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:16:41.448 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:16:41.449 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:16:41.451 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:16:41.451 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:16:41.452 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:16:41.453 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:16:41.454 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:16:41.455 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:16:41.455 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:16:41.456 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:16:41.457 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:16:41.458 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:16:41.459 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:16:41.460 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:16:41.460 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:16:41.461 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:16:41.462 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:16:41.462 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:16:41.463 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:16:41.464 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:16:41.470 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:16:41.488 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City.ToLower())
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 18:16:41.597 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) t.Key AS City, COUNT(*) AS RequestsCount
        FROM 
        (
            SELECT lower(w.City) AS Key
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ) AS t
        GROUP BY t.Key
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:16:41.609 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:16:41.610 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:16:41.610 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:41.611 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:41.612 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:16:41.612 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:16:41.613 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:16:41.614 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:16:41.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:16:41.617 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:41.618 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:16:41.619 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:16:41.620 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:16:41.621 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:16:41.622 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:16:41.622 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:16:41.623 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:16:41.623 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:16:41.624 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:16:41.625 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 176.7705ms
2026-02-04 18:16:41.626 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:16:41.627 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:16:41.627 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:16:41.628 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:16:41.629 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 193.0035ms
2026-02-04 18:18:16.357 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 18:18:26.370 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:18:26.373 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0368ms - processed: 0 items - remaining: 1 items
2026-02-04 18:18:36.381 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:18:36.382 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-04 18:18:46.391 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:18:46.392 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:18:56.400 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:18:56.401 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 18:19:06.404 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:19:06.405 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-04 18:19:16.409 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:19:16.410 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:19:26.426 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:19:26.427 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 18:19:36.432 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:19:36.433 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 18:19:46.441 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:19:46.443 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5979ms - processed: 0 items - remaining: 1 items
2026-02-04 18:19:56.445 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:19:56.446 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:20:08.405 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 18:20:08.478 +03:00 [DBG] Hosting starting
2026-02-04 18:20:08.486 +03:00 [DBG] Middleware loaded
2026-02-04 18:20:08.487 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 18:20:08.489 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 18:20:08.533 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 18:20:08.592 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 18:20:08.593 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 18:20:08.596 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 18:20:08.597 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 18:20:08.597 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 18:20:08.598 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 18:20:08.630 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 18:20:08.631 +03:00 [INF] Hosting environment: Development
2026-02-04 18:20:08.632 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 18:20:08.633 +03:00 [DBG] Hosting started
2026-02-04 18:20:09.055 +03:00 [DBG] Connection id "0HNJ403H2PM0M" received FIN.
2026-02-04 18:20:09.058 +03:00 [DBG] Connection id "0HNJ403H2PM0M" accepted.
2026-02-04 18:20:09.060 +03:00 [DBG] Connection id "0HNJ403H2PM0M" started.
2026-02-04 18:20:09.071 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:20:09.089 +03:00 [DBG] Connection id "0HNJ403H2PM0M" stopped.
2026-02-04 18:20:09.092 +03:00 [DBG] Connection id "0HNJ403H2PM0M" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:20:09.177 +03:00 [DBG] Connection id "0HNJ403H2PM0N" accepted.
2026-02-04 18:20:09.179 +03:00 [DBG] Connection id "0HNJ403H2PM0N" started.
2026-02-04 18:20:09.207 +03:00 [DBG] Connection 0HNJ403H2PM0N established using the following protocol: "Tls13"
2026-02-04 18:20:09.237 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 18:20:09.293 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 18:20:09.303 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 18:20:09.304 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:20:09.336 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 18:20:09.338 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 18:20:09.347 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 18:20:09.348 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 18:20:09.350 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 114.8181ms
2026-02-04 18:20:09.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 18:20:09.372 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 18:20:09.374 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 5.8722ms
2026-02-04 18:20:09.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 18:20:09.415 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.2363ms
2026-02-04 18:20:09.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 18:20:09.526 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 18:20:09.527 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:20:09.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4915ms
2026-02-04 18:20:41.665 +03:00 [DBG] Connection id "0HNJ403H2PM0N" received FIN.
2026-02-04 18:20:41.669 +03:00 [DBG] Connection id "0HNJ403H2PM0N" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:20:41.671 +03:00 [DBG] Connection id "0HNJ403H2PM0N" is closed. The last processed stream ID was 7.
2026-02-04 18:20:41.673 +03:00 [DBG] The connection queue processing loop for 0HNJ403H2PM0N completed.
2026-02-04 18:20:41.674 +03:00 [DBG] Connection id "0HNJ403H2PM0N" stopped.
2026-02-04 18:20:47.856 +03:00 [DBG] Connection id "0HNJ403H2PM0O" accepted.
2026-02-04 18:20:47.857 +03:00 [DBG] Connection id "0HNJ403H2PM0O" started.
2026-02-04 18:20:47.866 +03:00 [DBG] Connection 0HNJ403H2PM0O established using the following protocol: "Tls13"
2026-02-04 18:20:47.869 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Уфа?date=2026-02-04 - null null
2026-02-04 18:20:47.873 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Уфа'
2026-02-04 18:20:47.875 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Уфа'
2026-02-04 18:20:47.876 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:20:47.878 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:20:47.880 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:20:47.894 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:20:47.896 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:20:47.897 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:20:47.898 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:20:47.899 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:20:47.900 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:20:47.901 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:20:47.956 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:20:47.961 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:20:47.968 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:20:47.970 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:20:47.971 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:20:47.972 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:20:47.973 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:20:47.976 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:20:47.977 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:20:47.978 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:20:47.979 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:20:47.980 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:20:47.981 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:20:47.982 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:20:47.994 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D1%84%D0%B0&count=1&language=ru
2026-02-04 18:20:47.995 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D1%84%D0%B0&count=1&language=ru
2026-02-04 18:20:48.274 +03:00 [INF] Received HTTP response headers after 277.1078ms - 200
2026-02-04 18:20:48.275 +03:00 [INF] End processing HTTP request after 281.7842ms - 200
2026-02-04 18:20:48.285 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=54.74306&longitude=55.96779&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:20:48.285 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=54.74306&longitude=55.96779&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:20:48.567 +03:00 [INF] Received HTTP response headers after 281.3023ms - 200
2026-02-04 18:20:48.568 +03:00 [INF] End processing HTTP request after 283.584ms - 200
2026-02-04 18:20:48.801 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:20:48.819 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:20:48.847 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:20:48.850 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:20:48.853 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:20:48.861 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:20:48.895 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:20:48.901 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 18:20:48.903 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:20:48.909 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:20:48.913 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:20:48.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:20:48.917 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2026-02-04 18:20:48.921 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:20:48.933 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:20:48.941 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:20:48.946 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:20:48.949 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-04 18:20:48.952 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:20:48.955 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-04 18:20:48.962 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:20:48.963 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:20:48.966 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:20:48.968 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:20:48.968 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:20:48.969 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:20:48.970 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:20:48.971 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:20:48.981 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1078.8905ms
2026-02-04 18:20:48.982 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:20:48.984 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:20:48.986 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:20:48.987 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:20:48.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Уфа?date=2026-02-04 - 200 null application/json; charset=utf-8 1119.823ms
2026-02-04 18:20:56.159 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/УфА?date=2026-02-04 - null null
2026-02-04 18:20:56.161 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/УфА'
2026-02-04 18:20:56.162 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/УфА'
2026-02-04 18:20:56.163 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:20:56.163 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:20:56.164 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:20:56.165 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:20:56.166 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:20:56.166 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:20:56.167 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:20:56.168 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:20:56.169 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:20:56.170 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:20:56.172 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:20:56.173 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:20:56.173 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:20:56.174 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:20:56.175 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:20:56.176 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:20:56.176 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:20:56.177 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:20:56.178 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:20:56.179 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:20:56.179 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:20:56.180 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:20:56.181 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:20:56.208 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:20:56.210 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:20:56.211 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:20:56.212 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:20:56.213 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:20:56.213 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:20:56.214 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:20:56.215 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:20:56.215 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:20:56.216 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:20:56.217 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:20:56.217 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:20:56.218 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:20:56.219 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:20:56.220 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:20:56.222 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:20:56.223 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:20:56.224 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:20:56.225 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:20:56.225 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:20:56.226 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:20:56.227 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:20:56.228 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:20:56.229 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:20:56.230 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:20:56.230 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:20:56.230 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:20:56.231 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:20:56.232 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 61.783ms
2026-02-04 18:20:56.233 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:20:56.233 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:20:56.234 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:20:56.234 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:20:56.235 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/УфА?date=2026-02-04 - 200 null application/json; charset=utf-8 76.7094ms
2026-02-04 18:21:03.825 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/УФА?date=2026-02-04 - null null
2026-02-04 18:21:03.827 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/УФА'
2026-02-04 18:21:03.828 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/УФА'
2026-02-04 18:21:03.829 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:21:03.829 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:21:03.830 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:21:03.830 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:21:03.831 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:21:03.832 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:21:03.833 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:21:03.834 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:21:03.834 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:21:03.835 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:21:03.839 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:21:03.839 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:21:03.840 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:21:03.841 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:21:03.842 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:21:03.843 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:21:03.843 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:21:03.844 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:21:03.845 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:21:03.845 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:21:03.846 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:21:03.847 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:21:03.847 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:21:03.855 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:21:03.856 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:21:03.857 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:21:03.858 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:21:03.859 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:21:03.860 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:21:03.860 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:21:03.861 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:21:03.861 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:21:03.862 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:21:03.863 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:21:03.863 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:21:03.864 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:21:03.865 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:21:03.866 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:21:03.867 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:21:03.868 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:21:03.869 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:21:03.870 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:21:03.871 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:21:03.872 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:21:03.873 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:21:03.874 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:21:03.875 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:21:03.875 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:21:03.876 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:21:03.876 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:21:03.877 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:21:03.877 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 42.2859ms
2026-02-04 18:21:03.878 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:21:03.879 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:21:03.879 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:21:03.880 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:21:03.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/УФА?date=2026-02-04 - 200 null application/json; charset=utf-8 55.9859ms
2026-02-04 18:21:15.193 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:21:15.195 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 18:21:15.196 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 18:21:15.197 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:21:15.198 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:21:15.198 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:21:15.202 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:21:15.203 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:21:15.205 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:21:15.206 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:21:15.207 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:21:15.208 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:21:15.209 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:21:15.210 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:21:15.211 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:21:15.212 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:21:15.213 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:21:15.214 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:21:15.215 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:21:15.216 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:21:15.217 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:21:15.218 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:21:15.219 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:21:15.219 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:21:15.220 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:21:15.221 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:21:15.222 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:21:15.223 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:21:15.224 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:21:15.225 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:21:15.226 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:21:15.227 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:21:15.233 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:21:15.252 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City.ToLower())
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 18:21:15.363 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) t.Key AS City, COUNT(*) AS RequestsCount
        FROM 
        (
            SELECT lower(w.City) AS Key
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ) AS t
        GROUP BY t.Key
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:21:15.376 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:21:15.376 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:21:15.377 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:21:15.378 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:21:15.378 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:21:15.379 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:21:15.380 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:21:15.380 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:21:15.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:21:15.384 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:21:15.384 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 18:21:15.385 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:21:15.386 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:21:15.387 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:21:15.388 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:21:15.388 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:21:15.389 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:21:15.389 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:21:15.390 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:21:15.391 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 182.5606ms
2026-02-04 18:21:15.392 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:21:15.393 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:21:15.393 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:21:15.394 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:21:15.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 202.0577ms
2026-02-04 18:21:43.926 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 18:21:43.994 +03:00 [DBG] Hosting starting
2026-02-04 18:21:44.001 +03:00 [DBG] Middleware loaded
2026-02-04 18:21:44.002 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 18:21:44.004 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 18:21:44.075 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 18:21:44.140 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 18:21:44.141 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 18:21:44.141 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 18:21:44.141 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 18:21:44.142 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 18:21:44.143 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 18:21:44.158 +03:00 [DBG] Connection id "0HNJ404DDOGM9" accepted.
2026-02-04 18:21:44.158 +03:00 [DBG] Connection id "0HNJ404DDOGMA" accepted.
2026-02-04 18:21:44.159 +03:00 [DBG] Connection id "0HNJ404DDOGM9" started.
2026-02-04 18:21:44.159 +03:00 [DBG] Connection id "0HNJ404DDOGMA" started.
2026-02-04 18:21:44.170 +03:00 [DBG] Connection id "0HNJ404DDOGM9" received FIN.
2026-02-04 18:21:44.170 +03:00 [DBG] Connection id "0HNJ404DDOGMA" received FIN.
2026-02-04 18:21:44.179 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 18:21:44.180 +03:00 [INF] Hosting environment: Development
2026-02-04 18:21:44.180 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:21:44.180 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 18:21:44.180 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:21:44.197 +03:00 [DBG] Hosting started
2026-02-04 18:21:44.198 +03:00 [DBG] Connection id "0HNJ404DDOGM9" stopped.
2026-02-04 18:21:44.198 +03:00 [DBG] Connection id "0HNJ404DDOGMA" stopped.
2026-02-04 18:21:44.202 +03:00 [DBG] Connection id "0HNJ404DDOGM9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:21:44.202 +03:00 [DBG] Connection id "0HNJ404DDOGMA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:21:44.503 +03:00 [DBG] Connection id "0HNJ404DDOGMB" accepted.
2026-02-04 18:21:44.505 +03:00 [DBG] Connection id "0HNJ404DDOGMB" started.
2026-02-04 18:21:44.532 +03:00 [DBG] Connection 0HNJ404DDOGMB established using the following protocol: "Tls13"
2026-02-04 18:21:44.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 18:21:44.625 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 18:21:44.634 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 18:21:44.634 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:21:44.664 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 18:21:44.666 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 18:21:44.676 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 18:21:44.677 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 18:21:44.678 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 117.2363ms
2026-02-04 18:21:44.700 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 18:21:44.705 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 18:21:44.707 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.7028ms
2026-02-04 18:21:44.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 18:21:44.752 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.8514ms
2026-02-04 18:21:44.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 18:21:44.845 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 18:21:44.847 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:21:44.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.8023ms
2026-02-04 18:21:59.133 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Пермь?date=2026-02-04 - null null
2026-02-04 18:21:59.138 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Пермь'
2026-02-04 18:21:59.141 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Пермь'
2026-02-04 18:21:59.142 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:21:59.144 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:21:59.146 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:21:59.159 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:21:59.160 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:21:59.161 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:21:59.162 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:21:59.163 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:21:59.164 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:21:59.165 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:21:59.218 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:21:59.224 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:21:59.231 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:21:59.233 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:21:59.234 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:21:59.235 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:21:59.236 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:21:59.239 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:21:59.240 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:21:59.242 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:21:59.244 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:21:59.245 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:21:59.246 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:21:59.247 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:21:59.260 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%80%D0%BC%D1%8C&count=1&language=ru
2026-02-04 18:21:59.261 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%80%D0%BC%D1%8C&count=1&language=ru
2026-02-04 18:21:59.499 +03:00 [INF] Received HTTP response headers after 236.3635ms - 200
2026-02-04 18:21:59.500 +03:00 [INF] End processing HTTP request after 241.051ms - 200
2026-02-04 18:21:59.507 +03:00 [WRN] City not found in Geocoding API: Пермь
2026-02-04 18:21:59.561 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 394.8517ms
2026-02-04 18:21:59.562 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:21:59.589 +03:00 [ERR] HTTP 404 - City 'Пермь' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Пермь' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 18:21:59.601 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Пермь?date=2026-02-04 - 404 null application/json 468.4781ms
2026-02-04 18:22:35.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Пермь?date=2026-02-04 - null null
2026-02-04 18:22:35.046 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Пермь'
2026-02-04 18:22:35.047 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Пермь'
2026-02-04 18:22:35.048 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:22:35.049 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:22:35.049 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:22:35.050 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:22:35.051 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:22:35.052 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:22:35.053 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:22:35.053 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:22:35.054 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:22:35.056 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:22:35.060 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:22:35.061 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:22:35.062 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:22:35.063 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:22:35.063 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:22:35.064 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:22:35.065 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:22:35.065 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:22:35.066 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:22:35.067 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:22:35.067 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:22:35.068 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:22:35.069 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:22:35.070 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%80%D0%BC%D1%8C&count=1&language=ru
2026-02-04 18:22:35.070 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%80%D0%BC%D1%8C&count=1&language=ru
2026-02-04 18:22:35.199 +03:00 [INF] Received HTTP response headers after 127.7403ms - 200
2026-02-04 18:22:35.200 +03:00 [INF] End processing HTTP request after 130.0891ms - 200
2026-02-04 18:22:35.201 +03:00 [WRN] City not found in Geocoding API: Пермь
2026-02-04 18:22:35.238 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 182.6244ms
2026-02-04 18:22:35.239 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:22:35.258 +03:00 [ERR] HTTP 404 - City 'Пермь' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Пермь' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 18:22:35.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Пермь?date=2026-02-04 - 404 null application/json 222.5696ms
2026-02-04 18:22:40.392 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - null null
2026-02-04 18:22:40.393 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 18:22:40.394 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 18:22:40.395 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:22:40.396 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:22:40.396 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:22:40.397 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:22:40.398 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:22:40.399 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:22:40.399 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:22:40.400 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:22:40.401 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:22:40.402 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:22:40.405 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:22:40.406 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:22:40.407 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:22:40.408 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:22:40.408 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:22:40.409 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:22:40.410 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:22:40.410 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:22:40.411 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:22:40.412 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:22:40.413 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:22:40.413 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:22:40.414 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:22:40.415 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 18:22:40.415 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 18:22:40.475 +03:00 [INF] Received HTTP response headers after 59.069ms - 200
2026-02-04 18:22:40.476 +03:00 [INF] End processing HTTP request after 61.2275ms - 200
2026-02-04 18:22:40.481 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:22:40.481 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:22:40.705 +03:00 [INF] Received HTTP response headers after 223.0462ms - 200
2026-02-04 18:22:40.706 +03:00 [INF] End processing HTTP request after 225.2757ms - 200
2026-02-04 18:22:40.952 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:22:40.968 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:22:40.994 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:22:40.996 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:22:41.002 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:22:41.010 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:22:41.038 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:22:41.043 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 18:22:41.045 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:22:41.051 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:22:41.054 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:22:41.057 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:22:41.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 18:22:41.066 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:22:41.077 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:22:41.085 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:22:41.089 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:22:41.092 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 11ms reading results.
2026-02-04 18:22:41.094 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:22:41.096 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:22:41.101 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:22:41.103 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:22:41.104 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:22:41.106 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:22:41.107 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:22:41.107 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:22:41.108 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:22:41.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:22:41.113 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 711.5748ms
2026-02-04 18:22:41.114 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:22:41.115 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:22:41.117 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:22:41.118 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:22:41.119 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - 200 null application/json; charset=utf-8 727.634ms
2026-02-04 18:23:27.476 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Южа?date=2026-02-04 - null null
2026-02-04 18:23:27.481 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Южа'
2026-02-04 18:23:27.481 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Южа'
2026-02-04 18:23:27.482 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:27.483 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:23:27.483 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:27.484 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:23:27.484 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:23:27.485 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:23:27.486 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:23:27.487 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:23:27.488 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:23:27.488 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:23:27.489 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:23:27.490 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:23:27.491 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:23:27.492 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:23:27.493 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:23:27.493 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:23:27.494 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:23:27.495 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:23:27.495 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:23:27.496 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:27.497 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:27.497 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:23:27.498 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:27.499 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%AE%D0%B6%D0%B0&count=1&language=ru
2026-02-04 18:23:27.500 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%AE%D0%B6%D0%B0&count=1&language=ru
2026-02-04 18:23:27.560 +03:00 [INF] Received HTTP response headers after 59.5912ms - 200
2026-02-04 18:23:27.560 +03:00 [INF] End processing HTTP request after 61.5087ms - 200
2026-02-04 18:23:27.561 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.58374&longitude=42.01177&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:23:27.562 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.58374&longitude=42.01177&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:23:27.795 +03:00 [INF] Received HTTP response headers after 232.2909ms - 200
2026-02-04 18:23:27.796 +03:00 [INF] End processing HTTP request after 234.31ms - 200
2026-02-04 18:23:27.822 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:23:27.824 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:27.825 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:27.826 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:23:27.827 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:23:27.827 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:23:27.828 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:23:27.829 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:23:27.829 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:27.830 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:27.831 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:23:27.831 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:23:27.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:23:27.833 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:23:27.834 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:23:27.835 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:23:27.836 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:27.837 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:23:27.838 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:27.839 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:27.840 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:27.841 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:23:27.841 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:23:27.843 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:23:27.843 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:23:27.843 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:23:27.844 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:23:27.845 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:23:27.845 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 356.8872ms
2026-02-04 18:23:27.846 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:27.847 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:23:27.847 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:27.848 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:27.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Южа?date=2026-02-04 - 200 null application/json; charset=utf-8 373.2069ms
2026-02-04 18:23:36.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/ЮЖА?date=2026-02-04 - null null
2026-02-04 18:23:36.586 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ЮЖА'
2026-02-04 18:23:36.587 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ЮЖА'
2026-02-04 18:23:36.588 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:36.589 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:23:36.589 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:36.590 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:23:36.591 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:23:36.592 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:23:36.593 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:23:36.594 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:23:36.594 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:23:36.595 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:23:36.596 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:23:36.597 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:23:36.598 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:23:36.598 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:23:36.599 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:23:36.600 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:23:36.601 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:23:36.601 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:23:36.602 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:23:36.603 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:36.603 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:36.604 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:23:36.605 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:36.613 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:23:36.615 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:36.616 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:36.616 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:23:36.617 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:23:36.618 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:23:36.619 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:23:36.619 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:23:36.620 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:36.621 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:36.621 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:23:36.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:23:36.623 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:23:36.623 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:23:36.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:23:36.626 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:23:36.627 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:36.628 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:23:36.629 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:36.629 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:36.630 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:36.631 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:23:36.632 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:23:36.633 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:23:36.634 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:23:36.634 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:23:36.634 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:23:36.635 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:23:36.636 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 40.6425ms
2026-02-04 18:23:36.637 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:36.637 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:23:36.638 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:36.639 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:36.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/ЮЖА?date=2026-02-04 - 200 null application/json; charset=utf-8 55.7328ms
2026-02-04 18:23:41.248 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/ЮжА?date=2026-02-04 - null null
2026-02-04 18:23:41.251 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ЮжА'
2026-02-04 18:23:41.252 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ЮжА'
2026-02-04 18:23:41.253 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:41.254 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:23:41.254 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:41.255 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:23:41.256 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:23:41.257 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:23:41.258 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:23:41.260 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:23:41.261 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:23:41.262 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:23:41.263 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:23:41.264 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:23:41.265 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:23:41.266 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:23:41.266 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:23:41.267 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:23:41.268 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:23:41.268 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:23:41.269 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:23:41.270 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:41.270 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:41.271 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:23:41.272 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:23:41.273 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:23:41.274 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:41.275 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:41.276 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:23:41.277 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:23:41.277 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:23:41.278 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:23:41.278 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:23:41.279 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:41.280 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:41.280 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:23:41.281 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:23:41.282 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:23:41.283 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:23:41.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:23:41.285 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:23:41.286 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:41.287 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:23:41.288 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:41.288 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:41.289 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:23:41.290 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:23:41.291 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:23:41.292 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:23:41.293 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:23:41.293 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:23:41.293 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:23:41.294 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:23:41.295 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.0338ms
2026-02-04 18:23:41.295 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:23:41.296 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:23:41.297 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:41.297 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:41.298 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/ЮжА?date=2026-02-04 - 200 null application/json; charset=utf-8 50.0874ms
2026-02-04 18:23:50.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:23:50.041 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 18:23:50.041 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 18:23:50.042 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:23:50.043 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:23:50.043 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:23:50.047 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:23:50.048 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:23:50.049 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:23:50.050 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:23:50.050 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:23:50.051 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:23:50.052 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:23:50.053 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:23:50.054 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:23:50.054 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:23:50.055 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:23:50.056 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:23:50.057 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:23:50.058 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:23:50.058 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:23:50.059 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:23:50.060 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:23:50.060 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:23:50.061 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:23:50.062 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:23:50.063 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:23:50.063 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:23:50.064 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:23:50.065 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:23:50.065 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:23:50.066 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:23:50.072 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:23:50.090 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City.ToLower())
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 18:23:50.203 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) t.Key AS City, COUNT(*) AS RequestsCount
        FROM 
        (
            SELECT lower(w.City) AS Key
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ) AS t
        GROUP BY t.Key
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:23:50.215 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:23:50.216 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:23:50.216 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:50.217 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:50.218 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:23:50.218 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:23:50.219 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:23:50.220 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:23:50.221 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Key" AS "City", COUNT(*) AS "RequestsCount"
FROM (
    SELECT lower("w"."City") AS "Key"
    FROM "WeatherRequests" AS "w"
    WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
) AS "t"
GROUP BY "t"."Key"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:23:50.223 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:50.224 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:23:50.225 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:23:50.226 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:50.226 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:23:50.228 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:23:50.228 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:23:50.228 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:23:50.229 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:23:50.230 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:23:50.231 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 179.003ms
2026-02-04 18:23:50.232 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:23:50.232 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:23:50.233 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:23:50.234 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:23:50.235 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 195.3417ms
2026-02-04 18:23:59.276 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 18:24:09.281 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:24:09.283 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0343ms - processed: 0 items - remaining: 1 items
2026-02-04 18:24:19.293 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:24:19.294 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-04 18:24:29.299 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:24:29.300 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:24:39.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:24:39.303 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-04 18:24:49.315 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:24:49.317 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5982ms - processed: 0 items - remaining: 1 items
2026-02-04 18:24:59.335 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:24:59.336 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 18:25:09.341 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:25:09.342 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 18:25:19.353 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:25:19.354 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 18:25:54.030 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:25:54.215 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:25:54.217 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:25:54.221 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-04 18:25:54.223 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:25:54.225 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:25:54.227 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:26:10.898 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:26:11.099 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:26:11.101 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:11.106 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-04 18:26:11.108 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:11.109 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:26:11.111 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:11.115 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:11.117 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:11.118 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:11.119 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:11.119 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:11.120 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:11.121 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:11.123 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:26:11.123 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:11.123 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:20.640 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:26:20.843 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:26:20.846 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:20.851 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-04 18:26:20.853 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:26:20.855 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:20.857 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:26:23.435 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:26:23.638 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:26:23.640 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:23.644 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-04 18:26:23.646 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:23.647 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:26:23.649 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:23.653 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:23.655 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:23.657 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:23.657 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:23.658 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:23.658 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:23.659 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:23.661 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:26:23.662 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:23.662 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.630 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:26:41.849 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:26:41.858 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:41.863 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-04 18:26:41.865 +03:00 [DBG] Migrating using database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.866 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:41.867 +03:00 [DBG] Created DbConnection. (1ms).
2026-02-04 18:26:41.867 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.871 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.872 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.874 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.874 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:41.874 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:26:41.874 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.874 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.874 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.874 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.874 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.878 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.881 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-04 18:26:41.884 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2026-02-04 18:26:41.884 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2026-02-04 18:26:41.887 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-04 18:26:41.897 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-04 18:26:41.897 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.898 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.932 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-04 18:26:41.932 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-04 18:26:41.932 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-04 18:26:41.932 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.932 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.932 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-04 18:26:41.935 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-04 18:26:41.935 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.935 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.935 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:26:41.935 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:26:41.935 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.936 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.936 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.936 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.937 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-04 18:26:41.937 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-04 18:26:41.937 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-04 18:26:41.937 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.937 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.938 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-04 18:26:41.939 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-04 18:26:41.939 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.939 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:41.940 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:41.940 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:41.940 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:26:41.940 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:26:41.940 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:26:41.940 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-04 18:26:41.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-04 18:26:41.941 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:42.414 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 472ms reading results.
2026-02-04 18:26:42.414 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:42.414 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:42.418 +03:00 [INF] Applying migration '20260202104928_InitialStatistic'.
2026-02-04 18:26:42.424 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:42.424 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:42.425 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-04 18:26:42.426 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2026-02-04 18:26:42.427 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-04 18:26:42.427 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-04 18:26:42.427 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-04 18:26:42.427 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-04 18:26:42.427 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-04 18:26:42.427 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-04 18:26:42.427 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-04 18:26:42.428 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-04 18:26:42.428 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-04 18:26:42.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-04 18:26:42.428 +03:00 [DBG] Committing transaction.
2026-02-04 18:26:42.429 +03:00 [DBG] Committed transaction.
2026-02-04 18:26:42.430 +03:00 [DBG] Disposing transaction.
2026-02-04 18:26:42.430 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:26:42.430 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:26:42.431 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:26:42.431 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:26:42.431 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:27:19.337 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 18:27:19.409 +03:00 [DBG] Hosting starting
2026-02-04 18:27:19.421 +03:00 [DBG] Middleware loaded
2026-02-04 18:27:19.423 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 18:27:19.425 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 18:27:19.477 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 18:27:19.539 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 18:27:19.540 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 18:27:19.541 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 18:27:19.541 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 18:27:19.542 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 18:27:19.542 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 18:27:19.557 +03:00 [DBG] Connection id "0HNJ407HCCETO" accepted.
2026-02-04 18:27:19.559 +03:00 [DBG] Connection id "0HNJ407HCCETO" started.
2026-02-04 18:27:19.569 +03:00 [DBG] Connection id "0HNJ407HCCETP" accepted.
2026-02-04 18:27:19.570 +03:00 [DBG] Connection id "0HNJ407HCCETP" started.
2026-02-04 18:27:19.572 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 18:27:19.573 +03:00 [INF] Hosting environment: Development
2026-02-04 18:27:19.574 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 18:27:19.574 +03:00 [DBG] Hosting started
2026-02-04 18:27:19.599 +03:00 [DBG] Connection id "0HNJ407HCCETO" received FIN.
2026-02-04 18:27:19.599 +03:00 [DBG] Connection id "0HNJ407HCCETP" received FIN.
2026-02-04 18:27:19.607 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:27:19.607 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 18:27:19.627 +03:00 [DBG] Connection id "0HNJ407HCCETO" stopped.
2026-02-04 18:27:19.627 +03:00 [DBG] Connection id "0HNJ407HCCETP" stopped.
2026-02-04 18:27:19.630 +03:00 [DBG] Connection id "0HNJ407HCCETO" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:27:19.630 +03:00 [DBG] Connection id "0HNJ407HCCETP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 18:27:19.815 +03:00 [DBG] Connection id "0HNJ407HCCETQ" accepted.
2026-02-04 18:27:19.821 +03:00 [DBG] Connection id "0HNJ407HCCETQ" started.
2026-02-04 18:27:19.851 +03:00 [DBG] Connection 0HNJ407HCCETQ established using the following protocol: "Tls13"
2026-02-04 18:27:19.957 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 18:27:20.023 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 18:27:20.034 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 18:27:20.036 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:27:20.073 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 18:27:20.074 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 18:27:20.085 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 18:27:20.086 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 18:27:20.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 133.7355ms
2026-02-04 18:27:20.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 18:27:20.128 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 18:27:20.129 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 7.3345ms
2026-02-04 18:27:20.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 18:27:20.176 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.7754ms
2026-02-04 18:27:20.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 18:27:20.292 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 18:27:20.294 +03:00 [DBG] Request did not match any endpoints
2026-02-04 18:27:20.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4839ms
2026-02-04 18:27:40.393 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Уфа?date=2026-02-04 - null null
2026-02-04 18:27:40.399 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Уфа'
2026-02-04 18:27:40.402 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Уфа'
2026-02-04 18:27:40.403 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:40.405 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:27:40.407 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:40.420 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:27:40.422 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:27:40.423 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:27:40.423 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:27:40.425 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:27:40.426 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:27:40.427 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:27:40.481 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 18:27:40.487 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:27:40.494 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:27:40.495 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:27:40.497 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:27:40.497 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:27:40.498 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:27:40.501 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:27:40.503 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:27:40.504 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:27:40.505 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:40.506 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:40.507 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:27:40.508 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:40.520 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D1%84%D0%B0&count=1&language=ru
2026-02-04 18:27:40.521 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D1%84%D0%B0&count=1&language=ru
2026-02-04 18:27:40.809 +03:00 [INF] Received HTTP response headers after 286.1689ms - 200
2026-02-04 18:27:40.810 +03:00 [INF] End processing HTTP request after 291.1185ms - 200
2026-02-04 18:27:40.821 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=54.74306&longitude=55.96779&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:27:40.822 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=54.74306&longitude=55.96779&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 18:27:41.087 +03:00 [INF] Received HTTP response headers after 264.8722ms - 200
2026-02-04 18:27:41.088 +03:00 [INF] End processing HTTP request after 267.379ms - 200
2026-02-04 18:27:41.329 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:27:41.346 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:41.375 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:41.378 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:27:41.380 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:27:41.389 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:27:41.421 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:27:41.426 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 18:27:41.429 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:27:41.437 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:41.441 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:27:41.446 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-04 18:27:41.449 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-04 18:27:41.455 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:27:41.470 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:27:41.478 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:27:41.484 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:41.487 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-04 18:27:41.490 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:41.492 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-04 18:27:41.497 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:41.499 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:27:41.502 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:27:41.504 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:27:41.504 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:27:41.504 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:27:41.505 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:27:41.506 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:27:41.512 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1084.66ms
2026-02-04 18:27:41.513 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:41.515 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:27:41.518 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:27:41.519 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 18:27:41.520 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Уфа?date=2026-02-04 - 200 null application/json; charset=utf-8 1129.9831ms
2026-02-04 18:27:47.725 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/УФа?date=2026-02-04 - null null
2026-02-04 18:27:47.727 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/УФа'
2026-02-04 18:27:47.728 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/УФа'
2026-02-04 18:27:47.729 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:47.730 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:27:47.730 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:47.731 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:27:47.732 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:27:47.733 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:27:47.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:27:47.735 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:27:47.736 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:27:47.737 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:27:47.741 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:27:47.743 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:27:47.744 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:27:47.745 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:27:47.745 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:27:47.746 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:27:47.747 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:27:47.748 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:27:47.748 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:27:47.749 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:47.750 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:47.751 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:27:47.751 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:47.778 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:27:47.780 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:47.781 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:47.782 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:27:47.783 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:27:47.783 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:27:47.784 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:27:47.785 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:27:47.785 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:27:47.786 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:47.787 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:27:47.787 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:27:47.788 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:27:47.789 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:27:47.790 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:27:47.792 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:27:47.793 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:47.794 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:27:47.795 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:47.796 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:27:47.797 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:47.798 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:27:47.800 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:27:47.801 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:27:47.801 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:27:47.802 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:27:47.802 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:27:47.803 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:27:47.804 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 67.3003ms
2026-02-04 18:27:47.805 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:47.805 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:27:47.806 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:27:47.807 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:27:47.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/УФа?date=2026-02-04 - 200 null application/json; charset=utf-8 83.1204ms
2026-02-04 18:27:55.125 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/уфА?date=2026-02-04 - null null
2026-02-04 18:27:55.127 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/уфА'
2026-02-04 18:27:55.128 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/уфА'
2026-02-04 18:27:55.129 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:55.129 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:27:55.130 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:55.131 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 18:27:55.132 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:27:55.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:27:55.133 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:27:55.134 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:27:55.135 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:27:55.135 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:27:55.139 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 18:27:55.140 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 18:27:55.141 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 18:27:55.141 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:27:55.142 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 18:27:55.143 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 18:27:55.144 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 18:27:55.145 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:27:55.145 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 18:27:55.146 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:55.147 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:55.147 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 18:27:55.148 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 18:27:55.155 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:27:55.156 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:55.157 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:55.157 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 18:27:55.158 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 18:27:55.159 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 18:27:55.160 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:27:55.160 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:27:55.161 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:27:55.162 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:55.162 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:27:55.163 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:27:55.163 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:27:55.164 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:27:55.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 18:27:55.166 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 18:27:55.167 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:55.168 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 18:27:55.169 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:27:55.170 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:27:55.171 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:27:55.172 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 18:27:55.173 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:27:55.174 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:27:55.174 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:27:55.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:27:55.175 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:27:55.176 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 18:27:55.177 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 41.1866ms
2026-02-04 18:27:55.177 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 18:27:55.178 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:27:55.178 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:27:55.179 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:27:55.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/уфА?date=2026-02-04 - 200 null application/json; charset=utf-8 55.6035ms
2026-02-04 18:28:01.363 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 18:28:01.365 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 18:28:01.365 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 18:28:01.366 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:28:01.367 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:28:01.367 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:28:01.371 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:28:01.372 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:28:01.373 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:28:01.373 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:28:01.374 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:28:01.375 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:28:01.376 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:28:01.377 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:28:01.378 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:28:01.379 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:28:01.379 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:28:01.380 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:28:01.381 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:28:01.382 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:28:01.382 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:28:01.383 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:28:01.384 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:28:01.385 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:28:01.385 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:28:01.386 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:28:01.387 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:28:01.387 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 18:28:01.388 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:28:01.389 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 18:28:01.390 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 18:28:01.390 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 18:28:01.396 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:28:01.414 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 18:28:01.518 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:28:01.531 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:28:01.531 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:28:01.532 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:28:01.533 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:01.533 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:28:01.534 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:28:01.535 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:28:01.535 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:28:01.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 18:28:01.539 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:01.539 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 18:28:01.540 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:01.541 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:28:01.542 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:28:01.543 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:28:01.544 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:28:01.544 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:28:01.545 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:28:01.545 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 18:28:01.547 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 170.453ms
2026-02-04 18:28:01.547 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 18:28:01.548 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:28:01.549 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:28:01.549 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:28:01.550 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 187.4219ms
2026-02-04 18:28:21.592 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-04 18:28:21.597 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-04 18:28:21.598 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-04 18:28:21.599 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 18:28:21.600 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 18:28:21.600 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 18:28:21.603 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 18:28:21.604 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 18:28:21.604 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 18:28:21.605 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 18:28:21.606 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 18:28:21.607 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 18:28:21.608 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:28:21.609 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 18:28:21.610 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:28:21.610 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 18:28:21.611 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:28:21.612 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:28:21.612 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 18:28:21.613 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 18:28:21.614 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:28:21.614 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 18:28:21.615 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:28:21.616 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:28:21.617 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 18:28:21.617 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 18:28:21.618 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 18:28:21.618 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 18:28:21.619 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 18:28:21.620 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 18:28:21.621 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 18:28:21.621 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 18:28:21.622 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 18:28:21.623 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 18:28:21.624 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 18:28:21.624 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 18:28:21.625 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 18:28:21.626 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 18:28:21.628 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 18:28:21.630 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-04 18:28:21.634 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-04 18:28:21.637 +03:00 [DBG] Creating DbConnection.
2026-02-04 18:28:21.637 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 18:28:21.638 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:28:21.639 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:21.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:28:21.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:28:21.641 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:28:21.641 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 18:28:21.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 18:28:21.644 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:21.645 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 18:28:21.645 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:21.646 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:28:21.647 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-04 18:28:21.663 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 18:28:21.664 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:28:21.665 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:21.665 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 18:28:21.666 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 18:28:21.667 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 18:28:21.667 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 18:28:21.668 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 18:28:21.671 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:28:21.672 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:28:21.673 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 18:28:21.674 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:21.674 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-04 18:28:21.675 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 18:28:21.676 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:28:21.677 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 18:28:21.678 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 18:28:21.679 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 18:28:21.679 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 18:28:21.680 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 18:28:21.680 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 18:28:21.688 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 80.0365ms
2026-02-04 18:28:21.689 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 18:28:21.692 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 18:28:21.693 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 18:28:21.694 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 18:28:21.694 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 102.0311ms
2026-02-04 18:29:40.527 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 18:29:50.539 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 18:29:50.541 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0359ms - processed: 0 items - remaining: 1 items
2026-02-04 19:21:03.274 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 19:21:03.409 +03:00 [DBG] Hosting starting
2026-02-04 19:21:03.416 +03:00 [DBG] Middleware loaded
2026-02-04 19:21:03.417 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 19:21:03.419 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 19:21:03.464 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 19:21:03.518 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 19:21:03.519 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 19:21:03.520 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 19:21:03.521 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 19:21:03.521 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 19:21:03.522 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 19:21:03.546 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 19:21:03.547 +03:00 [INF] Hosting environment: Development
2026-02-04 19:21:03.547 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 19:21:03.548 +03:00 [DBG] Hosting started
2026-02-04 19:21:03.565 +03:00 [DBG] Connection id "0HNJ415I6TJEQ" accepted.
2026-02-04 19:21:03.566 +03:00 [DBG] Connection id "0HNJ415I6TJEQ" started.
2026-02-04 19:21:03.578 +03:00 [DBG] Connection id "0HNJ415I6TJER" accepted.
2026-02-04 19:21:03.578 +03:00 [DBG] Connection id "0HNJ415I6TJER" started.
2026-02-04 19:21:03.609 +03:00 [DBG] Connection id "0HNJ415I6TJEQ" received FIN.
2026-02-04 19:21:03.609 +03:00 [DBG] Connection id "0HNJ415I6TJER" received FIN.
2026-02-04 19:21:03.614 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 19:21:03.614 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 19:21:03.634 +03:00 [DBG] Connection id "0HNJ415I6TJEQ" stopped.
2026-02-04 19:21:03.634 +03:00 [DBG] Connection id "0HNJ415I6TJER" stopped.
2026-02-04 19:21:03.636 +03:00 [DBG] Connection id "0HNJ415I6TJEQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 19:21:03.636 +03:00 [DBG] Connection id "0HNJ415I6TJER" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 19:21:03.996 +03:00 [DBG] Connection id "0HNJ415I6TJES" accepted.
2026-02-04 19:21:04.000 +03:00 [DBG] Connection id "0HNJ415I6TJES" started.
2026-02-04 19:21:04.046 +03:00 [DBG] Connection 0HNJ415I6TJES established using the following protocol: "Tls13"
2026-02-04 19:21:04.092 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 19:21:04.178 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 19:21:04.189 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 19:21:04.190 +03:00 [DBG] Request did not match any endpoints
2026-02-04 19:21:04.226 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 19:21:04.227 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 19:21:04.237 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 19:21:04.238 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 19:21:04.240 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 152.9659ms
2026-02-04 19:21:04.262 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 19:21:04.267 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 19:21:04.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.6109ms
2026-02-04 19:21:04.282 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 19:21:04.406 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 124.537ms
2026-02-04 19:21:04.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 19:21:04.435 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 19:21:04.436 +03:00 [DBG] Request did not match any endpoints
2026-02-04 19:21:04.442 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.8435ms
2026-02-04 19:21:23.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург?date=2026-02-04 - null null
2026-02-04 19:21:23.122 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Санкт-Петербург'
2026-02-04 19:21:23.124 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Санкт-Петербург'
2026-02-04 19:21:23.125 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:23.127 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:21:23.129 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:23.142 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 19:21:23.143 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:21:23.144 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:21:23.145 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:21:23.146 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:21:23.147 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:21:23.148 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:21:23.202 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 19:21:23.208 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:21:23.215 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 19:21:23.217 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 19:21:23.218 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:21:23.219 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:21:23.220 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 19:21:23.224 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 19:21:23.225 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:21:23.226 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 19:21:23.228 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:23.229 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:23.229 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:21:23.230 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:23.244 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3&count=1&language=ru
2026-02-04 19:21:23.245 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3&count=1&language=ru
2026-02-04 19:21:23.534 +03:00 [INF] Received HTTP response headers after 286.6766ms - 200
2026-02-04 19:21:23.536 +03:00 [INF] End processing HTTP request after 292.35ms - 200
2026-02-04 19:21:23.548 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 19:21:23.549 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 19:21:23.811 +03:00 [INF] Received HTTP response headers after 261.7934ms - 200
2026-02-04 19:21:23.812 +03:00 [INF] End processing HTTP request after 264.6045ms - 200
2026-02-04 19:21:24.035 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:21:24.052 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:24.079 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:24.082 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 19:21:24.084 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 19:21:24.092 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 19:21:24.124 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:21:24.129 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 19:21:24.131 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:24.138 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:24.142 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:21:24.145 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:21:24.147 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 19:21:24.151 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:21:24.162 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:21:24.171 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 19:21:24.177 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:24.181 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 15ms reading results.
2026-02-04 19:21:24.184 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:24.186 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-04 19:21:24.193 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:24.194 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 19:21:24.197 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:21:24.199 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:21:24.199 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:21:24.200 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:21:24.201 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:21:24.202 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 19:21:24.209 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1059.7534ms
2026-02-04 19:21:24.210 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:24.212 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:21:24.214 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:24.216 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:21:24.217 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург?date=2026-02-04 - 200 null application/json; charset=utf-8 1101.6161ms
2026-02-04 19:21:36.260 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/СанкТ-ПетербУрг?date=2026-02-04 - null null
2026-02-04 19:21:36.262 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/СанкТ-ПетербУрг'
2026-02-04 19:21:36.263 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/СанкТ-ПетербУрг'
2026-02-04 19:21:36.265 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:36.266 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:21:36.266 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:36.270 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 19:21:36.272 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:21:36.273 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:21:36.274 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:21:36.275 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:21:36.277 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:21:36.278 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:21:36.280 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:21:36.281 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 19:21:36.282 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 19:21:36.284 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:21:36.285 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:21:36.286 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 19:21:36.287 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 19:21:36.288 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:21:36.289 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 19:21:36.290 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:36.291 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:36.292 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:21:36.292 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:36.320 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:21:36.322 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:36.323 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:36.324 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 19:21:36.325 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 19:21:36.326 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 19:21:36.327 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:21:36.328 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 19:21:36.328 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:36.329 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:36.330 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:21:36.331 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 19:21:36.331 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:21:36.332 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:21:36.334 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:21:36.335 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 19:21:36.337 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:36.338 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 19:21:36.339 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:36.340 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 19:21:36.341 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:36.342 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 19:21:36.343 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:21:36.344 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:21:36.345 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:21:36.345 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:21:36.346 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:21:36.347 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 19:21:36.348 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 70.0749ms
2026-02-04 19:21:36.349 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:36.349 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:21:36.350 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:36.351 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:21:36.352 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/СанкТ-ПетербУрг?date=2026-02-04 - 200 null application/json; charset=utf-8 92.9281ms
2026-02-04 19:21:48.510 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/СанкТ-ПЕТЕрбУрГ?date=2026-02-04 - null null
2026-02-04 19:21:48.513 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/СанкТ-ПЕТЕрбУрГ'
2026-02-04 19:21:48.514 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/СанкТ-ПЕТЕрбУрГ'
2026-02-04 19:21:48.516 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:48.517 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:21:48.518 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:48.519 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 19:21:48.520 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:21:48.522 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:21:48.523 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:21:48.524 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:21:48.525 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:21:48.527 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:21:48.531 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:21:48.532 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 19:21:48.533 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 19:21:48.534 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:21:48.535 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:21:48.537 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 19:21:48.538 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 19:21:48.539 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:21:48.540 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 19:21:48.541 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:48.542 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:48.543 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:21:48.544 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:21:48.553 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:21:48.554 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:48.556 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:48.557 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 19:21:48.558 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 19:21:48.559 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 19:21:48.560 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:21:48.561 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 19:21:48.561 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:48.562 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:48.563 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:21:48.564 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 19:21:48.565 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:21:48.566 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:21:48.568 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:21:48.569 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 19:21:48.571 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:48.572 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-04 19:21:48.574 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:48.575 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:21:48.576 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:21:48.577 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 19:21:48.578 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:21:48.580 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:21:48.581 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:21:48.581 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:21:48.582 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:21:48.582 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 19:21:48.584 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 57.081ms
2026-02-04 19:21:48.585 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:21:48.586 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:21:48.586 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:48.588 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:21:48.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/СанкТ-ПЕТЕрбУрГ?date=2026-02-04 - 200 null application/json; charset=utf-8 79.3285ms
2026-02-04 19:21:57.355 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 19:21:57.357 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 19:21:57.358 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 19:21:57.359 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 19:21:57.360 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:21:57.360 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 19:21:57.364 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 19:21:57.365 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:21:57.365 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:21:57.366 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:21:57.367 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:21:57.368 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:21:57.369 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 19:21:57.369 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 19:21:57.370 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 19:21:57.371 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 19:21:57.372 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 19:21:57.373 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 19:21:57.373 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 19:21:57.374 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 19:21:57.375 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 19:21:57.375 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 19:21:57.376 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 19:21:57.377 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 19:21:57.377 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 19:21:57.378 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 19:21:57.379 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 19:21:57.379 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 19:21:57.380 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 19:21:57.381 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 19:21:57.381 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 19:21:57.382 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 19:21:57.387 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:21:57.405 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 19:21:57.505 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 19:21:57.518 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:21:57.519 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 19:21:57.520 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:57.521 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:57.522 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:21:57.523 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 19:21:57.524 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:21:57.525 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 19:21:57.527 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 19:21:57.529 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:57.531 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 19:21:57.532 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:21:57.533 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 19:21:57.534 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:21:57.536 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:21:57.536 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:21:57.537 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:21:57.538 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:21:57.539 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 19:21:57.541 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 172.5436ms
2026-02-04 19:21:57.542 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 19:21:57.543 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:21:57.544 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:21:57.546 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:21:57.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 191.751ms
2026-02-04 19:23:23.255 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 19:26:15.245 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 19:26:15.308 +03:00 [DBG] Hosting starting
2026-02-04 19:26:15.315 +03:00 [DBG] Middleware loaded
2026-02-04 19:26:15.316 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 19:26:15.318 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 19:26:15.367 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 19:26:15.437 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 19:26:15.437 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 19:26:15.438 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 19:26:15.438 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 19:26:15.439 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 19:26:15.439 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 19:26:15.466 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 19:26:15.467 +03:00 [INF] Hosting environment: Development
2026-02-04 19:26:15.468 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 19:26:15.469 +03:00 [DBG] Hosting started
2026-02-04 19:26:15.577 +03:00 [DBG] Connection id "0HNJ418F6G0JL" accepted.
2026-02-04 19:26:15.579 +03:00 [DBG] Connection id "0HNJ418F6G0JL" started.
2026-02-04 19:26:15.585 +03:00 [DBG] Connection id "0HNJ418F6G0JM" accepted.
2026-02-04 19:26:15.586 +03:00 [DBG] Connection id "0HNJ418F6G0JM" started.
2026-02-04 19:26:15.618 +03:00 [DBG] Connection id "0HNJ418F6G0JL" received FIN.
2026-02-04 19:26:15.618 +03:00 [DBG] Connection id "0HNJ418F6G0JM" received FIN.
2026-02-04 19:26:15.624 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 19:26:15.624 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 19:26:15.642 +03:00 [DBG] Connection id "0HNJ418F6G0JL" stopped.
2026-02-04 19:26:15.642 +03:00 [DBG] Connection id "0HNJ418F6G0JM" stopped.
2026-02-04 19:26:15.645 +03:00 [DBG] Connection id "0HNJ418F6G0JL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 19:26:15.645 +03:00 [DBG] Connection id "0HNJ418F6G0JM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 19:26:15.916 +03:00 [DBG] Connection id "0HNJ418F6G0JN" accepted.
2026-02-04 19:26:15.918 +03:00 [DBG] Connection id "0HNJ418F6G0JN" started.
2026-02-04 19:26:15.948 +03:00 [DBG] Connection 0HNJ418F6G0JN established using the following protocol: "Tls13"
2026-02-04 19:26:15.982 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 19:26:16.049 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 19:26:16.060 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 19:26:16.061 +03:00 [DBG] Request did not match any endpoints
2026-02-04 19:26:16.095 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 19:26:16.097 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 19:26:16.107 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 19:26:16.109 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 19:26:16.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 132.3677ms
2026-02-04 19:26:16.132 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 19:26:16.137 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 19:26:16.139 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 7.3274ms
2026-02-04 19:26:16.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 19:26:16.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.5876ms
2026-02-04 19:26:16.277 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 19:26:16.283 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 19:26:16.285 +03:00 [DBG] Request did not match any endpoints
2026-02-04 19:26:16.290 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.1566ms
2026-02-04 19:26:28.035 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Malaga?date=2026-02-04 - null null
2026-02-04 19:26:28.040 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Malaga'
2026-02-04 19:26:28.042 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Malaga'
2026-02-04 19:26:28.043 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:26:28.045 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:26:28.047 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:26:28.059 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 19:26:28.061 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:26:28.061 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:26:28.063 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:26:28.064 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:26:28.064 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:26:28.066 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:26:28.120 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 19:26:28.126 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:26:28.133 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 19:26:28.135 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 19:26:28.136 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:26:28.137 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:26:28.137 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 19:26:28.140 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 19:26:28.142 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:26:28.143 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 19:26:28.145 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:26:28.145 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:26:28.146 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:26:28.147 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:26:28.159 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Malaga&count=1&language=ru
2026-02-04 19:26:28.160 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Malaga&count=1&language=ru
2026-02-04 19:26:28.436 +03:00 [INF] Received HTTP response headers after 274.1187ms - 200
2026-02-04 19:26:28.437 +03:00 [INF] End processing HTTP request after 279.0105ms - 200
2026-02-04 19:26:28.448 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=36.72016&longitude=-4.42034&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 19:26:28.449 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=36.72016&longitude=-4.42034&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 19:26:28.714 +03:00 [INF] Received HTTP response headers after 264.84ms - 200
2026-02-04 19:26:28.715 +03:00 [INF] End processing HTTP request after 267.5141ms - 200
2026-02-04 19:26:28.936 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:26:28.953 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:26:28.979 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:26:28.982 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 19:26:28.984 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 19:26:28.993 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 19:26:29.023 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:26:29.029 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 19:26:29.031 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:26:29.037 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:26:29.041 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:26:29.044 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-04 19:26:29.046 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 19:26:29.050 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:26:29.064 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:26:29.073 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 19:26:29.079 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:26:29.082 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 14ms reading results.
2026-02-04 19:26:29.085 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:26:29.087 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:26:29.092 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:26:29.094 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 19:26:29.096 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:26:29.098 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:26:29.099 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:26:29.099 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:26:29.100 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:26:29.101 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 19:26:29.107 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1040.5637ms
2026-02-04 19:26:29.109 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:26:29.111 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:26:29.113 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:26:29.115 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:26:29.116 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Malaga?date=2026-02-04 - 200 null application/json; charset=utf-8 1081.457ms
2026-02-04 19:26:56.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/MalagA?date=2026-02-04 - null null
2026-02-04 19:26:56.193 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/MalagA'
2026-02-04 19:26:56.194 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/MalagA'
2026-02-04 19:26:56.195 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:26:56.196 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:26:56.196 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:26:56.201 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 19:26:56.202 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:26:56.203 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:26:56.204 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:26:56.205 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:26:56.206 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:26:56.207 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:26:56.208 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 19:26:56.210 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 19:26:56.210 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 19:26:56.211 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:26:56.212 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 19:26:56.213 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 19:26:56.214 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 19:26:56.214 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:26:56.215 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 19:26:56.216 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:26:56.216 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:26:56.217 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 19:26:56.218 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 19:26:56.244 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:26:56.246 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:26:56.247 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:26:56.247 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 19:26:56.248 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 19:26:56.249 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 19:26:56.250 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:26:56.250 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 19:26:56.251 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:26:56.251 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:26:56.252 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:26:56.253 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 19:26:56.253 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:26:56.254 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:26:56.255 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 19:26:56.256 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 19:26:56.257 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:26:56.259 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 19:26:56.259 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:26:56.260 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 19:26:56.261 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:26:56.262 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 19:26:56.263 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:26:56.264 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:26:56.264 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:26:56.265 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:26:56.265 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:26:56.266 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 19:26:56.267 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 60.0004ms
2026-02-04 19:26:56.268 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 19:26:56.268 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:26:56.269 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:26:56.269 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 19:26:56.270 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/MalagA?date=2026-02-04 - 200 null application/json; charset=utf-8 86.1612ms
2026-02-04 19:27:21.132 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-04 19:27:21.134 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-04 19:27:21.135 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-04 19:27:21.136 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 19:27:21.136 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 19:27:21.137 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 19:27:21.140 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 19:27:21.141 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 19:27:21.142 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 19:27:21.143 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 19:27:21.144 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 19:27:21.145 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 19:27:21.146 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 19:27:21.147 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 19:27:21.148 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 19:27:21.148 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 19:27:21.149 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 19:27:21.150 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 19:27:21.151 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 19:27:21.151 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 19:27:21.152 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 19:27:21.153 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 19:27:21.154 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 19:27:21.154 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 19:27:21.156 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 19:27:21.156 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 19:27:21.157 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 19:27:21.158 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 19:27:21.159 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 19:27:21.160 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 19:27:21.160 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 19:27:21.161 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 19:27:21.162 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 19:27:21.162 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 19:27:21.163 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 19:27:21.164 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 19:27:21.164 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 19:27:21.165 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 19:27:21.176 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 19:27:21.199 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-04 19:27:21.277 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-04 19:27:21.290 +03:00 [DBG] Creating DbConnection.
2026-02-04 19:27:21.291 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 19:27:21.292 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:27:21.293 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:27:21.294 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:27:21.295 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 19:27:21.296 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:27:21.297 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 19:27:21.299 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 19:27:21.301 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:27:21.302 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 19:27:21.304 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:27:21.305 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:27:21.308 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-04 19:27:21.329 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 19:27:21.333 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:27:21.334 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:27:21.335 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 19:27:21.336 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 19:27:21.337 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 19:27:21.338 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 19:27:21.339 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 19:27:21.344 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.345 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.346 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.347 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.348 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.349 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.350 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.351 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 19:27:21.352 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:27:21.353 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-04 19:27:21.355 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 19:27:21.356 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:27:21.357 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 19:27:21.359 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 19:27:21.360 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 19:27:21.360 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 19:27:21.361 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 19:27:21.362 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 19:27:21.371 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 225.1862ms
2026-02-04 19:27:21.373 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 19:27:21.376 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 19:27:21.377 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 19:27:21.378 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 19:27:21.380 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 248.207ms
2026-02-04 19:28:28.161 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 19:28:38.165 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:28:38.167 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0325ms - processed: 0 items - remaining: 1 items
2026-02-04 19:28:48.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:28:48.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:28:58.189 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:28:58.189 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 19:29:08.201 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:29:08.202 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 19:29:18.218 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:29:18.219 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 19:29:28.236 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:29:28.237 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 19:29:38.243 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:29:38.244 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:29:48.252 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:29:48.253 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 19:29:58.256 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:29:58.257 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-04 19:30:08.270 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:30:08.271 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 19:30:18.284 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:30:18.291 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 6.0379ms - processed: 0 items - remaining: 1 items
2026-02-04 19:30:28.305 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:30:28.306 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 19:30:38.308 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:30:38.309 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 19:30:48.318 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:30:48.319 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-04 19:30:58.328 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:30:58.329 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-04 19:31:08.333 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:31:08.334 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 19:31:18.349 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:31:18.350 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4872ms - processed: 0 items - remaining: 1 items
2026-02-04 19:31:28.359 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:31:28.360 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:31:38.376 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:31:38.377 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 19:31:48.380 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:31:48.381 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 19:31:58.391 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:31:58.392 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 19:32:08.393 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:32:08.394 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:32:18.403 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:32:18.404 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:32:28.415 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:32:28.416 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 19:32:38.427 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:32:38.428 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 19:32:48.430 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:32:48.431 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 19:32:58.443 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:32:58.444 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:33:08.455 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:33:08.456 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-04 19:33:18.463 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:33:18.463 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-04 19:33:28.471 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:33:28.472 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-04 19:33:38.489 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:33:38.490 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 19:33:48.504 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:33:48.505 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 19:33:58.508 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:33:58.509 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 19:34:08.516 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:34:08.517 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 19:34:18.521 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:34:18.521 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 19:34:28.527 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:34:28.527 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 19:34:38.532 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:34:38.533 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 19:34:48.548 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:34:48.549 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:34:58.558 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:34:58.559 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 19:35:08.572 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:35:08.573 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:35:18.577 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:35:18.578 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 19:35:28.587 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:35:28.589 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-04 19:35:38.601 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:35:38.602 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 19:35:48.603 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:35:48.604 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 19:35:58.616 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:35:58.616 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0042ms - processed: 0 items - remaining: 1 items
2026-02-04 19:36:08.628 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:36:08.629 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 19:36:18.644 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:36:18.645 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 19:36:28.658 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:36:28.659 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:36:38.664 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:36:38.665 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:36:48.682 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:36:48.683 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 19:36:58.689 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:36:58.690 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:37:08.704 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:37:08.705 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-04 19:37:18.714 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:37:18.715 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-04 19:37:28.728 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:37:28.728 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:37:38.741 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:37:38.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:37:48.750 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:37:48.751 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 19:37:58.761 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:37:58.762 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:38:08.783 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:38:08.783 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 19:38:18.792 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:38:18.792 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 19:38:21.438 +03:00 [DBG] Connection id "0HNJ418F6G0JN" received FIN.
2026-02-04 19:38:21.442 +03:00 [DBG] Connection id "0HNJ418F6G0JN" is closed. The last processed stream ID was 13.
2026-02-04 19:38:21.443 +03:00 [DBG] Connection id "0HNJ418F6G0JN" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 19:38:21.444 +03:00 [DBG] The connection queue processing loop for 0HNJ418F6G0JN completed.
2026-02-04 19:38:21.447 +03:00 [DBG] Connection id "0HNJ418F6G0JN" stopped.
2026-02-04 19:38:28.796 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:38:28.797 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 19:38:38.805 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:38:38.806 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-04 19:38:48.817 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 19:38:48.818 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-04 21:37:52.997 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 21:37:53.072 +03:00 [DBG] Hosting starting
2026-02-04 21:37:53.079 +03:00 [DBG] Middleware loaded
2026-02-04 21:37:53.080 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 21:37:53.081 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 21:37:53.125 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 21:37:53.176 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 21:37:53.177 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 21:37:53.181 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 21:37:53.181 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 21:37:53.182 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 21:37:53.182 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 21:37:53.204 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 21:37:53.204 +03:00 [INF] Hosting environment: Development
2026-02-04 21:37:53.205 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 21:37:53.205 +03:00 [DBG] Hosting started
2026-02-04 21:37:53.505 +03:00 [DBG] Connection id "0HNJ43I0V06O0" accepted.
2026-02-04 21:37:53.507 +03:00 [DBG] Connection id "0HNJ43I0V06O0" started.
2026-02-04 21:37:53.515 +03:00 [DBG] Connection id "0HNJ43I0V06O1" accepted.
2026-02-04 21:37:53.520 +03:00 [DBG] Connection id "0HNJ43I0V06O1" started.
2026-02-04 21:37:53.546 +03:00 [DBG] Connection id "0HNJ43I0V06O0" received FIN.
2026-02-04 21:37:53.546 +03:00 [DBG] Connection id "0HNJ43I0V06O1" received FIN.
2026-02-04 21:37:53.554 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:37:53.554 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:37:53.578 +03:00 [DBG] Connection id "0HNJ43I0V06O1" stopped.
2026-02-04 21:37:53.578 +03:00 [DBG] Connection id "0HNJ43I0V06O0" stopped.
2026-02-04 21:37:53.585 +03:00 [DBG] Connection id "0HNJ43I0V06O1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:37:53.585 +03:00 [DBG] Connection id "0HNJ43I0V06O0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:37:53.688 +03:00 [DBG] Connection id "0HNJ43I0V06O2" accepted.
2026-02-04 21:37:53.691 +03:00 [DBG] Connection id "0HNJ43I0V06O2" started.
2026-02-04 21:37:53.722 +03:00 [DBG] Connection 0HNJ43I0V06O2 established using the following protocol: "Tls13"
2026-02-04 21:37:53.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 21:37:53.832 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 21:37:53.844 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 21:37:53.845 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:37:53.847 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:37:53.879 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 21:37:53.880 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 21:37:53.890 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 21:37:53.891 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 21:37:53.892 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 136.3024ms
2026-02-04 21:37:53.911 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 21:37:53.915 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 21:37:53.917 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 5.9048ms
2026-02-04 21:37:53.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 21:37:53.969 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.6017ms
2026-02-04 21:37:54.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 21:37:54.086 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 21:37:54.087 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:37:54.088 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:37:54.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.5046ms
2026-02-04 21:38:10.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - null null
2026-02-04 21:38:10.845 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 21:38:10.847 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 21:38:10.848 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:38:10.849 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:38:10.850 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:38:10.852 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:38:10.864 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:38:10.866 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:38:10.867 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:38:10.868 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:38:10.869 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:38:10.870 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:38:10.871 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:38:10.925 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 21:38:10.930 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:38:10.938 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:38:10.939 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:38:10.941 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:38:10.941 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:38:10.942 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:38:10.945 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:38:10.946 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:38:10.947 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 21:38:10.949 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:38:10.950 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:38:10.950 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:38:10.951 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:38:10.965 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 21:38:10.966 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 21:38:11.250 +03:00 [INF] Received HTTP response headers after 281.7371ms - 200
2026-02-04 21:38:11.251 +03:00 [INF] End processing HTTP request after 286.7035ms - 200
2026-02-04 21:38:11.261 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 21:38:11.261 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 21:38:11.780 +03:00 [INF] Received HTTP response headers after 517.5853ms - 200
2026-02-04 21:38:11.781 +03:00 [INF] End processing HTTP request after 520.0675ms - 200
2026-02-04 21:38:12.007 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:38:12.025 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:38:12.053 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:38:12.056 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:38:12.058 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:38:12.067 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:38:12.098 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:38:12.103 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 21:38:12.105 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:38:12.111 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:38:12.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:38:12.118 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:38:12.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 21:38:12.124 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:38:12.138 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:38:12.146 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:38:12.151 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:38:12.154 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-04 21:38:12.156 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:38:12.158 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 21:38:12.164 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:38:12.165 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:38:12.167 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:38:12.170 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:38:12.170 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:38:12.171 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:38:12.174 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:38:12.175 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 21:38:12.181 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1309.0983ms
2026-02-04 21:38:12.182 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:38:12.184 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:38:12.186 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:38:12.187 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 21:38:12.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - 200 null application/json; charset=utf-8 1349.3964ms
2026-02-04 21:38:20.768 +03:00 [DBG] Connection id "0HNJ43I0V06O2" received FIN.
2026-02-04 21:38:20.770 +03:00 [DBG] Connection id "0HNJ43I0V06O2" is closed. The last processed stream ID was 9.
2026-02-04 21:38:20.770 +03:00 [DBG] The connection queue processing loop for 0HNJ43I0V06O2 completed.
2026-02-04 21:38:20.771 +03:00 [DBG] Connection id "0HNJ43I0V06O2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:38:20.781 +03:00 [DBG] Connection id "0HNJ43I0V06O2" stopped.
2026-02-04 21:38:25.759 +03:00 [DBG] Connection id "0HNJ43I0V06O3" accepted.
2026-02-04 21:38:25.760 +03:00 [DBG] Connection id "0HNJ43I0V06O3" started.
2026-02-04 21:38:25.767 +03:00 [DBG] Connection 0HNJ43I0V06O3 established using the following protocol: "Tls13"
2026-02-04 21:38:25.769 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/МоскВа/week - null null
2026-02-04 21:38:25.771 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/МоскВа/week'
2026-02-04 21:38:25.772 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/МоскВа/week'
2026-02-04 21:38:25.773 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:38:25.773 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:38:25.774 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:38:25.774 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:38:25.778 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:38:25.779 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:38:25.779 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:38:25.780 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:38:25.781 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:38:25.782 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:38:25.783 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:38:25.784 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:38:25.785 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:38:25.786 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:38:25.787 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:38:25.787 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:38:25.788 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:38:25.789 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:38:25.791 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%92%D0%B0&count=1&language=ru
2026-02-04 21:38:25.791 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%92%D0%B0&count=1&language=ru
2026-02-04 21:38:25.858 +03:00 [INF] Received HTTP response headers after 66.052ms - 200
2026-02-04 21:38:25.859 +03:00 [INF] End processing HTTP request after 68.2543ms - 200
2026-02-04 21:38:25.860 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 21:38:25.861 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 21:38:25.921 +03:00 [INF] Received HTTP response headers after 59.9405ms - 200
2026-02-04 21:38:25.922 +03:00 [INF] End processing HTTP request after 61.9143ms - 200
2026-02-04 21:38:25.949 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:38:25.950 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:38:25.951 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:38:25.952 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:38:25.953 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:38:25.953 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:38:25.954 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:38:25.955 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:38:25.955 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:38:25.956 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:38:25.957 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:38:25.957 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:38:25.958 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:38:25.958 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:38:25.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:38:25.961 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:38:25.962 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:38:25.963 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 21:38:25.964 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:38:25.965 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:38:25.966 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:38:25.967 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:38:25.967 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:38:25.969 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:38:25.969 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:38:25.969 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:38:25.970 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:38:25.971 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 21:38:25.972 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 189.534ms
2026-02-04 21:38:25.973 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:38:25.974 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:38:25.974 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:38:25.975 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:38:25.976 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/МоскВа/week - 200 null application/json; charset=utf-8 207.3774ms
2026-02-04 21:39:08.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-04 21:39:08.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-04 21:39:08.823 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-04 21:39:08.824 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 21:39:08.824 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:39:08.825 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:39:08.825 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 21:39:08.828 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 21:39:08.829 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:39:08.830 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:39:08.831 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:39:08.831 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:39:08.832 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:39:08.833 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 21:39:08.834 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 21:39:08.835 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 21:39:08.838 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 21:39:08.839 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:39:08.839 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:39:08.840 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 21:39:08.841 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:39:08.841 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 21:39:08.842 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 21:39:08.843 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:39:08.844 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:39:08.844 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 21:39:08.845 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:39:08.846 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 21:39:08.846 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 21:39:08.847 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 21:39:08.848 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 21:39:08.849 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 21:39:08.849 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 21:39:08.850 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 21:39:08.851 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 21:39:08.851 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 21:39:08.852 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 21:39:08.853 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 21:39:08.853 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 21:39:08.865 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:39:08.889 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-04 21:39:08.967 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-04 21:39:08.979 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:39:08.980 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:39:08.980 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:08.981 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:08.982 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:39:08.982 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:39:08.983 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:39:08.984 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 21:39:08.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 21:39:08.986 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:08.987 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 21:39:08.988 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:08.988 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:08.991 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-04 21:39:09.007 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 21:39:09.011 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:09.012 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:09.012 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:39:09.013 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:39:09.014 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:39:09.015 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 21:39:09.016 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 21:39:09.020 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.021 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.022 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.023 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.023 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.024 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.025 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.026 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.026 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.027 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:09.028 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:09.029 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 11ms reading results.
2026-02-04 21:39:09.030 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:09.030 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:09.031 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:39:09.033 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:39:09.033 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:39:09.034 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:39:09.034 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:39:09.035 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 21:39:09.043 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 209.6443ms
2026-02-04 21:39:09.043 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 21:39:09.044 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:39:09.045 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:09.046 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:09.046 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 229.0259ms
2026-02-04 21:39:28.231 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 21:39:28.234 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 21:39:28.235 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 21:39:28.236 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 21:39:28.237 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:39:28.237 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:39:28.238 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 21:39:28.241 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 21:39:28.242 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:39:28.243 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:39:28.244 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:39:28.246 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:39:28.247 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:39:28.248 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 21:39:28.249 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 21:39:28.250 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 21:39:28.251 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 21:39:28.252 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:39:28.253 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:39:28.253 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 21:39:28.254 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:39:28.255 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 21:39:28.256 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 21:39:28.257 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:39:28.258 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:39:28.259 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 21:39:28.260 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:39:28.261 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 21:39:28.262 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 21:39:28.263 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 21:39:28.264 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 21:39:28.265 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 21:39:28.266 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 21:39:28.268 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:39:28.272 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 21:39:28.289 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 21:39:28.290 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:39:28.290 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:39:28.291 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:28.291 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:28.292 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:39:28.293 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:39:28.294 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:39:28.294 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 21:39:28.295 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 21:39:28.297 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:28.297 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 21:39:28.298 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:28.299 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:28.299 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:39:28.301 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:39:28.301 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:39:28.301 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:39:28.302 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:39:28.303 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 21:39:28.304 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 56.0436ms
2026-02-04 21:39:28.304 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 21:39:28.305 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:39:28.306 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:28.306 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:28.307 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 76.7641ms
2026-02-04 21:39:56.876 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/London?date=2026-02-04 - null null
2026-02-04 21:39:56.880 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/London'
2026-02-04 21:39:56.881 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/London'
2026-02-04 21:39:56.882 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:39:56.883 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:39:56.883 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:39:56.884 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:39:56.884 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:39:56.885 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:39:56.886 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:39:56.887 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:39:56.887 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:39:56.888 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:39:56.889 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:39:56.893 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:39:56.893 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:39:56.894 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:39:56.895 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:39:56.895 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:39:56.896 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:39:56.897 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:39:56.898 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:39:56.898 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 21:39:56.899 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:39:56.900 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:39:56.900 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:39:56.901 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:39:56.902 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=London&count=1&language=ru
2026-02-04 21:39:56.902 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=London&count=1&language=ru
2026-02-04 21:39:57.143 +03:00 [INF] Received HTTP response headers after 239.9357ms - 200
2026-02-04 21:39:57.144 +03:00 [INF] End processing HTTP request after 241.9194ms - 200
2026-02-04 21:39:57.145 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.50853&longitude=-0.12574&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 21:39:57.145 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.50853&longitude=-0.12574&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 21:39:57.432 +03:00 [INF] Received HTTP response headers after 286.7082ms - 200
2026-02-04 21:39:57.433 +03:00 [INF] End processing HTTP request after 288.8129ms - 200
2026-02-04 21:39:57.434 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:39:57.435 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:57.436 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:57.437 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:39:57.437 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:39:57.438 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:39:57.439 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:39:57.439 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:39:57.440 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:57.440 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:57.441 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:39:57.442 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:39:57.442 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:39:57.443 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:39:57.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:39:57.445 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:39:57.446 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:57.447 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 21:39:57.448 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:39:57.449 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:57.450 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:39:57.451 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:39:57.452 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:39:57.453 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:39:57.454 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:39:57.454 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:39:57.455 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:39:57.456 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 21:39:57.456 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 567.3291ms
2026-02-04 21:39:57.457 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:39:57.458 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:39:57.458 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:39:57.459 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:39:57.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/London?date=2026-02-04 - 200 null application/json; charset=utf-8 584.9798ms
2026-02-04 21:40:06.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/London/week - null null
2026-02-04 21:40:06.609 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/London/week'
2026-02-04 21:40:06.610 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/London/week'
2026-02-04 21:40:06.611 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:40:06.612 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:40:06.612 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:40:06.613 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:40:06.613 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:40:06.614 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:40:06.615 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:40:06.616 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:40:06.617 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:40:06.617 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:40:06.618 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:40:06.619 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:40:06.620 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:40:06.621 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:40:06.621 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:40:06.622 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:40:06.623 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:40:06.624 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:40:06.625 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=London&count=1&language=ru
2026-02-04 21:40:06.625 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=London&count=1&language=ru
2026-02-04 21:40:06.689 +03:00 [INF] Received HTTP response headers after 62.7911ms - 200
2026-02-04 21:40:06.690 +03:00 [INF] End processing HTTP request after 64.9945ms - 200
2026-02-04 21:40:06.690 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.50853&longitude=-0.12574&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 21:40:06.691 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.50853&longitude=-0.12574&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 21:40:08.370 +03:00 [INF] Received HTTP response headers after 1678.5667ms - 200
2026-02-04 21:40:08.371 +03:00 [INF] End processing HTTP request after 1680.8072ms - 200
2026-02-04 21:40:08.372 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:40:08.373 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:40:08.374 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:40:08.375 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:40:08.376 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:40:08.376 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:40:08.377 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:40:08.377 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:40:08.378 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:40:08.379 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:40:08.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:40:08.380 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:40:08.381 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:40:08.381 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:40:08.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:40:08.383 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:40:08.385 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:40:08.385 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 21:40:08.386 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:40:08.387 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:40:08.388 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:40:08.389 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:40:08.389 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:40:08.391 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:40:08.391 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:40:08.392 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:40:08.392 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:40:08.393 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 21:40:08.393 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1775.212ms
2026-02-04 21:40:08.394 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:40:08.395 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:40:08.395 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:40:08.396 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:40:08.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/London/week - 200 null application/json; charset=utf-8 1789.8926ms
2026-02-04 21:40:10.973 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 21:40:20.982 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 21:40:20.984 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0343ms - processed: 0 items - remaining: 1 items
2026-02-04 21:40:30.986 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 21:40:30.987 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-04 21:42:11.952 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 21:42:12.031 +03:00 [DBG] Hosting starting
2026-02-04 21:42:12.038 +03:00 [DBG] Middleware loaded
2026-02-04 21:42:12.039 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 21:42:12.040 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 21:42:12.084 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 21:42:12.145 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 21:42:12.146 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 21:42:12.146 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 21:42:12.147 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 21:42:12.148 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 21:42:12.149 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 21:42:12.172 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 21:42:12.172 +03:00 [INF] Hosting environment: Development
2026-02-04 21:42:12.173 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 21:42:12.174 +03:00 [DBG] Hosting started
2026-02-04 21:42:12.520 +03:00 [DBG] Connection id "0HNJ43KE55FLR" accepted.
2026-02-04 21:42:12.521 +03:00 [DBG] Connection id "0HNJ43KE55FLR" started.
2026-02-04 21:42:12.531 +03:00 [DBG] Connection id "0HNJ43KE55FLS" accepted.
2026-02-04 21:42:12.531 +03:00 [DBG] Connection id "0HNJ43KE55FLS" started.
2026-02-04 21:42:12.562 +03:00 [DBG] Connection id "0HNJ43KE55FLS" received FIN.
2026-02-04 21:42:12.562 +03:00 [DBG] Connection id "0HNJ43KE55FLR" received FIN.
2026-02-04 21:42:12.568 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:42:12.568 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:42:12.587 +03:00 [DBG] Connection id "0HNJ43KE55FLR" stopped.
2026-02-04 21:42:12.587 +03:00 [DBG] Connection id "0HNJ43KE55FLS" stopped.
2026-02-04 21:42:12.590 +03:00 [DBG] Connection id "0HNJ43KE55FLS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:42:12.590 +03:00 [DBG] Connection id "0HNJ43KE55FLR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:42:12.694 +03:00 [DBG] Connection id "0HNJ43KE55FLT" accepted.
2026-02-04 21:42:12.696 +03:00 [DBG] Connection id "0HNJ43KE55FLT" started.
2026-02-04 21:42:12.725 +03:00 [DBG] Connection 0HNJ43KE55FLT established using the following protocol: "Tls13"
2026-02-04 21:42:12.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 21:42:12.823 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 21:42:12.833 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 21:42:12.834 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:42:12.837 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:42:12.871 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 21:42:12.872 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 21:42:12.882 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 21:42:12.883 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 21:42:12.884 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 128.5197ms
2026-02-04 21:42:12.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 21:42:12.910 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 21:42:12.912 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.2215ms
2026-02-04 21:42:12.929 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 21:42:12.954 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.1395ms
2026-02-04 21:42:13.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 21:42:13.056 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 21:42:13.057 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:42:13.059 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:42:13.064 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.7ms
2026-02-04 21:42:27.077 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/СОЧи/week - null null
2026-02-04 21:42:27.081 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/СОЧи/week'
2026-02-04 21:42:27.083 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/СОЧи/week'
2026-02-04 21:42:27.084 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:42:27.086 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:42:27.087 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:42:27.088 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:42:27.100 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:42:27.102 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:42:27.103 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:42:27.104 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:42:27.105 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:42:27.106 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:42:27.107 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:42:27.161 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 21:42:27.167 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:42:27.173 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:42:27.175 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:42:27.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:42:27.177 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:42:27.178 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:42:27.181 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:42:27.193 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%9E%D0%A7%D0%B8&count=1&language=ru
2026-02-04 21:42:27.194 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%9E%D0%A7%D0%B8&count=1&language=ru
2026-02-04 21:42:27.440 +03:00 [INF] Received HTTP response headers after 243.8781ms - 200
2026-02-04 21:42:27.441 +03:00 [INF] End processing HTTP request after 248.5139ms - 200
2026-02-04 21:42:27.450 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=43.59699&longitude=39.72477&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 21:42:27.451 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=43.59699&longitude=39.72477&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 21:42:27.685 +03:00 [INF] Received HTTP response headers after 233.3143ms - 200
2026-02-04 21:42:27.686 +03:00 [INF] End processing HTTP request after 235.7683ms - 200
2026-02-04 21:42:27.914 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:42:27.932 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:27.959 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:27.962 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:42:27.964 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:42:27.972 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:42:28.005 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:42:28.010 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 21:42:28.012 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:42:28.019 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:28.024 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:42:28.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:42:28.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 21:42:28.034 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:42:28.046 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:42:28.055 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:42:28.059 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:28.063 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-04 21:42:28.065 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:28.067 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-04 21:42:28.073 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:28.074 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:42:28.077 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:42:28.079 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:42:28.080 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:42:28.080 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:42:28.081 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:42:28.082 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 21:42:28.092 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 984.2871ms
2026-02-04 21:42:28.093 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 21:42:28.096 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:42:28.098 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:42:28.099 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 21:42:28.100 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/СОЧи/week - 200 null application/json; charset=utf-8 1024.1539ms
2026-02-04 21:42:50.583 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/СоЧи?date=2026-02-04 - null null
2026-02-04 21:42:50.591 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/СоЧи'
2026-02-04 21:42:50.592 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/СоЧи'
2026-02-04 21:42:50.592 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:42:50.593 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:42:50.594 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:42:50.594 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:42:50.597 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:42:50.598 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:42:50.599 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:42:50.600 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:42:50.601 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:42:50.602 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:42:50.603 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:42:50.604 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:42:50.607 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:42:50.607 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:42:50.608 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:42:50.609 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:42:50.609 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:42:50.610 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:42:50.611 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:42:50.612 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 21:42:50.613 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:42:50.614 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:42:50.615 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:42:50.616 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:42:50.618 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%BE%D0%A7%D0%B8&count=1&language=ru
2026-02-04 21:42:50.619 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%BE%D0%A7%D0%B8&count=1&language=ru
2026-02-04 21:42:50.680 +03:00 [INF] Received HTTP response headers after 60.74ms - 200
2026-02-04 21:42:50.681 +03:00 [INF] End processing HTTP request after 63.3596ms - 200
2026-02-04 21:42:50.683 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=43.59699&longitude=39.72477&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 21:42:50.684 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=43.59699&longitude=39.72477&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 21:42:50.741 +03:00 [INF] Received HTTP response headers after 56.6122ms - 200
2026-02-04 21:42:50.742 +03:00 [INF] End processing HTTP request after 59.235ms - 200
2026-02-04 21:42:50.770 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:42:50.772 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:50.773 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:50.774 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:42:50.775 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:42:50.776 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:42:50.777 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:42:50.778 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:42:50.778 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:42:50.779 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:50.780 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:42:50.781 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:42:50.781 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:42:50.782 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:42:50.784 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:42:50.785 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:42:50.787 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:50.788 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 21:42:50.788 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:50.789 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:42:50.790 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:50.791 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:42:50.792 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:42:50.793 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:42:50.794 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:42:50.794 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:42:50.795 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:42:50.795 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 21:42:50.796 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 193.3657ms
2026-02-04 21:42:50.797 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:42:50.797 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:42:50.798 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:42:50.799 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:42:50.799 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/СоЧи?date=2026-02-04 - 200 null application/json; charset=utf-8 216.1789ms
2026-02-04 21:42:59.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/сочи?date=2026-02-04 - null null
2026-02-04 21:42:59.160 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/сочи'
2026-02-04 21:42:59.161 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/сочи'
2026-02-04 21:42:59.162 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:42:59.162 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:42:59.163 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:42:59.163 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:42:59.164 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 21:42:59.165 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:42:59.166 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:42:59.167 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:42:59.168 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:42:59.169 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:42:59.170 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:42:59.173 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 21:42:59.174 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 21:42:59.175 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 21:42:59.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:42:59.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 21:42:59.177 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 21:42:59.178 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 21:42:59.178 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:42:59.179 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 21:42:59.180 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:42:59.180 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:42:59.181 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 21:42:59.182 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 21:42:59.188 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:42:59.189 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:59.190 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:59.191 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 21:42:59.192 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 21:42:59.192 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 21:42:59.193 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:42:59.193 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:42:59.194 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:42:59.194 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:59.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:42:59.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:42:59.196 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:42:59.197 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:42:59.198 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 21:42:59.199 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 21:42:59.200 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:59.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 21:42:59.202 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:42:59.202 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:42:59.203 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 21:42:59.204 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 21:42:59.205 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:42:59.206 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:42:59.206 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:42:59.207 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:42:59.207 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:42:59.208 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 21:42:59.209 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 38.9116ms
2026-02-04 21:42:59.209 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 21:42:59.210 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:42:59.211 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:42:59.211 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:42:59.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/сочи?date=2026-02-04 - 200 null application/json; charset=utf-8 54.3059ms
2026-02-04 21:43:18.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 21:43:18.472 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 21:43:18.473 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 21:43:18.474 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 21:43:18.474 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:43:18.475 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 21:43:18.475 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 21:43:18.478 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 21:43:18.479 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 21:43:18.480 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 21:43:18.481 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 21:43:18.482 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 21:43:18.483 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 21:43:18.484 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 21:43:18.484 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 21:43:18.485 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 21:43:18.486 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 21:43:18.487 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:43:18.487 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:43:18.488 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 21:43:18.489 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 21:43:18.489 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 21:43:18.490 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 21:43:18.491 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:43:18.492 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:43:18.492 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 21:43:18.493 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 21:43:18.494 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 21:43:18.494 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 21:43:18.495 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 21:43:18.496 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 21:43:18.496 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 21:43:18.497 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 21:43:18.503 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 21:43:18.521 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 21:43:18.623 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 21:43:18.635 +03:00 [DBG] Creating DbConnection.
2026-02-04 21:43:18.635 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 21:43:18.636 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:43:18.637 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:43:18.637 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 21:43:18.638 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 21:43:18.638 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 21:43:18.639 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 21:43:18.640 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 21:43:18.643 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:43:18.643 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-04 21:43:18.644 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 21:43:18.645 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:43:18.646 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 21:43:18.647 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 21:43:18.647 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 21:43:18.648 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 21:43:18.648 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 21:43:18.649 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 21:43:18.650 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 166.9901ms
2026-02-04 21:43:18.651 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 21:43:18.652 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 21:43:18.652 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 21:43:18.653 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 21:43:18.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 183.6992ms
2026-02-04 21:44:34.842 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 21:44:34.909 +03:00 [DBG] Hosting starting
2026-02-04 21:44:34.916 +03:00 [DBG] Middleware loaded
2026-02-04 21:44:34.917 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 21:44:34.919 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 21:44:34.964 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 21:44:35.037 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 21:44:35.038 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 21:44:35.039 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 21:44:35.039 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 21:44:35.040 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 21:44:35.041 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 21:44:35.064 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 21:44:35.064 +03:00 [INF] Hosting environment: Development
2026-02-04 21:44:35.065 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 21:44:35.065 +03:00 [DBG] Hosting started
2026-02-04 21:44:35.153 +03:00 [DBG] Connection id "0HNJ43LOLDKIP" accepted.
2026-02-04 21:44:35.154 +03:00 [DBG] Connection id "0HNJ43LOLDKIP" started.
2026-02-04 21:44:35.164 +03:00 [DBG] Connection id "0HNJ43LOLDKIQ" accepted.
2026-02-04 21:44:35.165 +03:00 [DBG] Connection id "0HNJ43LOLDKIQ" started.
2026-02-04 21:44:35.196 +03:00 [DBG] Connection id "0HNJ43LOLDKIQ" received FIN.
2026-02-04 21:44:35.196 +03:00 [DBG] Connection id "0HNJ43LOLDKIP" received FIN.
2026-02-04 21:44:35.202 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:44:35.202 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:44:35.224 +03:00 [DBG] Connection id "0HNJ43LOLDKIP" stopped.
2026-02-04 21:44:35.224 +03:00 [DBG] Connection id "0HNJ43LOLDKIQ" stopped.
2026-02-04 21:44:35.227 +03:00 [DBG] Connection id "0HNJ43LOLDKIQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:44:35.227 +03:00 [DBG] Connection id "0HNJ43LOLDKIP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:44:35.390 +03:00 [DBG] Connection id "0HNJ43LOLDKIR" accepted.
2026-02-04 21:44:35.391 +03:00 [DBG] Connection id "0HNJ43LOLDKIR" started.
2026-02-04 21:44:35.422 +03:00 [DBG] Connection 0HNJ43LOLDKIR established using the following protocol: "Tls13"
2026-02-04 21:44:35.454 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 21:44:35.516 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 21:44:35.525 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 21:44:35.526 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:44:35.529 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:44:35.561 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 21:44:35.563 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 21:44:35.573 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 21:44:35.574 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 21:44:35.575 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 124.4205ms
2026-02-04 21:44:35.593 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 21:44:35.598 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 21:44:35.600 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.8377ms
2026-02-04 21:44:35.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 21:44:35.643 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.8831ms
2026-02-04 21:44:35.750 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 21:44:35.754 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 21:44:35.755 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:44:35.756 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:44:35.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.9744ms
2026-02-04 21:44:38.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/clear.png - null null
2026-02-04 21:44:38.193 +03:00 [DBG] No candidates found for the request path '/static/icons/clear.png'
2026-02-04 21:44:38.194 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:44:38.195 +03:00 [DBG] The request path /icons/clear.png does not match an existing file
2026-02-04 21:44:38.196 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:44:38.198 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/clear.png - 404 0 null 10.9994ms
2026-02-04 21:44:38.201 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/static/icons/clear.png, Response status code: 404
2026-02-04 21:44:43.264 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/clear.png - null null
2026-02-04 21:44:43.267 +03:00 [DBG] No candidates found for the request path '/static/icons/clear.png'
2026-02-04 21:44:43.268 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:44:43.268 +03:00 [DBG] The request path /icons/clear.png does not match an existing file
2026-02-04 21:44:43.269 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:44:43.270 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/clear.png - 404 0 null 6.6137ms
2026-02-04 21:44:43.272 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/static/icons/clear.png, Response status code: 404
2026-02-04 21:45:03.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/rain.png - null null
2026-02-04 21:45:03.258 +03:00 [DBG] No candidates found for the request path '/static/icons/rain.png'
2026-02-04 21:45:03.259 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:45:03.260 +03:00 [DBG] The request path /icons/rain.png does not match an existing file
2026-02-04 21:45:03.260 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:45:03.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/rain.png - 404 0 null 9.9994ms
2026-02-04 21:45:03.263 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/static/icons/rain.png, Response status code: 404
2026-02-04 21:46:41.729 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 21:46:41.789 +03:00 [DBG] Hosting starting
2026-02-04 21:46:41.795 +03:00 [DBG] Middleware loaded
2026-02-04 21:46:41.796 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 21:46:41.797 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 21:46:41.836 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 21:46:41.888 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 21:46:41.889 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 21:46:41.890 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 21:46:41.893 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 21:46:41.893 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 21:46:41.894 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 21:46:41.915 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 21:46:41.916 +03:00 [INF] Hosting environment: Development
2026-02-04 21:46:41.917 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 21:46:41.917 +03:00 [DBG] Hosting started
2026-02-04 21:46:42.140 +03:00 [DBG] Connection id "0HNJ43MUGERSE" accepted.
2026-02-04 21:46:42.140 +03:00 [DBG] Connection id "0HNJ43MUGERSF" accepted.
2026-02-04 21:46:42.141 +03:00 [DBG] Connection id "0HNJ43MUGERSE" started.
2026-02-04 21:46:42.141 +03:00 [DBG] Connection id "0HNJ43MUGERSF" started.
2026-02-04 21:46:42.164 +03:00 [DBG] Connection id "0HNJ43MUGERSF" received FIN.
2026-02-04 21:46:42.164 +03:00 [DBG] Connection id "0HNJ43MUGERSE" received FIN.
2026-02-04 21:46:42.170 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:46:42.170 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 21:46:42.188 +03:00 [DBG] Connection id "0HNJ43MUGERSE" stopped.
2026-02-04 21:46:42.188 +03:00 [DBG] Connection id "0HNJ43MUGERSF" stopped.
2026-02-04 21:46:42.191 +03:00 [DBG] Connection id "0HNJ43MUGERSE" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:46:42.191 +03:00 [DBG] Connection id "0HNJ43MUGERSF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 21:46:42.268 +03:00 [DBG] Connection id "0HNJ43MUGERSG" accepted.
2026-02-04 21:46:42.269 +03:00 [DBG] Connection id "0HNJ43MUGERSG" started.
2026-02-04 21:46:42.295 +03:00 [DBG] Connection 0HNJ43MUGERSG established using the following protocol: "Tls13"
2026-02-04 21:46:42.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 21:46:42.380 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 21:46:42.387 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 21:46:42.388 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:46:42.390 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:46:42.414 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 21:46:42.415 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 21:46:42.423 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 21:46:42.424 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 21:46:42.426 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 105.8167ms
2026-02-04 21:46:42.443 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 21:46:42.448 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 21:46:42.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.3889ms
2026-02-04 21:46:42.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 21:46:42.489 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.5444ms
2026-02-04 21:46:42.583 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 21:46:42.584 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 21:46:42.585 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:46:42.586 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:46:42.591 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.3513ms
2026-02-04 21:46:52.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/rain.png - null null
2026-02-04 21:46:52.526 +03:00 [DBG] No candidates found for the request path '/static/icons/rain.png'
2026-02-04 21:46:52.527 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:46:52.532 +03:00 [INF] Sending file. Request path: '/rain.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\rain.png'
2026-02-04 21:46:52.533 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/rain.png - 200 2321 image/png 13.4718ms
2026-02-04 21:46:52.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/favicon.ico - null null
2026-02-04 21:46:52.574 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2026-02-04 21:46:52.575 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:46:52.576 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:46:52.577 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 21:46:52.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/favicon.ico - 404 0 null 9.0758ms
2026-02-04 21:46:52.582 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/favicon.ico, Response status code: 404
2026-02-04 21:49:17.703 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/clear.png - null null
2026-02-04 21:49:17.713 +03:00 [DBG] No candidates found for the request path '/static/icons/clear.png'
2026-02-04 21:49:17.714 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:49:17.722 +03:00 [INF] Sending file. Request path: '/clear.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\clear.png'
2026-02-04 21:49:17.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/clear.png - 200 865 image/png 21.3398ms
2026-02-04 21:49:25.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/cloudy.png - null null
2026-02-04 21:49:25.063 +03:00 [DBG] No candidates found for the request path '/static/icons/cloudy.png'
2026-02-04 21:49:25.064 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:49:25.065 +03:00 [INF] Sending file. Request path: '/cloudy.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\cloudy.png'
2026-02-04 21:49:25.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/cloudy.png - 200 1439 image/png 6.7307ms
2026-02-04 21:49:32.580 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/fog.png - null null
2026-02-04 21:49:32.584 +03:00 [DBG] No candidates found for the request path '/static/icons/fog.png'
2026-02-04 21:49:32.585 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:49:32.587 +03:00 [INF] Sending file. Request path: '/fog.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\fog.png'
2026-02-04 21:49:32.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/fog.png - 200 580 image/png 8.6391ms
2026-02-04 21:49:40.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/drizzle.png - null null
2026-02-04 21:49:40.248 +03:00 [DBG] No candidates found for the request path '/static/icons/drizzle.png'
2026-02-04 21:49:40.248 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:49:40.250 +03:00 [INF] Sending file. Request path: '/drizzle.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\drizzle.png'
2026-02-04 21:49:40.255 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/drizzle.png - 200 2270 image/png 10.6282ms
2026-02-04 21:49:53.643 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/snow.png - null null
2026-02-04 21:49:53.646 +03:00 [DBG] No candidates found for the request path '/static/icons/snow.png'
2026-02-04 21:49:53.647 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:49:53.649 +03:00 [INF] Sending file. Request path: '/snow.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\snow.png'
2026-02-04 21:49:53.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/snow.png - 200 1360 image/png 6.8865ms
2026-02-04 21:50:00.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/rain_showers.png - null null
2026-02-04 21:50:00.750 +03:00 [DBG] No candidates found for the request path '/static/icons/rain_showers.png'
2026-02-04 21:50:00.751 +03:00 [DBG] Request did not match any endpoints
2026-02-04 21:50:00.753 +03:00 [INF] Sending file. Request path: '/rain_showers.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\rain_showers.png'
2026-02-04 21:50:00.754 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/rain_showers.png - 200 6184 image/png 7.3883ms
2026-02-04 22:00:06.586 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 22:00:06.649 +03:00 [DBG] Hosting starting
2026-02-04 22:00:06.656 +03:00 [DBG] Middleware loaded
2026-02-04 22:00:06.657 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 22:00:06.658 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 22:00:06.705 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 22:00:06.783 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 22:00:06.784 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 22:00:06.784 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 22:00:06.785 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 22:00:06.786 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 22:00:06.786 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 22:00:06.816 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 22:00:06.817 +03:00 [INF] Hosting environment: Development
2026-02-04 22:00:06.818 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 22:00:06.819 +03:00 [DBG] Hosting started
2026-02-04 22:00:06.858 +03:00 [DBG] Connection id "0HNJ43UEARDST" accepted.
2026-02-04 22:00:06.859 +03:00 [DBG] Connection id "0HNJ43UEARDST" started.
2026-02-04 22:00:06.870 +03:00 [DBG] Connection id "0HNJ43UEARDSU" accepted.
2026-02-04 22:00:06.871 +03:00 [DBG] Connection id "0HNJ43UEARDSU" started.
2026-02-04 22:00:06.902 +03:00 [DBG] Connection id "0HNJ43UEARDST" received FIN.
2026-02-04 22:00:06.902 +03:00 [DBG] Connection id "0HNJ43UEARDSU" received FIN.
2026-02-04 22:00:06.909 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:00:06.909 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:00:06.933 +03:00 [DBG] Connection id "0HNJ43UEARDSU" stopped.
2026-02-04 22:00:06.933 +03:00 [DBG] Connection id "0HNJ43UEARDST" stopped.
2026-02-04 22:00:06.936 +03:00 [DBG] Connection id "0HNJ43UEARDST" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:00:06.936 +03:00 [DBG] Connection id "0HNJ43UEARDSU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:00:07.514 +03:00 [DBG] Connection id "0HNJ43UEARDSV" accepted.
2026-02-04 22:00:07.515 +03:00 [DBG] Connection id "0HNJ43UEARDSV" started.
2026-02-04 22:00:07.547 +03:00 [DBG] Connection 0HNJ43UEARDSV established using the following protocol: "Tls13"
2026-02-04 22:00:07.578 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 22:00:07.639 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 22:00:07.647 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 22:00:07.648 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:00:07.651 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 22:00:07.684 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 22:00:07.686 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 22:00:07.695 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 22:00:07.695 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 22:00:07.697 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 121.3067ms
2026-02-04 22:00:07.715 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 22:00:07.721 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 22:00:07.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 7.083ms
2026-02-04 22:00:07.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 22:00:07.769 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.027ms
2026-02-04 22:00:07.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 22:00:07.855 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 22:00:07.856 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:00:07.857 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 22:00:07.862 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.9057ms
2026-02-04 22:00:10.283 +03:00 [DBG] Connection id "0HNJ43UEARDT0" accepted.
2026-02-04 22:00:10.283 +03:00 [DBG] Connection id "0HNJ43UEARDT0" received FIN.
2026-02-04 22:00:10.284 +03:00 [DBG] Connection id "0HNJ43UEARDT0" started.
2026-02-04 22:00:10.285 +03:00 [DBG] Connection id "0HNJ43UEARDT1" accepted.
2026-02-04 22:00:10.286 +03:00 [DBG] Connection id "0HNJ43UEARDT1" started.
2026-02-04 22:00:10.286 +03:00 [DBG] Connection id "0HNJ43UEARDT0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:00:10.287 +03:00 [DBG] Connection id "0HNJ43UEARDT0" disconnecting.
2026-02-04 22:00:10.288 +03:00 [DBG] Connection id "0HNJ43UEARDT0" stopped.
2026-02-04 22:00:10.289 +03:00 [DBG] Connection id "0HNJ43UEARDT1" bad request data: "Detected a TLS handshake to an endpoint that does not have TLS enabled."
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Detected a TLS handshake to an endpoint that does not have TLS enabled.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethodLength(ReadOnlySpan`1 span)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySpan`1 requestLine)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2026-02-04 22:00:10.296 +03:00 [DBG] Connection id "0HNJ43UEARDT1" disconnecting.
2026-02-04 22:00:10.296 +03:00 [DBG] Connection id "0HNJ43UEARDT1" received FIN.
2026-02-04 22:00:10.296 +03:00 [DBG] Connection id "0HNJ43UEARDT1" stopped.
2026-02-04 22:00:10.298 +03:00 [DBG] Connection id "0HNJ43UEARDT1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:03:38.959 +03:00 [DBG] Connection id "0HNJ43UEARDT2" received FIN.
2026-02-04 22:03:38.963 +03:00 [DBG] Connection id "0HNJ43UEARDT2" accepted.
2026-02-04 22:03:38.963 +03:00 [DBG] Connection id "0HNJ43UEARDT2" started.
2026-02-04 22:03:38.964 +03:00 [DBG] Connection id "0HNJ43UEARDT2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:03:38.966 +03:00 [DBG] Connection id "0HNJ43UEARDT3" accepted.
2026-02-04 22:03:38.967 +03:00 [DBG] Connection id "0HNJ43UEARDT2" disconnecting.
2026-02-04 22:03:38.968 +03:00 [DBG] Connection id "0HNJ43UEARDT3" started.
2026-02-04 22:03:38.968 +03:00 [DBG] Connection id "0HNJ43UEARDT2" stopped.
2026-02-04 22:03:38.969 +03:00 [DBG] Connection id "0HNJ43UEARDT3" bad request data: "Detected a TLS handshake to an endpoint that does not have TLS enabled."
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Detected a TLS handshake to an endpoint that does not have TLS enabled.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethodLength(ReadOnlySpan`1 span)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySpan`1 requestLine)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2026-02-04 22:03:38.971 +03:00 [DBG] Connection id "0HNJ43UEARDT3" disconnecting.
2026-02-04 22:03:38.972 +03:00 [DBG] Connection id "0HNJ43UEARDT3" received FIN.
2026-02-04 22:03:38.972 +03:00 [DBG] Connection id "0HNJ43UEARDT3" stopped.
2026-02-04 22:03:38.973 +03:00 [DBG] Connection id "0HNJ43UEARDT3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:03:41.496 +03:00 [DBG] Connection id "0HNJ43UEARDT4" accepted.
2026-02-04 22:03:41.496 +03:00 [DBG] Connection id "0HNJ43UEARDT4" received FIN.
2026-02-04 22:03:41.497 +03:00 [DBG] Connection id "0HNJ43UEARDT4" started.
2026-02-04 22:03:41.497 +03:00 [DBG] Connection id "0HNJ43UEARDT5" accepted.
2026-02-04 22:03:41.500 +03:00 [DBG] Connection id "0HNJ43UEARDT4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:03:41.501 +03:00 [DBG] Connection id "0HNJ43UEARDT5" started.
2026-02-04 22:03:41.502 +03:00 [DBG] Connection id "0HNJ43UEARDT4" disconnecting.
2026-02-04 22:03:41.503 +03:00 [DBG] Connection id "0HNJ43UEARDT5" bad request data: "Detected a TLS handshake to an endpoint that does not have TLS enabled."
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Detected a TLS handshake to an endpoint that does not have TLS enabled.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethodLength(ReadOnlySpan`1 span)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySpan`1 requestLine)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(SequenceReader`1& reader)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2026-02-04 22:03:41.503 +03:00 [DBG] Connection id "0HNJ43UEARDT4" stopped.
2026-02-04 22:03:41.505 +03:00 [DBG] Connection id "0HNJ43UEARDT5" disconnecting.
2026-02-04 22:03:41.505 +03:00 [DBG] Connection id "0HNJ43UEARDT5" received FIN.
2026-02-04 22:03:41.506 +03:00 [DBG] Connection id "0HNJ43UEARDT5" stopped.
2026-02-04 22:03:41.507 +03:00 [DBG] Connection id "0HNJ43UEARDT5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:05:16.952 +03:00 [DBG] Connection id "0HNJ43UEARDT6" received FIN.
2026-02-04 22:05:16.955 +03:00 [DBG] Connection id "0HNJ43UEARDT6" accepted.
2026-02-04 22:05:16.956 +03:00 [DBG] Connection id "0HNJ43UEARDT6" started.
2026-02-04 22:05:16.957 +03:00 [DBG] Connection id "0HNJ43UEARDT7" accepted.
2026-02-04 22:05:16.960 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:05:16.960 +03:00 [DBG] Connection id "0HNJ43UEARDT7" started.
2026-02-04 22:05:16.962 +03:00 [DBG] Connection id "0HNJ43UEARDT6" stopped.
2026-02-04 22:05:16.963 +03:00 [DBG] Connection id "0HNJ43UEARDT6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:05:16.965 +03:00 [DBG] Connection 0HNJ43UEARDT7 established using the following protocol: "Tls13"
2026-02-04 22:05:16.967 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - null null
2026-02-04 22:05:16.971 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-04 22:05:16.973 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-04 22:05:16.974 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:05:16.975 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:05:16.976 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:05:16.978 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:05:16.991 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:05:16.993 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:05:16.994 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:05:16.995 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:05:16.996 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:05:16.997 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:05:16.998 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:05:17.055 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 22:05:17.060 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:05:17.064 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:05:17.066 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:05:17.067 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:05:17.068 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:05:17.069 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:05:17.072 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:05:17.073 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:05:17.074 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:05:17.076 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:05:17.076 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:05:17.077 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:05:17.078 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:05:17.090 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 22:05:17.092 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-04 22:05:17.380 +03:00 [INF] Received HTTP response headers after 286.3742ms - 200
2026-02-04 22:05:17.381 +03:00 [INF] End processing HTTP request after 291.3722ms - 200
2026-02-04 22:05:17.391 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 22:05:17.391 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 22:05:17.687 +03:00 [INF] Received HTTP response headers after 294.9183ms - 200
2026-02-04 22:05:17.688 +03:00 [INF] End processing HTTP request after 297.1229ms - 200
2026-02-04 22:05:17.918 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:05:17.934 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:05:17.959 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:05:17.962 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:05:17.964 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:05:17.972 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:05:18.005 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:05:18.010 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 22:05:18.012 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:05:18.018 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:05:18.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:05:18.025 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:05:18.027 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-04 22:05:18.031 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:05:18.044 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:05:18.054 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:05:18.059 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:05:18.063 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 15ms reading results.
2026-02-04 22:05:18.065 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:05:18.067 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 22:05:18.073 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:05:18.074 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:05:18.077 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:05:18.079 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:05:18.080 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:05:18.080 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:05:18.081 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:05:18.082 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 22:05:18.088 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1089.1313ms
2026-02-04 22:05:18.089 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:05:18.090 +03:00 [DBG] Connection id "0HNJ43UEARDT7" completed keep alive response.
2026-02-04 22:05:18.092 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:05:18.094 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:05:18.095 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 22:05:18.096 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - 200 null application/json; charset=utf-8 1129.5819ms
2026-02-04 22:05:40.029 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - null null
2026-02-04 22:05:40.031 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-04 22:05:40.032 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-04 22:05:40.033 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:05:40.033 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:05:40.034 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:05:40.034 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:05:40.035 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:05:40.036 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:05:40.037 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:05:40.038 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:05:40.039 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:05:40.040 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:05:40.040 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:05:40.042 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:05:40.043 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:05:40.044 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:05:40.045 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:05:40.045 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:05:40.046 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:05:40.047 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:05:40.048 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:05:40.048 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:05:40.049 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:05:40.050 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:05:40.051 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:05:40.051 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:05:40.081 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:05:40.083 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:05:40.084 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:05:40.085 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:05:40.086 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:05:40.087 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:05:40.088 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:05:40.088 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:05:40.089 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:05:40.090 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:05:40.091 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:05:40.091 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:05:40.092 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:05:40.093 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:05:40.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:05:40.095 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:05:40.096 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:05:40.098 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:05:40.101 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:05:40.101 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:05:40.102 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:05:40.103 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:05:40.104 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:05:40.105 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:05:40.106 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:05:40.106 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:05:40.106 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:05:40.107 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 22:05:40.108 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 67.7949ms
2026-02-04 22:05:40.109 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:05:40.110 +03:00 [DBG] Connection id "0HNJ43UEARDT7" completed keep alive response.
2026-02-04 22:05:40.110 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:05:40.111 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:05:40.111 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:05:40.112 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - 200 null application/json; charset=utf-8 83.1167ms
2026-02-04 22:06:17.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-04 22:06:17.911 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-04 22:06:17.911 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-04 22:06:17.912 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:06:17.913 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:06:17.913 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:06:17.914 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:06:17.917 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:06:17.919 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:06:17.919 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:06:17.920 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:06:17.921 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:06:17.922 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:06:17.923 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:06:17.926 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:06:17.927 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:06:17.928 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:06:17.929 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:06:17.929 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:06:17.930 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:06:17.931 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:06:17.935 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-04 22:06:17.935 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-04 22:06:17.996 +03:00 [INF] Received HTTP response headers after 60.06ms - 200
2026-02-04 22:06:17.997 +03:00 [INF] End processing HTTP request after 62.1677ms - 200
2026-02-04 22:06:17.998 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 22:06:17.999 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-04 22:06:18.229 +03:00 [INF] Received HTTP response headers after 229.918ms - 200
2026-02-04 22:06:18.230 +03:00 [INF] End processing HTTP request after 232.1529ms - 200
2026-02-04 22:06:18.239 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:06:18.240 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:06:18.241 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:06:18.242 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:06:18.243 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:06:18.243 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:06:18.244 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:06:18.245 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:06:18.245 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:06:18.246 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:06:18.247 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:06:18.247 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:06:18.248 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:06:18.249 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:06:18.250 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:06:18.251 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:06:18.252 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:06:18.253 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:06:18.254 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:06:18.255 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:06:18.256 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:06:18.257 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:06:18.257 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:06:18.259 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:06:18.259 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:06:18.259 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:06:18.260 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:06:18.261 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 22:06:18.262 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 339.537ms
2026-02-04 22:06:18.263 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:06:18.264 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:06:18.264 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:06:18.265 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:06:18.266 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 360.822ms
2026-02-04 22:06:49.469 +03:00 [DBG] Connection id "0HNJ43UEARDT8" accepted.
2026-02-04 22:06:49.469 +03:00 [DBG] Connection id "0HNJ43UEARDT8" received FIN.
2026-02-04 22:06:49.470 +03:00 [DBG] Connection id "0HNJ43UEARDT8" started.
2026-02-04 22:06:49.473 +03:00 [DBG] Connection id "0HNJ43UEARDT9" accepted.
2026-02-04 22:06:49.476 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:06:49.476 +03:00 [DBG] Connection id "0HNJ43UEARDT9" started.
2026-02-04 22:06:49.477 +03:00 [DBG] Connection id "0HNJ43UEARDT8" stopped.
2026-02-04 22:06:49.478 +03:00 [DBG] Connection id "0HNJ43UEARDT8" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:06:49.479 +03:00 [DBG] Connection 0HNJ43UEARDT9 established using the following protocol: "Tls13"
2026-02-04 22:06:49.480 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - null null
2026-02-04 22:06:49.482 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-04 22:06:49.482 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-04 22:06:49.483 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:06:49.483 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:06:49.484 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:06:49.484 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:06:49.485 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:06:49.486 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:06:49.487 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:06:49.488 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:06:49.489 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:06:49.489 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:06:49.490 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:06:49.491 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:06:49.492 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:06:49.492 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:06:49.493 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:06:49.494 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:06:49.495 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:06:49.496 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:06:49.496 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:06:49.497 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:06:49.498 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:06:49.498 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:06:49.499 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:06:49.500 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:06:49.501 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:06:49.502 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:06:49.503 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:06:49.504 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:06:49.504 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:06:49.505 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:06:49.506 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:06:49.506 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:06:49.507 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:06:49.508 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:06:49.508 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:06:49.509 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:06:49.510 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:06:49.510 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:06:49.511 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:06:49.512 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:06:49.514 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:06:49.515 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:06:49.516 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:06:49.516 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:06:49.517 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:06:49.518 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:06:49.519 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:06:49.520 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:06:49.520 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:06:49.521 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:06:49.521 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:06:49.522 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 22:06:49.523 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.6846ms
2026-02-04 22:06:49.524 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:06:49.524 +03:00 [DBG] Connection id "0HNJ43UEARDT9" completed keep alive response.
2026-02-04 22:06:49.525 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:06:49.526 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:06:49.526 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:06:49.527 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Moscow?date=2026-02-04 - 200 null application/json; charset=utf-8 47.1614ms
2026-02-04 22:07:17.090 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 22:07:27.096 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:07:27.098 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0318ms - processed: 0 items - remaining: 1 items
2026-02-04 22:07:37.110 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:07:37.111 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 22:07:47.122 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:07:47.123 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 22:07:52.882 +03:00 [DBG] Connection id "0HNJ43UEARDTA" received FIN.
2026-02-04 22:07:52.885 +03:00 [DBG] Connection id "0HNJ43UEARDTA" accepted.
2026-02-04 22:07:52.886 +03:00 [DBG] Connection id "0HNJ43UEARDTA" started.
2026-02-04 22:07:52.887 +03:00 [DBG] Connection id "0HNJ43UEARDTB" accepted.
2026-02-04 22:07:52.890 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:07:52.890 +03:00 [DBG] Connection id "0HNJ43UEARDTB" started.
2026-02-04 22:07:52.891 +03:00 [DBG] Connection id "0HNJ43UEARDTA" stopped.
2026-02-04 22:07:52.893 +03:00 [DBG] Connection id "0HNJ43UEARDTA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:07:52.894 +03:00 [DBG] Connection 0HNJ43UEARDTB established using the following protocol: "Tls13"
2026-02-04 22:07:52.895 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-04 22:07:52.896 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-04 22:07:52.897 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-04 22:07:52.898 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:07:52.898 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:07:52.899 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:07:52.899 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:07:52.900 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:07:52.901 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:07:52.901 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:07:52.902 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:07:52.903 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:07:52.904 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:07:52.905 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:07:52.906 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:07:52.906 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:07:52.907 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:07:52.908 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:07:52.909 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:07:52.909 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:07:52.910 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:07:52.911 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:07:52.912 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:07:52.913 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:07:52.913 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:07:52.914 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:07:52.914 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:07:52.915 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:07:52.916 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:07:52.916 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:07:52.917 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:07:52.917 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:07:52.918 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:07:52.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:07:52.919 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:07:52.920 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:07:52.922 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:07:52.923 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:07:52.924 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:07:52.925 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:07:52.926 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:07:52.927 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:07:52.928 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:07:52.928 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:07:52.929 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:07:52.930 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:07:52.930 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:07:52.931 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:07:52.931 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 22:07:52.932 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.2073ms
2026-02-04 22:07:52.933 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:07:52.933 +03:00 [DBG] Connection id "0HNJ43UEARDTB" completed keep alive response.
2026-02-04 22:07:52.934 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:07:52.934 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:07:52.935 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:07:52.936 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 40.7532ms
2026-02-04 22:07:57.130 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:07:57.131 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 22:08:01.342 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-04 22:08:01.343 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-04 22:08:01.344 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-04 22:08:01.345 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:08:01.346 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:08:01.346 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:08:01.346 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:08:01.347 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:08:01.348 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:08:01.349 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:08:01.349 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:08:01.350 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:08:01.351 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:08:01.352 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:08:01.353 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:08:01.353 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:08:01.354 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:08:01.355 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:08:01.356 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:08:01.357 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:08:01.357 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:08:01.358 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:08:01.360 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:08:01.360 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:08:01.361 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:08:01.362 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:08:01.362 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:08:01.363 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:08:01.364 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:08:01.364 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:08:01.365 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:08:01.366 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:08:01.367 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:08:01.367 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:08:01.368 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:08:01.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:08:01.370 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:08:01.372 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:08:01.372 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:08:01.373 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:08:01.374 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:08:01.375 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:08:01.376 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:08:01.377 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:08:01.378 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:08:01.379 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:08:01.379 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:08:01.380 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:08:01.380 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-04 22:08:01.381 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 29.5289ms
2026-02-04 22:08:01.382 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-04 22:08:01.383 +03:00 [DBG] Connection id "0HNJ43UEARDTB" completed keep alive response.
2026-02-04 22:08:01.384 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:08:01.385 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:08:01.386 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:08:01.387 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 44.8704ms
2026-02-04 22:08:07.137 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:08:07.138 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 22:08:17.145 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:08:17.146 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 22:08:20.704 +03:00 [DBG] Connection id "0HNJ43UEARDSV" received FIN.
2026-02-04 22:08:20.706 +03:00 [DBG] Connection id "0HNJ43UEARDSV" is closed. The last processed stream ID was 9.
2026-02-04 22:08:20.707 +03:00 [DBG] The connection queue processing loop for 0HNJ43UEARDSV completed.
2026-02-04 22:08:20.707 +03:00 [DBG] Connection id "0HNJ43UEARDSV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:08:20.714 +03:00 [DBG] Connection id "0HNJ43UEARDSV" stopped.
2026-02-04 22:08:27.154 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:08:27.155 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2026-02-04 22:08:37.159 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:08:37.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5334ms - processed: 0 items - remaining: 1 items
2026-02-04 22:08:47.163 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:08:47.164 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 22:08:57.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:08:57.173 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 22:09:07.183 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:09:07.184 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-04 22:09:17.186 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:09:17.187 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 22:09:24.527 +03:00 [DBG] Connection id "0HNJ43UEARDTC" accepted.
2026-02-04 22:09:24.530 +03:00 [DBG] Connection id "0HNJ43UEARDTC" started.
2026-02-04 22:09:24.537 +03:00 [DBG] Connection 0HNJ43UEARDTC established using the following protocol: "Tls13"
2026-02-04 22:09:24.540 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 22:09:24.544 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 22:09:24.545 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 22:09:24.546 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:09:24.546 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:09:24.547 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:09:24.547 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:09:24.550 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 22:09:24.551 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:09:24.552 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:09:24.553 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:09:24.554 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:09:24.554 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:09:24.555 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:09:24.556 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:09:24.557 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:09:24.558 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 22:09:24.559 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:09:24.559 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:09:24.560 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:09:24.561 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:09:24.561 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:09:24.562 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 22:09:24.563 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:09:24.564 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:09:24.564 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:09:24.565 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:09:24.566 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 22:09:24.566 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 22:09:24.567 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 22:09:24.568 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 22:09:24.569 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 22:09:24.569 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 22:09:24.575 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:09:24.593 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 22:09:24.695 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 22:09:24.708 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:09:24.708 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:09:24.709 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:09:24.710 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:09:24.710 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:09:24.711 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:09:24.712 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:09:24.712 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 22:09:24.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 22:09:24.716 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:09:24.717 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:09:24.718 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:09:24.719 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:09:24.720 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:09:24.721 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:09:24.721 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:09:24.722 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:09:24.722 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:09:24.723 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 22:09:24.724 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 169.0005ms
2026-02-04 22:09:24.725 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:09:24.726 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:09:24.726 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:09:24.727 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:09:24.728 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 188.1206ms
2026-02-04 22:09:27.191 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:09:27.191 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 22:09:37.196 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:09:37.196 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 22:09:44.823 +03:00 [DBG] Connection id "0HNJ43UEARDTD" received FIN.
2026-02-04 22:09:44.824 +03:00 [DBG] Connection id "0HNJ43UEARDTD" accepted.
2026-02-04 22:09:44.824 +03:00 [DBG] Connection id "0HNJ43UEARDTD" started.
2026-02-04 22:09:44.825 +03:00 [DBG] Connection id "0HNJ43UEARDTE" accepted.
2026-02-04 22:09:44.828 +03:00 [DBG] Connection id "0HNJ43UEARDTE" started.
2026-02-04 22:09:44.829 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:09:44.831 +03:00 [DBG] Connection id "0HNJ43UEARDTD" stopped.
2026-02-04 22:09:44.831 +03:00 [DBG] Connection 0HNJ43UEARDTE established using the following protocol: "Tls13"
2026-02-04 22:09:44.831 +03:00 [DBG] Connection id "0HNJ43UEARDTD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:09:44.832 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 22:09:44.835 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 22:09:44.836 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 22:09:44.836 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:09:44.837 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:09:44.838 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:09:44.838 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:09:44.839 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 22:09:44.840 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:09:44.840 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:09:44.841 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:09:44.842 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:09:44.843 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:09:44.844 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:09:44.844 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:09:44.845 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:09:44.846 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 22:09:44.847 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:09:44.847 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:09:44.848 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:09:44.849 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:09:44.850 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:09:44.851 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 22:09:44.852 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:09:44.852 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:09:44.853 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:09:44.854 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:09:44.854 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 22:09:44.855 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 22:09:44.856 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 22:09:44.857 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 22:09:44.857 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 22:09:44.858 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 22:09:44.859 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:09:44.862 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:09:44.863 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:09:44.863 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:09:44.864 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:09:44.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:09:44.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:09:44.866 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:09:44.867 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 22:09:44.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 22:09:44.869 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:09:44.870 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 22:09:44.871 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:09:44.872 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:09:44.872 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:09:44.874 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:09:44.874 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:09:44.874 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:09:44.875 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:09:44.876 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 22:09:44.876 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 32.7777ms
2026-02-04 22:09:44.877 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:09:44.878 +03:00 [DBG] Connection id "0HNJ43UEARDTE" completed keep alive response.
2026-02-04 22:09:44.878 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:09:44.879 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:09:44.880 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:09:44.881 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 48.5585ms
2026-02-04 22:09:47.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:09:47.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 22:09:57.218 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:09:57.219 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-04 22:10:02.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-04 22:10:02.007 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-04 22:10:02.007 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-04 22:10:02.008 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 22:10:02.009 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:10:02.010 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:10:02.010 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 22:10:02.013 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 22:10:02.014 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:10:02.015 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:10:02.016 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:10:02.017 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:10:02.018 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:10:02.018 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:10:02.019 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:10:02.020 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:10:02.021 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 22:10:02.021 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:10:02.022 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:10:02.023 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:10:02.023 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:10:02.024 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:10:02.025 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 22:10:02.025 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:10:02.026 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:10:02.027 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:10:02.027 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:10:02.028 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 22:10:02.028 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 22:10:02.029 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 22:10:02.030 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 22:10:02.031 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 22:10:02.031 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 22:10:02.032 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 22:10:02.033 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 22:10:02.034 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 22:10:02.034 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 22:10:02.035 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 22:10:02.035 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 22:10:02.037 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:10:02.039 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-04 22:10:02.043 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-04 22:10:02.046 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:10:02.046 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:10:02.047 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:10:02.048 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:02.048 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:10:02.049 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:10:02.050 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:10:02.051 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 22:10:02.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 22:10:02.053 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:02.054 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 22:10:02.054 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:02.055 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:10:02.056 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-04 22:10:02.071 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 22:10:02.072 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:10:02.073 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:02.073 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:10:02.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:10:02.074 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:10:02.075 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 22:10:02.076 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 22:10:02.078 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.079 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.080 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.081 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.081 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.082 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.083 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.084 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.084 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.085 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:02.086 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:02.086 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 9ms reading results.
2026-02-04 22:10:02.087 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:02.088 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:10:02.089 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:10:02.090 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:10:02.090 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:10:02.091 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:10:02.091 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:10:02.092 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 22:10:02.099 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 80.287ms
2026-02-04 22:10:02.100 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 22:10:02.100 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:10:02.101 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:10:02.102 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:10:02.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 97.413ms
2026-02-04 22:10:07.221 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:10:07.222 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-04 22:10:17.223 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:10:17.224 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-04 22:10:27.240 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:10:27.241 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-04 22:10:29.238 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-04 22:10:29.239 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-04 22:10:29.240 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-04 22:10:29.241 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 22:10:29.241 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:10:29.242 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:10:29.242 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 22:10:29.243 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 22:10:29.244 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:10:29.244 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:10:29.245 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:10:29.246 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:10:29.247 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:10:29.248 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:10:29.249 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:10:29.249 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:10:29.250 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 22:10:29.251 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:10:29.252 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:10:29.253 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:10:29.254 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:10:29.254 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:10:29.255 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 22:10:29.256 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:10:29.257 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:10:29.257 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:10:29.258 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:10:29.259 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-04 22:10:29.260 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-04 22:10:29.260 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 22:10:29.261 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-04 22:10:29.262 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-04 22:10:29.262 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-04 22:10:29.263 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 22:10:29.264 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-04 22:10:29.265 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 22:10:29.266 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-04 22:10:29.266 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-04 22:10:29.267 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-04 22:10:29.268 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:10:29.269 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:10:29.270 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:10:29.270 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:10:29.271 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:29.272 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:10:29.272 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:10:29.273 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:10:29.274 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 22:10:29.275 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-04 22:10:29.276 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:29.277 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-04 22:10:29.278 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:29.278 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:10:29.279 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:10:29.280 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:29.281 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:10:29.281 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:10:29.282 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:10:29.283 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 22:10:29.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-04 22:10:29.285 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.286 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.287 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.287 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.288 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.289 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.290 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.290 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.291 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.292 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:10:29.292 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:29.293 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-04 22:10:29.294 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:10:29.294 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:10:29.295 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:10:29.296 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:10:29.297 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:10:29.297 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:10:29.298 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:10:29.299 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-04 22:10:29.300 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 51.8501ms
2026-02-04 22:10:29.300 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-04 22:10:29.301 +03:00 [DBG] Connection id "0HNJ43UEARDTE" completed keep alive response.
2026-02-04 22:10:29.302 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:10:29.302 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:10:29.303 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:10:29.304 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 66.1331ms
2026-02-04 22:10:37.247 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:10:37.248 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-04 22:10:47.264 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:10:47.264 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 22:10:57.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:10:57.275 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 22:11:07.281 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:11:07.282 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 22:11:17.290 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:11:17.292 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5151ms - processed: 0 items - remaining: 1 items
2026-02-04 22:11:27.306 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:11:27.307 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-04 22:11:37.309 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:11:37.310 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-04 22:11:39.816 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/snow.png - null null
2026-02-04 22:11:39.825 +03:00 [DBG] No candidates found for the request path '/static/icons/snow.png'
2026-02-04 22:11:39.826 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:11:39.831 +03:00 [INF] Sending file. Request path: '/snow.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\snow.png'
2026-02-04 22:11:39.835 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/snow.png - 200 1360 image/png 18.3876ms
2026-02-04 22:11:45.784 +03:00 [DBG] Connection id "0HNJ43UEARDTF" received FIN.
2026-02-04 22:11:45.784 +03:00 [DBG] Connection id "0HNJ43UEARDTF" accepted.
2026-02-04 22:11:45.785 +03:00 [DBG] Connection id "0HNJ43UEARDTF" started.
2026-02-04 22:11:45.785 +03:00 [DBG] Connection id "0HNJ43UEARDTG" accepted.
2026-02-04 22:11:45.786 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:11:45.786 +03:00 [DBG] Connection id "0HNJ43UEARDTG" started.
2026-02-04 22:11:45.788 +03:00 [DBG] Connection id "0HNJ43UEARDTF" stopped.
2026-02-04 22:11:45.789 +03:00 [DBG] Connection id "0HNJ43UEARDTF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:11:45.790 +03:00 [DBG] Connection 0HNJ43UEARDTG established using the following protocol: "Tls13"
2026-02-04 22:11:45.791 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/static/icons/snow.png - null null
2026-02-04 22:11:45.792 +03:00 [DBG] No candidates found for the request path '/static/icons/snow.png'
2026-02-04 22:11:45.793 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:11:45.798 +03:00 [INF] Sending file. Request path: '/snow.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\snow.png'
2026-02-04 22:11:45.798 +03:00 [DBG] Connection id "0HNJ43UEARDTG" completed keep alive response.
2026-02-04 22:11:45.799 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/static/icons/snow.png - 200 1360 image/png 8.2283ms
2026-02-04 22:11:47.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:11:47.325 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-04 22:11:57.335 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:11:57.336 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-04 22:12:07.351 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:12:07.352 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 22:12:17.355 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:12:17.356 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-04 22:12:27.361 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:12:27.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-04 22:12:37.370 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:12:37.370 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-04 22:12:47.374 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:12:47.375 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 22:12:47.474 +03:00 [DBG] Connection id "0HNJ43UEARDTH" accepted.
2026-02-04 22:12:47.474 +03:00 [DBG] Connection id "0HNJ43UEARDTH" received FIN.
2026-02-04 22:12:47.475 +03:00 [DBG] Connection id "0HNJ43UEARDTH" started.
2026-02-04 22:12:47.477 +03:00 [DBG] Connection id "0HNJ43UEARDTI" accepted.
2026-02-04 22:12:47.479 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:12:47.480 +03:00 [DBG] Connection id "0HNJ43UEARDTI" started.
2026-02-04 22:12:47.481 +03:00 [DBG] Connection id "0HNJ43UEARDTH" stopped.
2026-02-04 22:12:47.482 +03:00 [DBG] Connection id "0HNJ43UEARDTH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:12:47.483 +03:00 [DBG] Connection 0HNJ43UEARDTI established using the following protocol: "Tls13"
2026-02-04 22:12:47.484 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/static/icons/rain.png - null null
2026-02-04 22:12:47.485 +03:00 [DBG] No candidates found for the request path '/static/icons/rain.png'
2026-02-04 22:12:47.486 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:12:47.487 +03:00 [INF] Sending file. Request path: '/rain.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\rain.png'
2026-02-04 22:12:47.488 +03:00 [DBG] Connection id "0HNJ43UEARDTI" completed keep alive response.
2026-02-04 22:12:47.489 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/static/icons/rain.png - 200 2321 image/png 4.7105ms
2026-02-04 22:12:57.379 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:12:57.380 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-04 22:13:07.383 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:13:07.383 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-04 22:13:17.386 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:13:17.386 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-04 22:13:27.389 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:13:27.390 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:13:37.393 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:13:37.394 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-04 22:13:47.403 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:13:47.404 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:13:57.411 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:13:57.412 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 22:14:07.415 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:14:07.416 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 22:14:17.430 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:14:17.431 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-04 22:14:27.444 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:14:27.445 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-04 22:14:31.367 +03:00 [DBG] Connection id "0HNJ43UEARDTJ" received FIN.
2026-02-04 22:14:31.368 +03:00 [DBG] Connection id "0HNJ43UEARDTJ" accepted.
2026-02-04 22:14:31.368 +03:00 [DBG] Connection id "0HNJ43UEARDTJ" started.
2026-02-04 22:14:31.369 +03:00 [DBG] Connection id "0HNJ43UEARDTK" accepted.
2026-02-04 22:14:31.373 +03:00 [DBG] Connection id "0HNJ43UEARDTK" started.
2026-02-04 22:14:31.373 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:14:31.375 +03:00 [DBG] Connection id "0HNJ43UEARDTJ" stopped.
2026-02-04 22:14:31.376 +03:00 [DBG] Connection id "0HNJ43UEARDTJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:14:31.378 +03:00 [DBG] Connection 0HNJ43UEARDTK established using the following protocol: "Tls13"
2026-02-04 22:14:31.380 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - null null
2026-02-04 22:14:31.382 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 22:14:31.382 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 22:14:31.383 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:14:31.384 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:14:31.384 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:14:31.385 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:14:31.385 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:14:31.386 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:14:31.387 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:14:31.388 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:14:31.389 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:14:31.390 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:14:31.391 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:14:31.391 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:14:31.392 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:14:31.393 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:14:31.394 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:14:31.395 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:14:31.395 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:14:31.396 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:14:31.397 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:14:31.397 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:14:31.398 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:14:31.399 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:14:31.399 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:14:31.400 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:14:31.402 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 22:14:31.402 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 22:14:31.697 +03:00 [INF] Received HTTP response headers after 294.2982ms - 200
2026-02-04 22:14:31.698 +03:00 [INF] End processing HTTP request after 296.3721ms - 200
2026-02-04 22:14:31.699 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 22:14:31.699 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-04&end_date=2026-02-04
2026-02-04 22:14:31.993 +03:00 [INF] Received HTTP response headers after 293.0134ms - 200
2026-02-04 22:14:31.994 +03:00 [INF] End processing HTTP request after 295.5611ms - 200
2026-02-04 22:14:31.996 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:14:31.997 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:14:31.998 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:14:31.999 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:14:32.000 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:14:32.001 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:14:32.001 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:14:32.002 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:14:32.003 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:14:32.003 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:14:32.004 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:14:32.005 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:14:32.005 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:14:32.006 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:14:32.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:14:32.009 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:14:32.010 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:14:32.011 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:14:32.012 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:14:32.013 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:14:32.014 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:14:32.015 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:14:32.015 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:14:32.016 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:14:32.017 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:14:32.017 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:14:32.018 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:14:32.018 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 22:14:32.019 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 628.4764ms
2026-02-04 22:14:32.020 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:14:32.020 +03:00 [DBG] Connection id "0HNJ43UEARDTK" completed keep alive response.
2026-02-04 22:14:32.021 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:14:32.022 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:14:32.022 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:14:32.023 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-04 - 200 null application/json; charset=utf-8 642.7695ms
2026-02-04 22:14:37.446 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:14:37.447 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 22:14:41.578 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-04 22:14:41.580 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 22:14:41.580 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 22:14:41.581 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:14:41.582 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:14:41.582 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:14:41.583 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:14:41.583 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:14:41.584 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:14:41.585 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:14:41.586 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:14:41.587 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:14:41.588 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:14:41.588 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:14:41.589 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:14:41.590 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:14:41.591 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:14:41.591 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:14:41.592 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:14:41.593 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:14:41.594 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:14:41.594 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:14:41.595 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:14:41.596 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:14:41.596 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:14:41.597 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:14:41.598 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:14:41.599 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 22:14:41.599 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-04 22:14:41.667 +03:00 [INF] Received HTTP response headers after 67.4969ms - 200
2026-02-04 22:14:41.668 +03:00 [INF] End processing HTTP request after 69.7028ms - 200
2026-02-04 22:14:41.669 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-04 22:14:41.670 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-04 22:14:41.730 +03:00 [INF] Received HTTP response headers after 59.3808ms - 200
2026-02-04 22:14:41.730 +03:00 [INF] End processing HTTP request after 61.4606ms - 200
2026-02-04 22:14:41.732 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:14:41.733 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:14:41.734 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:14:41.734 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-04 22:14:41.735 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-04 22:14:41.735 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-04 22:14:41.736 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:14:41.737 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-04 22:14:41.737 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:14:41.738 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:14:41.738 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:14:41.739 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-04 22:14:41.740 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-04 22:14:41.740 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:14:41.741 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-04 22:14:41.743 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-04 22:14:41.744 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:14:41.745 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-04 22:14:41.746 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:14:41.746 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:14:41.747 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-04 22:14:41.748 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-04 22:14:41.749 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:14:41.750 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:14:41.750 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:14:41.751 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:14:41.751 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:14:41.752 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-04 22:14:41.752 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 163.8876ms
2026-02-04 22:14:41.753 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:14:41.754 +03:00 [DBG] Connection id "0HNJ43UEARDTK" completed keep alive response.
2026-02-04 22:14:41.754 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:14:41.755 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:14:41.756 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-04 22:14:41.756 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 178.0497ms
2026-02-04 22:14:47.447 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:14:47.447 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:14:57.461 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:14:57.463 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4259ms - processed: 0 items - remaining: 1 items
2026-02-04 22:15:07.469 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:15:07.470 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-04 22:15:17.485 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:15:17.486 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:15:27.493 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:15:27.494 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:15:37.502 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:15:37.503 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-04 22:15:47.508 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:15:47.509 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:15:57.520 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:15:57.521 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-04 22:16:07.536 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:16:07.537 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-04 22:16:17.549 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:16:17.550 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-04 22:16:27.561 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-04 22:16:27.562 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-04 22:16:31.406 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 22:16:37.563 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:16:37.564 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-04 22:16:47.574 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:16:47.575 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 22:16:57.584 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:16:57.585 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.421ms - processed: 0 items - remaining: 2 items
2026-02-04 22:17:07.590 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:17:07.591 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-04 22:17:17.594 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:17:17.595 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-04 22:17:27.607 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:17:27.608 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 2 items
2026-02-04 22:17:37.614 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:17:37.615 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 22:17:47.618 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:17:47.618 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 2 items
2026-02-04 22:17:57.633 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:17:57.634 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:18:07.646 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:18:07.646 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-04 22:18:17.660 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:18:17.661 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-04 22:18:27.667 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:18:27.668 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 22:18:37.671 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:18:37.672 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 22:18:47.687 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:18:47.688 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 2 items
2026-02-04 22:18:57.691 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:18:57.692 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 2 items
2026-02-04 22:19:07.708 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:19:07.709 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:19:17.721 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:19:17.722 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-04 22:19:27.723 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:19:27.724 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:19:37.735 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:19:37.735 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:19:47.743 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:19:47.744 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-04 22:19:57.748 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:19:57.749 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 22:20:07.683 +03:00 [DBG] Connection id "0HNJ43UEARDTL" accepted.
2026-02-04 22:20:07.684 +03:00 [DBG] Connection id "0HNJ43UEARDTL" received FIN.
2026-02-04 22:20:07.687 +03:00 [DBG] Connection id "0HNJ43UEARDTM" accepted.
2026-02-04 22:20:07.688 +03:00 [DBG] Connection id "0HNJ43UEARDTL" started.
2026-02-04 22:20:07.691 +03:00 [DBG] Connection id "0HNJ43UEARDTM" started.
2026-02-04 22:20:07.692 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:20:07.695 +03:00 [DBG] Connection id "0HNJ43UEARDTL" stopped.
2026-02-04 22:20:07.695 +03:00 [DBG] Connection 0HNJ43UEARDTM established using the following protocol: "Tls13"
2026-02-04 22:20:07.696 +03:00 [DBG] Connection id "0HNJ43UEARDTL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:20:07.697 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-04 22:20:07.699 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-04 22:20:07.700 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-04 22:20:07.701 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:20:07.702 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:20:07.703 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:20:07.704 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:20:07.704 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:20:07.706 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:20:07.707 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:20:07.708 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:20:07.709 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:20:07.710 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:20:07.712 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:20:07.713 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:20:07.714 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:20:07.715 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:20:07.716 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:20:07.717 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:20:07.717 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:20:07.718 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:20:07.719 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:20:07.720 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:20:07.722 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:20:07.723 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:20:07.724 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:20:07.725 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:20:07.726 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-04 22:20:07.727 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-04 22:20:07.752 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:20:07.753 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-04 22:20:08.066 +03:00 [INF] Received HTTP response headers after 338.6931ms - 200
2026-02-04 22:20:08.067 +03:00 [INF] End processing HTTP request after 341.41ms - 200
2026-02-04 22:20:08.069 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-04 22:20:08.122 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 410.8462ms
2026-02-04 22:20:08.123 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:20:08.151 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 22:20:08.160 +03:00 [DBG] Connection id "0HNJ43UEARDTM" completed keep alive response.
2026-02-04 22:20:08.160 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json 463.7033ms
2026-02-04 22:20:17.767 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:20:17.768 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:20:27.777 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:20:27.778 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:20:37.785 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:20:37.785 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 2 items
2026-02-04 22:20:47.786 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:20:47.786 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:20:57.797 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:20:57.798 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-04 22:21:07.801 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:21:07.802 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-04 22:21:17.809 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:21:17.809 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 22:21:27.824 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:21:27.825 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 22:21:37.833 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:21:37.834 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-04 22:21:47.835 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:21:47.835 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-04 22:21:57.849 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-04 22:21:57.850 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-04 22:22:07.730 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-04 22:22:07.855 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:22:07.856 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:22:17.858 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:22:17.859 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:22:27.862 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:22:27.863 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:22:37.877 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:22:37.878 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:22:47.892 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:22:47.893 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:22:57.507 +03:00 [DBG] Connection id "0HNJ43UEARDTN" received FIN.
2026-02-04 22:22:57.511 +03:00 [DBG] Connection id "0HNJ43UEARDTN" accepted.
2026-02-04 22:22:57.511 +03:00 [DBG] Connection id "0HNJ43UEARDTN" started.
2026-02-04 22:22:57.512 +03:00 [DBG] Connection id "0HNJ43UEARDTO" accepted.
2026-02-04 22:22:57.535 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:22:57.535 +03:00 [DBG] Connection id "0HNJ43UEARDTO" started.
2026-02-04 22:22:57.536 +03:00 [DBG] Connection id "0HNJ43UEARDTN" stopped.
2026-02-04 22:22:57.537 +03:00 [DBG] Connection id "0HNJ43UEARDTN" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:22:57.539 +03:00 [DBG] Connection 0HNJ43UEARDTO established using the following protocol: "Tls13"
2026-02-04 22:22:57.540 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-04 22:22:57.541 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 22:22:57.542 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 22:22:57.542 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:22:57.543 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:22:57.543 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:22:57.544 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:22:57.544 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:22:57.545 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:22:57.546 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:22:57.547 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:22:57.548 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:22:57.549 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:22:57.550 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:22:57.551 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:22:57.552 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:22:57.552 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:22:57.553 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:22:57.554 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:22:57.555 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:22:57.555 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:22:57.556 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:22:57.557 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:22:57.560 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:22:57.560 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:22:57.561 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:22:57.562 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:22:57.563 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-04 22:22:57.564 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-04 22:22:57.565 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:22:57.566 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:22:57.566 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-04 22:22:57.568 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-04 22:22:57.569 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-04 22:22:57.577 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 26.6344ms
2026-02-04 22:22:57.577 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:22:57.578 +03:00 [DBG] Connection id "0HNJ43UEARDTO" completed keep alive response.
2026-02-04 22:22:57.579 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 39.0243ms
2026-02-04 22:22:57.905 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:22:57.906 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:23:07.914 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:23:07.915 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:23:17.922 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:23:17.923 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:23:27.933 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:23:27.934 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:23:37.944 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:23:37.945 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:23:47.955 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:23:47.956 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:23:57.966 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:23:57.966 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:24:07.973 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:24:07.973 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:24:17.987 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:24:17.988 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 3 items
2026-02-04 22:24:27.990 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:24:27.991 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:24:38.001 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:24:38.002 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:24:48.015 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:24:48.016 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:24:58.018 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:24:58.018 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:25:08.020 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:25:08.020 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:25:18.035 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:25:18.035 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:25:28.045 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:25:28.047 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:25:38.054 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:25:38.055 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:25:48.056 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:25:48.057 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:25:58.068 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:25:58.069 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:26:08.071 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:26:08.072 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:26:18.075 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:26:18.076 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:26:28.082 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:26:28.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:26:38.096 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:26:38.097 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:26:48.108 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:26:48.109 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:26:58.124 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:26:58.125 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:27:08.133 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:27:08.134 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:27:18.138 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:27:18.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:27:28.147 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:27:28.148 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:27:29.897 +03:00 [DBG] Connection id "0HNJ43UEARDTP" accepted.
2026-02-04 22:27:29.899 +03:00 [DBG] Connection id "0HNJ43UEARDTP" received FIN.
2026-02-04 22:27:29.902 +03:00 [DBG] Connection id "0HNJ43UEARDTQ" accepted.
2026-02-04 22:27:29.902 +03:00 [DBG] Connection id "0HNJ43UEARDTP" started.
2026-02-04 22:27:29.906 +03:00 [DBG] Connection id "0HNJ43UEARDTQ" started.
2026-02-04 22:27:29.907 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:27:29.908 +03:00 [DBG] Connection id "0HNJ43UEARDTP" stopped.
2026-02-04 22:27:29.909 +03:00 [DBG] Connection id "0HNJ43UEARDTP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:27:29.909 +03:00 [DBG] Connection 0HNJ43UEARDTQ established using the following protocol: "Tls13"
2026-02-04 22:27:29.911 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-04 22:27:29.912 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 22:27:29.913 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 22:27:29.914 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:27:29.914 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:27:29.915 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:27:29.915 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:27:29.916 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:27:29.917 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:27:29.917 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:27:29.918 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:27:29.919 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:27:29.920 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:27:29.920 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:27:29.921 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:27:29.922 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:27:29.923 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:27:29.924 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:27:29.925 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:27:29.925 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:27:29.926 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:27:29.926 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:27:29.927 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:27:29.928 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:27:29.929 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:27:29.930 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:27:29.931 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:27:29.931 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-04 22:27:29.932 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-04 22:27:29.932 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:27:29.933 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:27:29.934 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-04 22:27:29.935 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-04 22:27:29.935 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-04 22:27:29.936 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 15.805ms
2026-02-04 22:27:29.937 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:27:29.937 +03:00 [DBG] Connection id "0HNJ43UEARDTQ" completed keep alive response.
2026-02-04 22:27:29.938 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 27.8309ms
2026-02-04 22:27:38.163 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:27:38.164 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:27:48.167 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:27:48.168 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:27:58.184 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:27:58.185 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:28:08.187 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:28:08.188 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 3 items
2026-02-04 22:28:18.201 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:28:18.202 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:28:28.216 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:28:28.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:28:38.225 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:28:38.226 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:28:48.240 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:28:48.241 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:28:58.246 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:28:58.246 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:29:08.256 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:29:08.257 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:29:18.264 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:29:18.265 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 3 items
2026-02-04 22:29:28.269 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:29:28.270 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:29:38.276 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:29:38.277 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:29:48.287 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:29:48.288 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:29:58.289 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:29:58.290 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:30:08.291 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:30:08.293 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:30:18.305 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:30:18.306 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:30:28.317 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:30:28.317 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:30:38.332 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:30:38.333 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:30:48.339 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:30:48.340 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:30:58.341 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:30:58.342 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:31:08.345 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:31:08.346 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:31:18.346 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:31:18.347 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:31:28.348 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:31:28.349 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:31:38.363 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:31:38.364 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:31:48.369 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:31:48.370 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:31:58.382 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:31:58.382 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 3 items
2026-02-04 22:32:08.387 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:32:08.388 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:32:18.389 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:32:18.391 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:32:28.405 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:32:28.406 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:32:38.417 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:32:38.419 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:32:48.419 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:32:48.420 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:32:58.426 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:32:58.427 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:33:08.442 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:33:08.443 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:33:18.452 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:33:18.452 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:33:28.455 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:33:28.456 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:33:38.458 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:33:38.459 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:33:48.469 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:33:48.470 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:33:58.474 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:33:58.475 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:34:08.476 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:34:08.477 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:34:18.485 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:34:18.486 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:34:28.500 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:34:28.501 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:34:38.513 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:34:38.514 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:34:48.522 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:34:48.523 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 3 items
2026-02-04 22:34:58.530 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:34:58.531 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:35:08.540 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:35:08.541 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:35:18.554 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:35:18.555 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:35:28.559 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:35:28.560 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:35:38.566 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:35:38.568 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:35:48.579 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:35:48.580 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 3 items
2026-02-04 22:35:58.594 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:35:58.595 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:36:08.599 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:36:08.600 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:36:18.604 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:36:18.605 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:36:28.606 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:36:28.607 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:36:38.611 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:36:38.612 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:36:48.622 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:36:48.623 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:36:58.625 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:36:58.626 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:37:08.631 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:37:08.632 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:37:18.636 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:37:18.637 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:37:28.637 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:37:28.638 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:37:38.649 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:37:38.650 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:37:48.664 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:37:48.665 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:37:58.666 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:37:58.667 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:38:08.679 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:38:08.679 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 3 items
2026-02-04 22:38:18.694 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:38:18.695 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 3 items
2026-02-04 22:38:20.650 +03:00 [DBG] Connection id "0HNJ43UEARDTC" received FIN.
2026-02-04 22:38:20.652 +03:00 [DBG] Connection id "0HNJ43UEARDTC" is closed. The last processed stream ID was 5.
2026-02-04 22:38:20.652 +03:00 [DBG] The connection queue processing loop for 0HNJ43UEARDTC completed.
2026-02-04 22:38:20.654 +03:00 [DBG] Connection id "0HNJ43UEARDTC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:38:20.659 +03:00 [DBG] Connection id "0HNJ43UEARDTC" stopped.
2026-02-04 22:38:28.711 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:38:28.712 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:38:38.723 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:38:38.723 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:38:48.732 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:38:48.732 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:38:58.738 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:38:58.739 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:39:08.754 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:39:08.755 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:39:18.756 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:39:18.757 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:39:28.762 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:39:28.763 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:39:38.765 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:39:38.766 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 3 items
2026-02-04 22:39:48.768 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:39:48.769 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 3 items
2026-02-04 22:39:58.773 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:39:58.773 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:40:08.775 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:40:08.776 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:40:18.782 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:40:18.783 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:40:28.791 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:40:28.792 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:40:38.806 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:40:38.806 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:40:48.818 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:40:48.819 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2026-02-04 22:40:58.830 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:40:58.831 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 3 items
2026-02-04 22:41:08.834 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:41:08.835 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:41:18.836 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:41:18.837 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 3 items
2026-02-04 22:41:28.847 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:41:28.848 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:41:38.853 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:41:38.854 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:41:48.864 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:41:48.865 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:41:58.871 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:41:58.872 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:42:08.879 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:42:08.880 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:42:18.894 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:42:18.895 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 3 items
2026-02-04 22:42:28.898 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:42:28.900 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:42:38.900 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:42:38.900 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2026-02-04 22:42:48.905 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:42:48.906 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 3 items
2026-02-04 22:42:58.913 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:42:58.914 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2026-02-04 22:43:08.922 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:43:08.923 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2026-02-04 22:43:18.938 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:43:18.939 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:43:28.954 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2026-02-04 22:43:28.955 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2026-02-04 22:44:36.415 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-04 22:44:36.512 +03:00 [DBG] Hosting starting
2026-02-04 22:44:36.520 +03:00 [DBG] Middleware loaded
2026-02-04 22:44:36.522 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-04 22:44:36.523 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-04 22:44:36.566 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-04 22:44:36.623 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-04 22:44:36.623 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-04 22:44:36.624 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-04 22:44:36.625 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-04 22:44:36.625 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-04 22:44:36.626 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-04 22:44:36.648 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-04 22:44:36.649 +03:00 [INF] Hosting environment: Development
2026-02-04 22:44:36.650 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-04 22:44:36.650 +03:00 [DBG] Hosting started
2026-02-04 22:44:37.086 +03:00 [DBG] Connection id "0HNJ44NA44EG9" accepted.
2026-02-04 22:44:37.088 +03:00 [DBG] Connection id "0HNJ44NA44EG9" started.
2026-02-04 22:44:37.097 +03:00 [DBG] Connection id "0HNJ44NA44EGA" accepted.
2026-02-04 22:44:37.098 +03:00 [DBG] Connection id "0HNJ44NA44EGA" started.
2026-02-04 22:44:37.128 +03:00 [DBG] Connection id "0HNJ44NA44EGA" received FIN.
2026-02-04 22:44:37.128 +03:00 [DBG] Connection id "0HNJ44NA44EG9" received FIN.
2026-02-04 22:44:37.133 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:44:37.133 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:44:37.156 +03:00 [DBG] Connection id "0HNJ44NA44EGA" stopped.
2026-02-04 22:44:37.156 +03:00 [DBG] Connection id "0HNJ44NA44EG9" stopped.
2026-02-04 22:44:37.159 +03:00 [DBG] Connection id "0HNJ44NA44EG9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:44:37.159 +03:00 [DBG] Connection id "0HNJ44NA44EGA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:44:37.236 +03:00 [DBG] Connection id "0HNJ44NA44EGB" accepted.
2026-02-04 22:44:37.237 +03:00 [DBG] Connection id "0HNJ44NA44EGB" started.
2026-02-04 22:44:37.264 +03:00 [DBG] Connection 0HNJ44NA44EGB established using the following protocol: "Tls13"
2026-02-04 22:44:37.296 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-04 22:44:37.355 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-04 22:44:37.363 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-04 22:44:37.363 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:44:37.366 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 22:44:37.389 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-04 22:44:37.390 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-04 22:44:37.400 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-04 22:44:37.400 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-04 22:44:37.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 108.3294ms
2026-02-04 22:44:37.422 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-04 22:44:37.427 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-04 22:44:37.428 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.167ms
2026-02-04 22:44:37.441 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-04 22:44:37.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.8551ms
2026-02-04 22:44:37.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-04 22:44:37.564 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-04 22:44:37.565 +03:00 [DBG] Request did not match any endpoints
2026-02-04 22:44:37.566 +03:00 [DBG] The request path  does not match the path filter
2026-02-04 22:44:37.572 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.3834ms
2026-02-04 22:44:56.920 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-04 22:44:56.925 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-04 22:44:56.927 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-04 22:44:56.928 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:44:56.930 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:44:56.931 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:44:56.933 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:44:56.945 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-04 22:44:56.947 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:44:56.948 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:44:56.949 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:44:56.950 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:44:56.951 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:44:56.952 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:44:57.005 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-04 22:44:57.011 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-04 22:44:57.020 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:44:57.022 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-04 22:44:57.024 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:44:57.025 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:44:57.025 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-04 22:44:57.027 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-04 22:44:57.028 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:44:57.029 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-04 22:44:57.030 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:44:57.031 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:44:57.032 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-04 22:44:57.033 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-04 22:44:57.034 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-04 22:44:57.035 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-04 22:44:57.036 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 22:44:57.036 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-04 22:44:57.037 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-04 22:44:57.038 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-04 22:44:57.265 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-04 22:44:57.285 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-04 22:44:57.405 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-04 22:44:57.421 +03:00 [DBG] Creating DbConnection.
2026-02-04 22:44:57.426 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-04 22:44:57.428 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:44:57.436 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:44:57.439 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-04 22:44:57.443 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-04 22:44:57.446 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-04 22:44:57.453 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 22:44:57.466 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-04 22:44:57.471 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:44:57.475 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 5ms reading results.
2026-02-04 22:44:57.477 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-04 22:44:57.479 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-04 22:44:57.482 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-04 22:44:57.484 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-04 22:44:57.484 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-04 22:44:57.485 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-04 22:44:57.486 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-04 22:44:57.486 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-04 22:44:57.491 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 538.4178ms
2026-02-04 22:44:57.492 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-04 22:44:57.494 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-04 22:44:57.496 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-04 22:44:57.498 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-04 22:44:57.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 578.9178ms
2026-02-04 22:45:24.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2023-02-04 - null null
2026-02-04 22:45:24.496 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 22:45:24.497 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 22:45:24.498 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:45:24.499 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:45:24.500 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:45:24.500 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:45:24.504 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:45:24.505 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:45:24.506 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:45:24.507 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:45:24.509 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:45:24.510 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:45:24.511 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:45:24.514 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:45:24.515 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:45:24.516 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:45:24.517 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:45:24.518 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:45:24.519 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:45:24.522 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:45:24.523 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:45:24.524 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:45:24.525 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:45:24.526 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:45:24.527 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:45:24.528 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:45:24.567 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 56.2705ms
2026-02-04 22:45:24.568 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:45:24.577 +03:00 [ERR] HTTP 400 - Date is out of supported range
WeatherInfo.API.Exceptions.BadRequestException: Date is out of supported range
   at WeatherInfo.API.Services.WeatherRequestValidator.ValidateDate(DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherRequestValidator.cs:line 22
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 48
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 22:45:24.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2023-02-04 - 400 null application/json 100.1764ms
2026-02-04 22:46:54.786 +03:00 [DBG] Connection id "0HNJ44NA44EGC" received FIN.
2026-02-04 22:46:54.792 +03:00 [DBG] Connection id "0HNJ44NA44EGC" accepted.
2026-02-04 22:46:54.792 +03:00 [DBG] Connection id "0HNJ44NA44EGC" started.
2026-02-04 22:46:54.797 +03:00 [DBG] Connection id "0HNJ44NA44EGD" accepted.
2026-02-04 22:46:54.798 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-04 22:46:54.798 +03:00 [DBG] Connection id "0HNJ44NA44EGD" started.
2026-02-04 22:46:54.800 +03:00 [DBG] Connection id "0HNJ44NA44EGC" stopped.
2026-02-04 22:46:54.801 +03:00 [DBG] Connection id "0HNJ44NA44EGC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-04 22:46:54.803 +03:00 [DBG] Connection 0HNJ44NA44EGD established using the following protocol: "Tls13"
2026-02-04 22:46:54.806 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-04 22:46:54.807 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-04 22:46:54.808 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-04 22:46:54.808 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:46:54.809 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:46:54.809 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-04 22:46:54.810 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:46:54.811 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-04 22:46:54.811 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-04 22:46:54.813 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-04 22:46:54.813 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-04 22:46:54.814 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-04 22:46:54.815 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-04 22:46:54.816 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:46:54.818 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-04 22:46:54.818 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-04 22:46:54.819 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-04 22:46:54.820 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:46:54.821 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-04 22:46:54.821 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-04 22:46:54.822 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-04 22:46:54.823 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:46:54.824 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-04 22:46:54.824 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:46:54.825 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:46:54.826 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-04 22:46:54.826 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-04 22:46:54.866 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 50.201ms
2026-02-04 22:46:54.867 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-04 22:46:54.881 +03:00 [ERR] HTTP 400 - Date is out of supported range
WeatherInfo.API.Exceptions.BadRequestException: Date is out of supported range
   at WeatherInfo.API.Services.WeatherRequestValidator.ValidateDate(DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherRequestValidator.cs:line 22
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 48
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-04 22:46:54.885 +03:00 [DBG] Connection id "0HNJ44NA44EGD" completed keep alive response.
2026-02-04 22:46:54.886 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json 80.5908ms
