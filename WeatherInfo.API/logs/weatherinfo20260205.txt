2026-02-05 16:01:57.966 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 16:01:58.094 +03:00 [DBG] Hosting starting
2026-02-05 16:01:58.103 +03:00 [DBG] Middleware loaded
2026-02-05 16:01:58.104 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-05 16:01:58.106 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-05 16:01:58.191 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-05 16:01:58.272 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 16:01:58.273 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 16:01:58.273 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 16:01:58.274 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 16:01:58.274 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 16:01:58.275 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 16:01:58.298 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 16:01:58.299 +03:00 [INF] Hosting environment: Development
2026-02-05 16:01:58.299 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 16:01:58.300 +03:00 [DBG] Hosting started
2026-02-05 16:01:58.367 +03:00 [DBG] Connection id "0HNJ4MQVF7O1H" accepted.
2026-02-05 16:01:58.367 +03:00 [DBG] Connection id "0HNJ4MQVF7O1I" accepted.
2026-02-05 16:01:58.368 +03:00 [DBG] Connection id "0HNJ4MQVF7O1H" started.
2026-02-05 16:01:58.368 +03:00 [DBG] Connection id "0HNJ4MQVF7O1I" started.
2026-02-05 16:01:58.377 +03:00 [DBG] Connection id "0HNJ4MQVF7O1I" received FIN.
2026-02-05 16:01:58.377 +03:00 [DBG] Connection id "0HNJ4MQVF7O1H" received FIN.
2026-02-05 16:01:58.384 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 16:01:58.384 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 16:01:58.407 +03:00 [DBG] Connection id "0HNJ4MQVF7O1H" stopped.
2026-02-05 16:01:58.407 +03:00 [DBG] Connection id "0HNJ4MQVF7O1I" stopped.
2026-02-05 16:01:58.410 +03:00 [DBG] Connection id "0HNJ4MQVF7O1I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 16:01:58.410 +03:00 [DBG] Connection id "0HNJ4MQVF7O1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 16:01:58.757 +03:00 [DBG] Connection id "0HNJ4MQVF7O1J" accepted.
2026-02-05 16:01:58.759 +03:00 [DBG] Connection id "0HNJ4MQVF7O1J" started.
2026-02-05 16:01:58.795 +03:00 [DBG] Connection 0HNJ4MQVF7O1J established using the following protocol: "Tls13"
2026-02-05 16:01:58.845 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 16:01:58.940 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 16:01:58.950 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 16:01:58.951 +03:00 [DBG] Request did not match any endpoints
2026-02-05 16:01:58.954 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 16:01:58.984 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 16:01:58.985 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 16:01:58.996 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 16:01:58.997 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 16:01:59.000 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 158.6683ms
2026-02-05 16:01:59.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 16:01:59.034 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-05 16:01:59.036 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 10.7486ms
2026-02-05 16:01:59.050 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 16:01:59.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 420.4029ms
2026-02-05 16:01:59.532 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 16:01:59.535 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 16:01:59.535 +03:00 [DBG] Request did not match any endpoints
2026-02-05 16:01:59.536 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 16:01:59.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0123ms
2026-02-05 16:02:20.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Хабаровск?date=2026-02-05 - null null
2026-02-05 16:02:20.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Хабаровск'
2026-02-05 16:02:20.335 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Хабаровск'
2026-02-05 16:02:20.336 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 16:02:20.338 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:20.339 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:20.341 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 16:02:20.352 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 16:02:20.354 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 16:02:20.355 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 16:02:20.356 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 16:02:20.357 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 16:02:20.358 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 16:02:20.360 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 16:02:20.434 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 16:02:20.439 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 16:02:20.456 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 16:02:20.458 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 16:02:20.459 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 16:02:20.460 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 16:02:20.461 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 16:02:20.464 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 16:02:20.465 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 16:02:20.466 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 16:02:20.468 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 16:02:20.469 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 16:02:20.469 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 16:02:20.470 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 16:02:20.490 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 16:02:20.491 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 16:02:20.820 +03:00 [INF] Received HTTP response headers after 327.0219ms - 200
2026-02-05 16:02:20.821 +03:00 [INF] End processing HTTP request after 331.9283ms - 200
2026-02-05 16:02:20.830 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 16:02:20.831 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 16:02:21.157 +03:00 [INF] Received HTTP response headers after 325.1146ms - 200
2026-02-05 16:02:21.158 +03:00 [INF] End processing HTTP request after 327.5027ms - 200
2026-02-05 16:02:21.401 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 16:02:21.418 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:21.443 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:21.445 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 16:02:21.447 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 16:02:21.455 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 16:02:21.486 +03:00 [DBG] Creating DbConnection.
2026-02-05 16:02:21.493 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-05 16:02:21.495 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:21.501 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:21.505 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 16:02:21.508 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 16:02:21.510 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 16:02:21.514 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 16:02:21.525 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 16:02:21.533 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 16:02:21.538 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:21.541 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 16:02:21.543 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:21.545 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 16:02:21.551 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:21.552 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 16:02:21.558 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 16:02:21.560 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 16:02:21.560 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 16:02:21.561 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 16:02:21.562 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 16:02:21.562 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 16:02:21.570 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1210.0449ms
2026-02-05 16:02:21.571 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 16:02:21.573 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 16:02:21.575 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:21.577 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 16:02:21.578 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Хабаровск?date=2026-02-05 - 200 null application/json; charset=utf-8 1252.2985ms
2026-02-05 16:02:31.438 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Хабаровск/week - null null
2026-02-05 16:02:31.441 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Хабаровск/week'
2026-02-05 16:02:31.443 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Хабаровск/week'
2026-02-05 16:02:31.444 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 16:02:31.445 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:31.445 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:31.446 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 16:02:31.449 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 16:02:31.451 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 16:02:31.452 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 16:02:31.453 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 16:02:31.455 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 16:02:31.456 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 16:02:31.457 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 16:02:31.459 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 16:02:31.460 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 16:02:31.461 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 16:02:31.462 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 16:02:31.463 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 16:02:31.464 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 16:02:31.465 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 16:02:31.468 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 16:02:31.468 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 16:02:31.530 +03:00 [INF] Received HTTP response headers after 60.901ms - 200
2026-02-05 16:02:31.531 +03:00 [INF] End processing HTTP request after 63.6552ms - 200
2026-02-05 16:02:31.533 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 16:02:31.534 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 16:02:31.592 +03:00 [INF] Received HTTP response headers after 56.887ms - 200
2026-02-05 16:02:31.593 +03:00 [INF] End processing HTTP request after 59.7089ms - 200
2026-02-05 16:02:31.623 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 16:02:31.625 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:31.626 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:31.627 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 16:02:31.627 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 16:02:31.628 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 16:02:31.629 +03:00 [DBG] Creating DbConnection.
2026-02-05 16:02:31.630 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 16:02:31.630 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:31.631 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:31.632 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 16:02:31.633 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 16:02:31.634 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 16:02:31.635 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 16:02:31.636 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 16:02:31.637 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 16:02:31.639 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:31.639 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 16:02:31.640 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:31.641 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 16:02:31.642 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:31.643 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 16:02:31.644 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 16:02:31.645 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 16:02:31.645 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 16:02:31.646 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 16:02:31.646 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 16:02:31.647 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 16:02:31.648 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 191.7182ms
2026-02-05 16:02:31.649 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 16:02:31.650 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 16:02:31.651 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:31.652 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 16:02:31.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Хабаровск/week - 200 null application/json; charset=utf-8 214.4985ms
2026-02-05 16:02:41.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 16:02:41.517 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 16:02:41.518 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 16:02:41.519 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 16:02:41.519 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:41.520 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:41.520 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 16:02:41.523 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 16:02:41.524 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 16:02:41.525 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 16:02:41.525 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 16:02:41.526 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 16:02:41.527 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 16:02:41.528 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 16:02:41.529 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 16:02:41.530 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 16:02:41.531 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 16:02:41.531 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 16:02:41.532 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 16:02:41.533 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 16:02:41.534 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 16:02:41.535 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 16:02:41.535 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 16:02:41.536 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 16:02:41.537 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 16:02:41.537 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 16:02:41.538 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 16:02:41.539 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 16:02:41.539 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 16:02:41.540 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 16:02:41.541 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 16:02:41.541 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 16:02:41.542 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 16:02:41.543 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 16:02:41.544 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 16:02:41.544 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 16:02:41.545 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 16:02:41.546 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 16:02:41.546 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 16:02:41.561 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 16:02:41.588 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 16:02:41.674 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 16:02:41.686 +03:00 [DBG] Creating DbConnection.
2026-02-05 16:02:41.687 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 16:02:41.687 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:41.688 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:41.689 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 16:02:41.689 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 16:02:41.690 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 16:02:41.690 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 16:02:41.691 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 16:02:41.693 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:41.694 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 16:02:41.695 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:41.695 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 16:02:41.698 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 16:02:41.714 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 16:02:41.717 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:41.718 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:41.718 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 16:02:41.719 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 16:02:41.719 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 16:02:41.720 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 16:02:41.721 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 16:02:41.724 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:41.725 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 16:02:41.726 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:41.726 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-05 16:02:41.727 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:41.728 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 16:02:41.729 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 16:02:41.730 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 16:02:41.731 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 16:02:41.731 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 16:02:41.732 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 16:02:41.732 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 16:02:41.742 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 213.5551ms
2026-02-05 16:02:41.742 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 16:02:41.743 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 16:02:41.744 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:41.744 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 16:02:41.745 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 230.1283ms
2026-02-05 16:02:57.016 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - null null
2026-02-05 16:02:57.025 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-05 16:02:57.025 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-05 16:02:57.026 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 16:02:57.027 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:57.027 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 16:02:57.028 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 16:02:57.030 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 16:02:57.031 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 16:02:57.032 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 16:02:57.033 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 16:02:57.034 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 16:02:57.035 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 16:02:57.036 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 16:02:57.037 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 16:02:57.038 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 16:02:57.038 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 16:02:57.039 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 16:02:57.040 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 16:02:57.040 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 16:02:57.041 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 16:02:57.042 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 16:02:57.042 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 16:02:57.043 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 16:02:57.044 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 16:02:57.045 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 16:02:57.045 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 16:02:57.046 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-05 16:02:57.046 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-05 16:02:57.047 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 16:02:57.048 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 16:02:57.049 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-05 16:02:57.049 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-05 16:02:57.052 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 16:02:57.055 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-05 16:02:57.073 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 16:02:57.074 +03:00 [DBG] Creating DbConnection.
2026-02-05 16:02:57.074 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 16:02:57.075 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:57.076 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:57.076 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 16:02:57.077 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 16:02:57.077 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 16:02:57.078 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 16:02:57.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 16:02:57.081 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:57.082 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 16:02:57.083 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 16:02:57.084 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 16:02:57.085 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 16:02:57.086 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 16:02:57.087 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 16:02:57.087 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 16:02:57.088 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 16:02:57.089 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-05 16:02:57.090 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 54.1931ms
2026-02-05 16:02:57.091 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 16:02:57.091 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 16:02:57.092 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 16:02:57.093 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 16:02:57.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - 200 null application/json; charset=utf-8 78.173ms
2026-02-05 17:24:33.299 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 17:24:33.461 +03:00 [DBG] Hosting starting
2026-02-05 17:24:33.467 +03:00 [DBG] Middleware loaded
2026-02-05 17:24:33.469 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-05 17:24:33.470 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-05 17:24:33.511 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-05 17:24:33.564 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 17:24:33.565 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 17:24:33.565 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 17:24:33.566 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 17:24:33.566 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 17:24:33.567 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 17:24:33.589 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 17:24:33.590 +03:00 [INF] Hosting environment: Development
2026-02-05 17:24:33.590 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 17:24:33.591 +03:00 [DBG] Hosting started
2026-02-05 17:24:33.682 +03:00 [DBG] Connection id "0HNJ4O948PRBO" accepted.
2026-02-05 17:24:33.683 +03:00 [DBG] Connection id "0HNJ4O948PRBO" started.
2026-02-05 17:24:33.692 +03:00 [DBG] Connection id "0HNJ4O948PRBP" accepted.
2026-02-05 17:24:33.693 +03:00 [DBG] Connection id "0HNJ4O948PRBP" started.
2026-02-05 17:24:33.707 +03:00 [DBG] Connection id "0HNJ4O948PRBP" received FIN.
2026-02-05 17:24:33.707 +03:00 [DBG] Connection id "0HNJ4O948PRBO" received FIN.
2026-02-05 17:24:33.713 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:24:33.713 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:24:33.731 +03:00 [DBG] Connection id "0HNJ4O948PRBP" stopped.
2026-02-05 17:24:33.731 +03:00 [DBG] Connection id "0HNJ4O948PRBO" stopped.
2026-02-05 17:24:33.734 +03:00 [DBG] Connection id "0HNJ4O948PRBP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:24:33.734 +03:00 [DBG] Connection id "0HNJ4O948PRBO" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:24:34.083 +03:00 [DBG] Connection id "0HNJ4O948PRBQ" accepted.
2026-02-05 17:24:34.106 +03:00 [DBG] Connection id "0HNJ4O948PRBQ" started.
2026-02-05 17:24:34.136 +03:00 [DBG] Connection 0HNJ4O948PRBQ established using the following protocol: "Tls13"
2026-02-05 17:24:34.177 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 17:24:34.265 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 17:24:34.276 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 17:24:34.277 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:24:34.280 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:24:34.313 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 17:24:34.315 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 17:24:34.326 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 17:24:34.330 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 17:24:34.332 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 158.872ms
2026-02-05 17:24:34.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 17:24:34.361 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-05 17:24:34.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 8.9904ms
2026-02-05 17:24:34.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 17:24:34.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.1498ms
2026-02-05 17:24:34.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 17:24:34.598 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 17:24:34.599 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:24:34.600 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:24:34.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.4387ms
2026-02-05 17:25:10.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майями?date=2026-02-05 - null null
2026-02-05 17:25:10.530 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майями'
2026-02-05 17:25:10.532 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Майями'
2026-02-05 17:25:10.533 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:10.535 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:10.536 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:10.537 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:10.551 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:25:10.553 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:25:10.554 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:25:10.555 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:25:10.556 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:25:10.557 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:25:10.559 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:10.611 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 17:25:10.616 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:10.623 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:25:10.625 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:25:10.626 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:10.627 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:10.628 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:25:10.631 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:25:10.632 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 17:25:10.633 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 17:25:10.635 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:10.635 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:10.636 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 17:25:10.637 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:10.651 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D1%8F%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:10.652 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D1%8F%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:10.952 +03:00 [INF] Received HTTP response headers after 297.771ms - 200
2026-02-05 17:25:10.953 +03:00 [INF] End processing HTTP request after 302.9176ms - 200
2026-02-05 17:25:10.960 +03:00 [WRN] City not found in Geocoding API: Майями
2026-02-05 17:25:11.016 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 456.6063ms
2026-02-05 17:25:11.018 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:11.045 +03:00 [ERR] HTTP 404 - City 'Майями' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Майями' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-05 17:25:11.056 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майями?date=2026-02-05 - 404 null application/json 533.403ms
2026-02-05 17:25:17.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Маями?date=2026-02-05 - null null
2026-02-05 17:25:17.417 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Маями'
2026-02-05 17:25:17.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Маями'
2026-02-05 17:25:17.419 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:17.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:17.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:17.421 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:17.422 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:25:17.423 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:25:17.423 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:25:17.424 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:25:17.425 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:25:17.426 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:25:17.426 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:17.431 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:17.432 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:25:17.433 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:25:17.434 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:17.435 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:17.436 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:25:17.436 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:25:17.437 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 17:25:17.438 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 17:25:17.439 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:17.439 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:17.440 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 17:25:17.440 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:17.441 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D1%8F%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:17.442 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D1%8F%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:17.499 +03:00 [INF] Received HTTP response headers after 56.4587ms - 200
2026-02-05 17:25:17.500 +03:00 [INF] End processing HTTP request after 58.5037ms - 200
2026-02-05 17:25:17.501 +03:00 [WRN] City not found in Geocoding API: Маями
2026-02-05 17:25:17.535 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 108.4178ms
2026-02-05 17:25:17.536 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:17.554 +03:00 [ERR] HTTP 404 - City 'Маями' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Маями' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-05 17:25:17.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Маями?date=2026-02-05 - 404 null application/json 143.2376ms
2026-02-05 17:25:28.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майами?date=2026-02-05 - null null
2026-02-05 17:25:28.074 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майами'
2026-02-05 17:25:28.075 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Майами'
2026-02-05 17:25:28.076 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:28.076 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:28.077 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:28.077 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:28.078 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:25:28.079 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:25:28.080 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:25:28.080 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:25:28.081 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:25:28.082 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:25:28.083 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:28.087 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:28.088 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:25:28.088 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:25:28.089 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:28.090 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:28.091 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:25:28.091 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:25:28.092 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 17:25:28.093 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 17:25:28.093 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:28.094 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:28.095 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 17:25:28.095 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 17:25:28.096 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:28.097 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:28.154 +03:00 [INF] Received HTTP response headers after 56.564ms - 200
2026-02-05 17:25:28.155 +03:00 [INF] End processing HTTP request after 58.5973ms - 200
2026-02-05 17:25:28.159 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 17:25:28.160 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 17:25:28.425 +03:00 [INF] Received HTTP response headers after 264.7773ms - 200
2026-02-05 17:25:28.426 +03:00 [INF] End processing HTTP request after 267.0786ms - 200
2026-02-05 17:25:28.664 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:25:28.681 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:25:28.706 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:25:28.709 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 17:25:28.714 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 17:25:28.721 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 17:25:28.750 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:25:28.755 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 17:25:28.757 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:25:28.765 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:25:28.769 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:25:28.772 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:25:28.774 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 17:25:28.778 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:25:28.789 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:25:28.797 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 17:25:28.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:25:28.804 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 11ms reading results.
2026-02-05 17:25:28.806 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:25:28.808 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:25:28.814 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:25:28.815 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 17:25:28.817 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:25:28.819 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:25:28.819 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:25:28.820 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:25:28.820 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:25:28.821 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 17:25:28.825 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 742.5082ms
2026-02-05 17:25:28.826 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 17:25:28.827 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:25:28.829 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:25:28.830 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:25:28.832 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майами?date=2026-02-05 - 200 null application/json; charset=utf-8 762.7144ms
2026-02-05 17:25:37.194 +03:00 [DBG] Connection id "0HNJ4O948PRBQ" received FIN.
2026-02-05 17:25:37.196 +03:00 [DBG] Connection id "0HNJ4O948PRBQ" is closed. The last processed stream ID was 13.
2026-02-05 17:25:37.197 +03:00 [DBG] The connection queue processing loop for 0HNJ4O948PRBQ completed.
2026-02-05 17:25:37.197 +03:00 [DBG] Connection id "0HNJ4O948PRBQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:25:37.205 +03:00 [DBG] Connection id "0HNJ4O948PRBQ" stopped.
2026-02-05 17:25:41.442 +03:00 [DBG] Connection id "0HNJ4O948PRBR" accepted.
2026-02-05 17:25:41.443 +03:00 [DBG] Connection id "0HNJ4O948PRBR" started.
2026-02-05 17:25:41.450 +03:00 [DBG] Connection 0HNJ4O948PRBR established using the following protocol: "Tls13"
2026-02-05 17:25:41.452 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майами/week - null null
2026-02-05 17:25:41.454 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майами/week'
2026-02-05 17:25:41.455 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Майами/week'
2026-02-05 17:25:41.455 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:25:41.456 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:41.456 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:25:41.457 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:25:41.460 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:25:41.461 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:25:41.462 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:25:41.463 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:25:41.464 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:25:41.465 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:25:41.465 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:41.467 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:25:41.468 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:25:41.469 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:25:41.470 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:41.471 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:25:41.472 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:25:41.473 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:25:41.475 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:41.475 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-05 17:25:41.535 +03:00 [INF] Received HTTP response headers after 59.4538ms - 200
2026-02-05 17:25:41.536 +03:00 [INF] End processing HTTP request after 61.6169ms - 200
2026-02-05 17:25:41.537 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:25:41.538 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:25:41.771 +03:00 [INF] Received HTTP response headers after 232.7127ms - 200
2026-02-05 17:25:41.772 +03:00 [INF] End processing HTTP request after 234.8133ms - 200
2026-02-05 17:25:41.799 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:25:41.801 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:25:41.802 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:25:41.803 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 17:25:41.804 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 17:25:41.804 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 17:25:41.805 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:25:41.806 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 17:25:41.806 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:25:41.807 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:25:41.808 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:25:41.808 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:25:41.809 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:25:41.810 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:25:41.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:25:41.812 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 17:25:41.813 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:25:41.814 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 17:25:41.815 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:25:41.816 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:25:41.817 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:25:41.818 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 17:25:41.818 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:25:41.820 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:25:41.820 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:25:41.820 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:25:41.821 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:25:41.822 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 17:25:41.823 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 357.5534ms
2026-02-05 17:25:41.824 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:25:41.824 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:25:41.825 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:25:41.825 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:25:41.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майами/week - 200 null application/json; charset=utf-8 374.3681ms
2026-02-05 17:26:03.827 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 17:26:03.829 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 17:26:03.830 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 17:26:03.831 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:26:03.832 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:26:03.832 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:26:03.833 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:26:03.836 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 17:26:03.837 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:26:03.837 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:26:03.838 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:26:03.839 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:26:03.840 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:26:03.841 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:26:03.842 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:26:03.842 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:26:03.843 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 17:26:03.844 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:26:03.844 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:26:03.845 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:26:03.846 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:26:03.847 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:26:03.847 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 17:26:03.848 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:26:03.849 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:26:03.849 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:26:03.850 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:26:03.851 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 17:26:03.852 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 17:26:03.853 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:26:03.853 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:26:03.854 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 17:26:03.855 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 17:26:03.855 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:26:03.856 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 17:26:03.857 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:26:03.857 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:26:03.858 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:26:03.859 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:26:03.871 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:26:03.894 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 17:26:03.974 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 17:26:03.986 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:26:03.986 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 17:26:03.987 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:26:03.988 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:26:03.988 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:26:03.989 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:26:03.990 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:26:03.990 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:26:03.991 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:26:03.993 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:26:03.994 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 17:26:03.995 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:26:03.995 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:26:03.998 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 17:26:04.012 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 17:26:04.014 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:26:04.015 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:26:04.016 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:26:04.016 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:26:04.017 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:26:04.018 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:26:04.019 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:26:04.022 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:26:04.023 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:26:04.024 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:26:04.024 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:26:04.025 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:26:04.026 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 5ms reading results.
2026-02-05 17:26:04.026 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:26:04.027 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:26:04.028 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:26:04.029 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:26:04.029 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:26:04.029 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:26:04.030 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:26:04.030 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 17:26:04.036 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 195.0169ms
2026-02-05 17:26:04.036 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:26:04.037 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:26:04.038 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:26:04.038 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:26:04.039 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 211.6916ms
2026-02-05 17:27:10.665 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 17:27:20.667 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:27:20.670 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0353ms - processed: 0 items - remaining: 1 items
2026-02-05 17:27:30.679 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:27:30.680 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 17:27:40.690 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:27:40.690 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 17:27:50.700 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:27:50.701 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 17:28:00.704 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:28:00.705 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:28:10.719 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:28:10.720 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 17:28:20.722 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:28:20.723 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0064ms - processed: 0 items - remaining: 1 items
2026-02-05 17:28:30.725 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:28:30.726 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:28:40.741 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:28:40.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:28:50.752 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:28:50.753 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:29:00.755 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:29:00.756 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-05 17:29:10.758 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:29:10.759 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 17:29:20.764 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:29:20.765 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:29:30.776 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:29:30.777 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 17:29:40.789 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:29:40.790 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:29:50.794 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:29:50.794 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:30:00.802 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:30:00.803 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 17:30:10.811 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:30:10.811 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 17:30:20.827 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:30:20.828 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 17:30:30.834 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:30:30.835 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0065ms - processed: 0 items - remaining: 1 items
2026-02-05 17:30:40.842 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:30:40.843 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-05 17:30:50.847 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:30:50.848 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 17:31:00.856 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:31:00.857 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:31:10.872 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:31:10.873 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-05 17:31:20.881 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:31:20.882 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 17:31:30.898 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:31:30.899 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:31:40.902 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:31:40.903 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:31:50.918 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:31:50.919 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-05 17:32:00.935 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:32:00.935 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:32:10.939 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:32:10.940 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:32:20.947 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:32:20.947 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:32:30.961 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:32:30.962 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-05 17:32:40.969 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:32:40.969 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 17:32:50.985 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:32:50.986 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 17:33:00.997 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:33:00.997 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 17:33:10.999 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:33:11.000 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 17:33:21.009 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:33:21.010 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 17:33:31.024 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:33:31.025 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-05 17:33:41.036 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:33:41.037 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-05 17:33:51.053 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:33:51.054 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 17:34:01.069 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:34:01.069 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 17:34:11.083 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:34:11.084 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-05 17:34:21.094 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:34:21.095 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-05 17:34:31.105 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:34:31.105 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-05 17:34:41.109 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:34:41.111 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 17:34:51.113 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:34:51.114 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 17:35:01.120 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:35:01.121 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 17:35:11.125 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:35:11.126 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 17:35:21.140 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:35:21.141 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-05 17:35:31.147 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:35:31.148 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4626ms - processed: 0 items - remaining: 1 items
2026-02-05 17:35:51.888 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 17:35:51.951 +03:00 [DBG] Hosting starting
2026-02-05 17:35:51.958 +03:00 [DBG] Middleware loaded
2026-02-05 17:35:51.959 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-05 17:35:51.960 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-05 17:35:52.002 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-05 17:35:52.081 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 17:35:52.082 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 17:35:52.083 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 17:35:52.084 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 17:35:52.084 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 17:35:52.085 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 17:35:52.113 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 17:35:52.114 +03:00 [INF] Hosting environment: Development
2026-02-05 17:35:52.114 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 17:35:52.115 +03:00 [DBG] Hosting started
2026-02-05 17:35:52.235 +03:00 [DBG] Connection id "0HNJ4OFEFVV2H" accepted.
2026-02-05 17:35:52.236 +03:00 [DBG] Connection id "0HNJ4OFEFVV2H" started.
2026-02-05 17:35:52.246 +03:00 [DBG] Connection id "0HNJ4OFEFVV2I" accepted.
2026-02-05 17:35:52.247 +03:00 [DBG] Connection id "0HNJ4OFEFVV2I" started.
2026-02-05 17:35:52.292 +03:00 [DBG] Connection id "0HNJ4OFEFVV2I" received FIN.
2026-02-05 17:35:52.292 +03:00 [DBG] Connection id "0HNJ4OFEFVV2H" received FIN.
2026-02-05 17:35:52.298 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:35:52.298 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:35:52.317 +03:00 [DBG] Connection id "0HNJ4OFEFVV2H" stopped.
2026-02-05 17:35:52.317 +03:00 [DBG] Connection id "0HNJ4OFEFVV2I" stopped.
2026-02-05 17:35:52.320 +03:00 [DBG] Connection id "0HNJ4OFEFVV2I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:35:52.320 +03:00 [DBG] Connection id "0HNJ4OFEFVV2H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:35:52.586 +03:00 [DBG] Connection id "0HNJ4OFEFVV2J" accepted.
2026-02-05 17:35:52.589 +03:00 [DBG] Connection id "0HNJ4OFEFVV2J" started.
2026-02-05 17:35:52.617 +03:00 [DBG] Connection 0HNJ4OFEFVV2J established using the following protocol: "Tls13"
2026-02-05 17:35:52.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 17:35:52.719 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 17:35:52.729 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 17:35:52.731 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:35:52.733 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:35:52.758 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 17:35:52.759 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 17:35:52.770 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 17:35:52.771 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 17:35:52.774 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 125.6594ms
2026-02-05 17:35:52.794 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 17:35:52.799 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-05 17:35:52.800 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.5385ms
2026-02-05 17:35:52.816 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 17:35:52.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.7942ms
2026-02-05 17:35:52.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 17:35:52.940 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 17:35:52.941 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:35:52.943 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:35:52.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.0213ms
2026-02-05 17:36:01.480 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Рим/week - null null
2026-02-05 17:36:01.485 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Рим/week'
2026-02-05 17:36:01.487 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Рим/week'
2026-02-05 17:36:01.488 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:36:01.490 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:36:01.490 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:36:01.492 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:36:01.505 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:36:01.507 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:36:01.508 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:36:01.509 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:36:01.510 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:36:01.511 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:36:01.513 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:36:01.568 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 17:36:01.574 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:36:01.580 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:36:01.582 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:36:01.583 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:36:01.584 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:36:01.584 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:36:01.587 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:36:01.601 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A0%D0%B8%D0%BC&count=1&language=ru
2026-02-05 17:36:01.602 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A0%D0%B8%D0%BC&count=1&language=ru
2026-02-05 17:36:01.893 +03:00 [INF] Received HTTP response headers after 289.4226ms - 200
2026-02-05 17:36:01.894 +03:00 [INF] End processing HTTP request after 294.4738ms - 200
2026-02-05 17:36:01.904 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.89193&longitude=12.51133&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:36:01.905 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.89193&longitude=12.51133&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:36:02.170 +03:00 [INF] Received HTTP response headers after 264.1374ms - 200
2026-02-05 17:36:02.171 +03:00 [INF] End processing HTTP request after 266.5918ms - 200
2026-02-05 17:36:02.391 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:36:02.409 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:02.434 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:02.436 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 17:36:02.438 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 17:36:02.446 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 17:36:02.474 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:36:02.479 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 17:36:02.481 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:36:02.487 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:02.491 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:36:02.494 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:36:02.496 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 17:36:02.500 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:36:02.511 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 3), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:36:02.520 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 17:36:02.525 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:02.529 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 14ms reading results.
2026-02-05 17:36:02.531 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:02.533 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:36:02.539 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:02.540 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 17:36:02.543 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:36:02.545 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:36:02.545 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:36:02.546 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:36:02.547 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:36:02.547 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 17:36:02.557 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1043.8554ms
2026-02-05 17:36:02.558 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:36:02.560 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:36:02.562 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:36:02.564 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:36:02.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Рим/week - 200 null application/json; charset=utf-8 1084.9881ms
2026-02-05 17:36:28.033 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 17:36:28.038 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 17:36:28.038 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 17:36:28.039 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:36:28.040 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:36:28.041 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:36:28.041 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:36:28.045 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 17:36:28.046 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:36:28.047 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:36:28.048 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:36:28.049 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:36:28.049 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:36:28.050 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:36:28.052 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:36:28.054 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:36:28.055 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 17:36:28.057 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:36:28.058 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:36:28.059 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:36:28.060 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:36:28.061 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:36:28.061 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 17:36:28.062 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:36:28.063 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:36:28.064 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:36:28.064 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:36:28.065 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 17:36:28.066 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 17:36:28.067 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:36:28.067 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:36:28.068 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 17:36:28.069 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 17:36:28.070 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:36:28.070 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 17:36:28.071 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:36:28.072 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:36:28.073 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:36:28.074 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:36:28.105 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:36:28.129 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 17:36:28.207 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 17:36:28.218 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:36:28.219 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 17:36:28.220 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:36:28.220 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:28.221 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:36:28.222 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:36:28.222 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:36:28.223 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:36:28.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:36:28.226 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:28.227 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 17:36:28.228 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:28.229 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:36:28.232 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 17:36:28.250 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 17:36:28.253 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:36:28.253 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:28.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:36:28.255 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:36:28.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:36:28.256 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:36:28.257 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:36:28.261 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:28.262 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:28.262 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:28.263 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:28.264 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:36:28.265 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:28.266 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 17:36:28.266 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:36:28.267 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:36:28.268 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:36:28.269 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:36:28.270 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:36:28.270 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:36:28.271 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:36:28.272 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 17:36:28.279 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 228.9101ms
2026-02-05 17:36:28.280 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:36:28.281 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:36:28.281 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:36:28.282 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:36:28.283 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 250.427ms
2026-02-05 17:37:37.550 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 17:37:37.628 +03:00 [DBG] Hosting starting
2026-02-05 17:37:37.638 +03:00 [DBG] Middleware loaded
2026-02-05 17:37:37.640 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-05 17:37:37.641 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-05 17:37:37.687 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-05 17:37:37.749 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 17:37:37.750 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 17:37:37.750 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 17:37:37.751 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 17:37:37.751 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 17:37:37.752 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 17:37:37.773 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 17:37:37.774 +03:00 [INF] Hosting environment: Development
2026-02-05 17:37:37.774 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 17:37:37.775 +03:00 [DBG] Hosting started
2026-02-05 17:37:37.776 +03:00 [DBG] Connection id "0HNJ4OGDUGH0Q" received FIN.
2026-02-05 17:37:37.779 +03:00 [DBG] Connection id "0HNJ4OGDUGH0Q" accepted.
2026-02-05 17:37:37.780 +03:00 [DBG] Connection id "0HNJ4OGDUGH0Q" started.
2026-02-05 17:37:37.792 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:37:37.812 +03:00 [DBG] Connection id "0HNJ4OGDUGH0Q" stopped.
2026-02-05 17:37:37.815 +03:00 [DBG] Connection id "0HNJ4OGDUGH0Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:37:37.948 +03:00 [DBG] Connection id "0HNJ4OGDUGH0R" accepted.
2026-02-05 17:37:37.949 +03:00 [DBG] Connection id "0HNJ4OGDUGH0R" started.
2026-02-05 17:37:37.976 +03:00 [DBG] Connection 0HNJ4OGDUGH0R established using the following protocol: "Tls13"
2026-02-05 17:37:38.012 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 17:37:38.075 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 17:37:38.086 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 17:37:38.087 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:37:38.090 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:37:38.121 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 17:37:38.123 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 17:37:38.133 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 17:37:38.134 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 17:37:38.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 128.2776ms
2026-02-05 17:37:38.157 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 17:37:38.162 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-05 17:37:38.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 7.2584ms
2026-02-05 17:37:38.185 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 17:37:38.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.5756ms
2026-02-05 17:37:38.321 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 17:37:38.324 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 17:37:38.325 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:37:38.326 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:37:38.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.5203ms
2026-02-05 17:37:52.264 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Мехико/week - null null
2026-02-05 17:37:52.269 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Мехико/week'
2026-02-05 17:37:52.271 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Мехико/week'
2026-02-05 17:37:52.272 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:37:52.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:37:52.274 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:37:52.276 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:37:52.288 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:37:52.289 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:37:52.290 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:37:52.291 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:37:52.292 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:37:52.293 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:37:52.295 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:37:52.349 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 17:37:52.354 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:37:52.360 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:37:52.362 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:37:52.363 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:37:52.363 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:37:52.364 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:37:52.367 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:37:52.380 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B5%D1%85%D0%B8%D0%BA%D0%BE&count=1&language=ru
2026-02-05 17:37:52.381 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B5%D1%85%D0%B8%D0%BA%D0%BE&count=1&language=ru
2026-02-05 17:37:52.630 +03:00 [INF] Received HTTP response headers after 247.3358ms - 200
2026-02-05 17:37:52.631 +03:00 [INF] End processing HTTP request after 252.4546ms - 200
2026-02-05 17:37:52.641 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=19.42847&longitude=-99.12766&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:37:52.641 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=19.42847&longitude=-99.12766&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:37:52.864 +03:00 [INF] Received HTTP response headers after 222.04ms - 200
2026-02-05 17:37:52.865 +03:00 [INF] End processing HTTP request after 224.3615ms - 200
2026-02-05 17:37:53.096 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:37:53.115 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:37:53.143 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:37:53.146 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 17:37:53.148 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 17:37:53.156 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 17:37:53.187 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:37:53.192 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 17:37:53.195 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:37:53.201 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:37:53.204 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:37:53.207 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:37:53.209 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 17:37:53.214 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:37:53.224 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:37:53.232 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 17:37:53.237 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:37:53.240 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 17:37:53.243 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:37:53.245 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-05 17:37:53.251 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:37:53.252 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 17:37:53.255 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:37:53.257 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:37:53.257 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:37:53.258 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:37:53.258 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:37:53.259 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 17:37:53.269 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 974.0448ms
2026-02-05 17:37:53.270 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:37:53.272 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:37:53.274 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:37:53.276 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:37:53.277 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Мехико/week - 200 null application/json; charset=utf-8 1013.5398ms
2026-02-05 17:38:04.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 17:38:04.526 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 17:38:04.527 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 17:38:04.529 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:38:04.529 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:38:04.530 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:38:04.531 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:38:04.534 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 17:38:04.536 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:38:04.537 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:38:04.538 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:38:04.539 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:38:04.540 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:38:04.541 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:38:04.543 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:38:04.546 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:38:04.547 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 17:38:04.549 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:38:04.550 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:38:04.550 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:38:04.552 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:38:04.553 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:38:04.553 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 17:38:04.555 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:38:04.555 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:38:04.556 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:38:04.557 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:38:04.558 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 17:38:04.559 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 17:38:04.560 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:38:04.561 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:38:04.562 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 17:38:04.563 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 17:38:04.564 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:38:04.565 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 17:38:04.566 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:38:04.567 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:38:04.568 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:38:04.569 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:38:04.601 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:38:04.627 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 17:38:04.707 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 17:38:04.719 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:38:04.719 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 17:38:04.720 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:38:04.721 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:38:04.721 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:38:04.722 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:38:04.723 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:38:04.723 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:38:04.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:38:04.726 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:38:04.727 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 17:38:04.728 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:38:04.729 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:38:04.732 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 17:38:04.748 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 17:38:04.751 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:38:04.752 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:38:04.752 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:38:04.753 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:38:04.754 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:38:04.754 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:38:04.755 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:38:04.758 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:38:04.759 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:38:04.760 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:38:04.761 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:38:04.762 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:38:04.763 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:38:04.764 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:38:04.764 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 17:38:04.765 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:38:04.766 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:38:04.767 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:38:04.768 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:38:04.769 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:38:04.769 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:38:04.770 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:38:04.770 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 17:38:04.778 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 236.8051ms
2026-02-05 17:38:04.779 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:38:04.779 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:38:04.780 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:38:04.781 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:38:04.782 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 258.4217ms
2026-02-05 17:39:52.392 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 17:40:02.396 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:40:02.398 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0342ms - processed: 0 items - remaining: 1 items
2026-02-05 17:40:12.414 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:40:12.415 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 17:40:22.424 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:40:22.425 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5633ms - processed: 0 items - remaining: 1 items
2026-02-05 17:40:32.430 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:40:32.431 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 17:40:42.433 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:40:42.434 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 17:40:52.451 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:40:52.452 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 17:41:02.462 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:41:02.463 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 17:41:12.469 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:41:12.471 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 17:41:22.473 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:41:22.473 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 17:41:32.479 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:41:32.480 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 17:41:42.487 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:41:42.487 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 17:41:52.503 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:41:52.503 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 17:42:02.514 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:42:02.515 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 17:42:12.520 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:42:12.520 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 17:42:22.531 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:42:22.532 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 17:42:32.536 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:42:32.536 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 17:42:42.552 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:42:42.553 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 17:42:52.567 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:42:52.569 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4827ms - processed: 0 items - remaining: 1 items
2026-02-05 17:43:02.571 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:43:02.571 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 17:43:12.584 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:43:12.584 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 17:43:22.592 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:43:22.593 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 17:43:32.597 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:43:32.598 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 17:43:39.599 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 17:43:39.660 +03:00 [DBG] Hosting starting
2026-02-05 17:43:39.667 +03:00 [DBG] Middleware loaded
2026-02-05 17:43:39.668 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-05 17:43:39.669 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-05 17:43:39.713 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-05 17:43:39.787 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 17:43:39.787 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 17:43:39.788 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 17:43:39.789 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 17:43:39.789 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 17:43:39.790 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 17:43:39.818 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 17:43:39.819 +03:00 [INF] Hosting environment: Development
2026-02-05 17:43:39.820 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 17:43:39.821 +03:00 [DBG] Hosting started
2026-02-05 17:43:39.852 +03:00 [DBG] Connection id "0HNJ4OJPRH8KB" accepted.
2026-02-05 17:43:39.853 +03:00 [DBG] Connection id "0HNJ4OJPRH8KB" started.
2026-02-05 17:43:39.862 +03:00 [DBG] Connection id "0HNJ4OJPRH8KC" accepted.
2026-02-05 17:43:39.863 +03:00 [DBG] Connection id "0HNJ4OJPRH8KC" started.
2026-02-05 17:43:39.894 +03:00 [DBG] Connection id "0HNJ4OJPRH8KB" received FIN.
2026-02-05 17:43:39.894 +03:00 [DBG] Connection id "0HNJ4OJPRH8KC" received FIN.
2026-02-05 17:43:39.901 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:43:39.901 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:43:39.920 +03:00 [DBG] Connection id "0HNJ4OJPRH8KC" stopped.
2026-02-05 17:43:39.920 +03:00 [DBG] Connection id "0HNJ4OJPRH8KB" stopped.
2026-02-05 17:43:39.923 +03:00 [DBG] Connection id "0HNJ4OJPRH8KC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:43:39.923 +03:00 [DBG] Connection id "0HNJ4OJPRH8KB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:43:40.110 +03:00 [DBG] Connection id "0HNJ4OJPRH8KD" accepted.
2026-02-05 17:43:40.113 +03:00 [DBG] Connection id "0HNJ4OJPRH8KD" started.
2026-02-05 17:43:40.143 +03:00 [DBG] Connection 0HNJ4OJPRH8KD established using the following protocol: "Tls13"
2026-02-05 17:43:40.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 17:43:40.237 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 17:43:40.245 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 17:43:40.246 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:43:40.248 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:43:40.280 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 17:43:40.281 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 17:43:40.291 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 17:43:40.291 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 17:43:40.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 120.7116ms
2026-02-05 17:43:40.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 17:43:40.317 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-05 17:43:40.319 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 7.1166ms
2026-02-05 17:43:40.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 17:43:40.364 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.351ms
2026-02-05 17:43:40.475 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 17:43:40.477 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 17:43:40.478 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:43:40.479 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:43:40.483 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.4342ms
2026-02-05 17:43:48.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Милан/week - null null
2026-02-05 17:43:48.193 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Милан/week'
2026-02-05 17:43:48.195 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Милан/week'
2026-02-05 17:43:48.196 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:43:48.198 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:43:48.199 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:43:48.201 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:43:48.212 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:43:48.214 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:43:48.214 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:43:48.216 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:43:48.217 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:43:48.217 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:43:48.219 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:43:48.273 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 17:43:48.278 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:43:48.285 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:43:48.286 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:43:48.287 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:43:48.288 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:43:48.289 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:43:48.292 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:43:48.304 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B8%D0%BB%D0%B0%D0%BD&count=1&language=ru
2026-02-05 17:43:48.306 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B8%D0%BB%D0%B0%D0%BD&count=1&language=ru
2026-02-05 17:43:48.556 +03:00 [INF] Received HTTP response headers after 247.7758ms - 200
2026-02-05 17:43:48.557 +03:00 [INF] End processing HTTP request after 253.5935ms - 200
2026-02-05 17:43:48.568 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=45.46427&longitude=9.18951&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:43:48.569 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=45.46427&longitude=9.18951&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:43:48.833 +03:00 [INF] Received HTTP response headers after 262.4505ms - 200
2026-02-05 17:43:48.834 +03:00 [INF] End processing HTTP request after 266.1878ms - 200
2026-02-05 17:43:49.056 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:43:49.072 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:43:49.099 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:43:49.103 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 17:43:49.105 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 17:43:49.113 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 17:43:49.145 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:43:49.150 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 17:43:49.152 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:43:49.159 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:43:49.162 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:43:49.165 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:43:49.167 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 17:43:49.171 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:43:49.183 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:43:49.191 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 17:43:49.196 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:43:49.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 14ms reading results.
2026-02-05 17:43:49.204 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:43:49.206 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-05 17:43:49.214 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:43:49.216 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 17:43:49.219 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:43:49.221 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:43:49.221 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:43:49.222 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:43:49.223 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:43:49.224 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 17:43:49.234 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1014.2553ms
2026-02-05 17:43:49.235 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:43:49.237 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:43:49.240 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:43:49.241 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:43:49.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Милан/week - 200 null application/json; charset=utf-8 1054.3401ms
2026-02-05 17:44:11.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 17:44:11.045 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 17:44:11.046 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 17:44:11.047 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:44:11.047 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:44:11.048 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:44:11.049 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:44:11.053 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 17:44:11.054 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:44:11.055 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:44:11.055 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:44:11.056 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:44:11.057 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:44:11.058 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:44:11.059 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:44:11.062 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:44:11.063 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 17:44:11.065 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:44:11.065 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:44:11.066 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:44:11.067 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:44:11.068 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:44:11.068 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 17:44:11.069 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:44:11.070 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:44:11.071 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:44:11.071 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:44:11.072 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 17:44:11.073 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 17:44:11.073 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:44:11.074 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:44:11.075 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 17:44:11.075 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 17:44:11.076 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:44:11.077 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 17:44:11.077 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:44:11.078 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:44:11.079 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:44:11.080 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:44:11.112 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:44:11.135 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 17:44:11.212 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 17:44:11.225 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:44:11.225 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 17:44:11.226 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:44:11.227 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:44:11.227 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:44:11.228 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:44:11.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:44:11.229 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:44:11.231 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:44:11.232 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:44:11.233 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 17:44:11.234 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:44:11.235 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:44:11.238 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 17:44:11.255 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 17:44:11.258 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:44:11.259 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:44:11.260 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:44:11.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:44:11.261 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:44:11.262 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:44:11.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:44:11.266 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.267 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.268 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.268 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.269 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.270 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.270 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:44:11.271 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:44:11.272 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 17:44:11.273 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:44:11.273 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:44:11.274 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:44:11.275 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:44:11.276 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:44:11.276 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:44:11.277 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:44:11.277 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 17:44:11.285 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 226.982ms
2026-02-05 17:44:11.286 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:44:11.286 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:44:11.287 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:44:11.288 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:44:11.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 249.161ms
2026-02-05 17:45:48.321 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 17:45:58.338 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:45:58.340 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0349ms - processed: 0 items - remaining: 1 items
2026-02-05 17:46:08.343 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:46:08.344 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 17:46:18.357 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:46:18.358 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0063ms - processed: 0 items - remaining: 1 items
2026-02-05 17:46:28.364 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:46:28.365 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 17:46:38.371 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:46:38.372 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 17:46:48.388 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:46:48.389 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-05 17:46:58.390 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:46:58.391 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 17:47:08.397 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:47:08.398 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 17:47:18.409 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:47:18.410 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 17:47:28.424 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 17:47:28.424 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 17:47:32.257 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 17:47:32.338 +03:00 [DBG] Hosting starting
2026-02-05 17:47:32.348 +03:00 [DBG] Middleware loaded
2026-02-05 17:47:32.349 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-05 17:47:32.351 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-05 17:47:32.398 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-05 17:47:32.458 +03:00 [DBG] Connection id "0HNJ4OLV5QQET" accepted.
2026-02-05 17:47:32.459 +03:00 [DBG] Connection id "0HNJ4OLV5QQET" started.
2026-02-05 17:47:32.464 +03:00 [DBG] Connection id "0HNJ4OLV5QQEU" accepted.
2026-02-05 17:47:32.465 +03:00 [DBG] Connection id "0HNJ4OLV5QQEU" started.
2026-02-05 17:47:32.465 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 17:47:32.467 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 17:47:32.469 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 17:47:32.470 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 17:47:32.471 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 17:47:32.471 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 17:47:32.495 +03:00 [DBG] Connection id "0HNJ4OLV5QQET" received FIN.
2026-02-05 17:47:32.495 +03:00 [DBG] Connection id "0HNJ4OLV5QQEU" received FIN.
2026-02-05 17:47:32.498 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 17:47:32.499 +03:00 [INF] Hosting environment: Development
2026-02-05 17:47:32.502 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 17:47:32.503 +03:00 [DBG] Hosting started
2026-02-05 17:47:32.503 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:47:32.503 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 17:47:32.523 +03:00 [DBG] Connection id "0HNJ4OLV5QQET" stopped.
2026-02-05 17:47:32.523 +03:00 [DBG] Connection id "0HNJ4OLV5QQEU" stopped.
2026-02-05 17:47:32.526 +03:00 [DBG] Connection id "0HNJ4OLV5QQET" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:47:32.526 +03:00 [DBG] Connection id "0HNJ4OLV5QQEU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 17:47:32.667 +03:00 [DBG] Connection id "0HNJ4OLV5QQEV" accepted.
2026-02-05 17:47:32.669 +03:00 [DBG] Connection id "0HNJ4OLV5QQEV" started.
2026-02-05 17:47:32.695 +03:00 [DBG] Connection 0HNJ4OLV5QQEV established using the following protocol: "Tls13"
2026-02-05 17:47:32.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 17:47:32.789 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 17:47:32.799 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 17:47:32.800 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:47:32.804 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:47:32.839 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 17:47:32.841 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 17:47:32.851 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 17:47:32.852 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 17:47:32.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 129.215ms
2026-02-05 17:47:32.889 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 17:47:32.895 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-05 17:47:32.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 8.1205ms
2026-02-05 17:47:32.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 17:47:32.928 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.9351ms
2026-02-05 17:47:33.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 17:47:33.046 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 17:47:33.046 +03:00 [DBG] Request did not match any endpoints
2026-02-05 17:47:33.047 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 17:47:33.052 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.0969ms
2026-02-05 17:47:44.882 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Воронеж/week - null null
2026-02-05 17:47:44.886 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Воронеж/week'
2026-02-05 17:47:44.888 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Воронеж/week'
2026-02-05 17:47:44.890 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:47:44.891 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:47:44.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:47:44.894 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:47:44.905 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 17:47:44.907 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:47:44.908 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:47:44.909 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:47:44.910 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:47:44.911 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:47:44.912 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:47:44.967 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 17:47:44.973 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 17:47:44.979 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 17:47:44.980 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 17:47:44.982 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:47:44.982 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 17:47:44.983 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 17:47:44.986 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 17:47:44.998 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%B5%D0%B6&count=1&language=ru
2026-02-05 17:47:44.999 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%B5%D0%B6&count=1&language=ru
2026-02-05 17:47:45.281 +03:00 [INF] Received HTTP response headers after 280.0209ms - 200
2026-02-05 17:47:45.282 +03:00 [INF] End processing HTTP request after 284.9308ms - 200
2026-02-05 17:47:45.292 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.67204&longitude=39.1843&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:47:45.293 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.67204&longitude=39.1843&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 17:47:45.574 +03:00 [INF] Received HTTP response headers after 280.6642ms - 200
2026-02-05 17:47:45.575 +03:00 [INF] End processing HTTP request after 282.9464ms - 200
2026-02-05 17:47:45.803 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:47:45.820 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:47:45.847 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:47:45.850 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 17:47:45.852 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 17:47:45.860 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 17:47:45.894 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:47:45.900 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 17:47:45.902 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:47:45.908 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:47:45.912 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:47:45.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:47:45.917 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 17:47:45.921 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:47:45.932 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 17:47:45.940 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 17:47:45.945 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:47:45.949 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 17:47:45.951 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:47:45.953 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-05 17:47:45.959 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:47:45.960 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 17:47:45.963 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:47:45.965 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:47:45.965 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:47:45.965 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:47:45.966 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:47:45.967 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 17:47:45.977 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1064.0533ms
2026-02-05 17:47:45.978 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 17:47:45.981 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:47:45.983 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:47:45.985 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 17:47:45.986 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Воронеж/week - 200 null application/json; charset=utf-8 1104.3087ms
2026-02-05 17:48:00.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 17:48:00.417 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 17:48:00.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 17:48:00.419 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:48:00.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:48:00.421 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 17:48:00.422 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:48:00.426 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 17:48:00.427 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 17:48:00.428 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 17:48:00.429 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 17:48:00.431 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 17:48:00.432 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 17:48:00.433 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:48:00.434 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 17:48:00.437 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:48:00.438 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 17:48:00.440 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:48:00.440 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:48:00.441 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 17:48:00.442 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 17:48:00.443 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:48:00.443 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 17:48:00.444 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:48:00.445 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:48:00.446 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 17:48:00.446 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 17:48:00.447 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 17:48:00.448 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 17:48:00.449 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:48:00.449 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 17:48:00.450 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 17:48:00.451 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 17:48:00.451 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:48:00.452 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 17:48:00.453 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:48:00.454 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:48:00.454 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 17:48:00.455 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 17:48:00.488 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 17:48:00.512 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 17:48:00.594 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 17:48:00.607 +03:00 [DBG] Creating DbConnection.
2026-02-05 17:48:00.607 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 17:48:00.608 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:48:00.609 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:48:00.609 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:48:00.610 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:48:00.610 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:48:00.611 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:48:00.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 17:48:00.614 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:48:00.615 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 17:48:00.616 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:48:00.616 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:48:00.619 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 17:48:00.635 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 17:48:00.638 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:48:00.639 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:48:00.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 17:48:00.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 17:48:00.641 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 17:48:00.641 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:48:00.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 17:48:00.645 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.646 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.647 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.648 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.648 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.649 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.650 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.650 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 17:48:00.651 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:48:00.652 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 8ms reading results.
2026-02-05 17:48:00.653 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 17:48:00.654 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:48:00.655 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 17:48:00.656 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 17:48:00.656 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 17:48:00.657 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 17:48:00.657 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 17:48:00.658 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 17:48:00.665 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 232.3606ms
2026-02-05 17:48:00.666 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 17:48:00.666 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 17:48:00.667 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 17:48:00.668 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 17:48:00.669 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 255.218ms
2026-02-05 19:30:33.660 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 19:30:33.741 +03:00 [DBG] Hosting starting
2026-02-05 19:30:33.838 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 19:30:33.839 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 19:30:33.839 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 19:30:33.840 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 19:30:33.840 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 19:30:33.841 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 19:30:33.862 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 19:30:33.862 +03:00 [INF] Hosting environment: Development
2026-02-05 19:30:33.863 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 19:30:33.864 +03:00 [DBG] Hosting started
2026-02-05 19:30:34.081 +03:00 [DBG] Connection id "0HNJ4QFHECGT6" accepted.
2026-02-05 19:30:34.081 +03:00 [DBG] Connection id "0HNJ4QFHECGT7" accepted.
2026-02-05 19:30:34.082 +03:00 [DBG] Connection id "0HNJ4QFHECGT6" started.
2026-02-05 19:30:34.083 +03:00 [DBG] Connection id "0HNJ4QFHECGT7" started.
2026-02-05 19:30:34.091 +03:00 [DBG] Connection id "0HNJ4QFHECGT7" received FIN.
2026-02-05 19:30:34.092 +03:00 [DBG] Connection id "0HNJ4QFHECGT6" received FIN.
2026-02-05 19:30:34.099 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:30:34.099 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:30:34.119 +03:00 [DBG] Connection id "0HNJ4QFHECGT7" stopped.
2026-02-05 19:30:34.119 +03:00 [DBG] Connection id "0HNJ4QFHECGT6" stopped.
2026-02-05 19:30:34.122 +03:00 [DBG] Connection id "0HNJ4QFHECGT6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:30:34.122 +03:00 [DBG] Connection id "0HNJ4QFHECGT7" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:30:34.812 +03:00 [DBG] Connection id "0HNJ4QFHECGT8" accepted.
2026-02-05 19:30:34.813 +03:00 [DBG] Connection id "0HNJ4QFHECGT8" started.
2026-02-05 19:30:34.839 +03:00 [DBG] Connection 0HNJ4QFHECGT8 established using the following protocol: "Tls13"
2026-02-05 19:30:34.873 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 19:30:34.954 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 19:30:34.965 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 19:30:34.966 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:30:34.968 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:30:34.993 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 19:30:34.995 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 19:30:35.004 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 19:30:35.005 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 19:30:35.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 137.2966ms
2026-02-05 19:30:35.028 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 19:30:35.035 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.3427ms
2026-02-05 19:30:35.050 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 19:30:35.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.7682ms
2026-02-05 19:30:35.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 19:30:35.224 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 19:30:35.225 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:30:35.226 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:30:35.231 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.8862ms
2026-02-05 19:30:46.769 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Хабаровск/week - null null
2026-02-05 19:30:46.775 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Хабаровск/week'
2026-02-05 19:30:46.777 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Хабаровск/week'
2026-02-05 19:30:46.778 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 19:30:46.780 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:30:46.780 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:30:46.782 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 19:30:46.795 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 19:30:46.797 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:30:46.798 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:30:46.798 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:30:46.799 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:30:46.800 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:30:46.802 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:30:46.872 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 19:30:46.878 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:30:46.884 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 19:30:46.886 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 19:30:46.888 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:30:46.888 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:30:46.889 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 19:30:46.892 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 19:30:46.907 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 19:30:46.908 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 19:30:47.161 +03:00 [INF] Received HTTP response headers after 250.9212ms - 200
2026-02-05 19:30:47.162 +03:00 [INF] End processing HTTP request after 255.9937ms - 200
2026-02-05 19:30:47.172 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 19:30:47.173 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 19:30:47.439 +03:00 [INF] Received HTTP response headers after 265.7374ms - 200
2026-02-05 19:30:47.440 +03:00 [INF] End processing HTTP request after 268.3199ms - 200
2026-02-05 19:30:47.687 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:30:47.705 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:30:47.733 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:30:47.737 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 19:30:47.739 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 19:30:47.747 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 19:30:47.782 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:30:47.788 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-05 19:30:47.790 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:30:47.802 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:30:47.806 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:30:47.809 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:30:47.811 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 19:30:47.815 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:30:47.831 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:30:47.839 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 19:30:47.843 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:30:47.847 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 19:30:47.850 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:30:47.852 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 19:30:47.857 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:30:47.858 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 19:30:47.861 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:30:47.863 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:30:47.864 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:30:47.864 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:30:47.865 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:30:47.866 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 19:30:47.875 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1072.8341ms
2026-02-05 19:30:47.876 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 19:30:47.878 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:30:47.880 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:30:47.881 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 19:30:47.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Хабаровск/week - 200 null application/json; charset=utf-8 1114.1587ms
2026-02-05 19:31:49.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Хабаровск?date=2026-02-05 - null null
2026-02-05 19:31:49.122 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Хабаровск'
2026-02-05 19:31:49.123 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Хабаровск'
2026-02-05 19:31:49.124 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:31:49.124 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:31:49.125 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:31:49.125 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:31:49.129 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 19:31:49.130 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:31:49.131 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:31:49.131 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:31:49.132 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:31:49.133 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:31:49.134 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:31:49.135 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:31:49.138 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 19:31:49.139 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 19:31:49.140 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:31:49.140 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:31:49.141 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 19:31:49.142 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 19:31:49.143 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:31:49.144 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 19:31:49.146 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:31:49.146 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:31:49.147 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:31:49.148 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:31:49.150 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 19:31:49.151 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A5%D0%B0%D0%B1%D0%B0%D1%80%D0%BE%D0%B2%D1%81%D0%BA&count=1&language=ru
2026-02-05 19:31:49.210 +03:00 [INF] Received HTTP response headers after 58.7982ms - 200
2026-02-05 19:31:49.211 +03:00 [INF] End processing HTTP request after 60.9748ms - 200
2026-02-05 19:31:49.212 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:31:49.213 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.48271&longitude=135.08379&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:31:49.432 +03:00 [INF] Received HTTP response headers after 218.4903ms - 200
2026-02-05 19:31:49.433 +03:00 [INF] End processing HTTP request after 220.6697ms - 200
2026-02-05 19:31:49.461 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:31:49.463 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:31:49.464 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:31:49.465 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 19:31:49.466 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 19:31:49.467 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 19:31:49.468 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:31:49.469 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 19:31:49.469 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:31:49.470 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:31:49.471 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:31:49.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 19:31:49.472 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:31:49.473 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:31:49.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:31:49.475 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 19:31:49.477 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:31:49.479 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-05 19:31:49.481 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:31:49.482 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:31:49.484 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:31:49.485 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 19:31:49.486 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:31:49.488 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:31:49.489 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:31:49.489 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:31:49.490 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:31:49.491 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 19:31:49.492 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 357.7951ms
2026-02-05 19:31:49.492 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:31:49.493 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:31:49.494 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:31:49.494 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:31:49.495 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Хабаровск?date=2026-02-05 - 200 null application/json; charset=utf-8 378.7537ms
2026-02-05 19:32:46.915 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 19:32:56.927 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:32:56.929 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0374ms - processed: 0 items - remaining: 1 items
2026-02-05 19:33:06.936 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:33:06.937 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 19:33:16.944 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:33:16.946 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:33:26.956 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:33:26.957 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 19:33:36.965 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:33:36.966 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:33:42.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 19:33:42.541 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 19:33:42.542 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 19:33:42.543 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 19:33:42.543 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:33:42.544 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:33:42.544 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 19:33:42.547 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 19:33:42.548 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:33:42.549 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:33:42.550 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:33:42.551 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:33:42.552 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:33:42.552 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 19:33:42.553 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 19:33:42.554 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 19:33:42.555 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 19:33:42.556 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 19:33:42.556 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 19:33:42.557 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 19:33:42.558 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 19:33:42.558 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 19:33:42.559 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 19:33:42.560 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 19:33:42.560 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 19:33:42.561 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 19:33:42.562 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 19:33:42.562 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 19:33:42.563 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 19:33:42.564 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 19:33:42.564 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 19:33:42.565 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 19:33:42.565 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 19:33:42.566 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 19:33:42.567 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 19:33:42.568 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 19:33:42.568 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 19:33:42.569 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 19:33:42.570 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 19:33:42.582 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:33:42.608 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 19:33:42.691 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 19:33:42.703 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:33:42.703 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 19:33:42.704 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:33:42.705 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:33:42.705 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:33:42.706 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 19:33:42.707 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:33:42.707 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 19:33:42.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 19:33:42.710 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:33:42.711 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 19:33:42.712 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:33:42.712 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:33:42.715 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 19:33:42.731 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 19:33:42.734 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:33:42.734 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:33:42.735 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:33:42.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 19:33:42.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:33:42.737 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 19:33:42.739 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 19:33:42.742 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.743 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.743 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.744 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.745 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.746 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.746 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.747 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.748 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.748 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:33:42.749 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:33:42.750 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 9ms reading results.
2026-02-05 19:33:42.751 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:33:42.751 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:33:42.752 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:33:42.754 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:33:42.754 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:33:42.754 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:33:42.755 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:33:42.756 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 19:33:42.764 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 211.4209ms
2026-02-05 19:33:42.764 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 19:33:42.765 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:33:42.766 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:33:42.766 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:33:42.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 233.2388ms
2026-02-05 19:33:46.980 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:33:46.981 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 19:33:56.988 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:33:56.989 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 19:34:06.992 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:34:06.993 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:34:16.999 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:34:17.000 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-05 19:34:27.011 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:34:27.012 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-05 19:34:37.028 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:34:37.028 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 19:34:47.043 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:34:47.043 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:34:57.048 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:34:57.048 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 19:35:07.061 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:35:07.062 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 19:35:17.068 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:35:17.068 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 19:35:27.079 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:35:27.080 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-05 19:35:37.082 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:35:37.084 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.466ms - processed: 0 items - remaining: 1 items
2026-02-05 19:35:47.098 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:35:47.098 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 19:35:57.104 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:35:57.105 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 19:36:07.119 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:36:07.119 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:36:17.124 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:36:17.124 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 19:36:27.132 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:36:27.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 19:36:37.143 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:36:37.144 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 19:36:47.157 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:36:47.159 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.45ms - processed: 0 items - remaining: 1 items
2026-02-05 19:36:57.164 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:36:57.165 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 19:37:07.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:37:07.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 19:37:17.181 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:37:17.182 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 19:37:27.199 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:37:27.200 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 19:41:36.083 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 19:41:36.141 +03:00 [DBG] Hosting starting
2026-02-05 19:41:36.233 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 19:41:36.234 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 19:41:36.234 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 19:41:36.235 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 19:41:36.235 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 19:41:36.236 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 19:41:36.257 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 19:41:36.257 +03:00 [INF] Hosting environment: Development
2026-02-05 19:41:36.258 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 19:41:36.259 +03:00 [DBG] Hosting started
2026-02-05 19:41:36.605 +03:00 [DBG] Connection id "0HNJ4QLMSMVR0" accepted.
2026-02-05 19:41:36.605 +03:00 [DBG] Connection id "0HNJ4QLMSMVQV" accepted.
2026-02-05 19:41:36.606 +03:00 [DBG] Connection id "0HNJ4QLMSMVR0" started.
2026-02-05 19:41:36.607 +03:00 [DBG] Connection id "0HNJ4QLMSMVQV" started.
2026-02-05 19:41:36.623 +03:00 [DBG] Connection id "0HNJ4QLMSMVR0" received FIN.
2026-02-05 19:41:36.623 +03:00 [DBG] Connection id "0HNJ4QLMSMVQV" received FIN.
2026-02-05 19:41:36.628 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:41:36.628 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:41:36.645 +03:00 [DBG] Connection id "0HNJ4QLMSMVQV" stopped.
2026-02-05 19:41:36.645 +03:00 [DBG] Connection id "0HNJ4QLMSMVR0" stopped.
2026-02-05 19:41:36.648 +03:00 [DBG] Connection id "0HNJ4QLMSMVR0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:41:36.648 +03:00 [DBG] Connection id "0HNJ4QLMSMVQV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:41:36.775 +03:00 [DBG] Connection id "0HNJ4QLMSMVR1" accepted.
2026-02-05 19:41:36.776 +03:00 [DBG] Connection id "0HNJ4QLMSMVR1" started.
2026-02-05 19:41:36.803 +03:00 [DBG] Connection 0HNJ4QLMSMVR1 established using the following protocol: "Tls13"
2026-02-05 19:41:36.834 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 19:41:36.899 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 19:41:36.910 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 19:41:36.911 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:41:36.915 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:41:36.948 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 19:41:36.949 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 19:41:36.960 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 19:41:36.960 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 19:41:36.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 131.9943ms
2026-02-05 19:41:36.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 19:41:36.987 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.2658ms
2026-02-05 19:41:37.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 19:41:37.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.0632ms
2026-02-05 19:41:37.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 19:41:37.119 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 19:41:37.120 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:41:37.121 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:41:37.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.3664ms
2026-02-05 19:41:56.997 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Париж?date=2026-02-05 - null null
2026-02-05 19:41:57.002 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Париж'
2026-02-05 19:41:57.004 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Париж'
2026-02-05 19:41:57.006 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:41:57.007 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:41:57.008 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:41:57.009 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:41:57.022 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 19:41:57.024 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:41:57.024 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:41:57.025 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:41:57.026 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:41:57.027 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:41:57.029 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:41:57.083 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 19:41:57.088 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:41:57.095 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 19:41:57.097 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 19:41:57.098 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:41:57.099 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:41:57.100 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 19:41:57.103 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 19:41:57.104 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:41:57.105 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 19:41:57.107 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:41:57.108 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:41:57.108 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:41:57.109 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:41:57.121 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B0%D1%80%D0%B8%D0%B6&count=1&language=ru
2026-02-05 19:41:57.123 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B0%D1%80%D0%B8%D0%B6&count=1&language=ru
2026-02-05 19:41:57.389 +03:00 [INF] Received HTTP response headers after 264.48ms - 200
2026-02-05 19:41:57.391 +03:00 [INF] End processing HTTP request after 269.9385ms - 200
2026-02-05 19:41:57.400 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.85341&longitude=2.3488&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:41:57.401 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=48.85341&longitude=2.3488&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:41:57.697 +03:00 [INF] Received HTTP response headers after 294.6292ms - 200
2026-02-05 19:41:57.698 +03:00 [INF] End processing HTTP request after 297.4157ms - 200
2026-02-05 19:41:57.924 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:41:57.942 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:41:57.969 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:41:57.972 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 19:41:57.974 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 19:41:57.983 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 19:41:58.016 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:41:58.022 +03:00 [DBG] Created DbConnection. (6ms).
2026-02-05 19:41:58.025 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:41:58.032 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:41:58.035 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:41:58.039 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:41:58.041 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 19:41:58.045 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:41:58.056 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:41:58.064 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 19:41:58.069 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:41:58.072 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 19:41:58.075 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:41:58.077 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 19:41:58.083 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:41:58.084 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 19:41:58.090 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:41:58.092 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:41:58.092 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:41:58.092 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:41:58.093 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:41:58.094 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 19:41:58.101 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1071.151ms
2026-02-05 19:41:58.102 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:41:58.104 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:41:58.106 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:41:58.108 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 19:41:58.109 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Париж?date=2026-02-05 - 200 null application/json; charset=utf-8 1112.5492ms
2026-02-05 19:42:51.023 +03:00 [DBG] Connection id "0HNJ4QLMSMVR2" accepted.
2026-02-05 19:42:51.023 +03:00 [DBG] Connection id "0HNJ4QLMSMVR2" received FIN.
2026-02-05 19:42:51.024 +03:00 [DBG] Connection id "0HNJ4QLMSMVR2" started.
2026-02-05 19:42:51.024 +03:00 [DBG] Connection id "0HNJ4QLMSMVR3" accepted.
2026-02-05 19:42:51.030 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:42:51.030 +03:00 [DBG] Connection id "0HNJ4QLMSMVR3" started.
2026-02-05 19:42:51.031 +03:00 [DBG] Connection id "0HNJ4QLMSMVR2" stopped.
2026-02-05 19:42:51.032 +03:00 [DBG] Connection id "0HNJ4QLMSMVR2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:42:51.034 +03:00 [DBG] Connection 0HNJ4QLMSMVR3 established using the following protocol: "Tls13"
2026-02-05 19:42:51.037 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-05 19:42:51.039 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-05 19:42:51.040 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-05 19:42:51.041 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:42:51.042 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:42:51.042 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:42:51.043 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:42:51.043 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 19:42:51.044 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:42:51.045 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:42:51.046 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:42:51.047 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:42:51.048 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:42:51.049 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:42:51.051 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:42:51.052 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 19:42:51.053 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 19:42:51.054 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:42:51.054 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:42:51.055 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 19:42:51.056 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 19:42:51.057 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:42:51.058 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 19:42:51.059 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:42:51.059 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:42:51.060 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:42:51.061 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:42:51.062 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-05 19:42:51.063 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-05 19:42:51.113 +03:00 [INF] Received HTTP response headers after 49.9385ms - 200
2026-02-05 19:42:51.114 +03:00 [INF] End processing HTTP request after 52.2076ms - 200
2026-02-05 19:42:51.115 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:42:51.116 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:42:51.348 +03:00 [INF] Received HTTP response headers after 230.795ms - 200
2026-02-05 19:42:51.348 +03:00 [INF] End processing HTTP request after 233.3338ms - 200
2026-02-05 19:42:51.376 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:42:51.378 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:42:51.379 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:42:51.380 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 19:42:51.381 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 19:42:51.382 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 19:42:51.383 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:42:51.383 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 19:42:51.384 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:42:51.385 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:42:51.386 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:42:51.386 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 19:42:51.387 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:42:51.388 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:42:51.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:42:51.390 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 19:42:51.392 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:42:51.393 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 19:42:51.394 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:42:51.395 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:42:51.396 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:42:51.398 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 19:42:51.399 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:42:51.401 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:42:51.401 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:42:51.402 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:42:51.402 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:42:51.403 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 19:42:51.405 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 355.8293ms
2026-02-05 19:42:51.406 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:42:51.407 +03:00 [DBG] Connection id "0HNJ4QLMSMVR3" completed keep alive response.
2026-02-05 19:42:51.407 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:42:51.408 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:42:51.408 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:42:51.409 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 372.3147ms
2026-02-05 19:42:59.380 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/static/icons/cloudy.png - null null
2026-02-05 19:42:59.382 +03:00 [DBG] No candidates found for the request path '/static/icons/cloudy.png'
2026-02-05 19:42:59.382 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:42:59.386 +03:00 [INF] Sending file. Request path: '/cloudy.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\cloudy.png'
2026-02-05 19:42:59.387 +03:00 [DBG] Connection id "0HNJ4QLMSMVR3" completed keep alive response.
2026-02-05 19:42:59.388 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/static/icons/cloudy.png - 200 1439 image/png 7.5504ms
2026-02-05 19:43:57.131 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 19:44:07.136 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:44:07.138 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0336ms - processed: 0 items - remaining: 1 items
2026-02-05 19:44:17.154 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:44:17.155 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 19:44:27.160 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:44:27.162 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6124ms - processed: 0 items - remaining: 1 items
2026-02-05 19:44:37.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:44:37.177 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 19:44:47.178 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:44:47.179 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 19:44:57.196 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:44:57.197 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 19:45:07.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:45:07.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:45:17.218 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:45:17.219 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 19:45:27.223 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:45:27.224 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 19:45:37.236 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:45:37.237 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 19:45:47.248 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:45:47.249 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2026-02-05 19:45:57.251 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:45:57.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 19:46:07.268 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:46:07.269 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 19:46:17.283 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:46:17.284 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 19:46:27.287 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:46:27.287 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-05 19:46:37.290 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:46:37.291 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-05 19:46:47.297 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:46:47.298 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 19:46:57.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:46:57.313 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4411ms - processed: 0 items - remaining: 1 items
2026-02-05 19:47:07.329 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:47:07.329 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 19:47:17.345 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 19:47:17.346 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 19:47:49.972 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 19:47:50.043 +03:00 [DBG] Hosting starting
2026-02-05 19:47:50.141 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 19:47:50.142 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 19:47:50.142 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 19:47:50.143 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 19:47:50.144 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 19:47:50.144 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 19:47:50.166 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 19:47:50.167 +03:00 [INF] Hosting environment: Development
2026-02-05 19:47:50.167 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 19:47:50.168 +03:00 [DBG] Hosting started
2026-02-05 19:47:50.369 +03:00 [DBG] Connection id "0HNJ4QP696L50" accepted.
2026-02-05 19:47:50.369 +03:00 [DBG] Connection id "0HNJ4QP696L51" accepted.
2026-02-05 19:47:50.370 +03:00 [DBG] Connection id "0HNJ4QP696L50" started.
2026-02-05 19:47:50.371 +03:00 [DBG] Connection id "0HNJ4QP696L51" started.
2026-02-05 19:47:50.372 +03:00 [DBG] Connection id "0HNJ4QP696L51" received FIN.
2026-02-05 19:47:50.372 +03:00 [DBG] Connection id "0HNJ4QP696L50" received FIN.
2026-02-05 19:47:50.384 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:47:50.384 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:47:50.401 +03:00 [DBG] Connection id "0HNJ4QP696L51" stopped.
2026-02-05 19:47:50.401 +03:00 [DBG] Connection id "0HNJ4QP696L50" stopped.
2026-02-05 19:47:50.405 +03:00 [DBG] Connection id "0HNJ4QP696L50" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:47:50.405 +03:00 [DBG] Connection id "0HNJ4QP696L51" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:47:50.627 +03:00 [DBG] Connection id "0HNJ4QP696L52" accepted.
2026-02-05 19:47:50.629 +03:00 [DBG] Connection id "0HNJ4QP696L52" started.
2026-02-05 19:47:50.659 +03:00 [DBG] Connection 0HNJ4QP696L52 established using the following protocol: "Tls13"
2026-02-05 19:47:50.690 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 19:47:50.753 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 19:47:50.764 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 19:47:50.765 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:47:50.768 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:47:50.800 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 19:47:50.802 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 19:47:50.811 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 19:47:50.812 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 19:47:50.814 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 127.5596ms
2026-02-05 19:47:50.834 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 19:47:50.839 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.0666ms
2026-02-05 19:47:50.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 19:47:50.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.5202ms
2026-02-05 19:47:50.965 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 19:47:50.968 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 19:47:50.969 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:47:50.971 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:47:50.977 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.1425ms
2026-02-05 19:48:11.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-05 19:48:11.340 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-05 19:48:11.342 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-05 19:48:11.343 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:48:11.344 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:48:11.345 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:48:11.347 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:48:11.359 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 19:48:11.361 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:48:11.362 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:48:11.363 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:48:11.364 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:48:11.365 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:48:11.366 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:48:11.423 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 19:48:11.428 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:48:11.436 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 19:48:11.438 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 19:48:11.439 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:48:11.440 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:48:11.441 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 19:48:11.444 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 19:48:11.445 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:48:11.446 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 19:48:11.448 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:48:11.448 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:48:11.449 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:48:11.450 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:48:11.462 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-05 19:48:11.464 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-05 19:48:11.771 +03:00 [INF] Received HTTP response headers after 305.7956ms - 200
2026-02-05 19:48:11.773 +03:00 [INF] End processing HTTP request after 310.7605ms - 200
2026-02-05 19:48:11.782 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:48:11.783 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 19:48:12.063 +03:00 [INF] Received HTTP response headers after 279.3916ms - 200
2026-02-05 19:48:12.063 +03:00 [INF] End processing HTTP request after 281.6684ms - 200
2026-02-05 19:48:12.289 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:48:12.306 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:48:12.334 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:48:12.337 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 19:48:12.339 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 19:48:12.347 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 19:48:12.378 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:48:12.383 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 19:48:12.386 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:48:12.393 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:48:12.397 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:48:12.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:48:12.402 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 19:48:12.407 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:48:12.418 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:48:12.426 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 19:48:12.430 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:48:12.434 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 19:48:12.437 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:48:12.439 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-05 19:48:12.445 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:48:12.446 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 19:48:12.453 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:48:12.456 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:48:12.456 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:48:12.457 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:48:12.457 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:48:12.458 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 19:48:12.465 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1097.8389ms
2026-02-05 19:48:12.466 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:48:12.469 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:48:12.471 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:48:12.472 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 19:48:12.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1142.1334ms
2026-02-05 19:48:30.117 +03:00 [DBG] Connection id "0HNJ4QP696L53" received FIN.
2026-02-05 19:48:30.117 +03:00 [DBG] Connection id "0HNJ4QP696L53" accepted.
2026-02-05 19:48:30.118 +03:00 [DBG] Connection id "0HNJ4QP696L53" started.
2026-02-05 19:48:30.119 +03:00 [DBG] Connection id "0HNJ4QP696L54" accepted.
2026-02-05 19:48:30.121 +03:00 [DBG] Connection id "0HNJ4QP696L54" started.
2026-02-05 19:48:30.123 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 19:48:30.124 +03:00 [DBG] Connection id "0HNJ4QP696L53" stopped.
2026-02-05 19:48:30.126 +03:00 [DBG] Connection id "0HNJ4QP696L53" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 19:48:30.126 +03:00 [DBG] Connection 0HNJ4QP696L54 established using the following protocol: "Tls13"
2026-02-05 19:48:30.129 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-05 19:48:30.131 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-05 19:48:30.132 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-05 19:48:30.132 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:48:30.133 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:48:30.134 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 19:48:30.134 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:48:30.135 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 19:48:30.136 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 19:48:30.137 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 19:48:30.138 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 19:48:30.139 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 19:48:30.140 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 19:48:30.140 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:48:30.142 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 19:48:30.143 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 19:48:30.144 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 19:48:30.144 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:48:30.145 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 19:48:30.146 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 19:48:30.146 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 19:48:30.147 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:48:30.148 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 19:48:30.149 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:48:30.149 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:48:30.150 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 19:48:30.151 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 19:48:30.179 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 19:48:30.181 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:48:30.182 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:48:30.183 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 19:48:30.183 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 19:48:30.184 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 19:48:30.185 +03:00 [DBG] Creating DbConnection.
2026-02-05 19:48:30.186 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 19:48:30.186 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:48:30.187 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:48:30.188 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 19:48:30.188 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 19:48:30.189 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 19:48:30.190 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:48:30.191 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 19:48:30.192 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 19:48:30.194 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:48:30.195 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 19:48:30.196 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 19:48:30.197 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:48:30.198 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 19:48:30.199 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 19:48:30.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 19:48:30.201 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 19:48:30.201 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 19:48:30.202 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 19:48:30.202 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 19:48:30.203 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 19:48:30.205 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 64.2321ms
2026-02-05 19:48:30.205 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 19:48:30.206 +03:00 [DBG] Connection id "0HNJ4QP696L54" completed keep alive response.
2026-02-05 19:48:30.207 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 19:48:30.207 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 19:48:30.208 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 19:48:30.209 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 79.8033ms
2026-02-05 19:48:33.530 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/icons/cloudy.png - null null
2026-02-05 19:48:33.532 +03:00 [DBG] No candidates found for the request path '/icons/cloudy.png'
2026-02-05 19:48:33.532 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:48:33.533 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:48:33.534 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:48:33.534 +03:00 [DBG] Connection id "0HNJ4QP696L54" completed keep alive response.
2026-02-05 19:48:33.535 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/icons/cloudy.png - 404 0 null 4.6499ms
2026-02-05 19:48:33.537 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/icons/cloudy.png, Response status code: 404
2026-02-05 19:48:37.007 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/icons/cloudy.png - null null
2026-02-05 19:48:37.008 +03:00 [DBG] No candidates found for the request path '/icons/cloudy.png'
2026-02-05 19:48:37.009 +03:00 [DBG] Request did not match any endpoints
2026-02-05 19:48:37.009 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:48:37.010 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 19:48:37.011 +03:00 [DBG] Connection id "0HNJ4QP696L54" completed keep alive response.
2026-02-05 19:48:37.011 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/icons/cloudy.png - 404 0 null 4.4587ms
2026-02-05 19:48:37.013 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/icons/cloudy.png, Response status code: 404
2026-02-05 20:21:38.374 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 20:21:38.436 +03:00 [DBG] Hosting starting
2026-02-05 20:21:38.603 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 20:21:38.603 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 20:21:38.604 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 20:21:38.604 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 20:21:38.605 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 20:21:38.605 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 20:21:38.628 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 20:21:38.629 +03:00 [INF] Hosting environment: Development
2026-02-05 20:21:38.629 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 20:21:38.630 +03:00 [DBG] Hosting started
2026-02-05 20:21:38.757 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ5" received FIN.
2026-02-05 20:21:38.757 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ6" received FIN.
2026-02-05 20:21:38.761 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ5" accepted.
2026-02-05 20:21:38.761 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ6" accepted.
2026-02-05 20:21:38.762 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ5" started.
2026-02-05 20:21:38.762 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ6" started.
2026-02-05 20:21:38.773 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 20:21:38.773 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 20:21:38.790 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ5" stopped.
2026-02-05 20:21:38.790 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ6" stopped.
2026-02-05 20:21:38.793 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 20:21:38.793 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 20:21:38.940 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ7" accepted.
2026-02-05 20:21:38.941 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ7" started.
2026-02-05 20:21:38.964 +03:00 [DBG] Connection 0HNJ4RC2PDEQ7 established using the following protocol: "Tls13"
2026-02-05 20:21:38.996 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 20:21:39.057 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 20:21:39.066 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 20:21:39.067 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:21:39.070 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:21:39.105 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 20:21:39.107 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 20:21:39.118 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 20:21:39.119 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 20:21:39.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 127.5609ms
2026-02-05 20:21:39.125 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 20:21:39.130 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.4713ms
2026-02-05 20:21:39.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 20:21:39.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.1609ms
2026-02-05 20:21:39.249 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 20:21:39.252 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 20:21:39.253 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:21:39.254 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:21:39.259 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.0685ms
2026-02-05 20:21:54.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-05 20:21:54.358 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-05 20:21:54.360 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-05 20:21:54.361 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:21:54.363 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:21:54.363 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:21:54.365 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:21:54.378 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:21:54.380 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:21:54.381 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:21:54.382 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:21:54.383 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:21:54.384 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:21:54.386 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:21:54.441 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 20:21:54.446 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:21:54.454 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:21:54.456 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:21:54.458 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:21:54.459 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:21:54.460 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:21:54.463 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:21:54.464 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:21:54.465 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:21:54.467 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:21:54.468 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:21:54.469 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:21:54.470 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:21:54.482 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-05 20:21:54.483 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-05 20:21:55.319 +03:00 [INF] Received HTTP response headers after 833.4893ms - 200
2026-02-05 20:21:55.320 +03:00 [INF] End processing HTTP request after 839.1265ms - 200
2026-02-05 20:21:55.329 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:21:55.330 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:21:55.687 +03:00 [INF] Received HTTP response headers after 356.2812ms - 200
2026-02-05 20:21:55.688 +03:00 [INF] End processing HTTP request after 358.4657ms - 200
2026-02-05 20:21:55.895 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:21:55.911 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:21:55.935 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:21:55.938 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:21:55.940 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:21:55.949 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:21:55.981 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:21:55.986 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 20:21:55.988 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:21:55.994 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:21:55.998 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:21:56.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-05 20:21:56.003 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 20:21:56.008 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:21:56.019 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:21:56.027 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:21:56.031 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:21:56.035 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 20:21:56.038 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:21:56.040 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 20:21:56.045 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:21:56.047 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:21:56.053 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:21:56.055 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:21:56.056 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:21:56.056 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:21:56.057 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:21:56.058 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:21:56.065 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1678.2165ms
2026-02-05 20:21:56.066 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:21:56.069 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:21:56.071 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:21:56.073 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 20:21:56.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1721.4587ms
2026-02-05 20:22:18.462 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - null null
2026-02-05 20:22:18.467 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-05 20:22:18.467 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-05 20:22:18.468 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 20:22:18.469 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:22:18.469 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:22:18.470 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 20:22:18.473 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:22:18.474 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:22:18.475 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:22:18.475 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:22:18.476 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:22:18.477 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:22:18.478 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:22:18.479 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:22:18.480 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:22:18.481 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:22:18.482 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:22:18.483 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:22:18.483 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:22:18.484 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:22:18.485 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:22:18.485 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:22:18.486 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:22:18.487 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:22:18.488 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:22:18.488 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:22:18.489 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-05 20:22:18.489 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-05 20:22:18.490 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 20:22:18.491 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 20:22:18.492 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-05 20:22:18.492 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-05 20:22:18.524 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:22:18.542 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-05 20:22:18.644 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 20:22:18.656 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:22:18.657 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:22:18.657 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:22:18.658 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:18.659 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:22:18.659 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:22:18.660 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:22:18.661 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 20:22:18.662 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 20:22:18.664 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:18.665 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 20:22:18.667 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:18.667 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:22:18.668 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:22:18.670 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:22:18.670 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:22:18.670 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:22:18.671 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:22:18.672 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-05 20:22:18.673 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 194.9562ms
2026-02-05 20:22:18.674 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 20:22:18.675 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:22:18.676 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:22:18.676 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:22:18.677 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - 200 null application/json; charset=utf-8 215.6456ms
2026-02-05 20:22:27.916 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 20:22:27.918 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 20:22:27.919 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 20:22:27.920 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:22:27.921 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:22:27.921 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:22:27.922 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:22:27.925 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:22:27.926 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:22:27.926 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:22:27.927 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:22:27.928 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:22:27.929 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:22:27.930 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:22:27.930 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:22:27.931 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:22:27.932 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:22:27.933 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:22:27.933 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:22:27.934 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:22:27.935 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:22:27.935 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:22:27.936 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:22:27.937 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:22:27.937 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:22:27.938 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:22:27.939 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:22:27.939 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 20:22:27.940 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 20:22:27.941 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:22:27.941 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:22:27.942 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 20:22:27.943 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 20:22:27.943 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:22:27.944 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 20:22:27.945 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:22:27.945 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:22:27.946 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:22:27.946 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:22:27.954 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:22:27.956 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 20:22:27.960 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 20:22:27.963 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:22:27.964 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:22:27.964 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:22:27.965 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:27.966 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:22:27.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:22:27.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:22:27.968 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:22:27.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:22:27.970 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:27.971 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 20:22:27.971 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:27.972 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:22:27.973 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 20:22:27.988 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 20:22:27.989 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:22:27.990 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:27.991 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:22:27.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:22:27.992 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:22:27.993 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:22:27.994 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:22:27.996 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:27.997 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:27.998 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:27.998 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:27.999 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:28.000 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:28.001 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:28.001 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:28.002 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:28.003 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:22:28.003 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:28.004 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 9ms reading results.
2026-02-05 20:22:28.005 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:22:28.005 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:22:28.006 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:22:28.007 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:22:28.008 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:22:28.008 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:22:28.009 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:22:28.009 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 20:22:28.017 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 87.2098ms
2026-02-05 20:22:28.018 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:22:28.018 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:22:28.019 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:22:28.020 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:22:28.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 104.9988ms
2026-02-05 20:22:39.590 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ7" received FIN.
2026-02-05 20:22:39.608 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ7" is closed. The last processed stream ID was 13.
2026-02-05 20:22:39.611 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ7" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 20:22:39.612 +03:00 [DBG] The connection queue processing loop for 0HNJ4RC2PDEQ7 completed.
2026-02-05 20:22:39.631 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ7" stopped.
2026-02-05 20:22:42.596 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ8" accepted.
2026-02-05 20:22:42.597 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ8" started.
2026-02-05 20:22:42.599 +03:00 [DBG] Connection 0HNJ4RC2PDEQ8 established using the following protocol: "Tls13"
2026-02-05 20:22:42.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 20:22:42.607 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 20:22:42.608 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:22:42.608 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:22:42.609 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 20:22:42.609 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 20:22:42.612 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 20:22:42.613 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 20:22:42.614 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 10.2359ms
2026-02-05 20:22:42.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 20:22:42.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 20:22:42.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.8771ms
2026-02-05 20:22:42.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.5185ms
2026-02-05 20:22:42.726 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 20:22:42.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/favicon-32x32.png - null null
2026-02-05 20:22:42.728 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 20:22:42.731 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-05 20:22:42.732 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:22:42.733 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:22:42.734 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:22:42.735 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:22:42.738 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.4693ms
2026-02-05 20:22:42.741 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-05 20:22:42.743 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/favicon-32x32.png - 200 628 image/png 16.039ms
2026-02-05 20:22:54.551 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ8" received FIN.
2026-02-05 20:22:54.602 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ8" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 20:22:54.602 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ8" is closed. The last processed stream ID was 9.
2026-02-05 20:22:54.614 +03:00 [DBG] The connection queue processing loop for 0HNJ4RC2PDEQ8 completed.
2026-02-05 20:22:54.614 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ8" stopped.
2026-02-05 20:23:11.718 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ9" accepted.
2026-02-05 20:23:11.721 +03:00 [DBG] Connection id "0HNJ4RC2PDEQ9" started.
2026-02-05 20:23:11.723 +03:00 [DBG] Connection 0HNJ4RC2PDEQ9 established using the following protocol: "Tls13"
2026-02-05 20:23:11.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Вашингтон?date=2026-02-05 - null null
2026-02-05 20:23:11.729 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Вашингтон'
2026-02-05 20:23:11.729 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Вашингтон'
2026-02-05 20:23:11.730 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:23:11.731 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:23:11.731 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:23:11.732 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:23:11.732 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:23:11.733 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:23:11.734 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:23:11.735 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:23:11.736 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:23:11.737 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:23:11.738 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:23:11.739 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:23:11.740 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:23:11.741 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:23:11.741 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:23:11.742 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:23:11.743 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:23:11.744 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:23:11.745 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:23:11.746 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:23:11.746 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:23:11.747 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:23:11.748 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:23:11.748 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:23:11.749 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%B0%D1%88%D0%B8%D0%BD%D0%B3%D1%82%D0%BE%D0%BD&count=1&language=ru
2026-02-05 20:23:11.750 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%B0%D1%88%D0%B8%D0%BD%D0%B3%D1%82%D0%BE%D0%BD&count=1&language=ru
2026-02-05 20:23:12.087 +03:00 [INF] Received HTTP response headers after 335.6782ms - 200
2026-02-05 20:23:12.087 +03:00 [INF] End processing HTTP request after 338.0676ms - 200
2026-02-05 20:23:12.088 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=38.89511&longitude=-77.03637&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:23:12.089 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=38.89511&longitude=-77.03637&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:23:12.378 +03:00 [INF] Received HTTP response headers after 288.5006ms - 200
2026-02-05 20:23:12.379 +03:00 [INF] End processing HTTP request after 290.7274ms - 200
2026-02-05 20:23:12.381 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:23:12.383 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:12.384 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:12.384 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:23:12.385 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:23:12.385 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:23:12.386 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:23:12.387 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:23:12.387 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:12.388 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:12.389 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:23:12.390 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:23:12.390 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:23:12.391 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:23:12.392 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:23:12.393 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:23:12.395 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:12.396 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 20:23:12.396 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:12.397 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:12.398 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:12.399 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:23:12.400 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:23:12.401 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:23:12.402 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:23:12.402 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:23:12.402 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:23:12.403 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:23:12.404 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 666.0444ms
2026-02-05 20:23:12.405 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:23:12.405 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:23:12.406 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:12.407 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:12.407 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Вашингтон?date=2026-02-05 - 200 null application/json; charset=utf-8 680.6544ms
2026-02-05 20:23:22.483 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 20:23:22.485 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 20:23:22.486 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 20:23:22.486 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:23:22.487 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:23:22.487 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:23:22.488 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:23:22.489 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:23:22.490 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:23:22.490 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:23:22.491 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:23:22.492 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:23:22.493 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:23:22.494 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:23:22.495 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:23:22.496 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:23:22.497 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:23:22.497 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:23:22.498 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:23:22.499 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:23:22.500 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:23:22.500 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:23:22.501 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:23:22.502 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:23:22.503 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:23:22.503 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:23:22.504 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:23:22.505 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 20:23:22.505 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 20:23:22.506 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:23:22.507 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:23:22.507 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 20:23:22.508 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 20:23:22.509 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:23:22.509 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 20:23:22.510 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:23:22.511 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:23:22.512 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:23:22.512 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:23:22.513 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:23:22.516 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:23:22.517 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:23:22.517 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:22.518 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:22.519 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:23:22.519 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:23:22.520 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:23:22.521 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:23:22.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:23:22.523 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:22.524 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 20:23:22.524 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:22.525 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:22.526 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:22.527 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:22.528 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:23:22.528 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:23:22.529 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:23:22.529 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:23:22.530 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:23:22.532 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.532 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.533 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.534 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.535 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.535 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.536 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.537 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.538 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.538 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:22.539 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:22.540 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 8ms reading results.
2026-02-05 20:23:22.541 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:22.541 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:22.542 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:23:22.543 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:23:22.544 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:23:22.544 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:23:22.544 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:23:22.545 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 20:23:22.546 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 52.44ms
2026-02-05 20:23:22.547 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:23:22.548 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:23:22.548 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:22.549 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:22.550 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 67.3871ms
2026-02-05 20:23:54.111 +03:00 [DBG] Connection id "0HNJ4RC2PDEQA" accepted.
2026-02-05 20:23:54.112 +03:00 [DBG] Connection id "0HNJ4RC2PDEQA" started.
2026-02-05 20:23:54.112 +03:00 [DBG] Connection id "0HNJ4RC2PDEQB" accepted.
2026-02-05 20:23:54.112 +03:00 [DBG] Connection id "0HNJ4RC2PDEQA" received FIN.
2026-02-05 20:23:54.117 +03:00 [DBG] Connection id "0HNJ4RC2PDEQB" started.
2026-02-05 20:23:54.118 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 20:23:54.120 +03:00 [DBG] Connection id "0HNJ4RC2PDEQA" stopped.
2026-02-05 20:23:54.121 +03:00 [DBG] Connection id "0HNJ4RC2PDEQA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 20:23:54.121 +03:00 [DBG] Connection 0HNJ4RC2PDEQB established using the following protocol: "Tls13"
2026-02-05 20:23:54.125 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-05 20:23:54.126 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-05 20:23:54.127 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-05 20:23:54.128 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:23:54.128 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:23:54.129 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:23:54.129 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:23:54.130 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:23:54.131 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:23:54.131 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:23:54.132 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:23:54.133 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:23:54.134 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:23:54.135 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:23:54.138 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:23:54.139 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:23:54.139 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:23:54.140 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:23:54.141 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:23:54.141 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:23:54.142 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:23:54.143 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:23:54.143 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:23:54.144 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:23:54.145 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:23:54.146 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:23:54.146 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:23:54.147 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:23:54.148 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:54.149 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:54.150 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:23:54.151 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:23:54.151 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:23:54.152 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:23:54.153 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:23:54.153 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:54.154 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:54.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:23:54.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:23:54.156 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:23:54.156 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:23:54.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:23:54.159 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:23:54.160 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:54.161 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 20:23:54.162 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:23:54.162 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:54.163 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:23:54.164 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:23:54.165 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:23:54.166 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:23:54.166 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:23:54.167 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:23:54.167 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:23:54.168 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:23:54.170 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 35.1614ms
2026-02-05 20:23:54.171 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:23:54.171 +03:00 [DBG] Connection id "0HNJ4RC2PDEQB" completed keep alive response.
2026-02-05 20:23:54.172 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:23:54.173 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:23:54.173 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:23:54.174 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 50.0938ms
2026-02-05 20:23:54.489 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 20:23:57.921 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/static/icons/cloudy.png - null null
2026-02-05 20:23:57.923 +03:00 [DBG] No candidates found for the request path '/static/icons/cloudy.png'
2026-02-05 20:23:57.923 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:23:57.929 +03:00 [INF] Sending file. Request path: '/cloudy.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\cloudy.png'
2026-02-05 20:23:57.930 +03:00 [DBG] Connection id "0HNJ4RC2PDEQB" completed keep alive response.
2026-02-05 20:23:57.931 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/static/icons/cloudy.png - 200 1439 image/png 9.492ms
2026-02-05 20:24:04.502 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:24:04.504 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0346ms - processed: 0 items - remaining: 1 items
2026-02-05 20:24:05.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/cloudy.png - null null
2026-02-05 20:24:05.707 +03:00 [DBG] No candidates found for the request path '/static/icons/cloudy.png'
2026-02-05 20:24:05.708 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:24:05.711 +03:00 [INF] Sending file. Request path: '/cloudy.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\cloudy.png'
2026-02-05 20:24:05.713 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/cloudy.png - 200 1439 image/png 13.5481ms
2026-02-05 20:24:05.756 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/favicon.ico - null null
2026-02-05 20:24:05.759 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2026-02-05 20:24:05.760 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:24:05.761 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:24:05.762 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:24:05.763 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/favicon.ico - 404 0 null 7.1098ms
2026-02-05 20:24:05.766 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/favicon.ico, Response status code: 404
2026-02-05 20:24:14.506 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:24:14.507 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 20:24:24.509 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:24:24.510 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 20:24:34.517 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:24:34.518 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 20:24:44.527 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:24:44.528 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 20:24:54.533 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:24:54.534 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-05 20:25:04.539 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:25:04.540 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 20:25:14.556 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:25:14.557 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 20:25:24.568 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:25:24.569 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 20:25:34.574 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:25:34.575 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 20:25:44.583 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:25:44.584 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 20:25:54.586 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:25:54.587 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 20:26:04.598 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:26:04.599 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 20:26:14.603 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:26:14.603 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 20:26:24.609 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:26:24.610 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 20:26:34.617 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:26:34.617 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 20:26:44.628 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:26:44.629 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 20:26:54.633 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:26:54.634 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 20:27:04.645 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:27:04.646 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 20:27:14.662 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:27:14.663 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 20:27:24.666 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:27:24.671 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 20:27:34.675 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:27:34.676 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 20:27:44.681 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:27:44.683 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 20:27:54.692 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:27:54.693 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0764ms - processed: 0 items - remaining: 1 items
2026-02-05 20:28:04.697 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:28:04.697 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 20:28:08.420 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=2026-02-05 - null null
2026-02-05 20:28:08.427 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Абакан'
2026-02-05 20:28:08.428 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Абакан'
2026-02-05 20:28:08.429 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:08.429 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:08.430 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:08.430 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:08.431 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:28:08.432 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:28:08.433 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:28:08.433 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:28:08.434 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:28:08.435 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:28:08.436 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:28:08.437 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:28:08.438 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:28:08.439 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:28:08.440 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:28:08.440 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:28:08.441 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:28:08.442 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:28:08.442 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:28:08.443 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:28:08.444 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:08.444 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:08.445 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:28:08.446 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:08.447 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0%D0%BA%D0%B0%D0%BD&count=1&language=ru
2026-02-05 20:28:08.448 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0%D0%BA%D0%B0%D0%BD&count=1&language=ru
2026-02-05 20:28:08.749 +03:00 [INF] Received HTTP response headers after 300.4274ms - 200
2026-02-05 20:28:08.750 +03:00 [INF] End processing HTTP request after 302.5395ms - 200
2026-02-05 20:28:08.750 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.71556&longitude=91.42917&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:28:08.751 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.71556&longitude=91.42917&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:28:09.155 +03:00 [INF] Received HTTP response headers after 403.0489ms - 200
2026-02-05 20:28:09.156 +03:00 [INF] End processing HTTP request after 405.1846ms - 200
2026-02-05 20:28:09.157 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:28:09.158 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:09.159 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:09.159 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:28:09.160 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:28:09.161 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:28:09.161 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:28:09.162 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:28:09.162 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:09.163 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:09.164 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:09.165 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:09.165 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:09.166 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:28:09.170 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:28:09.172 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:28:09.174 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:09.175 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-05 20:28:09.176 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:09.177 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:09.178 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:09.179 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:28:09.179 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:28:09.180 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:28:09.181 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:28:09.181 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:28:09.182 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:28:09.182 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:28:09.183 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 747.1902ms
2026-02-05 20:28:09.184 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:09.185 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:28:09.186 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:09.186 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:09.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=2026-02-05 - 200 null application/json; charset=utf-8 767.8575ms
2026-02-05 20:28:13.728 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 20:28:13.730 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 20:28:13.731 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 20:28:13.732 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:13.732 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:13.733 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:13.733 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:13.734 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:28:13.735 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:28:13.736 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:28:13.736 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:28:13.738 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:28:13.739 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:28:13.739 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:28:13.740 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:28:13.741 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:28:13.742 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:28:13.743 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:13.743 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:13.744 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:28:13.745 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:13.746 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:28:13.746 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:28:13.747 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:13.748 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:13.749 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:28:13.749 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:13.750 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 20:28:13.751 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 20:28:13.752 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:13.752 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:13.753 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 20:28:13.754 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:13.754 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:28:13.755 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 20:28:13.756 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:13.757 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:13.757 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:28:13.758 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:13.759 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:28:13.761 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:28:13.761 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:28:13.762 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:13.762 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:13.763 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:13.764 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:13.764 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:13.765 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:28:13.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:28:13.767 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:13.768 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 20:28:13.769 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:13.769 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:13.770 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:13.771 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:13.772 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:13.773 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:13.773 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:13.774 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:28:13.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:28:13.776 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.777 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.778 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.779 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.779 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.780 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.781 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.781 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.782 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.783 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:13.783 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:13.784 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 20:28:13.785 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:13.785 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:13.786 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:28:13.788 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:28:13.788 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:28:13.789 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:28:13.789 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:28:13.790 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 20:28:13.791 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 51.1322ms
2026-02-05 20:28:13.791 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:13.792 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:28:13.793 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:13.793 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:13.794 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 66.3815ms
2026-02-05 20:28:14.711 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:28:14.712 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-05 20:28:24.716 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:28:24.717 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 20:28:27.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Красноярск?date=2026-02-05 - null null
2026-02-05 20:28:27.448 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Красноярск'
2026-02-05 20:28:27.449 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Красноярск'
2026-02-05 20:28:27.450 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:27.451 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:27.451 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:27.452 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:27.453 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:28:27.454 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:28:27.456 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:28:27.457 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:28:27.458 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:28:27.459 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:28:27.460 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:28:27.461 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:28:27.462 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:28:27.463 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:28:27.464 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:28:27.465 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:28:27.466 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:28:27.467 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:28:27.468 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:28:27.469 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:28:27.470 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:27.471 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:27.472 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:28:27.473 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:27.474 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%80%D0%B0%D1%81%D0%BD%D0%BE%D1%8F%D1%80%D1%81%D0%BA&count=1&language=ru
2026-02-05 20:28:27.475 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%80%D0%B0%D1%81%D0%BD%D0%BE%D1%8F%D1%80%D1%81%D0%BA&count=1&language=ru
2026-02-05 20:28:27.557 +03:00 [INF] Received HTTP response headers after 81.3944ms - 200
2026-02-05 20:28:27.558 +03:00 [INF] End processing HTTP request after 84.398ms - 200
2026-02-05 20:28:27.559 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.02668&longitude=92.90765&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:28:27.560 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.02668&longitude=92.90765&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:28:27.822 +03:00 [INF] Received HTTP response headers after 260.4644ms - 200
2026-02-05 20:28:27.823 +03:00 [INF] End processing HTTP request after 263.3027ms - 200
2026-02-05 20:28:27.824 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:28:27.825 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:27.826 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:27.826 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:28:27.827 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:28:27.827 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:28:27.828 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:28:27.829 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:28:27.829 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:27.830 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:27.831 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:27.831 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:27.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:27.833 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:28:27.834 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:28:27.835 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:28:27.836 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:27.837 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 20:28:27.838 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:27.839 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:27.840 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:27.842 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:28:27.843 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:28:27.844 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:28:27.845 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:28:27.845 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:28:27.846 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:28:27.847 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:28:27.847 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 387.5595ms
2026-02-05 20:28:27.849 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:27.850 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:28:27.850 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:27.851 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:27.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Красноярск?date=2026-02-05 - 200 null application/json; charset=utf-8 407.6742ms
2026-02-05 20:28:33.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 20:28:33.494 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 20:28:33.495 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 20:28:33.496 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:33.497 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:33.497 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:33.498 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:33.498 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:28:33.499 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:28:33.500 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:28:33.501 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:28:33.502 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:28:33.502 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:28:33.503 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:28:33.504 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:28:33.505 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:28:33.505 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:28:33.506 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:33.507 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:33.508 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:28:33.508 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:33.509 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:28:33.510 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:28:33.510 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:33.511 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:33.512 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:28:33.512 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:33.513 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 20:28:33.513 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 20:28:33.514 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:33.515 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:33.515 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 20:28:33.516 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:33.517 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:28:33.517 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 20:28:33.518 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:33.519 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:33.519 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:28:33.520 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:33.521 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:28:33.522 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:28:33.523 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:28:33.523 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:33.524 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:33.525 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:33.525 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:33.526 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:33.527 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:28:33.528 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:28:33.529 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:33.529 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 20:28:33.530 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:33.531 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:33.532 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:33.532 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:33.533 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:33.533 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:33.534 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:33.535 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:28:33.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:28:33.537 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.537 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.538 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.539 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.540 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.541 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.541 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.542 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.543 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.543 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:33.544 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:33.545 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 8ms reading results.
2026-02-05 20:28:33.545 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:33.546 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:33.547 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:28:33.548 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:28:33.548 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:28:33.549 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:28:33.549 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:28:33.550 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 20:28:33.550 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 47.2579ms
2026-02-05 20:28:33.553 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:33.555 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:28:33.556 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:33.557 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:33.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 65.6292ms
2026-02-05 20:28:34.721 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:28:34.722 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 20:28:41.596 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Кызыл?date=2026-02-05 - null null
2026-02-05 20:28:41.598 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Кызыл'
2026-02-05 20:28:41.599 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Кызыл'
2026-02-05 20:28:41.600 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:41.600 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:41.601 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:41.602 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:41.603 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:28:41.604 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:28:41.605 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:28:41.606 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:28:41.607 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:28:41.607 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:28:41.608 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:28:41.609 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:28:41.610 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:28:41.611 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:28:41.611 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:28:41.612 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:28:41.613 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:28:41.614 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:28:41.614 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:28:41.615 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:28:41.616 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:41.617 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:41.617 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:28:41.618 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:28:41.619 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%8B%D0%B7%D1%8B%D0%BB&count=1&language=ru
2026-02-05 20:28:41.620 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%8B%D0%B7%D1%8B%D0%BB&count=1&language=ru
2026-02-05 20:28:41.705 +03:00 [INF] Received HTTP response headers after 84.6284ms - 200
2026-02-05 20:28:41.706 +03:00 [INF] End processing HTTP request after 86.6452ms - 200
2026-02-05 20:28:41.706 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.71081&longitude=94.45338&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:28:41.707 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.71081&longitude=94.45338&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:28:41.769 +03:00 [INF] Received HTTP response headers after 61.4872ms - 200
2026-02-05 20:28:41.770 +03:00 [INF] End processing HTTP request after 63.5112ms - 200
2026-02-05 20:28:41.771 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:28:41.772 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:41.773 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:41.774 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:28:41.774 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:28:41.775 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:28:41.776 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:28:41.776 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:28:41.777 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:41.777 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:41.778 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:41.779 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:41.779 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:41.780 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:28:41.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:28:41.782 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:28:41.783 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:41.784 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 20:28:41.785 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:41.786 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:41.787 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:41.788 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:28:41.788 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:28:41.790 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:28:41.790 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:28:41.790 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:28:41.791 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:28:41.792 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:28:41.792 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 184.1868ms
2026-02-05 20:28:41.793 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:28:41.794 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:28:41.795 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:41.796 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:41.796 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Кызыл?date=2026-02-05 - 200 null application/json; charset=utf-8 200.8395ms
2026-02-05 20:28:44.736 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:28:44.737 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 20:28:46.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 20:28:46.539 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 20:28:46.539 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 20:28:46.540 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:46.541 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:46.541 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:28:46.542 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:46.542 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:28:46.543 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:28:46.544 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:28:46.545 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:28:46.546 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:28:46.547 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:28:46.547 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:28:46.548 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:28:46.549 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:28:46.550 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:28:46.551 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:46.552 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:46.552 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:28:46.553 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:28:46.554 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:28:46.555 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:28:46.556 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:46.556 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:46.557 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:28:46.558 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:28:46.559 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 20:28:46.560 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 20:28:46.560 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:46.561 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:46.562 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 20:28:46.562 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 20:28:46.563 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:28:46.564 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 20:28:46.565 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:46.565 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:46.566 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:28:46.567 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:28:46.568 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:28:46.569 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:28:46.570 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:28:46.571 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:46.572 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:46.572 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:46.573 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:46.574 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:46.574 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:28:46.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:28:46.576 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:46.577 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 20:28:46.578 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:46.578 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:46.579 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:46.580 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:46.580 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:28:46.581 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:28:46.581 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:28:46.582 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:28:46.583 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:28:46.584 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.585 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.585 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.586 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.587 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.588 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.589 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.589 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.590 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.590 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:28:46.591 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:46.592 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 20:28:46.593 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:28:46.593 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:46.594 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:28:46.595 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:28:46.596 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:28:46.596 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:28:46.596 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:28:46.597 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 20:28:46.598 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 50.7893ms
2026-02-05 20:28:46.599 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:28:46.600 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:28:46.601 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:28:46.601 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:28:46.602 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 65.2747ms
2026-02-05 20:28:54.747 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:28:54.748 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 20:29:04.761 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:29:04.762 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 20:29:14.769 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:29:14.770 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 20:29:24.785 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:29:24.786 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-05 20:29:34.802 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:29:34.803 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-05 20:29:44.816 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:29:44.817 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-05 20:29:54.820 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:29:54.820 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 20:30:04.833 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 20:30:04.834 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 20:30:08.458 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 20:30:14.846 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:30:14.847 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-05 20:30:24.861 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:30:24.861 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-05 20:30:34.876 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:30:34.877 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-05 20:30:44.885 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:30:44.886 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-05 20:30:54.896 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:30:54.897 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0743ms - processed: 0 items - remaining: 2 items
2026-02-05 20:31:04.903 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:31:04.904 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2026-02-05 20:31:14.907 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:31:14.908 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2026-02-05 20:31:24.911 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:31:24.912 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-05 20:31:34.922 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:31:34.923 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2026-02-05 20:31:44.931 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:31:44.932 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 2 items
2026-02-05 20:31:54.938 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:31:54.939 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-05 20:32:04.951 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:32:04.952 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2026-02-05 20:32:14.956 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:32:14.956 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-05 20:32:24.961 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:32:24.961 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-05 20:32:34.970 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:32:34.971 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-05 20:32:44.971 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:32:44.972 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-05 20:32:54.977 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:32:54.977 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-05 20:33:04.981 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:33:04.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-05 20:33:14.991 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:33:14.992 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-05 20:33:25.008 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:33:25.009 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-05 20:33:35.017 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:33:35.018 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-05 20:33:45.033 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:33:45.033 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-05 20:33:55.049 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:33:55.050 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-05 20:34:05.056 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:34:05.057 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 2 items
2026-02-05 20:34:15.065 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-05 20:34:15.066 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-05 20:50:13.479 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 20:50:13.538 +03:00 [DBG] Hosting starting
2026-02-05 20:50:13.627 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 20:50:13.628 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 20:50:13.628 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 20:50:13.629 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 20:50:13.629 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 20:50:13.630 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 20:50:13.652 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 20:50:13.653 +03:00 [INF] Hosting environment: Development
2026-02-05 20:50:13.654 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 20:50:13.654 +03:00 [DBG] Hosting started
2026-02-05 20:50:13.921 +03:00 [DBG] Connection id "0HNJ4RS1UG1NI" received FIN.
2026-02-05 20:50:13.925 +03:00 [DBG] Connection id "0HNJ4RS1UG1NI" accepted.
2026-02-05 20:50:13.926 +03:00 [DBG] Connection id "0HNJ4RS1UG1NI" started.
2026-02-05 20:50:13.935 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 20:50:13.953 +03:00 [DBG] Connection id "0HNJ4RS1UG1NI" stopped.
2026-02-05 20:50:13.956 +03:00 [DBG] Connection id "0HNJ4RS1UG1NI" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 20:50:14.095 +03:00 [DBG] Connection id "0HNJ4RS1UG1NJ" accepted.
2026-02-05 20:50:14.096 +03:00 [DBG] Connection id "0HNJ4RS1UG1NJ" started.
2026-02-05 20:50:14.120 +03:00 [DBG] Connection 0HNJ4RS1UG1NJ established using the following protocol: "Tls13"
2026-02-05 20:50:14.151 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 20:50:14.228 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 20:50:14.238 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 20:50:14.239 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:50:14.242 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:50:14.270 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 20:50:14.272 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 20:50:14.283 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 20:50:14.284 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 20:50:14.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 138.9421ms
2026-02-05 20:50:14.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 20:50:14.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 20:50:14.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 45.673ms
2026-02-05 20:50:14.534 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 157.568ms
2026-02-05 20:50:14.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 20:50:14.564 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 20:50:14.565 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:50:14.567 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 20:50:14.575 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.858ms
2026-02-05 20:50:29.930 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Астрахань?date=2026-02-05 - null null
2026-02-05 20:50:29.935 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астрахань'
2026-02-05 20:50:29.937 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астрахань'
2026-02-05 20:50:29.938 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:50:29.939 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:50:29.940 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:50:29.942 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:50:29.953 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 20:50:29.955 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:50:29.956 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:50:29.957 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:50:29.958 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:50:29.959 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:50:29.960 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:50:30.011 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 20:50:30.017 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 20:50:30.024 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 20:50:30.026 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 20:50:30.027 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:50:30.028 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 20:50:30.029 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 20:50:30.031 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 20:50:30.033 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:50:30.034 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 20:50:30.035 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:50:30.036 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:50:30.037 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 20:50:30.038 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 20:50:30.050 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D1%81%D1%82%D1%80%D0%B0%D1%85%D0%B0%D0%BD%D1%8C&count=1&language=ru
2026-02-05 20:50:30.051 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D1%81%D1%82%D1%80%D0%B0%D1%85%D0%B0%D0%BD%D1%8C&count=1&language=ru
2026-02-05 20:50:30.429 +03:00 [INF] Received HTTP response headers after 375.5724ms - 200
2026-02-05 20:50:30.431 +03:00 [INF] End processing HTTP request after 381.1564ms - 200
2026-02-05 20:50:30.440 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=46.34968&longitude=48.04076&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:50:30.441 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=46.34968&longitude=48.04076&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 20:50:30.816 +03:00 [INF] Received HTTP response headers after 374.3107ms - 200
2026-02-05 20:50:30.817 +03:00 [INF] End processing HTTP request after 377.1404ms - 200
2026-02-05 20:50:31.027 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:50:31.042 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:31.067 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:31.069 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 20:50:31.071 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 20:50:31.079 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 20:50:31.111 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:50:31.117 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 20:50:31.119 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:50:31.124 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:31.128 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:50:31.131 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:50:31.133 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 20:50:31.137 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:50:31.149 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 20:50:31.156 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 20:50:31.161 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:31.165 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-05 20:50:31.169 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:31.171 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-05 20:50:31.177 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:31.178 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 20:50:31.184 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:50:31.186 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:50:31.186 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:50:31.187 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:50:31.187 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:50:31.188 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 20:50:31.196 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1234.3958ms
2026-02-05 20:50:31.197 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 20:50:31.200 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:50:31.202 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:50:31.203 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 20:50:31.204 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Астрахань?date=2026-02-05 - 200 null application/json; charset=utf-8 1274.7252ms
2026-02-05 20:50:38.425 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/static/icons/clear.png - null null
2026-02-05 20:50:38.429 +03:00 [DBG] No candidates found for the request path '/static/icons/clear.png'
2026-02-05 20:50:38.430 +03:00 [DBG] Request did not match any endpoints
2026-02-05 20:50:38.433 +03:00 [INF] The file /clear.png was not modified
2026-02-05 20:50:38.433 +03:00 [DBG] Handled. Status code: 304 File: /clear.png
2026-02-05 20:50:38.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/static/icons/clear.png - 304 null image/png 9.8169ms
2026-02-05 20:50:53.074 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 20:50:53.076 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 20:50:53.077 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 20:50:53.078 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:50:53.078 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:50:53.079 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 20:50:53.079 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:50:53.083 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 20:50:53.084 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 20:50:53.085 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 20:50:53.085 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 20:50:53.087 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 20:50:53.088 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 20:50:53.088 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:50:53.090 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 20:50:53.091 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:50:53.092 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 20:50:53.092 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:50:53.093 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:50:53.094 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 20:50:53.094 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 20:50:53.095 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:50:53.096 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 20:50:53.096 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:50:53.097 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:50:53.098 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 20:50:53.098 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 20:50:53.099 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 20:50:53.100 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 20:50:53.100 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:50:53.101 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 20:50:53.102 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 20:50:53.103 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 20:50:53.103 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:50:53.104 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 20:50:53.105 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:50:53.105 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:50:53.106 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 20:50:53.107 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 20:50:53.139 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 20:50:53.163 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 20:50:53.244 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 20:50:53.256 +03:00 [DBG] Creating DbConnection.
2026-02-05 20:50:53.257 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 20:50:53.257 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:50:53.258 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:53.259 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:50:53.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:50:53.260 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:50:53.261 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:50:53.262 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 20:50:53.265 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:53.266 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 20:50:53.267 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:53.268 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:50:53.271 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 20:50:53.288 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 20:50:53.291 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:50:53.292 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:53.293 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 20:50:53.293 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 20:50:53.294 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 20:50:53.295 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:50:53.296 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 20:50:53.299 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.300 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.300 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.301 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.302 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.302 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.303 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.304 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.304 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.305 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 20:50:53.306 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:53.307 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 10ms reading results.
2026-02-05 20:50:53.308 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 20:50:53.309 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 20:50:53.310 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 20:50:53.311 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 20:50:53.311 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 20:50:53.312 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 20:50:53.312 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 20:50:53.313 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 20:50:53.320 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 231.8059ms
2026-02-05 20:50:53.321 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 20:50:53.322 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 20:50:53.323 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 20:50:53.324 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 20:50:53.325 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 251.317ms
2026-02-05 21:15:15.217 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 21:15:15.280 +03:00 [DBG] Hosting starting
2026-02-05 21:15:15.393 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 21:15:15.394 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 21:15:15.395 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 21:15:15.395 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 21:15:15.395 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 21:15:15.396 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 21:15:15.410 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G1" accepted.
2026-02-05 21:15:15.411 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G1" started.
2026-02-05 21:15:15.425 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 21:15:15.425 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G2" accepted.
2026-02-05 21:15:15.426 +03:00 [INF] Hosting environment: Development
2026-02-05 21:15:15.426 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G2" started.
2026-02-05 21:15:15.427 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 21:15:15.428 +03:00 [DBG] Hosting started
2026-02-05 21:15:15.454 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G2" received FIN.
2026-02-05 21:15:15.454 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G1" received FIN.
2026-02-05 21:15:15.460 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 21:15:15.460 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 21:15:15.480 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G1" stopped.
2026-02-05 21:15:15.480 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G2" stopped.
2026-02-05 21:15:15.483 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:15:15.483 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:15:15.699 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G3" accepted.
2026-02-05 21:15:15.702 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G3" started.
2026-02-05 21:15:15.722 +03:00 [DBG] Connection 0HNJ4SA1DQ6G3 established using the following protocol: "Tls13"
2026-02-05 21:15:15.756 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 21:15:15.820 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 21:15:15.832 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 21:15:15.833 +03:00 [DBG] Request did not match any endpoints
2026-02-05 21:15:15.836 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 21:15:15.866 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 21:15:15.868 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 21:15:15.881 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 21:15:15.883 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 21:15:15.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 132.7963ms
2026-02-05 21:15:15.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 21:15:15.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 21:15:16.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 14.8486ms
2026-02-05 21:15:16.028 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.7627ms
2026-02-05 21:15:16.054 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 21:15:16.055 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 21:15:16.056 +03:00 [DBG] Request did not match any endpoints
2026-02-05 21:15:16.057 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 21:15:16.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.8093ms
2026-02-05 21:15:26.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Караганда/week - null null
2026-02-05 21:15:26.748 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Караганда/week'
2026-02-05 21:15:26.750 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Караганда/week'
2026-02-05 21:15:26.751 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:15:26.753 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:15:26.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:15:26.755 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:15:26.767 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:15:26.769 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:15:26.770 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:15:26.771 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:15:26.772 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:15:26.773 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:15:26.775 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:15:26.833 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 21:15:26.838 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:15:26.845 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:15:26.847 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:15:26.848 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:15:26.849 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:15:26.850 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:15:26.853 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:15:26.866 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D1%80%D0%B0%D0%B3%D0%B0%D0%BD%D0%B4%D0%B0&count=1&language=ru
2026-02-05 21:15:26.867 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D1%80%D0%B0%D0%B3%D0%B0%D0%BD%D0%B4%D0%B0&count=1&language=ru
2026-02-05 21:15:27.175 +03:00 [INF] Received HTTP response headers after 305.7234ms - 200
2026-02-05 21:15:27.176 +03:00 [INF] End processing HTTP request after 310.7224ms - 200
2026-02-05 21:15:27.186 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=49.80187&longitude=73.10211&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 21:15:27.187 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=49.80187&longitude=73.10211&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 21:15:27.657 +03:00 [INF] Received HTTP response headers after 469.3119ms - 200
2026-02-05 21:15:27.658 +03:00 [INF] End processing HTTP request after 471.9588ms - 200
2026-02-05 21:15:27.890 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:15:27.907 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:15:27.933 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:15:27.936 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:15:27.938 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:15:27.946 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:15:27.976 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:15:27.981 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 21:15:27.983 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:15:27.989 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:15:27.994 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:15:27.998 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:15:28.000 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 21:15:28.004 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:15:28.015 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:15:28.022 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:15:28.027 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:15:28.031 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 21:15:28.033 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:15:28.034 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 21:15:28.039 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:15:28.041 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:15:28.044 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:15:28.046 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:15:28.046 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:15:28.047 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:15:28.047 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:15:28.048 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 21:15:28.058 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1282.3279ms
2026-02-05 21:15:28.059 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:15:28.061 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:15:28.063 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:15:28.064 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 21:15:28.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Караганда/week - 200 null application/json; charset=utf-8 1323.1459ms
2026-02-05 21:15:55.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Караганда?date=2026-02-06 - null null
2026-02-05 21:15:55.984 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Караганда'
2026-02-05 21:15:55.985 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Караганда'
2026-02-05 21:15:55.986 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:15:55.986 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:15:55.987 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:15:55.987 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:15:55.991 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:15:55.992 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:15:55.993 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:15:55.994 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:15:55.995 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:15:55.996 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:15:55.997 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:15:56.000 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:15:56.003 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:15:56.004 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:15:56.004 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:15:56.005 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:15:56.006 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:15:56.007 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:15:56.008 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:15:56.009 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 21:15:56.011 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:15:56.012 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:15:56.012 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:15:56.013 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:15:56.015 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D1%80%D0%B0%D0%B3%D0%B0%D0%BD%D0%B4%D0%B0&count=1&language=ru
2026-02-05 21:15:56.016 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D1%80%D0%B0%D0%B3%D0%B0%D0%BD%D0%B4%D0%B0&count=1&language=ru
2026-02-05 21:15:56.084 +03:00 [INF] Received HTTP response headers after 66.8159ms - 200
2026-02-05 21:15:56.084 +03:00 [INF] End processing HTTP request after 69.033ms - 200
2026-02-05 21:15:56.086 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=49.80187&longitude=73.10211&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-06&end_date=2026-02-06
2026-02-05 21:15:56.087 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=49.80187&longitude=73.10211&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-06&end_date=2026-02-06
2026-02-05 21:15:56.179 +03:00 [INF] Received HTTP response headers after 91.4079ms - 200
2026-02-05 21:15:56.179 +03:00 [INF] End processing HTTP request after 93.5638ms - 200
2026-02-05 21:15:56.206 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:15:56.208 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:15:56.210 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:15:56.211 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:15:56.212 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:15:56.213 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:15:56.214 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:15:56.215 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:15:56.216 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:15:56.217 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:15:56.218 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:15:56.218 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:15:56.219 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:15:56.220 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:15:56.221 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:15:56.222 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:15:56.226 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:15:56.229 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 6ms reading results.
2026-02-05 21:15:56.230 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:15:56.230 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:15:56.232 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:15:56.233 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:15:56.234 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:15:56.235 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:15:56.236 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:15:56.236 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:15:56.237 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:15:56.237 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 21:15:56.238 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 240.6806ms
2026-02-05 21:15:56.239 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:15:56.240 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:15:56.241 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:15:56.241 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:15:56.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Караганда?date=2026-02-06 - 200 null application/json; charset=utf-8 263.8002ms
2026-02-05 21:16:26.305 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - null null
2026-02-05 21:16:26.308 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 21:16:26.309 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 21:16:26.309 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:16:26.310 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:16:26.310 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:16:26.311 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:16:26.314 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:16:26.315 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:16:26.316 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:16:26.317 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:16:26.317 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:16:26.318 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:16:26.319 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:16:26.320 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:16:26.321 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:16:26.321 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:16:26.322 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:16:26.323 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:16:26.323 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:16:26.324 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:16:26.325 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:16:26.325 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:16:26.326 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:16:26.327 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:16:26.328 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:16:26.328 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:16:26.329 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 21:16:26.330 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 21:16:26.330 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:16:26.331 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:16:26.332 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 21:16:26.332 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 21:16:26.333 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:16:26.333 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 21:16:26.334 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:16:26.335 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:16:26.335 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:16:26.336 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:16:26.348 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:16:26.373 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 21:16:26.455 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 21:16:26.467 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:16:26.467 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:16:26.468 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:16:26.469 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:26.469 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:16:26.470 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:16:26.470 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:16:26.471 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:16:26.472 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:16:26.474 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:26.474 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 21:16:26.475 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:26.476 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:16:26.479 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 21:16:26.494 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 21:16:26.497 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:16:26.498 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:26.498 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:16:26.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:16:26.499 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:16:26.500 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:16:26.501 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:16:26.502 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:26.503 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:16:26.504 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:26.504 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:16:26.505 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:16:26.506 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:16:26.507 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:16:26.507 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:16:26.508 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:16:26.509 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 21:16:26.516 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 197.1958ms
2026-02-05 21:16:26.521 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:16:26.522 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:16:26.523 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:16:26.524 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:16:26.525 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - 200 null application/json; charset=utf-8 221.6959ms
2026-02-05 21:16:32.687 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 21:16:32.689 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 21:16:32.690 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 21:16:32.691 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:16:32.692 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:16:32.692 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:16:32.693 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:16:32.694 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:16:32.695 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:16:32.696 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:16:32.697 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:16:32.698 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:16:32.699 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:16:32.701 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:16:32.702 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:16:32.703 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:16:32.703 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:16:32.704 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:16:32.705 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:16:32.706 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:16:32.707 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:16:32.707 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:16:32.708 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:16:32.709 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:16:32.709 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:16:32.710 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:16:32.711 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:16:32.712 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 21:16:32.713 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 21:16:32.713 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:16:32.714 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:16:32.715 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 21:16:32.715 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 21:16:32.716 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:16:32.717 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 21:16:32.718 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:16:32.718 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:16:32.719 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:16:32.720 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:16:32.721 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:16:32.724 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:16:32.724 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:16:32.725 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:16:32.726 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:32.726 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:16:32.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:16:32.728 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:16:32.729 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:16:32.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:16:32.731 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:32.732 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:16:32.732 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:32.733 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:16:32.734 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:16:32.735 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:32.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:16:32.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:16:32.737 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:16:32.738 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:16:32.739 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:16:32.742 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.743 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.744 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.745 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.745 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.746 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.747 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.748 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.748 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.749 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:16:32.750 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:32.750 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 10ms reading results.
2026-02-05 21:16:32.751 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:16:32.752 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:16:32.753 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:16:32.754 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:16:32.754 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:16:32.755 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:16:32.755 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:16:32.756 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 21:16:32.759 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 58.3831ms
2026-02-05 21:16:32.760 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:16:32.761 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:16:32.761 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:16:32.762 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:16:32.763 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 75.7931ms
2026-02-05 21:17:00.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Караганда?date=2026-02-06 - null null
2026-02-05 21:17:00.586 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Караганда'
2026-02-05 21:17:00.587 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Караганда'
2026-02-05 21:17:00.588 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:17:00.589 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:17:00.589 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:17:00.590 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:17:00.590 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:17:00.591 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:17:00.592 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:17:00.593 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:17:00.594 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:17:00.595 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:17:00.596 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:17:00.599 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:17:00.600 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:17:00.601 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:17:00.602 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:17:00.602 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:17:00.603 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:17:00.604 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:17:00.605 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:17:00.605 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 21:17:00.606 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:17:00.607 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:17:00.608 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:17:00.608 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:17:00.609 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:17:00.611 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:00.612 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:00.612 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:17:00.613 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:17:00.614 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:17:00.614 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:17:00.615 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:17:00.615 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:17:00.616 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:00.617 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:17:00.617 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:17:00.618 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:17:00.619 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:17:00.620 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:17:00.621 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:17:00.623 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:00.624 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-05 21:17:00.625 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:00.626 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:17:00.627 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:00.628 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:17:00.629 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:17:00.630 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:17:00.631 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:17:00.631 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:17:00.632 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:17:00.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 21:17:00.633 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 37.3036ms
2026-02-05 21:17:00.634 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:17:00.635 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:17:00.636 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:17:00.636 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:17:00.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Караганда?date=2026-02-06 - 200 null application/json; charset=utf-8 53.442ms
2026-02-05 21:17:04.135 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 21:17:04.139 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 21:17:04.139 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 21:17:04.141 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:17:04.141 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:17:04.142 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:17:04.142 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:17:04.143 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:17:04.144 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:17:04.145 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:17:04.146 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:17:04.147 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:17:04.147 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:17:04.148 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:17:04.149 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:17:04.149 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:17:04.150 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:17:04.151 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:17:04.152 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:17:04.153 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:17:04.153 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:17:04.154 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:17:04.154 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:17:04.155 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:17:04.156 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:17:04.156 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:17:04.157 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:17:04.158 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 21:17:04.158 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 21:17:04.159 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:17:04.160 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:17:04.161 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 21:17:04.161 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 21:17:04.162 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:17:04.163 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 21:17:04.163 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:17:04.164 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:17:04.165 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:17:04.165 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:17:04.166 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:17:04.168 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:17:04.168 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:17:04.169 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:17:04.169 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:04.170 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:17:04.171 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:17:04.171 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:17:04.172 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:17:04.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:17:04.174 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:04.174 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:17:04.175 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:04.176 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:17:04.177 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:17:04.178 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:04.178 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:17:04.179 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:17:04.179 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:17:04.180 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:17:04.181 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:17:04.182 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.183 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.184 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.184 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.185 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.186 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.186 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.187 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.188 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.188 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:17:04.189 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:04.190 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 21:17:04.190 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:17:04.191 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:17:04.192 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:17:04.193 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:17:04.193 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:17:04.194 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:17:04.194 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:17:04.195 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 21:17:04.196 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 47.7771ms
2026-02-05 21:17:04.197 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:17:04.197 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:17:04.198 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:17:04.199 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:17:04.200 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 64.5828ms
2026-02-05 21:17:26.868 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 21:17:36.874 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:17:36.876 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0364ms - processed: 0 items - remaining: 1 items
2026-02-05 21:17:46.880 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:17:46.881 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0909ms - processed: 0 items - remaining: 1 items
2026-02-05 21:17:56.885 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:17:56.886 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:18:06.895 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:18:06.900 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 21:18:16.913 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:18:16.914 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 21:18:26.922 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:18:26.924 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 21:18:36.928 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:18:36.929 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0782ms - processed: 0 items - remaining: 1 items
2026-02-05 21:18:46.940 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:18:46.940 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:18:56.953 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:18:56.954 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:19:06.971 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:19:06.971 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:19:16.972 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:19:16.972 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:19:26.985 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:19:26.986 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:19:35.698 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G3" received FIN.
2026-02-05 21:19:35.699 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:19:35.699 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G3" is closed. The last processed stream ID was 19.
2026-02-05 21:19:35.701 +03:00 [DBG] The connection queue processing loop for 0HNJ4SA1DQ6G3 completed.
2026-02-05 21:19:35.702 +03:00 [DBG] Connection id "0HNJ4SA1DQ6G3" stopped.
2026-02-05 21:19:37.003 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:19:37.004 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:19:47.019 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:19:47.020 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:19:57.025 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:19:57.025 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:20:07.030 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:20:07.031 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 21:20:17.042 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:20:17.043 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 21:20:27.046 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:20:27.047 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:20:37.054 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:20:37.054 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:20:47.069 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:20:47.070 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 21:20:57.085 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:20:57.086 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:21:07.092 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:21:07.093 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:21:17.109 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:21:17.110 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:21:27.125 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:21:27.126 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0793ms - processed: 0 items - remaining: 1 items
2026-02-05 21:21:37.134 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:21:37.135 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 21:21:47.140 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:21:47.141 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 21:21:57.145 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:21:57.146 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:22:07.155 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:22:07.156 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:22:17.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:22:17.163 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:22:27.164 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:22:27.165 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 21:22:37.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:22:37.177 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 21:22:47.188 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:22:47.189 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 21:22:57.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:22:57.204 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 21:23:07.207 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:23:07.208 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 21:23:17.220 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:23:17.221 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 21:23:27.229 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:23:27.230 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 21:23:37.232 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:23:37.233 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 21:23:47.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:23:47.240 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 21:23:57.251 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:23:57.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-05 21:24:07.263 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:24:07.264 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 21:24:17.265 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:24:17.266 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-05 21:24:27.270 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:24:27.271 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 21:24:37.281 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:24:37.282 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-05 21:24:47.290 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:24:47.291 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 21:24:57.293 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:24:57.294 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-05 21:25:07.306 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:25:07.307 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 21:25:17.322 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:25:17.323 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 21:25:27.326 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:25:27.327 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-05 21:25:37.333 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:25:37.334 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 21:25:47.348 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:25:47.349 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-05 21:25:57.359 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:25:57.359 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 21:26:07.367 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:26:07.368 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 21:26:17.382 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:26:17.382 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 21:26:27.393 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:26:27.394 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0719ms - processed: 0 items - remaining: 1 items
2026-02-05 21:26:37.404 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:26:37.405 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-05 21:26:47.422 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:26:47.422 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-05 21:26:57.433 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:26:57.434 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 21:27:07.437 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:27:07.437 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-05 21:27:17.439 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:27:17.440 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-05 21:27:27.456 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:27:27.457 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-05 21:33:44.023 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 21:33:44.157 +03:00 [DBG] Hosting starting
2026-02-05 21:33:44.279 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 21:33:44.280 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 21:33:44.281 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 21:33:44.282 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 21:33:44.282 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 21:33:44.283 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 21:33:44.313 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 21:33:44.313 +03:00 [INF] Hosting environment: Development
2026-02-05 21:33:44.314 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 21:33:44.314 +03:00 [DBG] Hosting started
2026-02-05 21:33:44.389 +03:00 [DBG] Connection id "0HNJ4SKBTRJFS" accepted.
2026-02-05 21:33:44.390 +03:00 [DBG] Connection id "0HNJ4SKBTRJFS" started.
2026-02-05 21:33:44.399 +03:00 [DBG] Connection id "0HNJ4SKBTRJFT" accepted.
2026-02-05 21:33:44.400 +03:00 [DBG] Connection id "0HNJ4SKBTRJFT" started.
2026-02-05 21:33:44.415 +03:00 [DBG] Connection id "0HNJ4SKBTRJFT" received FIN.
2026-02-05 21:33:44.415 +03:00 [DBG] Connection id "0HNJ4SKBTRJFS" received FIN.
2026-02-05 21:33:44.421 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 21:33:44.421 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 21:33:44.440 +03:00 [DBG] Connection id "0HNJ4SKBTRJFT" stopped.
2026-02-05 21:33:44.440 +03:00 [DBG] Connection id "0HNJ4SKBTRJFS" stopped.
2026-02-05 21:33:44.443 +03:00 [DBG] Connection id "0HNJ4SKBTRJFS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:33:44.443 +03:00 [DBG] Connection id "0HNJ4SKBTRJFT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:33:44.537 +03:00 [DBG] Connection id "0HNJ4SKBTRJFU" accepted.
2026-02-05 21:33:44.539 +03:00 [DBG] Connection id "0HNJ4SKBTRJFU" started.
2026-02-05 21:33:44.560 +03:00 [DBG] Connection 0HNJ4SKBTRJFU established using the following protocol: "Tls13"
2026-02-05 21:33:44.590 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 21:33:44.654 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 21:33:44.665 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 21:33:44.666 +03:00 [DBG] Request did not match any endpoints
2026-02-05 21:33:44.669 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 21:33:44.701 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 21:33:44.703 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 21:33:44.714 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 21:33:44.716 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 21:33:44.719 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 131.3835ms
2026-02-05 21:33:44.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 21:33:44.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 21:33:44.846 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 15.3949ms
2026-02-05 21:33:44.867 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.7374ms
2026-02-05 21:33:44.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 21:33:44.900 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 21:33:44.901 +03:00 [DBG] Request did not match any endpoints
2026-02-05 21:33:44.902 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 21:33:44.907 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.6559ms
2026-02-05 21:34:05.193 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Улан-Удэ?date=2026-02-05 - null null
2026-02-05 21:34:05.198 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Улан-Удэ'
2026-02-05 21:34:05.199 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Улан-Удэ'
2026-02-05 21:34:05.201 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:34:05.202 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:34:05.203 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:34:05.204 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:34:05.216 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:34:05.218 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:34:05.219 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:34:05.220 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:34:05.221 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:34:05.221 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:34:05.223 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:34:05.277 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 21:34:05.283 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:34:05.290 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:34:05.293 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:34:05.294 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:34:05.295 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:34:05.296 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:34:05.300 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:34:05.301 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:34:05.302 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 21:34:05.304 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:34:05.305 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:34:05.305 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:34:05.306 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:34:05.319 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D0%BB%D0%B0%D0%BD-%D0%A3%D0%B4%D1%8D&count=1&language=ru
2026-02-05 21:34:05.320 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D0%BB%D0%B0%D0%BD-%D0%A3%D0%B4%D1%8D&count=1&language=ru
2026-02-05 21:34:05.585 +03:00 [INF] Received HTTP response headers after 262.3939ms - 200
2026-02-05 21:34:05.586 +03:00 [INF] End processing HTTP request after 267.6176ms - 200
2026-02-05 21:34:05.595 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.82721&longitude=107.60627&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 21:34:05.596 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.82721&longitude=107.60627&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 21:34:05.893 +03:00 [INF] Received HTTP response headers after 296.2743ms - 200
2026-02-05 21:34:05.894 +03:00 [INF] End processing HTTP request after 298.7808ms - 200
2026-02-05 21:34:06.129 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:34:06.146 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:34:06.174 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:34:06.178 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:34:06.180 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:34:06.188 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:34:06.229 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:34:06.235 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 21:34:06.237 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:34:06.243 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:34:06.247 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:34:06.250 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:34:06.253 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 21:34:06.257 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 8), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:34:06.271 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 8), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:34:06.279 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:34:06.287 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:34:06.290 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 16ms reading results.
2026-02-05 21:34:06.293 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:34:06.295 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-05 21:34:06.303 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:34:06.305 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:34:06.308 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:34:06.310 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:34:06.310 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:34:06.311 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:34:06.312 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:34:06.312 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 21:34:06.323 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1098.7047ms
2026-02-05 21:34:06.324 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:34:06.327 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:34:06.329 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:34:06.330 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 21:34:06.331 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Улан-Удэ?date=2026-02-05 - 200 null application/json; charset=utf-8 1139.6083ms
2026-02-05 21:34:24.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Улан-Удэ/week - null null
2026-02-05 21:34:24.931 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Улан-Удэ/week'
2026-02-05 21:34:24.931 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Улан-Удэ/week'
2026-02-05 21:34:24.933 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:34:24.933 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:34:24.934 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:34:24.935 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:34:24.938 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:34:24.939 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:34:24.940 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:34:24.941 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:34:24.942 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:34:24.943 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:34:24.944 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:34:24.946 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:34:24.947 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:34:24.947 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:34:24.948 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:34:24.949 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:34:24.950 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:34:24.951 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:34:24.953 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D0%BB%D0%B0%D0%BD-%D0%A3%D0%B4%D1%8D&count=1&language=ru
2026-02-05 21:34:24.953 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A3%D0%BB%D0%B0%D0%BD-%D0%A3%D0%B4%D1%8D&count=1&language=ru
2026-02-05 21:34:25.011 +03:00 [INF] Received HTTP response headers after 56.3557ms - 200
2026-02-05 21:34:25.011 +03:00 [INF] End processing HTTP request after 58.498ms - 200
2026-02-05 21:34:25.013 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.82721&longitude=107.60627&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 21:34:25.013 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.82721&longitude=107.60627&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 21:34:25.077 +03:00 [INF] Received HTTP response headers after 63.2862ms - 200
2026-02-05 21:34:25.078 +03:00 [INF] End processing HTTP request after 65.3686ms - 200
2026-02-05 21:34:25.107 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:34:25.109 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:34:25.110 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:34:25.111 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:34:25.111 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:34:25.112 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:34:25.113 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:34:25.114 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:34:25.114 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:34:25.115 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:34:25.116 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:34:25.116 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:34:25.117 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:34:25.118 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 8), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:34:25.119 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 8), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:34:25.120 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:34:25.122 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:34:25.123 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 21:34:25.124 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:34:25.125 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:34:25.126 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:34:25.126 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:34:25.128 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:34:25.129 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:34:25.129 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:34:25.130 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:34:25.130 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:34:25.131 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 21:34:25.133 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 189.3363ms
2026-02-05 21:34:25.135 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:34:25.135 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:34:25.136 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:34:25.137 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:34:25.138 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Улан-Удэ/week - 200 null application/json; charset=utf-8 210.6025ms
2026-02-05 21:36:05.324 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 21:36:15.334 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:36:15.336 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.036ms - processed: 0 items - remaining: 1 items
2026-02-05 21:36:25.344 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:36:25.345 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:36:35.356 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:36:35.357 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:36:45.371 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:36:45.372 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 21:36:55.386 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:36:55.387 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:37:05.400 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:37:05.400 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:37:15.410 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:37:15.411 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-05 21:37:25.419 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:37:25.420 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:37:35.424 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:37:35.425 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:37:45.439 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:37:45.440 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-05 21:37:55.454 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:37:55.455 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:38:05.464 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:38:05.464 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:38:15.465 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:38:15.466 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 21:38:25.482 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:38:25.482 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 21:38:35.498 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:38:35.499 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0065ms - processed: 0 items - remaining: 1 items
2026-02-05 21:38:45.505 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:38:45.506 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:38:55.521 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:38:55.522 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-05 21:39:05.528 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:39:05.529 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:39:15.538 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:39:15.539 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:39:25.546 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:39:25.547 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:39:35.548 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:39:35.549 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-05 21:39:45.564 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:39:45.565 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 21:39:55.574 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:39:55.575 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:40:05.578 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:40:05.580 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0795ms - processed: 0 items - remaining: 1 items
2026-02-05 21:40:15.595 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:40:15.595 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:40:25.606 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:40:25.607 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:40:35.611 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:40:35.612 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:40:45.629 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:40:45.630 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:40:55.641 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:40:55.642 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-05 21:41:05.643 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:41:05.644 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:41:15.658 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:41:15.659 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:41:25.668 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:41:25.669 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-05 21:41:35.674 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:41:35.674 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 21:41:45.677 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:41:45.681 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 21:41:55.690 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:41:55.691 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-05 21:42:05.692 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:42:05.693 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-05 21:42:15.695 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:42:15.696 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-05 21:52:44.358 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 21:52:44.418 +03:00 [DBG] Hosting starting
2026-02-05 21:52:44.531 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 21:52:44.532 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 21:52:44.532 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 21:52:44.533 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 21:52:44.534 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 21:52:44.534 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 21:52:44.557 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 21:52:44.558 +03:00 [INF] Hosting environment: Development
2026-02-05 21:52:44.559 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 21:52:44.560 +03:00 [DBG] Hosting started
2026-02-05 21:52:44.675 +03:00 [DBG] Connection id "0HNJ4SUVOF7GJ" accepted.
2026-02-05 21:52:44.676 +03:00 [DBG] Connection id "0HNJ4SUVOF7GJ" started.
2026-02-05 21:52:44.685 +03:00 [DBG] Connection id "0HNJ4SUVOF7GK" accepted.
2026-02-05 21:52:44.686 +03:00 [DBG] Connection id "0HNJ4SUVOF7GK" started.
2026-02-05 21:52:44.717 +03:00 [DBG] Connection id "0HNJ4SUVOF7GK" received FIN.
2026-02-05 21:52:44.717 +03:00 [DBG] Connection id "0HNJ4SUVOF7GJ" received FIN.
2026-02-05 21:52:44.723 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 21:52:44.723 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 21:52:44.743 +03:00 [DBG] Connection id "0HNJ4SUVOF7GJ" stopped.
2026-02-05 21:52:44.743 +03:00 [DBG] Connection id "0HNJ4SUVOF7GK" stopped.
2026-02-05 21:52:44.746 +03:00 [DBG] Connection id "0HNJ4SUVOF7GK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:52:44.746 +03:00 [DBG] Connection id "0HNJ4SUVOF7GJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 21:52:44.847 +03:00 [DBG] Connection id "0HNJ4SUVOF7GL" accepted.
2026-02-05 21:52:44.848 +03:00 [DBG] Connection id "0HNJ4SUVOF7GL" started.
2026-02-05 21:52:44.870 +03:00 [DBG] Connection 0HNJ4SUVOF7GL established using the following protocol: "Tls13"
2026-02-05 21:52:44.903 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 21:52:44.959 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 21:52:44.970 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 21:52:44.972 +03:00 [DBG] Request did not match any endpoints
2026-02-05 21:52:44.975 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 21:52:45.007 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 21:52:45.008 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 21:52:45.019 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 21:52:45.020 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 21:52:45.022 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 121.2653ms
2026-02-05 21:52:45.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 21:52:45.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.3723ms
2026-02-05 21:52:45.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 21:52:45.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.9343ms
2026-02-05 21:52:45.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 21:52:45.163 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 21:52:45.164 +03:00 [DBG] Request did not match any endpoints
2026-02-05 21:52:45.165 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 21:52:45.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4801ms
2026-02-05 21:53:13.450 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Копенгаген?date=2026-02-05 - null null
2026-02-05 21:53:13.456 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Копенгаген'
2026-02-05 21:53:13.459 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Копенгаген'
2026-02-05 21:53:13.460 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:53:13.461 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:53:13.462 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:53:13.464 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:53:13.476 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:53:13.478 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:53:13.479 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:53:13.480 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:53:13.481 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:53:13.482 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:53:13.483 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:53:13.539 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 21:53:13.545 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:53:13.553 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:53:13.555 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:53:13.556 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:53:13.557 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:53:13.558 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:53:13.561 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:53:13.563 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:53:13.564 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 21:53:13.566 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:53:13.567 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:53:13.567 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:53:13.569 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:53:13.582 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%BE%D0%BF%D0%B5%D0%BD%D0%B3%D0%B0%D0%B3%D0%B5%D0%BD&count=1&language=ru
2026-02-05 21:53:13.583 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%BE%D0%BF%D0%B5%D0%BD%D0%B3%D0%B0%D0%B3%D0%B5%D0%BD&count=1&language=ru
2026-02-05 21:53:13.890 +03:00 [INF] Received HTTP response headers after 304.7006ms - 200
2026-02-05 21:53:13.891 +03:00 [INF] End processing HTTP request after 310.1349ms - 200
2026-02-05 21:53:13.901 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.67594&longitude=12.56553&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 21:53:13.902 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.67594&longitude=12.56553&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 21:53:14.291 +03:00 [INF] Received HTTP response headers after 388.7246ms - 200
2026-02-05 21:53:14.292 +03:00 [INF] End processing HTTP request after 391.2899ms - 200
2026-02-05 21:53:14.517 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:53:14.533 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:53:14.559 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:53:14.561 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:53:14.563 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:53:14.571 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:53:14.603 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:53:14.609 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-05 21:53:14.611 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:53:14.617 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:53:14.620 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:53:14.624 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-05 21:53:14.626 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 21:53:14.630 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:53:14.641 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:53:14.651 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:53:14.659 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:53:14.663 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 17ms reading results.
2026-02-05 21:53:14.665 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:53:14.667 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 21:53:14.676 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:53:14.677 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:53:14.680 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:53:14.682 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:53:14.683 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:53:14.684 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:53:14.685 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:53:14.685 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 21:53:14.695 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1210.5719ms
2026-02-05 21:53:14.696 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:53:14.699 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:53:14.701 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:53:14.702 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 21:53:14.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Копенгаген?date=2026-02-05 - 200 null application/json; charset=utf-8 1254.7233ms
2026-02-05 21:53:26.178 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Копенгаген/week - null null
2026-02-05 21:53:26.181 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Копенгаген/week'
2026-02-05 21:53:26.181 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Копенгаген/week'
2026-02-05 21:53:26.182 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:53:26.183 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:53:26.184 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:53:26.184 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:53:26.187 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:53:26.188 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:53:26.189 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:53:26.190 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:53:26.191 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:53:26.192 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:53:26.193 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:53:26.194 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:53:26.195 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:53:26.196 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:53:26.197 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:53:26.198 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:53:26.199 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:53:26.199 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:53:26.202 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%BE%D0%BF%D0%B5%D0%BD%D0%B3%D0%B0%D0%B3%D0%B5%D0%BD&count=1&language=ru
2026-02-05 21:53:26.202 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%BE%D0%BF%D0%B5%D0%BD%D0%B3%D0%B0%D0%B3%D0%B5%D0%BD&count=1&language=ru
2026-02-05 21:53:26.269 +03:00 [INF] Received HTTP response headers after 66.0832ms - 200
2026-02-05 21:53:26.270 +03:00 [INF] End processing HTTP request after 68.4375ms - 200
2026-02-05 21:53:26.271 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.67594&longitude=12.56553&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 21:53:26.272 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.67594&longitude=12.56553&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 21:53:26.363 +03:00 [INF] Received HTTP response headers after 90.5727ms - 200
2026-02-05 21:53:26.364 +03:00 [INF] End processing HTTP request after 92.9509ms - 200
2026-02-05 21:53:26.392 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:53:26.393 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:53:26.394 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:53:26.395 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:53:26.396 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:53:26.396 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:53:26.397 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:53:26.398 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:53:26.399 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:53:26.399 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:53:26.400 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:53:26.401 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:53:26.401 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:53:26.402 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:53:26.403 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:53:26.404 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:53:26.407 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:53:26.408 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-05 21:53:26.408 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:53:26.409 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:53:26.410 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:53:26.411 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:53:26.412 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:53:26.414 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:53:26.414 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:53:26.415 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:53:26.415 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:53:26.416 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 21:53:26.418 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 225.4733ms
2026-02-05 21:53:26.419 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 21:53:26.420 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:53:26.421 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:53:26.421 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:53:26.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Копенгаген/week - 200 null application/json; charset=utf-8 244.1439ms
2026-02-05 21:55:07.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 21:55:07.872 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 21:55:07.873 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 21:55:07.874 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:55:07.874 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:07.875 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:07.875 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:55:07.878 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:55:07.879 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:55:07.880 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:55:07.881 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:55:07.882 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:55:07.882 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:55:07.883 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:55:07.884 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:55:07.885 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:55:07.886 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:55:07.886 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:07.887 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:07.888 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:55:07.888 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:07.889 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:55:07.889 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:55:07.890 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:07.891 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:07.892 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:55:07.893 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:07.894 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 21:55:07.894 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 21:55:07.895 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:55:07.896 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:55:07.896 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 21:55:07.897 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 21:55:07.898 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:55:07.898 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 21:55:07.899 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:55:07.900 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:55:07.900 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:55:07.901 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:55:07.912 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:55:07.936 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 21:55:08.020 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 21:55:08.033 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:55:08.034 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:55:08.034 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:08.035 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:08.036 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:55:08.036 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:55:08.037 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:55:08.038 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:55:08.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:55:08.041 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:08.041 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-05 21:55:08.042 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:08.043 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:08.046 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 21:55:08.064 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 21:55:08.068 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:08.069 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:08.070 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:55:08.070 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:55:08.071 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:55:08.072 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:55:08.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:55:08.076 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.077 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.078 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.079 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.079 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.080 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.081 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.081 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.082 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.083 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:08.083 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:08.084 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 10ms reading results.
2026-02-05 21:55:08.085 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:08.086 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:08.087 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:55:08.088 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:55:08.088 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:55:08.089 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:55:08.089 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:55:08.090 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 21:55:08.096 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 212.9545ms
2026-02-05 21:55:08.100 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:55:08.100 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:55:08.101 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:08.102 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:08.103 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 234.7594ms
2026-02-05 21:55:13.597 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-05 21:55:23.614 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:55:23.616 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0385ms - processed: 0 items - remaining: 1 items
2026-02-05 21:55:26.208 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Копенгаген?date=2026-02-05 - null null
2026-02-05 21:55:26.210 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Копенгаген'
2026-02-05 21:55:26.210 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Копенгаген'
2026-02-05 21:55:26.211 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:55:26.212 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:26.212 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:26.213 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:55:26.213 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 21:55:26.215 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:55:26.215 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:55:26.216 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:55:26.217 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:55:26.218 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:55:26.218 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:55:26.222 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 21:55:26.223 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 21:55:26.223 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 21:55:26.224 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:55:26.225 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 21:55:26.226 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 21:55:26.227 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 21:55:26.227 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:55:26.228 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 21:55:26.229 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:55:26.229 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:55:26.230 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 21:55:26.231 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 21:55:26.232 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:55:26.233 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:26.234 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:26.234 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 21:55:26.235 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 21:55:26.235 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 21:55:26.236 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:55:26.237 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:55:26.237 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:26.238 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:26.239 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:55:26.239 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:55:26.240 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:55:26.240 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:55:26.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 10), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 21:55:26.243 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 21:55:26.245 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:26.246 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 21:55:26.247 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:26.247 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:26.248 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:26.249 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 21:55:26.250 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:55:26.251 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:55:26.251 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:55:26.252 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:55:26.252 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:55:26.253 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 21:55:26.254 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 35.122ms
2026-02-05 21:55:26.254 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 21:55:26.255 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:55:26.256 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:26.257 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:26.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Копенгаген?date=2026-02-05 - 200 null application/json; charset=utf-8 49.9469ms
2026-02-05 21:55:28.551 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 21:55:28.553 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 21:55:28.553 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 21:55:28.554 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:55:28.555 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:28.555 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:28.556 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:55:28.556 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:55:28.557 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:55:28.558 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:55:28.559 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:55:28.560 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:55:28.561 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:55:28.562 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:55:28.563 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:55:28.563 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:55:28.564 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:55:28.565 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:28.566 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:28.566 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:55:28.567 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:28.568 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:55:28.568 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:55:28.569 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:28.570 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:28.571 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:55:28.571 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:28.572 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 21:55:28.573 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 21:55:28.573 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:55:28.574 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 21:55:28.575 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 21:55:28.576 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 21:55:28.576 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:55:28.577 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 21:55:28.578 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:55:28.578 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:55:28.579 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 21:55:28.580 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 21:55:28.581 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:55:28.584 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:55:28.584 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:55:28.585 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:28.585 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:28.586 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:55:28.587 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:55:28.587 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:55:28.588 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:55:28.589 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 21:55:28.590 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:28.591 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:55:28.592 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:28.593 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:28.594 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:28.594 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:28.595 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:55:28.596 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:55:28.596 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:55:28.597 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:55:28.598 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 21:55:28.599 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.600 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.601 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.601 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.602 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.603 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.603 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.604 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.605 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.605 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 21:55:28.606 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:28.607 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 7ms reading results.
2026-02-05 21:55:28.608 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:28.609 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:28.610 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:55:28.611 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:55:28.611 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:55:28.612 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:55:28.612 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:55:28.613 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 21:55:28.614 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 52.0557ms
2026-02-05 21:55:28.615 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 21:55:28.615 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:55:28.616 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:28.617 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:28.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 67.1354ms
2026-02-05 21:55:33.627 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:55:33.627 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:55:43.631 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:55:43.631 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:55:44.713 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - null null
2026-02-05 21:55:44.716 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-05 21:55:44.717 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-05 21:55:44.718 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:55:44.719 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:44.719 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:55:44.720 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:55:44.722 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:55:44.724 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:55:44.724 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:55:44.725 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:55:44.726 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:55:44.727 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:55:44.728 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:55:44.729 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:55:44.730 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:55:44.730 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:55:44.731 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:44.732 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:44.732 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:55:44.733 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:55:44.734 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:55:44.734 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:55:44.735 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:44.736 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:44.736 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:55:44.737 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:55:44.738 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-05 21:55:44.738 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-05 21:55:44.739 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 21:55:44.740 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 21:55:44.740 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-05 21:55:44.741 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-05 21:55:44.743 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:55:44.746 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-05 21:55:44.762 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 21:55:44.764 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:55:44.764 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:55:44.765 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:44.765 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:44.766 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:55:44.767 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:55:44.767 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:55:44.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 21:55:44.769 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 21:55:44.770 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:44.771 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:55:44.772 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:55:44.773 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:44.773 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:55:44.775 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:55:44.775 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:55:44.776 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:55:44.776 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:55:44.777 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-05 21:55:44.778 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 50.3292ms
2026-02-05 21:55:44.779 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:55:44.780 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:55:44.780 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:55:44.781 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:55:44.782 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - 200 null application/json; charset=utf-8 69.0896ms
2026-02-05 21:55:53.642 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:55:53.643 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:56:03.491 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=30 - null null
2026-02-05 21:56:03.494 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-05 21:56:03.494 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-05 21:56:03.496 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:56:03.497 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:56:03.497 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:56:03.498 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:56:03.498 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:56:03.499 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:56:03.500 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:56:03.500 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:56:03.501 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:56:03.502 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:56:03.503 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:56:03.504 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:56:03.505 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:56:03.505 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:56:03.506 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:56:03.507 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:56:03.507 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:56:03.508 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:56:03.509 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:56:03.509 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:56:03.510 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:56:03.511 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:56:03.512 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:56:03.512 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:56:03.513 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-05 21:56:03.513 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-05 21:56:03.514 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 21:56:03.515 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 21:56:03.516 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-05 21:56:03.516 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-05 21:56:03.517 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:56:03.519 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:56:03.520 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:56:03.520 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:56:03.521 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:56:03.522 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:56:03.522 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:56:03.523 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:56:03.523 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 21:56:03.524 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 21:56:03.526 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:56:03.527 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:56:03.527 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:56:03.528 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:56:03.529 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:56:03.530 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:56:03.530 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:56:03.531 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:56:03.531 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:56:03.532 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-05 21:56:03.532 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 29.8062ms
2026-02-05 21:56:03.533 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:56:03.534 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:56:03.535 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:56:03.536 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:56:03.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=30 - 200 null application/json; charset=utf-8 45.8296ms
2026-02-05 21:56:03.658 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:56:03.658 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2026-02-05 21:56:13.293 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=50 - null null
2026-02-05 21:56:13.295 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-05 21:56:13.297 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-05 21:56:13.298 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:56:13.298 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:56:13.299 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 21:56:13.300 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:56:13.301 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 21:56:13.302 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 21:56:13.303 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 21:56:13.304 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 21:56:13.305 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 21:56:13.305 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 21:56:13.306 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:56:13.307 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 21:56:13.308 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:56:13.309 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 21:56:13.310 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:56:13.310 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:56:13.311 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 21:56:13.312 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 21:56:13.313 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:56:13.313 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 21:56:13.314 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:56:13.315 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:56:13.315 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 21:56:13.316 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 21:56:13.317 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-05 21:56:13.318 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-05 21:56:13.318 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 21:56:13.319 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 21:56:13.320 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-05 21:56:13.320 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-05 21:56:13.321 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 21:56:13.323 +03:00 [DBG] Creating DbConnection.
2026-02-05 21:56:13.323 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 21:56:13.324 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:56:13.324 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:56:13.325 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 21:56:13.326 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 21:56:13.327 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 21:56:13.327 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 21:56:13.329 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 21:56:13.330 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:56:13.330 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 21:56:13.331 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 21:56:13.332 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:56:13.333 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 21:56:13.334 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 21:56:13.335 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 21:56:13.335 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 21:56:13.335 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 21:56:13.336 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-05 21:56:13.337 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 30.6961ms
2026-02-05 21:56:13.338 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 21:56:13.338 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 21:56:13.339 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 21:56:13.340 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 21:56:13.341 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=50 - 200 null application/json; charset=utf-8 47.5329ms
2026-02-05 21:56:13.674 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:56:13.675 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:56:23.683 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:56:23.684 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-05 21:56:33.688 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:56:33.689 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:56:43.701 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:56:43.702 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:56:53.710 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:56:53.711 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:57:03.713 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:57:03.714 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:57:13.723 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:57:13.724 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 21:57:23.740 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:57:23.741 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 21:57:33.756 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:57:33.757 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-05 21:57:43.765 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:57:43.766 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 21:57:53.769 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:57:53.770 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:58:03.776 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:58:03.777 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-05 21:58:13.787 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:58:13.788 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 21:58:23.791 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:58:23.792 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:58:33.795 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:58:33.796 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 21:58:43.806 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:58:43.806 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-05 21:58:53.808 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:58:53.813 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-05 21:59:03.824 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:59:03.825 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 21:59:13.834 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:59:13.835 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0817ms - processed: 0 items - remaining: 1 items
2026-02-05 21:59:23.849 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:59:23.850 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-05 21:59:33.853 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:59:33.854 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 21:59:43.863 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:59:43.863 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-05 21:59:53.866 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 21:59:53.867 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-05 22:00:03.871 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 22:00:03.872 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-05 22:00:13.879 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 22:00:13.879 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-05 22:00:23.890 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 22:00:23.891 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-05 22:00:33.904 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 22:00:33.905 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-05 22:00:43.912 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 22:00:43.913 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-05 22:00:53.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-05 22:00:53.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-05 22:53:35.738 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-05 22:53:35.801 +03:00 [DBG] Hosting starting
2026-02-05 22:53:35.909 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-05 22:53:35.910 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-05 22:53:35.910 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-05 22:53:35.911 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-05 22:53:35.911 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-05 22:53:35.912 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-05 22:53:35.932 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-05 22:53:35.933 +03:00 [INF] Hosting environment: Development
2026-02-05 22:53:35.933 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-05 22:53:35.934 +03:00 [DBG] Hosting started
2026-02-05 22:53:36.106 +03:00 [DBG] Connection id "0HNJ4U0VV7LC5" accepted.
2026-02-05 22:53:36.106 +03:00 [DBG] Connection id "0HNJ4U0VV7LC6" accepted.
2026-02-05 22:53:36.107 +03:00 [DBG] Connection id "0HNJ4U0VV7LC5" started.
2026-02-05 22:53:36.108 +03:00 [DBG] Connection id "0HNJ4U0VV7LC6" started.
2026-02-05 22:53:36.118 +03:00 [DBG] Connection id "0HNJ4U0VV7LC5" received FIN.
2026-02-05 22:53:36.118 +03:00 [DBG] Connection id "0HNJ4U0VV7LC6" received FIN.
2026-02-05 22:53:36.127 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 22:53:36.127 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-05 22:53:36.146 +03:00 [DBG] Connection id "0HNJ4U0VV7LC6" stopped.
2026-02-05 22:53:36.146 +03:00 [DBG] Connection id "0HNJ4U0VV7LC5" stopped.
2026-02-05 22:53:36.149 +03:00 [DBG] Connection id "0HNJ4U0VV7LC6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 22:53:36.149 +03:00 [DBG] Connection id "0HNJ4U0VV7LC5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-05 22:53:36.341 +03:00 [DBG] Connection id "0HNJ4U0VV7LC7" accepted.
2026-02-05 22:53:36.342 +03:00 [DBG] Connection id "0HNJ4U0VV7LC7" started.
2026-02-05 22:53:36.367 +03:00 [DBG] Connection 0HNJ4U0VV7LC7 established using the following protocol: "Tls13"
2026-02-05 22:53:36.404 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-05 22:53:36.487 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-05 22:53:36.498 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-05 22:53:36.499 +03:00 [DBG] Request did not match any endpoints
2026-02-05 22:53:36.502 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 22:53:36.531 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-05 22:53:36.532 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-05 22:53:36.542 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-05 22:53:36.543 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-05 22:53:36.546 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 145.8843ms
2026-02-05 22:53:36.620 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-05 22:53:36.620 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-05 22:53:36.629 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.3456ms
2026-02-05 22:53:36.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.302ms
2026-02-05 22:53:36.733 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-05 22:53:36.735 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-05 22:53:36.736 +03:00 [DBG] Request did not match any endpoints
2026-02-05 22:53:36.737 +03:00 [DBG] The request path  does not match the path filter
2026-02-05 22:53:36.745 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.0998ms
2026-02-05 22:53:49.507 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - null null
2026-02-05 22:53:49.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-05 22:53:49.513 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-05 22:53:49.514 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 22:53:49.516 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:53:49.517 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:53:49.518 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 22:53:49.531 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 22:53:49.533 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 22:53:49.534 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 22:53:49.535 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 22:53:49.536 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 22:53:49.537 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 22:53:49.538 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 22:53:49.596 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-05 22:53:49.602 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 22:53:49.612 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 22:53:49.614 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 22:53:49.615 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 22:53:49.616 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 22:53:49.617 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 22:53:49.618 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 22:53:49.619 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 22:53:49.620 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 22:53:49.621 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 22:53:49.622 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 22:53:49.622 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 22:53:49.623 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 22:53:49.624 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-05 22:53:49.625 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-05 22:53:49.626 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 22:53:49.626 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-05 22:53:49.627 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-05 22:53:49.628 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-05 22:53:49.861 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 22:53:49.883 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-05 22:53:49.998 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 22:53:50.012 +03:00 [DBG] Creating DbConnection.
2026-02-05 22:53:50.017 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-05 22:53:50.019 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:53:50.027 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:50.029 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 22:53:50.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-05 22:53:50.035 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-05 22:53:50.043 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 22:53:50.054 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-05 22:53:50.059 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:50.062 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-05 22:53:50.064 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:50.066 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 22:53:50.068 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 22:53:50.070 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 22:53:50.070 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 22:53:50.071 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 22:53:50.071 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 22:53:50.072 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-05 22:53:50.077 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 537.7843ms
2026-02-05 22:53:50.078 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-05 22:53:50.079 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 22:53:50.081 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:53:50.083 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-05 22:53:50.084 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - 200 null application/json; charset=utf-8 577.2511ms
2026-02-05 22:53:56.830 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-05 22:53:56.833 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-05 22:53:56.834 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-05 22:53:56.835 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 22:53:56.835 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:53:56.836 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:53:56.837 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 22:53:56.840 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-05 22:53:56.841 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 22:53:56.842 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 22:53:56.843 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 22:53:56.844 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 22:53:56.844 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 22:53:56.845 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 22:53:56.846 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-05 22:53:56.847 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-05 22:53:56.848 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-05 22:53:56.849 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 22:53:56.849 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-05 22:53:56.850 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-05 22:53:56.851 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-05 22:53:56.852 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-05 22:53:56.852 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-05 22:53:56.853 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 22:53:56.854 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-05 22:53:56.854 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-05 22:53:56.855 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-05 22:53:56.856 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-05 22:53:56.857 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-05 22:53:56.857 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 22:53:56.858 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-05 22:53:56.859 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-05 22:53:56.859 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-05 22:53:56.860 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 22:53:56.861 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-05 22:53:56.862 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 22:53:56.862 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-05 22:53:56.863 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-05 22:53:56.863 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-05 22:53:56.893 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 22:53:56.895 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-05 22:53:56.900 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-05 22:53:56.903 +03:00 [DBG] Creating DbConnection.
2026-02-05 22:53:56.904 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 22:53:56.904 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:53:56.905 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:56.906 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 22:53:56.906 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 22:53:56.907 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 22:53:56.908 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 22:53:56.909 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-05 22:53:56.910 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:56.911 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-05 22:53:56.912 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:56.913 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:53:56.914 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)'
2026-02-05 22:53:56.932 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestLog>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: WeatherRequestLog.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: WeatherRequestLog.CacheHit (bool) Required, 1], [Property: WeatherRequestLog.City (string) Required MaxLength(100), 2], [Property: WeatherRequestLog.Date (DateOnly?), 3], [Property: WeatherRequestLog.Endpoint (string) Required, 4], [Property: WeatherRequestLog.LatencyMs (int) Required, 5], [Property: WeatherRequestLog.StatusCode (int) Required, 6], [Property: WeatherRequestLog.TimestampUtc (DateTime) Required, 7] }
        SELECT w.Id, w.CacheHit, w.City, w.Date, w.Endpoint, w.LatencyMs, w.StatusCode, w.TimestampUtc
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestLog>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-05 22:53:56.934 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:53:56.934 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:56.935 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 22:53:56.936 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 22:53:56.936 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 22:53:56.937 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 22:53:56.938 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."Id", "w"."CacheHit", "w"."City", "w"."Date", "w"."Endpoint", "w"."LatencyMs", "w"."StatusCode", "w"."TimestampUtc"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-05 22:53:56.952 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.966 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.967 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.967 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.968 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.969 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.970 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.970 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.971 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.972 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:53:56.972 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:56.973 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 34ms reading results.
2026-02-05 22:53:56.975 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:53:56.975 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:53:56.976 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 22:53:56.978 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 22:53:56.978 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 22:53:56.979 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 22:53:56.979 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 22:53:56.980 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Entities.WeatherRequestLog, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-05 22:53:56.988 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 142.9103ms
2026-02-05 22:53:56.989 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-05 22:53:56.990 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 22:53:56.991 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:53:56.992 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:53:56.993 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 162.5739ms
2026-02-05 22:54:29.889 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Мумбаи?date=2026-02-05 - null null
2026-02-05 22:54:29.891 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Мумбаи'
2026-02-05 22:54:29.892 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Мумбаи'
2026-02-05 22:54:29.893 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 22:54:29.893 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:54:29.894 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:54:29.894 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 22:54:29.897 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 22:54:29.898 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 22:54:29.899 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 22:54:29.900 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 22:54:29.901 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 22:54:29.902 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 22:54:29.903 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 22:54:29.906 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 22:54:29.907 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 22:54:29.908 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 22:54:29.909 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 22:54:29.909 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 22:54:29.910 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 22:54:29.913 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 22:54:29.914 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 22:54:29.914 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-05 22:54:29.915 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 22:54:29.916 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 22:54:29.917 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-05 22:54:29.918 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-05 22:54:29.931 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BC%D0%B1%D0%B0%D0%B8&count=1&language=ru
2026-02-05 22:54:29.936 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BC%D0%B1%D0%B0%D0%B8&count=1&language=ru
2026-02-05 22:54:30.214 +03:00 [INF] Received HTTP response headers after 275.6345ms - 200
2026-02-05 22:54:30.216 +03:00 [INF] End processing HTTP request after 286.203ms - 200
2026-02-05 22:54:30.225 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=19.07283&longitude=72.88261&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 22:54:30.226 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=19.07283&longitude=72.88261&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-05 22:54:30.556 +03:00 [INF] Received HTTP response headers after 329.9764ms - 200
2026-02-05 22:54:30.557 +03:00 [INF] End processing HTTP request after 332.4424ms - 200
2026-02-05 22:54:30.569 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 22:54:30.579 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:54:30.584 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:54:30.586 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 22:54:30.588 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 22:54:30.596 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 22:54:30.625 +03:00 [DBG] Creating DbConnection.
2026-02-05 22:54:30.625 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 22:54:30.626 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:54:30.626 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:54:30.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 22:54:30.628 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 22:54:30.629 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 22:54:30.630 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 22:54:30.632 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 22:54:30.637 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 22:54:30.644 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:54:30.645 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-05 22:54:30.646 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:54:30.647 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:54:30.653 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:54:30.654 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 22:54:30.656 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 22:54:30.658 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 22:54:30.658 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 22:54:30.658 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 22:54:30.659 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 22:54:30.660 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-05 22:54:30.663 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 760.3612ms
2026-02-05 22:54:30.665 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-05 22:54:30.666 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 22:54:30.667 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:54:30.668 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:54:30.668 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Мумбаи?date=2026-02-05 - 200 null application/json; charset=utf-8 783.2348ms
2026-02-05 22:54:50.499 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Мумбаи/week - null null
2026-02-05 22:54:50.501 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Мумбаи/week'
2026-02-05 22:54:50.502 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Мумбаи/week'
2026-02-05 22:54:50.503 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 22:54:50.503 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:54:50.504 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-05 22:54:50.504 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 22:54:50.507 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-05 22:54:50.509 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-05 22:54:50.509 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-05 22:54:50.510 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-05 22:54:50.511 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-05 22:54:50.512 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-05 22:54:50.513 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 22:54:50.514 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-05 22:54:50.515 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-05 22:54:50.516 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-05 22:54:50.517 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 22:54:50.518 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-05 22:54:50.518 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-05 22:54:50.519 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-05 22:54:50.521 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BC%D0%B1%D0%B0%D0%B8&count=1&language=ru
2026-02-05 22:54:50.522 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BC%D0%B1%D0%B0%D0%B8&count=1&language=ru
2026-02-05 22:54:50.576 +03:00 [INF] Received HTTP response headers after 53.151ms - 200
2026-02-05 22:54:50.576 +03:00 [INF] End processing HTTP request after 55.2286ms - 200
2026-02-05 22:54:50.578 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=19.07283&longitude=72.88261&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 22:54:50.578 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=19.07283&longitude=72.88261&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-05 22:54:50.641 +03:00 [INF] Received HTTP response headers after 61.9355ms - 200
2026-02-05 22:54:50.642 +03:00 [INF] End processing HTTP request after 64.2031ms - 200
2026-02-05 22:54:50.644 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-05 22:54:50.646 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:54:50.647 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:54:50.648 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-05 22:54:50.649 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-05 22:54:50.649 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-05 22:54:50.651 +03:00 [DBG] Creating DbConnection.
2026-02-05 22:54:50.651 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-05 22:54:50.652 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:54:50.652 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:54:50.653 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-05 22:54:50.654 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-05 22:54:50.654 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-05 22:54:50.655 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 22:54:50.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-05 22:54:50.657 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-05 22:54:50.659 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:54:50.660 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-05 22:54:50.661 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-05 22:54:50.661 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:54:50.662 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-05 22:54:50.663 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-05 22:54:50.664 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-05 22:54:50.666 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-05 22:54:50.666 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-05 22:54:50.667 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-05 22:54:50.667 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-05 22:54:50.668 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-05 22:54:50.670 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 157.3283ms
2026-02-05 22:54:50.671 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-05 22:54:50.672 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-05 22:54:50.673 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-05 22:54:50.674 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-05 22:54:50.675 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Мумбаи/week - 200 null application/json; charset=utf-8 175.7134ms
