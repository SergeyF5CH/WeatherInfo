2026-02-06 12:03:38.272 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 12:03:38.501 +03:00 [DBG] Hosting starting
2026-02-06 12:03:38.776 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 12:03:38.777 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 12:03:38.778 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 12:03:38.778 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 12:03:38.778 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 12:03:38.779 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 12:03:38.804 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 12:03:38.805 +03:00 [INF] Hosting environment: Development
2026-02-06 12:03:38.806 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 12:03:38.806 +03:00 [DBG] Hosting started
2026-02-06 12:03:39.176 +03:00 [DBG] Connection id "0HNJ5BQF64K9L" accepted.
2026-02-06 12:03:39.176 +03:00 [DBG] Connection id "0HNJ5BQF64K9K" accepted.
2026-02-06 12:03:39.178 +03:00 [DBG] Connection id "0HNJ5BQF64K9L" started.
2026-02-06 12:03:39.178 +03:00 [DBG] Connection id "0HNJ5BQF64K9K" started.
2026-02-06 12:03:39.189 +03:00 [DBG] Connection id "0HNJ5BQF64K9L" received FIN.
2026-02-06 12:03:39.189 +03:00 [DBG] Connection id "0HNJ5BQF64K9K" received FIN.
2026-02-06 12:03:39.198 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 12:03:39.198 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 12:03:39.221 +03:00 [DBG] Connection id "0HNJ5BQF64K9L" stopped.
2026-02-06 12:03:39.221 +03:00 [DBG] Connection id "0HNJ5BQF64K9K" stopped.
2026-02-06 12:03:39.224 +03:00 [DBG] Connection id "0HNJ5BQF64K9K" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 12:03:39.224 +03:00 [DBG] Connection id "0HNJ5BQF64K9L" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 12:03:40.083 +03:00 [DBG] Connection id "0HNJ5BQF64K9M" accepted.
2026-02-06 12:03:40.090 +03:00 [DBG] Connection id "0HNJ5BQF64K9M" started.
2026-02-06 12:03:40.152 +03:00 [DBG] Connection id "0HNJ5BQF64K9M" reset.
2026-02-06 12:03:40.157 +03:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: Удаленный хост принудительно разорвал существующее подключение.
 ---> System.Net.Sockets.SocketException (10054): Удаленный хост принудительно разорвал существующее подключение.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 12:03:40.170 +03:00 [DBG] Connection id "0HNJ5BQF64K9M" stopped.
2026-02-06 12:03:40.171 +03:00 [DBG] Connection id "0HNJ5BQF64K9M" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 12:03:40.180 +03:00 [DBG] Connection id "0HNJ5BQF64K9N" accepted.
2026-02-06 12:03:40.181 +03:00 [DBG] Connection id "0HNJ5BQF64K9N" started.
2026-02-06 12:03:40.202 +03:00 [DBG] Connection 0HNJ5BQF64K9N established using the following protocol: "Tls13"
2026-02-06 12:03:40.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 12:03:40.365 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 12:03:40.380 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 12:03:40.382 +03:00 [DBG] Request did not match any endpoints
2026-02-06 12:03:40.387 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 12:03:40.430 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 12:03:40.432 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 12:03:40.445 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 12:03:40.446 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 12:03:40.448 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 195.5113ms
2026-02-06 12:03:40.471 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 12:03:40.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.1337ms
2026-02-06 12:03:40.493 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 12:03:40.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.3582ms
2026-02-06 12:03:40.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 12:03:40.606 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 12:03:40.607 +03:00 [DBG] Request did not match any endpoints
2026-02-06 12:03:40.608 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 12:03:40.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.6083ms
2026-02-06 12:03:42.632 +03:00 [DBG] Connection id "0HNJ5BQF64K9N" received FIN.
2026-02-06 12:03:42.635 +03:00 [DBG] The connection queue processing loop for 0HNJ5BQF64K9N completed.
2026-02-06 12:03:42.637 +03:00 [DBG] Connection id "0HNJ5BQF64K9N" is closed. The last processed stream ID was 7.
2026-02-06 12:03:42.638 +03:00 [DBG] Connection id "0HNJ5BQF64K9N" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 12:03:42.647 +03:00 [DBG] Connection id "0HNJ5BQF64K9N" stopped.
2026-02-06 12:04:14.837 +03:00 [DBG] Connection id "0HNJ5BQF64K9O" accepted.
2026-02-06 12:04:14.841 +03:00 [DBG] Connection id "0HNJ5BQF64K9O" started.
2026-02-06 12:04:14.848 +03:00 [DBG] Connection 0HNJ5BQF64K9O established using the following protocol: "Tls13"
2026-02-06 12:04:14.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Мурино?date=2026-02-07 - null null
2026-02-06 12:04:14.859 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Мурино'
2026-02-06 12:04:14.861 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Мурино'
2026-02-06 12:04:14.862 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 12:04:14.864 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 12:04:14.865 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 12:04:14.867 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 12:04:14.883 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 12:04:14.885 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 12:04:14.886 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 12:04:14.887 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 12:04:14.888 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 12:04:14.889 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 12:04:14.890 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 12:04:14.983 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 12:04:14.988 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 12:04:14.999 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 12:04:15.000 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 12:04:15.002 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 12:04:15.003 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 12:04:15.003 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 12:04:15.007 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 12:04:15.008 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 12:04:15.009 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 12:04:15.012 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 12:04:15.013 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 12:04:15.013 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 12:04:15.014 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 12:04:15.028 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D1%80%D0%B8%D0%BD%D0%BE&count=1&language=ru
2026-02-06 12:04:15.033 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D1%80%D0%B8%D0%BD%D0%BE&count=1&language=ru
2026-02-06 12:04:15.301 +03:00 [INF] Received HTTP response headers after 265.5488ms - 200
2026-02-06 12:04:15.303 +03:00 [INF] End processing HTTP request after 275.3995ms - 200
2026-02-06 12:04:15.313 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=60.04796&longitude=30.45204&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-07&end_date=2026-02-07
2026-02-06 12:04:15.314 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=60.04796&longitude=30.45204&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-07&end_date=2026-02-07
2026-02-06 12:04:15.513 +03:00 [INF] Received HTTP response headers after 198.8732ms - 200
2026-02-06 12:04:15.514 +03:00 [INF] End processing HTTP request after 201.6191ms - 200
2026-02-06 12:04:15.812 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 12:04:15.829 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 12:04:15.856 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 12:04:15.859 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 12:04:15.861 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 12:04:15.869 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 12:04:15.901 +03:00 [DBG] Creating DbConnection.
2026-02-06 12:04:15.907 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-06 12:04:15.909 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 12:04:15.918 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 12:04:15.922 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 12:04:15.925 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-06 12:04:15.927 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2026-02-06 12:04:15.934 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 12:04:15.949 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 12:04:15.957 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 12:04:15.961 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 12:04:15.965 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-06 12:04:15.968 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 12:04:15.970 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-06 12:04:15.977 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 12:04:15.979 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 12:04:15.983 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 12:04:15.986 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 12:04:15.986 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 12:04:15.987 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 12:04:15.988 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 12:04:15.989 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-06 12:04:16.001 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1110.1595ms
2026-02-06 12:04:16.002 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 12:04:16.004 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 12:04:16.007 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 12:04:16.008 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 12:04:16.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Мурино?date=2026-02-07 - 200 null application/json; charset=utf-8 1156.4875ms
2026-02-06 12:04:55.696 +03:00 [DBG] Connection id "0HNJ5BQF64K9O" received FIN.
2026-02-06 12:04:55.697 +03:00 [DBG] Connection id "0HNJ5BQF64K9O" is closed. The last processed stream ID was 1.
2026-02-06 12:04:55.697 +03:00 [DBG] The connection queue processing loop for 0HNJ5BQF64K9O completed.
2026-02-06 12:04:55.697 +03:00 [DBG] Connection id "0HNJ5BQF64K9O" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 12:04:55.713 +03:00 [DBG] Connection id "0HNJ5BQF64K9O" stopped.
2026-02-06 15:02:36.682 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 15:02:36.877 +03:00 [DBG] Hosting starting
2026-02-06 15:02:36.993 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 15:02:36.994 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 15:02:36.995 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 15:02:36.996 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 15:02:36.997 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 15:02:36.998 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 15:02:37.024 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 15:02:37.025 +03:00 [INF] Hosting environment: Development
2026-02-06 15:02:37.025 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 15:02:37.026 +03:00 [DBG] Hosting started
2026-02-06 15:02:37.393 +03:00 [DBG] Connection id "0HNJ5EUFDOFJC" received FIN.
2026-02-06 15:02:37.397 +03:00 [DBG] Connection id "0HNJ5EUFDOFJC" accepted.
2026-02-06 15:02:37.398 +03:00 [DBG] Connection id "0HNJ5EUFDOFJC" started.
2026-02-06 15:02:37.409 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 15:02:37.428 +03:00 [DBG] Connection id "0HNJ5EUFDOFJC" stopped.
2026-02-06 15:02:37.431 +03:00 [DBG] Connection id "0HNJ5EUFDOFJC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 15:02:37.508 +03:00 [DBG] Connection id "0HNJ5EUFDOFJD" accepted.
2026-02-06 15:02:37.510 +03:00 [DBG] Connection id "0HNJ5EUFDOFJD" started.
2026-02-06 15:02:37.537 +03:00 [DBG] Connection 0HNJ5EUFDOFJD established using the following protocol: "Tls13"
2026-02-06 15:02:37.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 15:02:37.639 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 15:02:37.649 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 15:02:37.650 +03:00 [DBG] Request did not match any endpoints
2026-02-06 15:02:37.652 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 15:02:37.686 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 15:02:37.687 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 15:02:37.697 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 15:02:37.698 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 15:02:37.700 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 130.0382ms
2026-02-06 15:02:37.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 15:02:37.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.2365ms
2026-02-06 15:02:37.752 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 15:02:37.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.233ms
2026-02-06 15:02:37.849 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 15:02:37.851 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 15:02:37.852 +03:00 [DBG] Request did not match any endpoints
2026-02-06 15:02:37.853 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 15:02:37.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.3458ms
2026-02-06 15:47:26.146 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 15:47:26.231 +03:00 [DBG] Hosting starting
2026-02-06 15:47:26.345 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 15:47:26.346 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 15:47:26.347 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 15:47:26.347 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 15:47:26.348 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 15:47:26.349 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 15:47:26.371 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 15:47:26.372 +03:00 [INF] Hosting environment: Development
2026-02-06 15:47:26.373 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 15:47:26.374 +03:00 [DBG] Hosting started
2026-02-06 15:47:26.421 +03:00 [DBG] Connection id "0HNJ5FNGQAFVU" accepted.
2026-02-06 15:47:26.422 +03:00 [DBG] Connection id "0HNJ5FNGQAFVU" started.
2026-02-06 15:47:26.432 +03:00 [DBG] Connection id "0HNJ5FNGQAFVV" accepted.
2026-02-06 15:47:26.433 +03:00 [DBG] Connection id "0HNJ5FNGQAFVV" started.
2026-02-06 15:47:26.464 +03:00 [DBG] Connection id "0HNJ5FNGQAFVV" received FIN.
2026-02-06 15:47:26.464 +03:00 [DBG] Connection id "0HNJ5FNGQAFVU" received FIN.
2026-02-06 15:47:26.469 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 15:47:26.469 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 15:47:26.488 +03:00 [DBG] Connection id "0HNJ5FNGQAFVV" stopped.
2026-02-06 15:47:26.488 +03:00 [DBG] Connection id "0HNJ5FNGQAFVU" stopped.
2026-02-06 15:47:26.490 +03:00 [DBG] Connection id "0HNJ5FNGQAFVV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 15:47:26.490 +03:00 [DBG] Connection id "0HNJ5FNGQAFVU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 15:47:26.576 +03:00 [DBG] Connection id "0HNJ5FNGQAG00" accepted.
2026-02-06 15:47:26.578 +03:00 [DBG] Connection id "0HNJ5FNGQAG00" started.
2026-02-06 15:47:26.602 +03:00 [DBG] Connection 0HNJ5FNGQAG00 established using the following protocol: "Tls13"
2026-02-06 15:47:26.633 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 15:47:26.691 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 15:47:26.701 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 15:47:26.702 +03:00 [DBG] Request did not match any endpoints
2026-02-06 15:47:26.705 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 15:47:26.738 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 15:47:26.740 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 15:47:26.751 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 15:47:26.752 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 15:47:26.754 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 124.6763ms
2026-02-06 15:47:26.780 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 15:47:26.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.6917ms
2026-02-06 15:47:26.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 15:47:26.839 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.1454ms
2026-02-06 15:47:26.887 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 15:47:26.891 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 15:47:26.892 +03:00 [DBG] Request did not match any endpoints
2026-02-06 15:47:26.894 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 15:47:26.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.9047ms
2026-02-06 15:47:35.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва - null null
2026-02-06 15:47:35.249 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 15:47:35.251 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 15:47:35.252 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 15:47:35.254 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 15:47:35.255 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 15:47:35.256 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 15:47:35.269 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 15:47:35.270 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 15:47:35.271 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 15:47:35.272 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 15:47:35.273 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 15:47:35.274 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 15:47:35.275 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 15:47:35.354 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 15:47:35.360 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 15:47:35.367 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 15:47:35.369 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 15:47:35.370 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 15:47:35.371 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 15:47:35.371 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 15:47:35.374 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 15:47:35.376 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 15:47:35.377 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name '' in request data ...
2026-02-06 15:47:35.379 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 15:47:35.380 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 15:47:35.381 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 15:47:35.382 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 15:47:35.383 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 15:47:35.416 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 140.3191ms
2026-02-06 15:47:35.418 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 15:47:35.429 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 15:47:35.441 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва - 500 null application/json 196.9563ms
2026-02-06 16:26:27.137 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 16:26:27.282 +03:00 [DBG] Hosting starting
2026-02-06 16:26:27.385 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 16:26:27.386 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 16:26:27.387 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 16:26:27.388 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 16:26:27.388 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 16:26:27.389 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 16:26:27.411 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 16:26:27.412 +03:00 [INF] Hosting environment: Development
2026-02-06 16:26:27.413 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 16:26:27.414 +03:00 [DBG] Hosting started
2026-02-06 16:26:27.590 +03:00 [DBG] Connection id "0HNJ5GDAHEH33" received FIN.
2026-02-06 16:26:27.593 +03:00 [DBG] Connection id "0HNJ5GDAHEH33" accepted.
2026-02-06 16:26:27.594 +03:00 [DBG] Connection id "0HNJ5GDAHEH33" started.
2026-02-06 16:26:27.605 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 16:26:27.625 +03:00 [DBG] Connection id "0HNJ5GDAHEH33" stopped.
2026-02-06 16:26:27.628 +03:00 [DBG] Connection id "0HNJ5GDAHEH33" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 16:26:27.809 +03:00 [DBG] Connection id "0HNJ5GDAHEH34" accepted.
2026-02-06 16:26:27.810 +03:00 [DBG] Connection id "0HNJ5GDAHEH34" started.
2026-02-06 16:26:27.839 +03:00 [DBG] Connection 0HNJ5GDAHEH34 established using the following protocol: "Tls13"
2026-02-06 16:26:27.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 16:26:27.931 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 16:26:27.939 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 16:26:27.939 +03:00 [DBG] Request did not match any endpoints
2026-02-06 16:26:27.941 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 16:26:27.970 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 16:26:27.972 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 16:26:27.982 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 16:26:27.983 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 16:26:27.985 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 120.0751ms
2026-02-06 16:26:28.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 16:26:28.012 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.2851ms
2026-02-06 16:26:28.035 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 16:26:28.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.0286ms
2026-02-06 16:26:28.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 16:26:28.120 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 16:26:28.121 +03:00 [DBG] Request did not match any endpoints
2026-02-06 16:26:28.122 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 16:26:28.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0132ms
2026-02-06 16:26:43.141 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - null null
2026-02-06 16:26:43.146 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-06 16:26:43.149 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-06 16:26:43.150 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 16:26:43.151 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:26:43.152 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:26:43.154 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 16:26:43.167 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 16:26:43.169 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 16:26:43.170 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 16:26:43.171 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 16:26:43.172 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 16:26:43.173 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 16:26:43.175 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 16:26:43.251 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 16:26:43.257 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 16:26:43.265 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 16:26:43.267 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 16:26:43.269 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 16:26:43.270 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 16:26:43.270 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 16:26:43.272 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 16:26:43.273 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 16:26:43.274 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 16:26:43.275 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 16:26:43.275 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 16:26:43.276 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 16:26:43.277 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 16:26:43.278 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-06 16:26:43.278 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-06 16:26:43.279 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 16:26:43.280 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 16:26:43.280 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-06 16:26:43.281 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-06 16:26:43.282 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 16:26:43.282 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-06 16:26:43.283 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 16:26:43.284 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 16:26:43.285 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 16:26:43.286 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-06 16:26:43.579 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 16:26:43.607 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-06 16:26:43.698 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-06 16:26:43.714 +03:00 [DBG] Creating DbConnection.
2026-02-06 16:26:43.719 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-06 16:26:43.721 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 16:26:43.730 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:26:43.733 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 16:26:43.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-06 16:26:43.738 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-06 16:26:43.743 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 16:26:43.756 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 16:26:43.761 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:26:43.764 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-06 16:26:43.766 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:26:43.768 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 16:26:43.772 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-06 16:26:43.783 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 16:26:43.786 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 16:26:43.787 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:26:43.788 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 16:26:43.788 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 16:26:43.789 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 16:26:43.790 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 16:26:43.792 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 16:26:43.795 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:26:43.796 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-06 16:26:43.797 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:26:43.798 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 16:26:43.801 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 16:26:43.803 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 16:26:43.804 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 16:26:43.804 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 16:26:43.805 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 16:26:43.806 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-06 16:26:43.817 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 641.6274ms
2026-02-06 16:26:43.818 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 16:26:43.820 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 16:26:43.822 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 16:26:43.824 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 16:26:43.825 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-05&to=2026-02-05&page=1&pageSize=10 - 200 null application/json; charset=utf-8 684.2265ms
2026-02-06 16:27:16.195 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - null null
2026-02-06 16:27:16.202 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-06 16:27:16.203 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-06 16:27:16.204 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 16:27:16.205 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:27:16.205 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:27:16.206 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 16:27:16.209 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 16:27:16.211 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 16:27:16.212 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 16:27:16.213 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 16:27:16.214 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 16:27:16.215 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 16:27:16.216 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 16:27:16.217 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 16:27:16.218 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 16:27:16.219 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 16:27:16.220 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 16:27:16.221 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 16:27:16.222 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 16:27:16.223 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 16:27:16.223 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 16:27:16.224 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 16:27:16.225 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 16:27:16.226 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 16:27:16.227 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 16:27:16.228 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 16:27:16.229 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-06 16:27:16.230 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-06 16:27:16.230 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-06 16:27:16.231 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-06 16:27:16.232 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-06 16:27:16.233 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-06 16:27:16.261 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 16:27:16.264 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-06 16:27:16.279 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 16:27:16.280 +03:00 [DBG] Creating DbConnection.
2026-02-06 16:27:16.281 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 16:27:16.281 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 16:27:16.282 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:27:16.283 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 16:27:16.284 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 16:27:16.284 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 16:27:16.285 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-06 16:27:16.287 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-06 16:27:16.288 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:27:16.289 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-06 16:27:16.290 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 16:27:16.291 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 16:27:16.292 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 16:27:16.294 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 16:27:16.294 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 16:27:16.295 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 16:27:16.295 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 16:27:16.296 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-06 16:27:16.297 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 81.7642ms
2026-02-06 16:27:16.298 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 16:27:16.302 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 16:27:16.303 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 16:27:16.304 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 16:27:16.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-05&to=2026-02-05&limit=10 - 200 null application/json; charset=utf-8 109.4038ms
2026-02-06 16:34:18.218 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 16:34:18.306 +03:00 [DBG] Hosting starting
2026-02-06 16:34:18.488 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 16:34:18.488 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 16:34:18.489 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 16:34:18.490 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 16:34:18.491 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 16:34:18.492 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 16:34:18.519 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 16:34:18.520 +03:00 [INF] Hosting environment: Development
2026-02-06 16:34:18.521 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 16:34:18.522 +03:00 [DBG] Hosting started
2026-02-06 16:34:18.924 +03:00 [DBG] Connection id "0HNJ5GHN0E827" accepted.
2026-02-06 16:34:18.925 +03:00 [DBG] Connection id "0HNJ5GHN0E827" started.
2026-02-06 16:34:18.933 +03:00 [DBG] Connection id "0HNJ5GHN0E828" accepted.
2026-02-06 16:34:18.935 +03:00 [DBG] Connection id "0HNJ5GHN0E828" started.
2026-02-06 16:34:18.966 +03:00 [DBG] Connection id "0HNJ5GHN0E827" received FIN.
2026-02-06 16:34:18.966 +03:00 [DBG] Connection id "0HNJ5GHN0E828" received FIN.
2026-02-06 16:34:18.971 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 16:34:18.971 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 16:34:18.991 +03:00 [DBG] Connection id "0HNJ5GHN0E828" stopped.
2026-02-06 16:34:18.991 +03:00 [DBG] Connection id "0HNJ5GHN0E827" stopped.
2026-02-06 16:34:18.994 +03:00 [DBG] Connection id "0HNJ5GHN0E828" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 16:34:18.994 +03:00 [DBG] Connection id "0HNJ5GHN0E827" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 16:34:19.087 +03:00 [DBG] Connection id "0HNJ5GHN0E829" accepted.
2026-02-06 16:34:19.089 +03:00 [DBG] Connection id "0HNJ5GHN0E829" started.
2026-02-06 16:34:19.115 +03:00 [DBG] Connection 0HNJ5GHN0E829 established using the following protocol: "Tls13"
2026-02-06 16:34:19.149 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 16:34:19.213 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 16:34:19.223 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 16:34:19.224 +03:00 [DBG] Request did not match any endpoints
2026-02-06 16:34:19.227 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 16:34:19.265 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 16:34:19.266 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 16:34:19.280 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 16:34:19.281 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 16:34:19.283 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 136.1343ms
2026-02-06 16:34:19.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 16:34:19.309 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.0877ms
2026-02-06 16:34:19.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 16:34:19.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.7584ms
2026-02-06 16:34:19.407 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 16:34:19.409 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 16:34:19.410 +03:00 [DBG] Request did not match any endpoints
2026-02-06 16:34:19.411 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 16:34:19.415 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.6874ms
2026-02-06 16:34:40.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/moscow?date=abc - null null
2026-02-06 16:34:40.741 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/moscow'
2026-02-06 16:34:40.743 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/moscow'
2026-02-06 16:34:40.745 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 16:34:40.746 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:34:40.747 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:34:40.749 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 16:34:40.763 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 16:34:40.765 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 16:34:40.766 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 16:34:40.767 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 16:34:40.768 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 16:34:40.769 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 16:34:40.771 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 16:34:40.827 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 16:34:40.832 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 16:34:40.840 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 16:34:40.841 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 16:34:40.842 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 16:34:40.843 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 16:34:40.844 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 16:34:40.847 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 16:34:40.848 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 16:34:40.849 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 16:34:40.853 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 16:34:40.854 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 16:34:40.855 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 16:34:40.856 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 16:34:40.856 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 16:34:40.857 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 16:34:40.859 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 16:34:40.862 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 16:34:40.863 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 16:34:40.864 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 16:34:40.865 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 16:34:40.876 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 104.1299ms
2026-02-06 16:34:40.877 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 16:34:40.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/moscow?date=abc - 400 null application/problem+json; charset=utf-8 149.5859ms
2026-02-06 16:34:40.933 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/favicon.ico - null null
2026-02-06 16:34:40.936 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2026-02-06 16:34:40.937 +03:00 [DBG] Request did not match any endpoints
2026-02-06 16:34:40.938 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 16:34:40.939 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 16:34:40.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/favicon.ico - 404 0 null 7.1626ms
2026-02-06 16:34:40.943 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/favicon.ico, Response status code: 404
2026-02-06 16:35:01.616 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/asdasdasd?date=2026-01-01 - null null
2026-02-06 16:35:01.622 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/asdasdasd'
2026-02-06 16:35:01.623 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/asdasdasd'
2026-02-06 16:35:01.624 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 16:35:01.624 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:35:01.625 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 16:35:01.626 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 16:35:01.626 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 16:35:01.627 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 16:35:01.628 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 16:35:01.629 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 16:35:01.630 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 16:35:01.630 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 16:35:01.631 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 16:35:01.636 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 16:35:01.637 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 16:35:01.638 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 16:35:01.638 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 16:35:01.639 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 16:35:01.640 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 16:35:01.640 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 16:35:01.641 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 16:35:01.642 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 16:35:01.643 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 16:35:01.643 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 16:35:01.644 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 16:35:01.645 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 16:35:01.661 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=asdasdasd&count=1&language=ru
2026-02-06 16:35:01.667 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=asdasdasd&count=1&language=ru
2026-02-06 16:35:01.978 +03:00 [INF] Received HTTP response headers after 309.3099ms - 200
2026-02-06 16:35:01.980 +03:00 [INF] End processing HTTP request after 320.2095ms - 200
2026-02-06 16:35:01.986 +03:00 [WRN] City not found in Geocoding API: asdasdasd
2026-02-06 16:35:02.045 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 414.1669ms
2026-02-06 16:35:02.046 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 16:35:02.078 +03:00 [ERR] HTTP 404 - City 'asdasdasd' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'asdasdasd' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 64
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 16:35:02.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/asdasdasd?date=2026-01-01 - 404 null application/json 471.6429ms
2026-02-06 16:37:01.666 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 16:37:11.675 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:37:11.677 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0287ms - processed: 0 items - remaining: 1 items
2026-02-06 16:37:21.688 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:37:21.688 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 16:37:31.700 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:37:31.701 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 16:37:41.715 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:37:41.715 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 16:37:51.728 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:37:51.729 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 16:38:01.741 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:38:01.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5765ms - processed: 0 items - remaining: 1 items
2026-02-06 16:38:11.753 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:38:11.754 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-06 16:38:21.765 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:38:21.766 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 16:38:31.780 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:38:31.782 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 16:38:41.792 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:38:41.792 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 16:38:51.807 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:38:51.808 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 16:39:01.817 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:39:01.817 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-06 16:39:11.829 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:39:11.830 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 16:39:21.833 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:39:21.833 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 16:39:31.837 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:39:31.838 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-06 16:39:41.842 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:39:41.843 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 16:39:51.860 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:39:51.862 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 16:40:01.876 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:40:01.877 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 16:40:11.891 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:40:11.892 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0071ms - processed: 0 items - remaining: 1 items
2026-02-06 16:40:21.895 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:40:21.896 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 16:40:31.910 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:40:31.911 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0042ms - processed: 0 items - remaining: 1 items
2026-02-06 16:40:41.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:40:41.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 16:40:51.937 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:40:51.938 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 16:41:01.945 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:41:01.946 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 16:41:11.959 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:41:11.959 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-06 16:41:21.968 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:41:21.969 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 16:41:31.975 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:41:31.976 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 16:41:41.981 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:41:41.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 16:41:51.990 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:41:51.991 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 16:42:02.002 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:42:02.003 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:42:12.006 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:42:12.007 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 16:42:22.014 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:42:22.015 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-06 16:42:32.024 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:42:32.025 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-06 16:42:42.031 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:42:42.032 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:42:52.043 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:42:52.044 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-06 16:43:02.053 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:43:02.053 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-06 16:43:12.056 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:43:12.056 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-06 16:43:22.064 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:43:22.065 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:43:32.080 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:43:32.080 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-06 16:43:42.085 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:43:42.086 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:43:52.089 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:43:52.090 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:44:02.107 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:44:02.108 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-06 16:44:12.113 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:44:12.114 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-06 16:44:22.123 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:44:22.124 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:44:32.129 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:44:32.130 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-06 16:44:42.139 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:44:42.140 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-06 16:44:52.152 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:44:52.153 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-06 16:45:02.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:45:02.163 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:45:12.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:45:12.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-06 16:45:22.178 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:45:22.179 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-06 16:45:32.185 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:45:32.185 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-06 16:45:42.198 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:45:42.199 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-06 16:45:52.208 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:45:52.209 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-06 16:46:02.220 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:46:02.221 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:46:12.230 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:46:12.230 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-06 16:46:22.240 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:46:22.241 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-06 16:46:32.253 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:46:32.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-06 16:46:42.259 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:46:42.260 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 16:46:52.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:46:52.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-06 16:47:02.293 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:47:02.294 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4622ms - processed: 0 items - remaining: 1 items
2026-02-06 16:47:12.300 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:47:12.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-06 16:47:22.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:47:22.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:47:32.326 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:47:32.327 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-06 16:47:42.342 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:47:42.343 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:47:52.344 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:47:52.345 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:48:02.354 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:48:02.355 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:48:12.369 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:48:12.370 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:48:22.374 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:48:22.375 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:48:32.383 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:48:32.384 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:48:42.392 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:48:42.393 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:48:52.396 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:48:52.397 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:49:02.406 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:49:02.407 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:49:12.414 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:49:12.414 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:49:22.422 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:49:22.423 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:49:32.423 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:49:32.424 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:49:42.425 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:49:42.426 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:49:52.431 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:49:52.432 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:50:02.435 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:50:02.436 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:50:12.436 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:50:12.437 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:50:22.448 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:50:22.449 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:50:32.460 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:50:32.460 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:50:42.473 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:50:42.474 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:50:52.483 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:50:52.484 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:02.493 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:51:02.494 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:12.494 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:51:12.495 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:22.508 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:51:22.508 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:32.510 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:51:32.511 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:42.520 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:51:42.521 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:52.527 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:51:52.528 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:51:57.018 +03:00 [DBG] Connection id "0HNJ5GHN0E829" received FIN.
2026-02-06 16:51:57.022 +03:00 [DBG] Connection id "0HNJ5GHN0E829" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 16:51:57.026 +03:00 [DBG] Connection id "0HNJ5GHN0E829" is closed. The last processed stream ID was 13.
2026-02-06 16:51:57.027 +03:00 [DBG] The connection queue processing loop for 0HNJ5GHN0E829 completed.
2026-02-06 16:51:57.028 +03:00 [DBG] Connection id "0HNJ5GHN0E829" stopped.
2026-02-06 16:52:02.543 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:52:02.543 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:52:12.545 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:52:12.546 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:52:22.561 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:52:22.562 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:52:32.565 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:52:32.566 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:52:42.574 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:52:42.574 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:52:52.578 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:52:52.579 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:53:02.582 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:53:02.583 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:53:12.588 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:53:12.589 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:53:22.602 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:53:22.603 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:53:32.612 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:53:32.613 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:53:42.622 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:53:42.622 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:53:52.624 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:53:52.625 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:54:02.635 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:54:02.635 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:54:12.644 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:54:12.645 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:54:22.659 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:54:22.660 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:54:32.662 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:54:32.663 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:54:42.669 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:54:42.670 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2026-02-06 16:54:52.672 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:54:52.673 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:55:02.688 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:55:02.689 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:55:12.689 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:55:12.690 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:55:22.704 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:55:22.705 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:55:32.714 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:55:32.715 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:55:42.722 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:55:42.723 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:55:52.726 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:55:52.727 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:56:02.730 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:56:02.731 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:56:12.737 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:56:12.738 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:56:22.743 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:56:22.744 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:56:32.751 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:56:32.752 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:56:42.766 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:56:42.767 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:56:52.775 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:56:52.775 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:57:02.776 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:57:02.777 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:57:12.787 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:57:12.788 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 16:57:22.794 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:57:22.795 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:57:32.807 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:57:32.807 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:57:42.815 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:57:42.816 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-06 16:57:52.823 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:57:52.824 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 16:58:02.835 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:58:02.836 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:58:12.836 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:58:12.837 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:58:22.841 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:58:22.842 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:58:32.851 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:58:32.852 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:58:42.864 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:58:42.865 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 16:58:52.867 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:58:52.868 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:59:02.873 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:59:02.874 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 16:59:12.880 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:59:12.880 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 16:59:22.885 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:59:22.886 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:59:32.898 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:59:32.899 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 16:59:42.900 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:59:42.901 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 16:59:52.904 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 16:59:52.905 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 17:00:02.909 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:00:02.910 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:00:12.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:00:12.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:00:22.936 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:00:22.937 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:00:32.951 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:00:32.952 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:00:42.962 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:00:42.963 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:00:52.978 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:00:52.978 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:01:02.981 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:01:02.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:01:12.994 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:01:12.995 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:01:22.999 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:01:22.999 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:01:33.012 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:01:33.013 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:01:43.021 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:01:43.021 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:01:53.026 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:01:53.027 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 17:02:03.039 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:02:03.040 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 17:02:13.052 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:02:13.053 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:02:23.064 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:02:23.065 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:02:33.077 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:02:33.078 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:02:43.080 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:02:43.081 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:02:53.095 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:02:53.096 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:03:03.107 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:03:03.108 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:03:13.123 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:03:13.123 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:03:23.126 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:03:23.127 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:03:33.138 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:03:33.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:03:43.150 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:03:43.151 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:03:53.160 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:03:53.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2026-02-06 17:04:03.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:04:03.163 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 17:04:13.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:04:13.173 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:04:23.177 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:04:23.178 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2026-02-06 17:04:33.196 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:04:33.197 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 17:04:43.199 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:04:43.200 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2026-02-06 17:04:53.201 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:04:53.202 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:05:03.208 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:05:03.209 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2026-02-06 17:05:13.218 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:05:13.219 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:05:23.220 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:05:23.221 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:05:33.223 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:05:33.224 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:05:43.238 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:05:43.238 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:05:53.251 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:05:53.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2026-02-06 17:06:03.261 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:06:03.261 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:06:13.262 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:06:13.263 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2026-02-06 17:32:34.784 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 17:32:34.884 +03:00 [DBG] Hosting starting
2026-02-06 17:32:35.032 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 17:32:35.033 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 17:32:35.033 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 17:32:35.034 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 17:32:35.034 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 17:32:35.035 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 17:32:35.061 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 17:32:35.061 +03:00 [INF] Hosting environment: Development
2026-02-06 17:32:35.062 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 17:32:35.062 +03:00 [DBG] Hosting started
2026-02-06 17:32:35.450 +03:00 [DBG] Connection id "0HNJ5HI91TEIF" accepted.
2026-02-06 17:32:35.452 +03:00 [DBG] Connection id "0HNJ5HI91TEIF" started.
2026-02-06 17:32:35.460 +03:00 [DBG] Connection id "0HNJ5HI91TEIG" accepted.
2026-02-06 17:32:35.461 +03:00 [DBG] Connection id "0HNJ5HI91TEIG" started.
2026-02-06 17:32:35.476 +03:00 [DBG] Connection id "0HNJ5HI91TEIF" received FIN.
2026-02-06 17:32:35.476 +03:00 [DBG] Connection id "0HNJ5HI91TEIG" received FIN.
2026-02-06 17:32:35.482 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 17:32:35.482 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 17:32:35.502 +03:00 [DBG] Connection id "0HNJ5HI91TEIG" stopped.
2026-02-06 17:32:35.502 +03:00 [DBG] Connection id "0HNJ5HI91TEIF" stopped.
2026-02-06 17:32:35.504 +03:00 [DBG] Connection id "0HNJ5HI91TEIF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:32:35.504 +03:00 [DBG] Connection id "0HNJ5HI91TEIG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:32:35.582 +03:00 [DBG] Connection id "0HNJ5HI91TEIH" accepted.
2026-02-06 17:32:35.584 +03:00 [DBG] Connection id "0HNJ5HI91TEIH" started.
2026-02-06 17:32:35.612 +03:00 [DBG] Connection 0HNJ5HI91TEIH established using the following protocol: "Tls13"
2026-02-06 17:32:35.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 17:32:35.696 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 17:32:35.705 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 17:32:35.706 +03:00 [DBG] Request did not match any endpoints
2026-02-06 17:32:35.709 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 17:32:35.733 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 17:32:35.734 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 17:32:35.743 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 17:32:35.744 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 17:32:35.746 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 107.2815ms
2026-02-06 17:32:35.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 17:32:35.773 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.085ms
2026-02-06 17:32:35.797 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 17:32:35.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.7592ms
2026-02-06 17:32:35.907 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 17:32:35.909 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 17:32:35.909 +03:00 [DBG] Request did not match any endpoints
2026-02-06 17:32:35.910 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 17:32:35.915 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.8541ms
2026-02-06 17:32:58.815 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-06 17:32:58.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:32:58.824 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:32:58.825 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:32:58.827 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:32:58.827 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:32:58.829 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:32:58.841 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:32:58.843 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:32:58.844 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:32:58.845 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:32:58.846 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:32:58.846 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:32:58.848 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:32:58.901 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 17:32:58.907 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:32:58.914 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:32:58.916 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:32:58.917 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:32:58.918 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:32:58.919 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:32:58.923 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:32:58.936 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 17:32:58.940 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 17:33:00.317 +03:00 [INF] Received HTTP response headers after 1374.4252ms - 200
2026-02-06 17:33:00.319 +03:00 [INF] End processing HTTP request after 1383.8682ms - 200
2026-02-06 17:33:00.328 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-06 17:33:00.328 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-06 17:33:00.626 +03:00 [INF] Received HTTP response headers after 296.6887ms - 200
2026-02-06 17:33:00.627 +03:00 [INF] End processing HTTP request after 299.0196ms - 200
2026-02-06 17:33:00.857 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:33:00.873 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:33:00.898 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:33:00.901 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:33:00.903 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:33:00.912 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:33:00.943 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:33:00.947 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-06 17:33:00.949 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:33:00.955 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:00.960 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:33:00.964 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-06 17:33:00.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-06 17:33:00.972 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:33:00.985 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:33:00.994 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:33:00.999 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:01.003 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 14ms reading results.
2026-02-06 17:33:01.005 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:01.007 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 17:33:01.012 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:33:01.014 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:33:01.017 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:33:01.019 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:33:01.019 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:33:01.020 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:33:01.024 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:33:01.025 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-06 17:33:01.031 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 2183.0595ms
2026-02-06 17:33:01.032 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:33:01.035 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:33:01.038 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:33:01.039 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 17:33:01.040 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 2226.1088ms
2026-02-06 17:33:10.652 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-06 17:33:10.655 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:33:10.656 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:33:10.656 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:33:10.657 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:33:10.657 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:33:10.658 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:33:10.658 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:33:10.659 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:33:10.660 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:33:10.661 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:33:10.662 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:33:10.662 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:33:10.663 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:33:10.665 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:33:10.666 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:33:10.666 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:33:10.667 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:33:10.668 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:33:10.668 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:33:10.669 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:33:10.670 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:33:10.671 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:33:10.672 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:33:10.672 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:33:10.672 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:33:10.673 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-06 17:33:10.674 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 10.7851ms
2026-02-06 17:33:10.675 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:33:10.675 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 23.5804ms
2026-02-06 17:33:30.543 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - null null
2026-02-06 17:33:30.547 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-06 17:33:30.548 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-06 17:33:30.549 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:33:30.549 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:33:30.550 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:33:30.550 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:33:30.554 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:33:30.556 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:33:30.557 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:33:30.558 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:33:30.559 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:33:30.560 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:33:30.561 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:33:30.562 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:33:30.565 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:33:30.566 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:33:30.568 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:33:30.569 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:33:30.570 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:33:30.571 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:33:30.572 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:33:30.572 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:33:30.573 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:33:30.574 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:33:30.574 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:33:30.575 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:33:30.576 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-06 17:33:30.576 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-06 17:33:30.577 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:33:30.578 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:33:30.578 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-06 17:33:30.579 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-06 17:33:30.579 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:33:30.580 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-06 17:33:30.581 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:33:30.581 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:33:30.582 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:33:30.582 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:33:30.612 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:33:30.640 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-06 17:33:30.720 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-06 17:33:30.734 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:33:30.734 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:33:30.735 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:33:30.736 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:30.736 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:33:30.737 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:33:30.738 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:33:30.739 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:33:30.740 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:33:30.742 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:30.742 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-06 17:33:30.743 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:30.744 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:33:30.748 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-06 17:33:30.754 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 17:33:30.757 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:33:30.758 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:30.759 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:33:30.759 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:33:30.760 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:33:30.761 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:33:30.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:33:30.765 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:30.767 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-06 17:33:30.768 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:33:30.769 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 17:33:30.770 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:33:30.771 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:33:30.772 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:33:30.772 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:33:30.773 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:33:30.774 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-06 17:33:30.781 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 219.8265ms
2026-02-06 17:33:30.781 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:33:30.782 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:33:30.783 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:33:30.783 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:33:30.784 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - 200 null application/json; charset=utf-8 241.6975ms
2026-02-06 17:34:00.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-06 17:34:00.147 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:34:00.148 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:34:00.149 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:34:00.149 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:34:00.150 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:34:00.150 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:34:00.151 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:34:00.152 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:34:00.152 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:34:00.153 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:34:00.154 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:34:00.155 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:34:00.156 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:34:00.159 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:34:00.160 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:34:00.161 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:34:00.162 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:34:00.162 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:34:00.163 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:34:00.164 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:34:00.165 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:34:00.166 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:34:00.166 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:34:00.167 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:34:00.167 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:34:00.168 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-06 17:34:00.169 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 12.7118ms
2026-02-06 17:34:00.169 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:34:00.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 24.8454ms
2026-02-06 17:34:03.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - null null
2026-02-06 17:34:03.646 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-06 17:34:03.647 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-06 17:34:03.647 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:34:03.648 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:34:03.649 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:34:03.649 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:34:03.650 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:34:03.651 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:34:03.652 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:34:03.653 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:34:03.653 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:34:03.654 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:34:03.655 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:34:03.656 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:34:03.657 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:34:03.658 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:34:03.658 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:34:03.659 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:34:03.660 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:34:03.661 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:34:03.661 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:34:03.662 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:34:03.663 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:34:03.663 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:34:03.664 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:34:03.665 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:34:03.666 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-06 17:34:03.667 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-06 17:34:03.667 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:34:03.668 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:34:03.668 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-06 17:34:03.669 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-06 17:34:03.670 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:34:03.670 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-06 17:34:03.671 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:34:03.672 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:34:03.673 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:34:03.674 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:34:03.680 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:34:03.684 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:34:03.684 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:34:03.685 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:34:03.686 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:34:03.686 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:34:03.687 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:34:03.688 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:34:03.689 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:34:03.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:34:03.691 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:34:03.692 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-06 17:34:03.692 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:34:03.693 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:34:03.695 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:34:03.695 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:34:03.696 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:34:03.697 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:34:03.697 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:34:03.698 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:34:03.699 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:34:03.700 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:34:03.701 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-06 17:34:03.702 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:34:03.702 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:34:03.703 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:34:03.704 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:34:03.705 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:34:03.705 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:34:03.706 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:34:03.706 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-06 17:34:03.707 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 51.9702ms
2026-02-06 17:34:03.708 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:34:03.709 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:34:03.709 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:34:03.710 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:34:03.711 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - 200 null application/json; charset=utf-8 66.9763ms
2026-02-06 17:34:58.947 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 17:35:08.962 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:35:08.965 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0376ms - processed: 0 items - remaining: 1 items
2026-02-06 17:35:18.971 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:35:18.972 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6598ms - processed: 0 items - remaining: 1 items
2026-02-06 17:35:28.987 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:35:28.988 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 17:35:39.003 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:35:39.004 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 17:35:49.015 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:35:49.015 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 17:35:59.027 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:35:59.027 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 17:36:09.036 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:36:09.037 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 17:36:19.045 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:36:19.046 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-06 17:36:29.062 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:36:29.063 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 17:36:39.066 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:36:39.067 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 17:36:49.071 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:36:49.072 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 17:36:59.082 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:36:59.083 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5748ms - processed: 0 items - remaining: 1 items
2026-02-06 17:37:09.090 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:37:09.091 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 17:37:19.106 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:37:19.107 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 17:37:29.117 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:37:29.119 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-06 17:37:39.122 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:37:39.122 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 17:37:49.127 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:37:49.128 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 17:37:59.131 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:37:59.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 17:38:09.142 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:38:09.143 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 17:38:19.152 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:38:19.153 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 17:38:29.163 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:38:29.163 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 17:38:39.166 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:38:39.166 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 17:38:49.182 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:38:49.183 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-06 17:38:59.188 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:38:59.189 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-06 17:39:09.192 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:39:09.193 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 17:39:19.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:39:19.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 17:39:29.217 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:39:29.218 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 17:39:39.231 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:39:39.232 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-06 17:39:49.241 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:39:49.242 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 17:39:59.253 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:39:59.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-06 17:40:09.266 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:40:09.266 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 17:40:19.271 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:40:19.272 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2026-02-06 17:40:29.278 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:40:29.279 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-06 17:40:39.287 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:40:39.288 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-06 17:45:17.636 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 17:45:17.722 +03:00 [DBG] Hosting starting
2026-02-06 17:45:17.826 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 17:45:17.826 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 17:45:17.827 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 17:45:17.828 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 17:45:17.829 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 17:45:17.829 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 17:45:17.846 +03:00 [DBG] Connection id "0HNJ5HPC8M38Q" accepted.
2026-02-06 17:45:17.847 +03:00 [DBG] Connection id "0HNJ5HPC8M38Q" started.
2026-02-06 17:45:17.856 +03:00 [DBG] Connection id "0HNJ5HPC8M38R" accepted.
2026-02-06 17:45:17.858 +03:00 [DBG] Connection id "0HNJ5HPC8M38R" started.
2026-02-06 17:45:17.860 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 17:45:17.861 +03:00 [INF] Hosting environment: Development
2026-02-06 17:45:17.862 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 17:45:17.863 +03:00 [DBG] Hosting started
2026-02-06 17:45:17.887 +03:00 [DBG] Connection id "0HNJ5HPC8M38R" received FIN.
2026-02-06 17:45:17.887 +03:00 [DBG] Connection id "0HNJ5HPC8M38Q" received FIN.
2026-02-06 17:45:17.896 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 17:45:17.896 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 17:45:17.916 +03:00 [DBG] Connection id "0HNJ5HPC8M38Q" stopped.
2026-02-06 17:45:17.916 +03:00 [DBG] Connection id "0HNJ5HPC8M38R" stopped.
2026-02-06 17:45:17.919 +03:00 [DBG] Connection id "0HNJ5HPC8M38Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:45:17.919 +03:00 [DBG] Connection id "0HNJ5HPC8M38R" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:45:17.997 +03:00 [DBG] Connection id "0HNJ5HPC8M38S" accepted.
2026-02-06 17:45:17.999 +03:00 [DBG] Connection id "0HNJ5HPC8M38S" started.
2026-02-06 17:45:18.024 +03:00 [DBG] Connection 0HNJ5HPC8M38S established using the following protocol: "Tls13"
2026-02-06 17:45:18.055 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 17:45:18.116 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 17:45:18.127 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 17:45:18.129 +03:00 [DBG] Request did not match any endpoints
2026-02-06 17:45:18.131 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 17:45:18.161 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 17:45:18.162 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 17:45:18.172 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 17:45:18.173 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 17:45:18.175 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 123.009ms
2026-02-06 17:45:18.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 17:45:18.199 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.901ms
2026-02-06 17:45:18.230 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 17:45:18.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.5446ms
2026-02-06 17:45:18.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 17:45:18.325 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 17:45:18.326 +03:00 [DBG] Request did not match any endpoints
2026-02-06 17:45:18.327 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 17:45:18.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.7562ms
2026-02-06 17:45:27.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-06 17:45:27.073 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:45:27.075 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:45:27.077 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:45:27.078 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:45:27.079 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:45:27.080 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:45:27.091 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:45:27.093 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:45:27.094 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:45:27.095 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:45:27.096 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:45:27.097 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:45:27.098 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:45:27.150 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 17:45:27.156 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:45:27.161 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:45:27.163 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:45:27.164 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:45:27.165 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:45:27.166 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:45:27.169 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:45:27.182 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 17:45:27.186 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 17:45:32.222 +03:00 [ERR] Failed to reach Geocoding API for city Москва
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 5 seconds elapsing.
 ---> System.TimeoutException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.HttpConnectionWaiter`1.WaitForConnectionWithTelemetryAsync(HttpRequestMessage request, HttpConnectionPool pool, Boolean async, CancellationToken requestCancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendCoreAsync(HttpRequestMessage request, Context context, CancellationToken cancellationToken)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, CancellationToken cancellationToken, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteInternalAsync(Func`3 action, Context context, Boolean continueOnCapturedContext, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 31
2026-02-06 17:45:32.296 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 5196.8292ms
2026-02-06 17:45:32.297 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:45:32.330 +03:00 [ERR] HTTP 502 - Upstream service 'Geocoding' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Geocoding' is unavailable
 ---> System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 5 seconds elapsing.
 ---> System.TimeoutException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.HttpConnectionWaiter`1.WaitForConnectionWithTelemetryAsync(HttpRequestMessage request, HttpConnectionPool pool, Boolean async, CancellationToken requestCancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendCoreAsync(HttpRequestMessage request, Context context, CancellationToken cancellationToken)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, CancellationToken cancellationToken, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteInternalAsync(Func`3 action, Context context, Boolean continueOnCapturedContext, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 31
   --- End of inner exception stack trace ---
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherWeekAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 121
   at WeatherInfo.API.Services.WeatherService.GetWeatherWeekChartAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 185
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 17:45:32.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 502 null application/json 5274.2607ms
2026-02-06 17:45:41.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-06 17:45:41.640 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:45:41.640 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:45:41.641 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:45:41.642 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:45:41.643 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:45:41.643 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:45:41.644 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:45:41.645 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:45:41.646 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:45:41.647 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:45:41.648 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:45:41.649 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:45:41.650 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:45:41.654 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:45:41.655 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:45:41.656 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:45:41.657 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:45:41.658 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:45:41.658 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:45:41.659 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:45:41.660 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 17:45:41.661 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 17:45:41.732 +03:00 [INF] Received HTTP response headers after 69.1413ms - 200
2026-02-06 17:45:41.733 +03:00 [INF] End processing HTTP request after 72.9174ms - 200
2026-02-06 17:45:41.741 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-06 17:45:41.742 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-06 17:45:42.028 +03:00 [INF] Received HTTP response headers after 285.5259ms - 200
2026-02-06 17:45:42.029 +03:00 [INF] End processing HTTP request after 287.9263ms - 200
2026-02-06 17:45:42.252 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:45:42.269 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:45:42.296 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:45:42.299 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:45:42.301 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:45:42.309 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:45:42.344 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:45:42.350 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-06 17:45:42.352 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:45:42.358 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:42.363 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:45:42.366 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:45:42.368 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-06 17:45:42.373 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:45:42.386 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:45:42.394 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:45:42.400 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:42.403 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-06 17:45:42.406 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:42.408 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-06 17:45:42.414 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:45:42.416 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:45:42.418 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:45:42.419 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:45:42.420 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:45:42.420 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:45:42.422 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:45:42.422 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:45:42.423 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:42.424 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:45:42.425 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:45:42.425 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:45:42.426 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:45:42.427 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:45:42.428 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:45:42.430 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:42.431 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-06 17:45:42.432 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:42.432 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:45:42.433 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:45:42.434 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:45:42.436 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:45:42.438 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:45:42.439 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:45:42.439 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:45:42.440 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:45:42.441 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-06 17:45:42.446 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 796.4567ms
2026-02-06 17:45:42.447 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:45:42.448 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:45:42.451 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:45:42.452 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 17:45:42.453 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 815.5939ms
2026-02-06 17:45:55.168 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - null null
2026-02-06 17:45:55.172 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-06 17:45:55.173 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-06 17:45:55.174 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:45:55.174 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:45:55.175 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:45:55.175 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:45:55.178 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:45:55.179 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:45:55.180 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:45:55.181 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:45:55.182 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:45:55.183 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:45:55.184 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:45:55.185 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:45:55.188 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:45:55.189 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:45:55.191 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:45:55.191 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:45:55.192 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:45:55.193 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:45:55.194 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:45:55.194 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:45:55.195 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:45:55.196 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:45:55.196 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:45:55.197 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:45:55.198 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-06 17:45:55.199 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-06 17:45:55.200 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:45:55.200 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:45:55.201 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-06 17:45:55.202 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-06 17:45:55.202 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:45:55.203 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-06 17:45:55.204 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:45:55.205 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:45:55.205 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:45:55.206 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:45:55.238 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:45:55.262 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-06 17:45:55.344 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-06 17:45:55.356 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:45:55.357 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:45:55.357 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:45:55.358 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:55.359 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:45:55.359 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:45:55.360 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:45:55.360 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:45:55.362 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:45:55.363 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:55.364 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-06 17:45:55.365 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:55.366 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:45:55.369 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-06 17:45:55.376 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 17:45:55.379 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:45:55.380 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:55.381 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:45:55.381 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:45:55.382 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:45:55.383 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:45:55.384 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:45:55.387 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:55.388 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-06 17:45:55.388 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:45:55.389 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:45:55.390 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:45:55.391 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:45:55.392 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:45:55.392 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:45:55.393 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:45:55.394 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-06 17:45:55.400 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 215.8517ms
2026-02-06 17:45:55.401 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:45:55.401 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:45:55.402 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:45:55.403 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:45:55.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - 200 null application/json; charset=utf-8 235.804ms
2026-02-06 17:45:57.094 +03:00 [DBG] Connection id "0HNJ5HPC8M38S" received FIN.
2026-02-06 17:45:57.096 +03:00 [DBG] Connection id "0HNJ5HPC8M38S" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:45:57.096 +03:00 [DBG] Connection id "0HNJ5HPC8M38S" is closed. The last processed stream ID was 13.
2026-02-06 17:45:57.098 +03:00 [DBG] The connection queue processing loop for 0HNJ5HPC8M38S completed.
2026-02-06 17:45:57.099 +03:00 [DBG] Connection id "0HNJ5HPC8M38S" stopped.
2026-02-06 17:46:01.629 +03:00 [DBG] Connection id "0HNJ5HPC8M38T" accepted.
2026-02-06 17:46:01.630 +03:00 [DBG] Connection id "0HNJ5HPC8M38T" started.
2026-02-06 17:46:01.640 +03:00 [DBG] Connection 0HNJ5HPC8M38T established using the following protocol: "Tls13"
2026-02-06 17:46:01.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-06 17:46:01.643 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:46:01.644 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-06 17:46:01.645 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:46:01.645 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:46:01.646 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:46:01.646 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:46:01.647 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:46:01.648 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:46:01.649 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:46:01.650 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:46:01.651 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:46:01.652 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:46:01.652 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:46:01.656 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:46:01.657 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:46:01.657 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:46:01.658 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:46:01.659 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:46:01.659 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:46:01.660 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:46:01.667 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:46:01.668 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:46:01.669 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:46:01.669 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:46:01.670 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:46:01.671 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:46:01.672 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:46:01.672 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:46:01.673 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:01.673 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:01.674 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:46:01.675 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:46:01.675 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:46:01.676 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:46:01.677 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:46:01.679 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:46:01.680 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:01.681 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-06 17:46:01.682 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:01.682 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:01.683 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:46:01.684 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:46:01.685 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:46:01.686 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:46:01.686 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:46:01.687 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:46:01.687 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:46:01.688 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-06 17:46:01.688 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 36.0087ms
2026-02-06 17:46:01.689 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:46:01.690 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:46:01.690 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:01.691 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:01.692 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 50.3947ms
2026-02-06 17:46:07.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - null null
2026-02-06 17:46:07.379 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-06 17:46:07.380 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-06 17:46:07.381 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:46:07.381 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:46:07.382 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:46:07.383 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:46:07.384 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:46:07.385 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:46:07.385 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:46:07.386 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:46:07.387 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:46:07.388 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:46:07.389 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:46:07.390 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:46:07.391 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:46:07.391 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:46:07.392 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:46:07.393 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:46:07.393 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:46:07.394 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:46:07.395 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:46:07.395 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:46:07.396 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:46:07.397 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:46:07.398 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:46:07.398 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:46:07.399 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-06 17:46:07.400 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-06 17:46:07.401 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:46:07.401 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:46:07.402 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-06 17:46:07.403 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-06 17:46:07.404 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:46:07.404 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-06 17:46:07.405 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:46:07.406 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:46:07.406 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:46:07.407 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:46:07.408 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:46:07.411 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:46:07.412 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:46:07.412 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:07.413 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:07.414 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:46:07.414 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:46:07.415 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:46:07.416 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:46:07.417 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:46:07.418 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:07.419 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-06 17:46:07.420 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:07.420 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:07.422 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:07.423 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:07.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:46:07.424 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:46:07.425 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:46:07.425 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:46:07.427 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:46:07.428 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:07.428 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-06 17:46:07.429 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:07.430 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:07.431 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:46:07.432 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:46:07.432 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:46:07.433 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:46:07.433 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:46:07.434 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-06 17:46:07.436 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 46.9259ms
2026-02-06 17:46:07.437 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:46:07.437 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:46:07.438 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:07.439 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:07.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - 200 null application/json; charset=utf-8 62.798ms
2026-02-06 17:46:25.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-06&to=2026-02-06&limit=10 - null null
2026-02-06 17:46:25.593 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-06 17:46:25.594 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-06 17:46:25.595 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 17:46:25.595 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:46:25.596 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:46:25.596 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 17:46:25.600 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:46:25.601 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:46:25.602 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:46:25.602 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:46:25.603 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:46:25.604 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:46:25.605 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:46:25.606 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:46:25.606 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:46:25.607 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:46:25.608 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:46:25.609 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:46:25.609 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:46:25.610 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:46:25.611 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:46:25.611 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:46:25.612 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:46:25.613 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:46:25.614 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:46:25.615 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:46:25.615 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-06 17:46:25.616 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-06 17:46:25.617 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-06 17:46:25.617 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-06 17:46:25.618 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-06 17:46:25.619 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-06 17:46:25.621 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:46:25.623 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-06 17:46:25.638 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 17:46:25.639 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:46:25.639 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:46:25.640 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:25.641 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:25.641 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:46:25.642 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:46:25.642 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:46:25.643 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-06 17:46:25.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-06 17:46:25.646 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:25.646 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-06 17:46:25.647 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:46:25.648 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:25.649 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:46:25.650 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:46:25.651 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:46:25.651 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:46:25.651 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:46:25.652 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-06 17:46:25.653 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 48.538ms
2026-02-06 17:46:25.654 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 17:46:25.655 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:46:25.655 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:46:25.656 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:46:25.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-06&to=2026-02-06&limit=10 - 200 null application/json; charset=utf-8 66.1388ms
2026-02-06 17:47:27.185 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 17:47:37.201 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:47:37.204 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0382ms - processed: 0 items - remaining: 1 items
2026-02-06 17:47:47.216 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:47:47.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 17:47:57.225 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:47:57.226 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 17:48:01.728 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 17:48:01.785 +03:00 [DBG] Hosting starting
2026-02-06 17:48:01.881 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 17:48:01.886 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 17:48:01.886 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 17:48:01.887 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 17:48:01.888 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 17:48:01.889 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 17:48:01.923 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 17:48:01.924 +03:00 [INF] Hosting environment: Development
2026-02-06 17:48:01.925 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 17:48:01.926 +03:00 [DBG] Hosting started
2026-02-06 17:48:02.123 +03:00 [DBG] Connection id "0HNJ5HQT7BF79" accepted.
2026-02-06 17:48:02.124 +03:00 [DBG] Connection id "0HNJ5HQT7BF79" started.
2026-02-06 17:48:02.134 +03:00 [DBG] Connection id "0HNJ5HQT7BF7A" accepted.
2026-02-06 17:48:02.135 +03:00 [DBG] Connection id "0HNJ5HQT7BF7A" started.
2026-02-06 17:48:02.166 +03:00 [DBG] Connection id "0HNJ5HQT7BF7A" received FIN.
2026-02-06 17:48:02.166 +03:00 [DBG] Connection id "0HNJ5HQT7BF79" received FIN.
2026-02-06 17:48:02.171 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 17:48:02.171 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 17:48:02.190 +03:00 [DBG] Connection id "0HNJ5HQT7BF79" stopped.
2026-02-06 17:48:02.190 +03:00 [DBG] Connection id "0HNJ5HQT7BF7A" stopped.
2026-02-06 17:48:02.193 +03:00 [DBG] Connection id "0HNJ5HQT7BF7A" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:48:02.193 +03:00 [DBG] Connection id "0HNJ5HQT7BF79" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 17:48:02.373 +03:00 [DBG] Connection id "0HNJ5HQT7BF7B" accepted.
2026-02-06 17:48:02.375 +03:00 [DBG] Connection id "0HNJ5HQT7BF7B" started.
2026-02-06 17:48:02.406 +03:00 [DBG] Connection 0HNJ5HQT7BF7B established using the following protocol: "Tls13"
2026-02-06 17:48:02.437 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 17:48:02.496 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 17:48:02.505 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 17:48:02.507 +03:00 [DBG] Request did not match any endpoints
2026-02-06 17:48:02.509 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 17:48:02.540 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 17:48:02.541 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 17:48:02.553 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 17:48:02.554 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 17:48:02.556 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 121.4819ms
2026-02-06 17:48:02.576 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 17:48:02.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.8134ms
2026-02-06 17:48:02.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 17:48:02.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.1042ms
2026-02-06 17:48:02.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 17:48:02.685 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 17:48:02.686 +03:00 [DBG] Request did not match any endpoints
2026-02-06 17:48:02.687 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 17:48:02.692 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.8559ms
2026-02-06 17:48:09.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Мурино/week/chart - null null
2026-02-06 17:48:09.232 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Мурино/week/chart'
2026-02-06 17:48:09.234 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Мурино/week/chart'
2026-02-06 17:48:09.236 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:48:09.237 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:48:09.238 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:48:09.240 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:48:09.253 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:48:09.255 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:48:09.256 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:48:09.256 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:48:09.258 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:48:09.259 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:48:09.260 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:48:09.327 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 17:48:09.332 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:48:09.339 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:48:09.341 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:48:09.342 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:48:09.343 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:48:09.344 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:48:09.347 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:48:09.363 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D1%80%D0%B8%D0%BD%D0%BE&count=1&language=ru
2026-02-06 17:48:09.368 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D1%80%D0%B8%D0%BD%D0%BE&count=1&language=ru
2026-02-06 17:48:09.618 +03:00 [INF] Received HTTP response headers after 247.2436ms - 200
2026-02-06 17:48:09.621 +03:00 [INF] End processing HTTP request after 259.0356ms - 200
2026-02-06 17:48:09.633 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=60.04796&longitude=30.45204&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-06 17:48:09.634 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=60.04796&longitude=30.45204&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-06 17:48:09.912 +03:00 [INF] Received HTTP response headers after 277.3842ms - 200
2026-02-06 17:48:09.913 +03:00 [INF] End processing HTTP request after 280.1475ms - 200
2026-02-06 17:48:10.178 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:48:10.198 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:10.230 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:10.234 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:48:10.236 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:48:10.245 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:48:10.280 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:48:10.285 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-06 17:48:10.287 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:48:10.293 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:10.296 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:48:10.299 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:48:10.301 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-06 17:48:10.305 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:48:10.316 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:48:10.323 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:48:10.328 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:10.333 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-06 17:48:10.336 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:10.338 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-06 17:48:10.345 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:10.347 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:48:10.352 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:10.353 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:10.354 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:48:10.355 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:48:10.356 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:48:10.357 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:48:10.358 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:10.359 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:48:10.359 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:48:10.360 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:48:10.361 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:48:10.362 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:48:10.363 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:48:10.364 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:10.365 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-06 17:48:10.365 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:10.366 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:48:10.367 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:10.368 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:48:10.371 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:48:10.373 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:48:10.373 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:48:10.374 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:48:10.375 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:48:10.375 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-06 17:48:10.381 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 1120.5612ms
2026-02-06 17:48:10.382 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-06 17:48:10.385 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:48:10.387 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:48:10.388 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 17:48:10.390 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Мурино/week/chart - 200 null application/json; charset=utf-8 1163.4709ms
2026-02-06 17:48:21.764 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Мурино/week - null null
2026-02-06 17:48:21.766 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Мурино/week'
2026-02-06 17:48:21.767 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Мурино/week'
2026-02-06 17:48:21.768 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-06 17:48:21.769 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:48:21.769 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:48:21.770 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-06 17:48:21.773 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 17:48:21.774 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:48:21.775 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:48:21.776 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:48:21.777 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:48:21.778 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:48:21.778 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:48:21.780 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 17:48:21.781 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 17:48:21.782 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 17:48:21.782 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:48:21.783 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 17:48:21.784 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 17:48:21.785 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 17:48:21.812 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:48:21.814 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:21.815 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:21.815 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 17:48:21.816 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 17:48:21.817 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 17:48:21.818 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:48:21.818 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:48:21.819 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:48:21.820 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:21.820 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:48:21.821 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:48:21.822 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:48:21.823 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:48:21.824 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 17:48:21.825 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 17:48:21.826 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:21.827 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-06 17:48:21.828 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:48:21.828 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:48:21.829 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 17:48:21.830 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 17:48:21.831 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:48:21.832 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:48:21.833 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:48:21.833 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:48:21.834 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:48:21.835 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-06 17:48:21.839 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 60.7178ms
2026-02-06 17:48:21.840 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-06 17:48:21.840 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:48:21.841 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:48:21.842 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:48:21.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Мурино/week - 200 null application/json; charset=utf-8 79.4433ms
2026-02-06 17:49:02.203 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-06&to=2026-02-06&limit=10 - null null
2026-02-06 17:49:02.208 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-06 17:49:02.208 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-06 17:49:02.209 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 17:49:02.210 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:49:02.210 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:49:02.211 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 17:49:02.213 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:49:02.214 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:49:02.215 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:49:02.216 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:49:02.217 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:49:02.218 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:49:02.219 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:49:02.220 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:49:02.223 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:49:02.224 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:49:02.225 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:49:02.226 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:49:02.227 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:49:02.228 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:49:02.228 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:49:02.229 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:49:02.230 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:49:02.231 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:49:02.232 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:49:02.233 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:49:02.234 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-06 17:49:02.235 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-06 17:49:02.236 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-06 17:49:02.236 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-06 17:49:02.237 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-06 17:49:02.238 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-06 17:49:02.249 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:49:02.268 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-06 17:49:02.364 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 17:49:02.376 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:49:02.377 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:49:02.378 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:49:02.378 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:02.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:49:02.379 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:49:02.380 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:49:02.381 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-06 17:49:02.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-06 17:49:02.384 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:02.385 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-06 17:49:02.386 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:02.387 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:49:02.388 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:49:02.389 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:49:02.389 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:49:02.390 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:49:02.390 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:49:02.391 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-06 17:49:02.392 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 173.1714ms
2026-02-06 17:49:02.393 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-06 17:49:02.394 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:49:02.394 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:49:02.395 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:49:02.396 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-06&to=2026-02-06&limit=10 - 200 null application/json; charset=utf-8 192.8217ms
2026-02-06 17:49:16.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - null null
2026-02-06 17:49:16.540 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-06 17:49:16.540 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-06 17:49:16.545 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:49:16.545 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:49:16.546 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 17:49:16.546 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:49:16.549 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-06 17:49:16.550 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 17:49:16.551 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 17:49:16.552 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 17:49:16.553 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 17:49:16.554 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 17:49:16.555 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:49:16.556 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-06 17:49:16.556 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:49:16.557 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' using the name 'from' in request data ...
2026-02-06 17:49:16.558 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:49:16.559 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:49:16.559 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-06 17:49:16.560 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-06 17:49:16.561 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:49:16.562 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' using the name 'to' in request data ...
2026-02-06 17:49:16.563 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:49:16.563 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:49:16.564 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-06 17:49:16.565 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-06 17:49:16.565 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-06 17:49:16.566 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-06 17:49:16.567 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:49:16.568 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-06 17:49:16.569 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-06 17:49:16.569 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-06 17:49:16.570 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:49:16.571 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-06 17:49:16.571 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:49:16.572 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:49:16.573 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-06 17:49:16.573 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-06 17:49:16.576 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 17:49:16.579 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-06 17:49:16.583 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-06 17:49:16.587 +03:00 [DBG] Creating DbConnection.
2026-02-06 17:49:16.587 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-06 17:49:16.588 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:49:16.588 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:16.589 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:49:16.590 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:49:16.590 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:49:16.591 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:49:16.592 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-06 17:49:16.594 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:16.594 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-06 17:49:16.595 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:16.596 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:49:16.597 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-06 17:49:16.601 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-06 17:49:16.602 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:49:16.603 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:16.603 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 17:49:16.604 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-06 17:49:16.604 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-06 17:49:16.605 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:49:16.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-06 17:49:16.608 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:16.609 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-06 17:49:16.610 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 17:49:16.611 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:49:16.611 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 17:49:16.613 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 17:49:16.613 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 17:49:16.613 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 17:49:16.614 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 17:49:16.614 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-06 17:49:16.620 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 65.1453ms
2026-02-06 17:49:16.621 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-06 17:49:16.621 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 17:49:16.622 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 17:49:16.623 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-06 17:49:16.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-06&to=2026-02-06&page=1&pageSize=10 - 200 null application/json; charset=utf-8 86.4673ms
2026-02-06 17:50:09.379 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 17:50:19.395 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:50:19.397 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0338ms - processed: 0 items - remaining: 1 items
2026-02-06 17:50:29.403 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 17:50:29.404 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 20:29:30.850 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 20:29:30.911 +03:00 [DBG] Hosting starting
2026-02-06 20:29:31.004 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 20:29:31.005 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 20:29:31.005 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 20:29:31.006 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 20:29:31.006 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 20:29:31.007 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 20:29:31.026 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 20:29:31.027 +03:00 [INF] Hosting environment: Development
2026-02-06 20:29:31.028 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 20:29:31.028 +03:00 [DBG] Hosting started
2026-02-06 20:29:31.183 +03:00 [DBG] Connection id "0HNJ5KL4PDUTV" accepted.
2026-02-06 20:29:31.183 +03:00 [DBG] Connection id "0HNJ5KL4PDUU0" accepted.
2026-02-06 20:29:31.184 +03:00 [DBG] Connection id "0HNJ5KL4PDUTV" started.
2026-02-06 20:29:31.184 +03:00 [DBG] Connection id "0HNJ5KL4PDUU0" started.
2026-02-06 20:29:31.193 +03:00 [DBG] Connection id "0HNJ5KL4PDUU0" received FIN.
2026-02-06 20:29:31.194 +03:00 [DBG] Connection id "0HNJ5KL4PDUTV" received FIN.
2026-02-06 20:29:31.203 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 20:29:31.203 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 20:29:31.221 +03:00 [DBG] Connection id "0HNJ5KL4PDUU0" stopped.
2026-02-06 20:29:31.221 +03:00 [DBG] Connection id "0HNJ5KL4PDUTV" stopped.
2026-02-06 20:29:31.223 +03:00 [DBG] Connection id "0HNJ5KL4PDUU0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 20:29:31.223 +03:00 [DBG] Connection id "0HNJ5KL4PDUTV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 20:29:31.433 +03:00 [DBG] Connection id "0HNJ5KL4PDUU1" accepted.
2026-02-06 20:29:31.436 +03:00 [DBG] Connection id "0HNJ5KL4PDUU1" started.
2026-02-06 20:29:31.462 +03:00 [DBG] Connection 0HNJ5KL4PDUU1 established using the following protocol: "Tls13"
2026-02-06 20:29:31.491 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 20:29:31.553 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 20:29:31.562 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 20:29:31.563 +03:00 [DBG] Request did not match any endpoints
2026-02-06 20:29:31.565 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 20:29:31.600 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 20:29:31.602 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 20:29:31.612 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 20:29:31.613 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 20:29:31.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 126.4241ms
2026-02-06 20:29:31.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 20:29:31.644 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.7323ms
2026-02-06 20:29:31.667 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 20:29:31.691 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8961ms
2026-02-06 20:29:31.753 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 20:29:31.755 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 20:29:31.756 +03:00 [DBG] Request did not match any endpoints
2026-02-06 20:29:31.757 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 20:29:31.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0473ms
2026-02-06 20:29:59.778 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-19 - null null
2026-02-06 20:29:59.785 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 20:29:59.787 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 20:29:59.788 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:29:59.790 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:29:59.790 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:29:59.792 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:29:59.805 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:29:59.807 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:29:59.808 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:29:59.809 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:29:59.810 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:29:59.811 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:29:59.812 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:29:59.867 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 20:29:59.873 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:29:59.880 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:29:59.882 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:29:59.883 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:29:59.884 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:29:59.885 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:29:59.888 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:29:59.889 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:29:59.890 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:29:59.892 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:29:59.893 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:29:59.893 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:29:59.894 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:29:59.908 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:29:59.913 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:00.218 +03:00 [INF] Received HTTP response headers after 303.0215ms - 200
2026-02-06 20:30:00.220 +03:00 [INF] End processing HTTP request after 313.2593ms - 200
2026-02-06 20:30:00.229 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-19&end_date=2025-09-19
2026-02-06 20:30:00.230 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-19&end_date=2025-09-19
2026-02-06 20:30:00.510 +03:00 [INF] Received HTTP response headers after 278.7319ms - 400
2026-02-06 20:30:00.510 +03:00 [INF] End processing HTTP request after 281.2137ms - 400
2026-02-06 20:30:00.512 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 20:30:00.588 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 774.8772ms
2026-02-06 20:30:00.590 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:00.619 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 64
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 20:30:00.629 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-19 - 502 null application/json 851.021ms
2026-02-06 20:30:05.059 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-19 - null null
2026-02-06 20:30:05.061 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 20:30:05.062 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 20:30:05.063 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:05.063 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:05.064 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:05.064 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:05.065 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:30:05.066 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:30:05.067 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:30:05.068 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:30:05.069 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:30:05.070 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:30:05.071 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:05.075 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:05.076 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:30:05.077 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:30:05.078 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:05.079 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:05.079 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:30:05.080 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:30:05.081 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:05.082 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:30:05.083 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:05.083 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:05.084 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:05.085 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:05.086 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:05.086 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:05.148 +03:00 [INF] Received HTTP response headers after 61.1334ms - 200
2026-02-06 20:30:05.149 +03:00 [INF] End processing HTTP request after 63.2289ms - 200
2026-02-06 20:30:05.150 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-19&end_date=2025-09-19
2026-02-06 20:30:05.150 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-19&end_date=2025-09-19
2026-02-06 20:30:05.388 +03:00 [INF] Received HTTP response headers after 236.3566ms - 400
2026-02-06 20:30:05.389 +03:00 [INF] End processing HTTP request after 238.9589ms - 400
2026-02-06 20:30:05.390 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 20:30:05.468 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 396.7383ms
2026-02-06 20:30:05.469 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:05.506 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 64
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 20:30:05.512 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-19 - 502 null application/json 452.8651ms
2026-02-06 20:30:07.262 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-19 - null null
2026-02-06 20:30:07.265 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 20:30:07.265 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 20:30:07.266 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:07.267 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:07.267 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:07.268 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:07.268 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:30:07.269 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:30:07.270 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:30:07.271 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:30:07.272 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:30:07.272 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:30:07.273 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:07.276 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:07.277 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:30:07.278 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:30:07.279 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:07.280 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:07.280 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:30:07.281 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:30:07.281 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:07.282 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:30:07.283 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:07.283 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:07.284 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:07.285 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:07.286 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:07.286 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:07.349 +03:00 [INF] Received HTTP response headers after 62.6262ms - 200
2026-02-06 20:30:07.350 +03:00 [INF] End processing HTTP request after 64.5305ms - 200
2026-02-06 20:30:07.351 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-19&end_date=2025-09-19
2026-02-06 20:30:07.352 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-19&end_date=2025-09-19
2026-02-06 20:30:07.459 +03:00 [INF] Received HTTP response headers after 105.8282ms - 400
2026-02-06 20:30:07.460 +03:00 [INF] End processing HTTP request after 108.1969ms - 400
2026-02-06 20:30:07.460 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 20:30:07.518 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 244.6791ms
2026-02-06 20:30:07.519 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:07.545 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 64
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 20:30:07.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-19 - 502 null application/json 287.0218ms
2026-02-06 20:30:23.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2026-02-06 - null null
2026-02-06 20:30:23.774 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 20:30:23.775 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 20:30:23.776 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:23.776 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:23.777 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:23.777 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:23.778 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:30:23.779 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:30:23.780 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:30:23.781 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:30:23.781 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:30:23.782 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:30:23.783 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:23.784 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:23.784 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:30:23.785 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:30:23.786 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:23.787 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:23.788 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:30:23.789 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:30:23.789 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:23.790 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:30:23.791 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:23.792 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:23.792 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:23.793 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:23.794 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:23.794 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:23.871 +03:00 [INF] Received HTTP response headers after 76.4043ms - 200
2026-02-06 20:30:23.872 +03:00 [INF] End processing HTTP request after 78.3495ms - 200
2026-02-06 20:30:23.873 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-06&end_date=2026-02-06
2026-02-06 20:30:23.873 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-06&end_date=2026-02-06
2026-02-06 20:30:24.114 +03:00 [INF] Received HTTP response headers after 239.5577ms - 200
2026-02-06 20:30:24.115 +03:00 [INF] End processing HTTP request after 241.6723ms - 200
2026-02-06 20:30:24.334 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-06 20:30:24.351 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 20:30:24.382 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 20:30:24.385 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-06 20:30:24.387 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-06 20:30:24.395 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-06 20:30:24.427 +03:00 [DBG] Creating DbConnection.
2026-02-06 20:30:24.432 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-06 20:30:24.434 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 20:30:24.442 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 20:30:24.446 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-06 20:30:24.449 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-06 20:30:24.451 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-06 20:30:24.456 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 20:30:24.469 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-06 20:30:24.477 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-06 20:30:24.481 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 20:30:24.485 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-06 20:30:24.487 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-06 20:30:24.489 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-06 20:30:24.496 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-06 20:30:24.497 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-06 20:30:24.499 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 20:30:24.501 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 20:30:24.502 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-06 20:30:24.502 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-06 20:30:24.503 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-06 20:30:24.504 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-06 20:30:24.510 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 726.6984ms
2026-02-06 20:30:24.510 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:24.511 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-06 20:30:24.513 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-06 20:30:24.515 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-06 20:30:24.516 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2026-02-06 - 200 null application/json; charset=utf-8 743.5924ms
2026-02-06 20:30:33.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-06 - null null
2026-02-06 20:30:33.900 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 20:30:33.900 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 20:30:33.901 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:33.902 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:33.902 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:30:33.903 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:33.903 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:30:33.904 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:30:33.905 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:30:33.906 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:30:33.907 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:30:33.907 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:30:33.908 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:33.909 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:30:33.910 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:30:33.910 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:30:33.911 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:33.912 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:30:33.912 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:30:33.913 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:30:33.914 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:33.914 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:30:33.915 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:33.916 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:33.917 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:30:33.917 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:30:33.918 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:33.919 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 20:30:33.980 +03:00 [INF] Received HTTP response headers after 60.6585ms - 200
2026-02-06 20:30:33.981 +03:00 [INF] End processing HTTP request after 62.8268ms - 200
2026-02-06 20:30:33.982 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-06&end_date=2025-09-06
2026-02-06 20:30:33.982 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-06&end_date=2025-09-06
2026-02-06 20:30:34.044 +03:00 [INF] Received HTTP response headers after 60.853ms - 400
2026-02-06 20:30:34.045 +03:00 [INF] End processing HTTP request after 62.8484ms - 400
2026-02-06 20:30:34.045 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 20:30:34.102 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 193.5186ms
2026-02-06 20:30:34.103 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:30:34.124 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 64
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 20:30:34.128 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-06 - 502 null application/json 229.69ms
2026-02-06 20:35:38.141 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 20:35:38.253 +03:00 [DBG] Hosting starting
2026-02-06 20:35:38.345 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 20:35:38.346 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 20:35:38.346 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 20:35:38.347 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 20:35:38.347 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 20:35:38.348 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 20:35:38.368 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 20:35:38.368 +03:00 [INF] Hosting environment: Development
2026-02-06 20:35:38.369 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 20:35:38.369 +03:00 [DBG] Hosting started
2026-02-06 20:35:38.577 +03:00 [DBG] Connection id "0HNJ5KOI95PD6" accepted.
2026-02-06 20:35:38.577 +03:00 [DBG] Connection id "0HNJ5KOI95PD5" accepted.
2026-02-06 20:35:38.578 +03:00 [DBG] Connection id "0HNJ5KOI95PD6" started.
2026-02-06 20:35:38.579 +03:00 [DBG] Connection id "0HNJ5KOI95PD5" started.
2026-02-06 20:35:38.598 +03:00 [DBG] Connection id "0HNJ5KOI95PD5" received FIN.
2026-02-06 20:35:38.598 +03:00 [DBG] Connection id "0HNJ5KOI95PD6" received FIN.
2026-02-06 20:35:38.603 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 20:35:38.603 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 20:35:38.619 +03:00 [DBG] Connection id "0HNJ5KOI95PD6" stopped.
2026-02-06 20:35:38.619 +03:00 [DBG] Connection id "0HNJ5KOI95PD5" stopped.
2026-02-06 20:35:38.621 +03:00 [DBG] Connection id "0HNJ5KOI95PD6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 20:35:38.621 +03:00 [DBG] Connection id "0HNJ5KOI95PD5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 20:35:38.972 +03:00 [DBG] Connection id "0HNJ5KOI95PD7" accepted.
2026-02-06 20:35:38.973 +03:00 [DBG] Connection id "0HNJ5KOI95PD7" started.
2026-02-06 20:35:39.002 +03:00 [DBG] Connection 0HNJ5KOI95PD7 established using the following protocol: "Tls13"
2026-02-06 20:35:39.036 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 20:35:39.098 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 20:35:39.107 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 20:35:39.108 +03:00 [DBG] Request did not match any endpoints
2026-02-06 20:35:39.110 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 20:35:39.137 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 20:35:39.139 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 20:35:39.147 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 20:35:39.148 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 20:35:39.149 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 116.9228ms
2026-02-06 20:35:39.170 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 20:35:39.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.8729ms
2026-02-06 20:35:39.200 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 20:35:39.223 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.6739ms
2026-02-06 20:35:39.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 20:35:39.275 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 20:35:39.275 +03:00 [DBG] Request did not match any endpoints
2026-02-06 20:35:39.276 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 20:35:39.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.0003ms
2026-02-06 20:35:52.728 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2025-09-16 - null null
2026-02-06 20:35:52.732 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 20:35:52.734 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 20:35:52.736 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:35:52.737 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:35:52.738 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:35:52.740 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:35:52.754 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:35:52.755 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:35:52.757 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:35:52.758 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:35:52.759 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:35:52.760 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:35:52.762 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:35:52.815 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 20:35:52.821 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:35:52.829 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:35:52.830 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:35:52.832 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:35:52.833 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:35:52.833 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:35:52.836 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:35:52.837 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:35:52.838 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:35:52.840 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:35:52.841 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:35:52.841 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:35:52.842 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:35:52.855 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 20:35:52.860 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 20:35:53.160 +03:00 [INF] Received HTTP response headers after 298.3786ms - 200
2026-02-06 20:35:53.162 +03:00 [INF] End processing HTTP request after 308.0164ms - 200
2026-02-06 20:35:53.171 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 20:35:53.172 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 20:35:53.469 +03:00 [INF] Received HTTP response headers after 296.1386ms - 400
2026-02-06 20:35:53.470 +03:00 [INF] End processing HTTP request after 298.9675ms - 400
2026-02-06 20:35:53.472 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 20:35:53.546 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 783.6676ms
2026-02-06 20:35:53.547 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:35:53.575 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 64
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 20:35:53.588 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2025-09-16 - 502 null application/json 860.3268ms
2026-02-06 20:37:52.867 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 20:38:02.882 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:38:02.885 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0288ms - processed: 0 items - remaining: 1 items
2026-02-06 20:38:12.892 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:38:12.892 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 20:38:22.924 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:38:22.933 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2026-02-06 20:38:25.342 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2025-09-16 - null null
2026-02-06 20:38:25.348 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 20:38:25.348 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 20:38:25.349 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:38:25.350 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:38:25.350 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 20:38:25.351 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:38:25.351 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 20:38:25.352 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 20:38:25.353 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 20:38:25.354 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 20:38:25.355 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 20:38:25.355 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 20:38:25.356 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:38:25.360 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 20:38:25.362 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 20:38:25.362 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 20:38:25.363 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:38:25.364 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 20:38:25.365 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 20:38:25.365 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 20:38:25.366 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:38:25.367 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 20:38:25.368 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:38:25.368 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:38:25.369 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 20:38:25.370 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 20:38:25.371 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 20:38:25.372 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 20:38:25.619 +03:00 [INF] Received HTTP response headers after 244.2979ms - 200
2026-02-06 20:38:25.620 +03:00 [INF] End processing HTTP request after 249.2161ms - 200
2026-02-06 20:38:25.621 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 20:38:25.622 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 20:38:25.915 +03:00 [INF] Received HTTP response headers after 292.1604ms - 400
2026-02-06 20:38:25.915 +03:00 [INF] End processing HTTP request after 294.3769ms - 400
2026-02-06 20:38:25.916 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 20:38:25.972 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 615.4428ms
2026-02-06 20:38:25.973 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 20:38:25.994 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 64
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 20:38:25.997 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2025-09-16 - 502 null application/json 654.8635ms
2026-02-06 20:38:32.943 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:38:32.944 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 20:38:42.957 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:38:42.958 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0105ms - processed: 0 items - remaining: 1 items
2026-02-06 20:38:52.959 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:38:52.961 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 20:39:02.969 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:39:02.971 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 20:39:12.980 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:39:12.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 20:39:22.987 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:39:22.988 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-06 20:39:32.995 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:39:32.996 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-06 20:39:43.004 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:39:43.005 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 20:39:53.015 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:39:53.016 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 20:40:03.033 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:40:03.034 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 20:40:13.045 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:40:13.045 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 20:40:23.061 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 20:40:23.062 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-06 20:40:25.373 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 20:40:33.077 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:40:33.078 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 2 items
2026-02-06 20:40:43.092 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:40:43.094 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 2 items
2026-02-06 20:40:53.110 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:40:53.111 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4648ms - processed: 0 items - remaining: 2 items
2026-02-06 20:41:03.122 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:41:03.123 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0083ms - processed: 0 items - remaining: 2 items
2026-02-06 20:41:13.131 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:41:13.134 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 2 items
2026-02-06 20:41:23.150 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:41:23.151 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 2 items
2026-02-06 20:41:33.157 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:41:33.158 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 2 items
2026-02-06 20:41:43.170 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:41:43.171 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5021ms - processed: 0 items - remaining: 2 items
2026-02-06 20:41:53.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:41:53.175 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4946ms - processed: 0 items - remaining: 2 items
2026-02-06 20:42:03.189 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:42:03.189 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 2 items
2026-02-06 20:42:13.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:42:13.203 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-06 20:42:23.217 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:42:23.218 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2026-02-06 20:42:33.219 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:42:33.220 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2026-02-06 20:42:43.235 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:42:43.236 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2026-02-06 20:42:53.249 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:42:53.250 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 2 items
2026-02-06 20:43:03.266 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:43:03.266 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:43:13.278 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:43:13.279 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:43:23.280 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:43:23.281 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2026-02-06 20:43:33.291 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:43:33.292 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:43:43.300 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:43:43.301 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-06 20:43:53.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:43:53.304 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-06 20:44:03.316 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:44:03.317 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-06 20:44:13.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:44:13.326 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4867ms - processed: 0 items - remaining: 2 items
2026-02-06 20:44:23.337 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:44:23.338 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:44:33.342 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:44:33.343 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-06 20:44:43.357 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:44:43.358 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-06 20:44:53.371 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:44:53.372 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-06 20:45:03.385 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:45:03.386 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-06 20:45:13.387 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:45:13.388 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:45:23.396 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:45:23.397 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2026-02-06 20:45:33.402 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:45:33.403 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:45:43.415 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:45:43.416 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:45:53.432 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:45:53.433 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2026-02-06 20:46:03.447 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:46:03.448 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 2 items
2026-02-06 20:46:13.458 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:46:13.458 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-06 20:46:23.469 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:46:23.470 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:46:33.485 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:46:33.486 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-06 20:46:43.498 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:46:43.499 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-06 20:46:53.504 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:46:53.505 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.581ms - processed: 0 items - remaining: 2 items
2026-02-06 20:47:03.520 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:47:03.521 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:47:13.523 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:47:13.524 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:47:23.533 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:47:23.534 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2026-02-06 20:47:33.539 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:47:33.540 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:47:43.549 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:47:43.550 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-06 20:47:53.565 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:47:53.566 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-06 20:48:03.581 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:48:03.582 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 2 items
2026-02-06 20:48:13.591 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:48:13.591 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-06 20:48:23.593 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:48:23.594 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-06 20:48:33.610 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:48:33.610 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-06 20:48:43.621 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:48:43.622 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:48:53.631 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:48:53.632 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:49:03.639 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:49:03.640 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:49:13.642 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:49:13.643 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:49:23.653 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:49:23.654 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-06 20:49:33.669 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:49:33.670 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:49:43.682 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:49:43.683 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-06 20:49:53.694 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:49:53.695 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:50:03.708 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:50:03.709 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:50:13.723 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:50:13.724 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-06 20:50:23.732 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:50:23.733 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-06 20:50:33.747 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:50:33.748 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-06 20:50:43.757 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:50:43.758 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2026-02-06 20:50:53.764 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:50:53.765 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 2 items
2026-02-06 20:51:03.766 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:51:03.767 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:51:13.782 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:51:13.783 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-06 20:51:23.787 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:51:23.787 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-06 20:51:33.795 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:51:33.796 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-06 20:51:43.801 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-06 20:51:43.801 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 2 items
2026-02-06 21:00:48.396 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:00:48.460 +03:00 [DBG] Hosting starting
2026-02-06 21:00:48.553 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:00:48.554 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:00:48.554 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:00:48.555 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:00:48.555 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:00:48.556 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:00:48.577 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:00:48.578 +03:00 [INF] Hosting environment: Development
2026-02-06 21:00:48.579 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:00:48.579 +03:00 [DBG] Hosting started
2026-02-06 21:00:48.708 +03:00 [DBG] Connection id "0HNJ5L6KAT971" accepted.
2026-02-06 21:00:48.708 +03:00 [DBG] Connection id "0HNJ5L6KAT970" accepted.
2026-02-06 21:00:48.709 +03:00 [DBG] Connection id "0HNJ5L6KAT971" started.
2026-02-06 21:00:48.710 +03:00 [DBG] Connection id "0HNJ5L6KAT970" started.
2026-02-06 21:00:48.732 +03:00 [DBG] Connection id "0HNJ5L6KAT971" received FIN.
2026-02-06 21:00:48.732 +03:00 [DBG] Connection id "0HNJ5L6KAT970" received FIN.
2026-02-06 21:00:48.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:00:48.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:00:48.758 +03:00 [DBG] Connection id "0HNJ5L6KAT971" stopped.
2026-02-06 21:00:48.758 +03:00 [DBG] Connection id "0HNJ5L6KAT970" stopped.
2026-02-06 21:00:48.761 +03:00 [DBG] Connection id "0HNJ5L6KAT971" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:00:48.761 +03:00 [DBG] Connection id "0HNJ5L6KAT970" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:00:49.039 +03:00 [DBG] Connection id "0HNJ5L6KAT972" accepted.
2026-02-06 21:00:49.042 +03:00 [DBG] Connection id "0HNJ5L6KAT972" started.
2026-02-06 21:00:49.068 +03:00 [DBG] Connection 0HNJ5L6KAT972 established using the following protocol: "Tls13"
2026-02-06 21:00:49.102 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:00:49.163 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:00:49.176 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:00:49.177 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:00:49.181 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:00:49.213 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:00:49.215 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:00:49.226 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:00:49.227 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:00:49.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 130.4711ms
2026-02-06 21:00:49.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:00:49.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.149ms
2026-02-06 21:00:49.281 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:00:49.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.2776ms
2026-02-06 21:00:49.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:00:49.364 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:00:49.365 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:00:49.367 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:00:49.373 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.7269ms
2026-02-06 21:01:05.317 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - null null
2026-02-06 21:01:05.322 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 21:01:05.324 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 21:01:05.326 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:05.328 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:01:05.329 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:01:05.330 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:05.344 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:01:05.345 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:01:05.346 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:01:05.348 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:01:05.349 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:01:05.350 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:01:05.351 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:01:05.406 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:01:05.412 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:01:05.419 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:01:05.421 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:01:05.422 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:01:05.423 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:01:05.424 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:01:05.427 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:01:05.429 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:01:05.430 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:01:05.431 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:05.432 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:05.433 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:01:05.434 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:05.447 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:01:05.452 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:01:05.761 +03:00 [INF] Received HTTP response headers after 306.8423ms - 200
2026-02-06 21:01:05.763 +03:00 [INF] End processing HTTP request after 316.3962ms - 200
2026-02-06 21:01:05.772 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:01:05.773 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:01:06.056 +03:00 [INF] Received HTTP response headers after 282.0661ms - 400
2026-02-06 21:01:06.058 +03:00 [INF] End processing HTTP request after 285.2277ms - 400
2026-02-06 21:01:06.059 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21","error":true}
2026-02-06 21:01:06.087 +03:00 [ERR] Failed to fetch weather from Open-Meteo API
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 70
2026-02-06 21:01:06.150 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 798.114ms
2026-02-06 21:01:06.152 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:06.180 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
 ---> WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 70
   --- End of inner exception stack trace ---
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 100
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:01:06.192 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - 502 null application/json 874.9901ms
2026-02-06 21:01:15.017 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:01:15.089 +03:00 [DBG] Hosting starting
2026-02-06 21:01:15.191 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:01:15.191 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:01:15.192 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:01:15.192 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:01:15.193 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:01:15.193 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:01:15.215 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:01:15.216 +03:00 [INF] Hosting environment: Development
2026-02-06 21:01:15.216 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:01:15.217 +03:00 [DBG] Hosting started
2026-02-06 21:01:15.347 +03:00 [DBG] Connection id "0HNJ5L6S8UN3O" received FIN.
2026-02-06 21:01:15.350 +03:00 [DBG] Connection id "0HNJ5L6S8UN3O" accepted.
2026-02-06 21:01:15.351 +03:00 [DBG] Connection id "0HNJ5L6S8UN3O" started.
2026-02-06 21:01:15.361 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:01:15.380 +03:00 [DBG] Connection id "0HNJ5L6S8UN3O" stopped.
2026-02-06 21:01:15.383 +03:00 [DBG] Connection id "0HNJ5L6S8UN3O" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:01:15.626 +03:00 [DBG] Connection id "0HNJ5L6S8UN3P" accepted.
2026-02-06 21:01:15.628 +03:00 [DBG] Connection id "0HNJ5L6S8UN3P" started.
2026-02-06 21:01:15.658 +03:00 [DBG] Connection 0HNJ5L6S8UN3P established using the following protocol: "Tls13"
2026-02-06 21:01:15.690 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:01:15.749 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:01:15.763 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:01:15.764 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:01:15.767 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:01:15.797 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:01:15.799 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:01:15.808 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:01:15.809 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:01:15.811 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 123.1266ms
2026-02-06 21:01:15.832 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:01:15.838 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.0555ms
2026-02-06 21:01:15.864 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:01:15.932 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.57ms
2026-02-06 21:01:15.958 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:01:15.960 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:01:15.961 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:01:15.962 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:01:15.966 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.5988ms
2026-02-06 21:01:32.920 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - null null
2026-02-06 21:01:32.926 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 21:01:32.928 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 21:01:32.929 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:32.931 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:01:32.932 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:01:32.934 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:32.946 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:01:32.947 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:01:32.948 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:01:32.949 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:01:32.950 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:01:32.951 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:01:32.953 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:01:33.009 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:01:33.015 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:01:33.022 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:01:33.024 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:01:33.025 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:01:33.026 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:01:33.027 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:01:33.030 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:01:33.031 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:01:33.032 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:01:33.033 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:33.034 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:33.035 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:01:33.036 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:33.048 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:01:33.053 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:01:33.310 +03:00 [INF] Received HTTP response headers after 254.7457ms - 200
2026-02-06 21:01:33.312 +03:00 [INF] End processing HTTP request after 264.1116ms - 200
2026-02-06 21:01:33.321 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:01:33.322 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:01:33.572 +03:00 [INF] Received HTTP response headers after 248.7636ms - 400
2026-02-06 21:01:33.573 +03:00 [INF] End processing HTTP request after 251.8675ms - 400
2026-02-06 21:01:33.574 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 21:01:33.603 +03:00 [ERR] Failed to fetch weather from Open-Meteo API
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 70
2026-02-06 21:01:33.668 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 714.6124ms
2026-02-06 21:01:33.669 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:33.699 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
 ---> WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 70
   --- End of inner exception stack trace ---
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 100
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:01:33.711 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - 502 null application/json 790.8675ms
2026-02-06 21:01:41.241 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:01:41.320 +03:00 [DBG] Hosting starting
2026-02-06 21:01:41.446 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:01:41.446 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:01:41.447 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:01:41.448 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:01:41.448 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:01:41.449 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:01:41.474 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:01:41.474 +03:00 [INF] Hosting environment: Development
2026-02-06 21:01:41.475 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:01:41.476 +03:00 [DBG] Hosting started
2026-02-06 21:01:41.787 +03:00 [DBG] Connection id "0HNJ5L7453E3D" accepted.
2026-02-06 21:01:41.787 +03:00 [DBG] Connection id "0HNJ5L7453E3C" accepted.
2026-02-06 21:01:41.788 +03:00 [DBG] Connection id "0HNJ5L7453E3D" started.
2026-02-06 21:01:41.788 +03:00 [DBG] Connection id "0HNJ5L7453E3C" started.
2026-02-06 21:01:41.790 +03:00 [DBG] Connection id "0HNJ5L7453E3C" received FIN.
2026-02-06 21:01:41.790 +03:00 [DBG] Connection id "0HNJ5L7453E3D" received FIN.
2026-02-06 21:01:41.801 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:01:41.801 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:01:41.821 +03:00 [DBG] Connection id "0HNJ5L7453E3D" stopped.
2026-02-06 21:01:41.821 +03:00 [DBG] Connection id "0HNJ5L7453E3C" stopped.
2026-02-06 21:01:41.824 +03:00 [DBG] Connection id "0HNJ5L7453E3C" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:01:41.824 +03:00 [DBG] Connection id "0HNJ5L7453E3D" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:01:42.066 +03:00 [DBG] Connection id "0HNJ5L7453E3E" accepted.
2026-02-06 21:01:42.068 +03:00 [DBG] Connection id "0HNJ5L7453E3E" started.
2026-02-06 21:01:42.097 +03:00 [DBG] Connection 0HNJ5L7453E3E established using the following protocol: "Tls13"
2026-02-06 21:01:42.132 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:01:42.203 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:01:42.218 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:01:42.220 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:01:42.224 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:01:42.258 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:01:42.259 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:01:42.270 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:01:42.272 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:01:42.274 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 145.216ms
2026-02-06 21:01:42.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:01:42.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.1061ms
2026-02-06 21:01:42.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:01:42.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.4792ms
2026-02-06 21:01:42.440 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:01:42.443 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:01:42.444 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:01:42.445 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:01:42.452 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.0934ms
2026-02-06 21:01:59.654 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - null null
2026-02-06 21:01:59.658 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 21:01:59.660 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 21:01:59.661 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:59.662 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:01:59.663 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:01:59.665 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:01:59.678 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:01:59.680 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:01:59.681 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:01:59.682 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:01:59.683 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:01:59.684 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:01:59.685 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:01:59.740 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:01:59.746 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:01:59.753 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:01:59.755 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:01:59.756 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:01:59.757 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:01:59.758 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:01:59.761 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:01:59.762 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:01:59.763 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:01:59.765 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:59.766 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:59.766 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:01:59.768 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:01:59.781 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:01:59.785 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:02:00.060 +03:00 [INF] Received HTTP response headers after 272.7429ms - 200
2026-02-06 21:02:00.062 +03:00 [INF] End processing HTTP request after 282.1933ms - 200
2026-02-06 21:02:00.072 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:02:00.073 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:02:00.356 +03:00 [INF] Received HTTP response headers after 282.5645ms - 400
2026-02-06 21:02:00.357 +03:00 [INF] End processing HTTP request after 285.3568ms - 400
2026-02-06 21:02:00.358 +03:00 [ERR] Open-Meteo API returned "BadRequest": {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 21:02:00.386 +03:00 [ERR] Failed to fetch weather from Open-Meteo API
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 70
2026-02-06 21:02:00.448 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 761.48ms
2026-02-06 21:02:00.449 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:02:00.477 +03:00 [ERR] HTTP 502 - Upstream service 'Open-Meteo' is unavailable
WeatherInfo.API.Exceptions.UpstreamUnavailableException: Upstream service 'Open-Meteo' is unavailable
 ---> WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 70
   --- End of inner exception stack trace ---
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 100
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 36
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:02:00.489 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - 502 null application/json 835.0459ms
2026-02-06 21:03:59.772 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 21:04:09.781 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:04:09.783 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0297ms - processed: 0 items - remaining: 1 items
2026-02-06 21:04:19.786 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:04:19.788 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:04:29.803 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:04:29.804 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-06 21:04:39.818 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:04:39.819 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:04:49.822 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:04:49.823 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 21:04:59.828 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:04:59.830 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:05:09.829 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:05:09.831 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2026-02-06 21:05:19.834 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:05:19.835 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:05:29.837 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:05:29.839 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-06 21:05:39.840 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:05:39.841 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:05:49.840 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:05:49.841 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 21:05:59.855 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:05:59.856 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:06:09.869 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:06:09.870 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:06:19.880 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:06:19.881 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:06:29.889 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:06:29.890 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-06 21:06:39.893 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:06:39.894 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:06:49.896 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:06:49.898 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 21:06:59.898 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:06:59.899 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:07:09.915 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:07:09.916 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:19:35.125 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:19:35.217 +03:00 [DBG] Hosting starting
2026-02-06 21:19:35.328 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:19:35.329 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:19:35.330 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:19:35.330 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:19:35.331 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:19:35.332 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:19:35.354 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:19:35.355 +03:00 [INF] Hosting environment: Development
2026-02-06 21:19:35.356 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:19:35.357 +03:00 [DBG] Hosting started
2026-02-06 21:19:35.627 +03:00 [DBG] Connection id "0HNJ5LH461LTJ" accepted.
2026-02-06 21:19:35.627 +03:00 [DBG] Connection id "0HNJ5LH461LTK" accepted.
2026-02-06 21:19:35.629 +03:00 [DBG] Connection id "0HNJ5LH461LTJ" started.
2026-02-06 21:19:35.629 +03:00 [DBG] Connection id "0HNJ5LH461LTK" started.
2026-02-06 21:19:35.641 +03:00 [DBG] Connection id "0HNJ5LH461LTJ" received FIN.
2026-02-06 21:19:35.641 +03:00 [DBG] Connection id "0HNJ5LH461LTK" received FIN.
2026-02-06 21:19:35.649 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:19:35.649 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:19:35.668 +03:00 [DBG] Connection id "0HNJ5LH461LTK" stopped.
2026-02-06 21:19:35.668 +03:00 [DBG] Connection id "0HNJ5LH461LTJ" stopped.
2026-02-06 21:19:35.671 +03:00 [DBG] Connection id "0HNJ5LH461LTJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:19:35.671 +03:00 [DBG] Connection id "0HNJ5LH461LTK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:19:35.800 +03:00 [DBG] Connection id "0HNJ5LH461LTL" accepted.
2026-02-06 21:19:35.802 +03:00 [DBG] Connection id "0HNJ5LH461LTL" started.
2026-02-06 21:19:35.828 +03:00 [DBG] Connection 0HNJ5LH461LTL established using the following protocol: "Tls13"
2026-02-06 21:19:35.862 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:19:35.924 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:19:35.933 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:19:35.934 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:19:35.937 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:19:35.962 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:19:35.963 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:19:35.974 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:19:35.975 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:19:35.977 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 119.2139ms
2026-02-06 21:19:35.997 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:19:36.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.9427ms
2026-02-06 21:19:36.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:19:36.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.1118ms
2026-02-06 21:19:36.099 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:19:36.101 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:19:36.103 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:19:36.104 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:19:36.110 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.7982ms
2026-02-06 21:19:48.984 +03:00 [DBG] Connection id "0HNJ5LH461LTM" accepted.
2026-02-06 21:19:48.985 +03:00 [DBG] Connection id "0HNJ5LH461LTM" started.
2026-02-06 21:19:48.985 +03:00 [DBG] Connection id "0HNJ5LH461LTM" received FIN.
2026-02-06 21:19:48.985 +03:00 [DBG] Connection id "0HNJ5LH461LTN" accepted.
2026-02-06 21:19:48.987 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:19:48.988 +03:00 [DBG] Connection id "0HNJ5LH461LTN" started.
2026-02-06 21:19:48.990 +03:00 [DBG] Connection id "0HNJ5LH461LTM" stopped.
2026-02-06 21:19:48.991 +03:00 [DBG] Connection id "0HNJ5LH461LTM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:19:48.993 +03:00 [DBG] Connection 0HNJ5LH461LTN established using the following protocol: "Tls13"
2026-02-06 21:19:48.996 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-06 21:19:48.999 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-06 21:19:49.001 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-06 21:19:49.003 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:19:49.005 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:19:49.005 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:19:49.007 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:19:49.020 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:19:49.022 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:19:49.023 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:19:49.024 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:19:49.025 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:19:49.026 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:19:49.028 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:19:49.081 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:19:49.087 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:19:49.095 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:19:49.097 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:19:49.098 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:19:49.099 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:19:49.100 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:19:49.104 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:19:49.105 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:19:49.106 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:19:49.108 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:19:49.108 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:19:49.110 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:19:49.111 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:19:49.124 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 21:19:49.129 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 21:19:49.422 +03:00 [INF] Received HTTP response headers after 291.6282ms - 200
2026-02-06 21:19:49.424 +03:00 [INF] End processing HTTP request after 301.5113ms - 200
2026-02-06 21:19:49.431 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-06 21:19:49.490 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 461.7429ms
2026-02-06 21:19:49.492 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:19:49.520 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 65
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:19:49.532 +03:00 [DBG] Connection id "0HNJ5LH461LTN" completed keep alive response.
2026-02-06 21:19:49.534 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json 538.1605ms
2026-02-06 21:19:54.521 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 21:19:54.523 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:19:54.523 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:19:54.524 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:19:54.525 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:19:54.525 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:19:54.526 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:19:54.527 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:19:54.528 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:19:54.529 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:19:54.530 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:19:54.531 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:19:54.532 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:19:54.532 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:19:54.538 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:19:54.539 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:19:54.539 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:19:54.540 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:19:54.541 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:19:54.542 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:19:54.543 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:19:54.543 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:19:54.544 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:19:54.547 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:19:54.548 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:19:54.548 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:19:54.549 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:19:54.550 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 21:19:54.552 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 21:19:54.553 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 21:19:54.555 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 21:19:54.556 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 21:19:54.558 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 21:19:54.559 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 21:19:54.565 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.9798ms
2026-02-06 21:19:54.566 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:19:54.567 +03:00 [DBG] Connection id "0HNJ5LH461LTN" completed keep alive response.
2026-02-06 21:19:54.568 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 47.8603ms
2026-02-06 21:20:00.538 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-06 21:20:00.540 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:20:00.541 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:20:00.542 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:20:00.543 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:20:00.543 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:20:00.544 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:20:00.544 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:20:00.546 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:20:00.547 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:20:00.548 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:20:00.549 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:20:00.550 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:20:00.551 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:20:00.555 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:20:00.556 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:20:00.557 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:20:00.558 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:20:00.558 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:20:00.559 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:20:00.560 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:20:00.561 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:20:00.562 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:20:00.562 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:20:00.563 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:20:00.564 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:20:00.565 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:20:00.601 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 49.9119ms
2026-02-06 21:20:00.602 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:20:00.611 +03:00 [ERR] HTTP 400 - Date is out of supported range
WeatherInfo.API.Exceptions.BadRequestException: Date is out of supported range
   at WeatherInfo.API.Services.WeatherRequestValidator.ValidateDate(DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherRequestValidator.cs:line 22
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 50
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:20:00.615 +03:00 [DBG] Connection id "0HNJ5LH461LTN" completed keep alive response.
2026-02-06 21:20:00.616 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json 77.3452ms
2026-02-06 21:20:19.897 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - null null
2026-02-06 21:20:19.902 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Moscow'
2026-02-06 21:20:19.902 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Moscow'
2026-02-06 21:20:19.903 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:20:19.904 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:20:19.904 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:20:19.905 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:20:19.905 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:20:19.906 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:20:19.907 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:20:19.908 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:20:19.909 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:20:19.910 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:20:19.911 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:20:19.912 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:20:19.913 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:20:19.914 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:20:19.915 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:20:19.916 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:20:19.916 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:20:19.917 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:20:19.918 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:20:19.919 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:20:19.920 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:20:19.920 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:20:19.921 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:20:19.922 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:20:19.923 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:20:19.924 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Moscow&count=1&language=ru
2026-02-06 21:20:19.985 +03:00 [INF] Received HTTP response headers after 60.9422ms - 200
2026-02-06 21:20:19.986 +03:00 [INF] End processing HTTP request after 63.3618ms - 200
2026-02-06 21:20:19.992 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:20:19.993 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-06 21:20:20.298 +03:00 [INF] Received HTTP response headers after 304.0068ms - 400
2026-02-06 21:20:20.299 +03:00 [INF] End processing HTTP request after 307.0414ms - 400
2026-02-06 21:20:20.300 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16. Body: {"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21","error":true}
2026-02-06 21:20:20.367 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 456.1631ms
2026-02-06 21:20:20.368 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:20:20.389 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 74
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:20:20.393 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Moscow?date=2025-09-16 - 400 null application/json 496.31ms
2026-02-06 21:21:49.117 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 21:21:56.794 +03:00 [DBG] Connection id "0HNJ5LH461LTL" received FIN.
2026-02-06 21:21:56.796 +03:00 [DBG] Connection id "0HNJ5LH461LTL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:21:56.798 +03:00 [DBG] Connection id "0HNJ5LH461LTL" is closed. The last processed stream ID was 9.
2026-02-06 21:21:56.800 +03:00 [DBG] The connection queue processing loop for 0HNJ5LH461LTL completed.
2026-02-06 21:21:56.802 +03:00 [DBG] Connection id "0HNJ5LH461LTL" stopped.
2026-02-06 21:21:59.124 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:21:59.126 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0351ms - processed: 0 items - remaining: 1 items
2026-02-06 21:22:09.149 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:22:09.167 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0049ms - processed: 0 items - remaining: 1 items
2026-02-06 21:22:19.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:22:19.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:22:29.183 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:22:29.184 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-06 21:22:39.184 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:22:39.185 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:22:49.185 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:22:49.186 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:22:59.202 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:22:59.203 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:23:09.206 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:23:09.206 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 21:23:19.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:23:19.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0069ms - processed: 0 items - remaining: 1 items
2026-02-06 21:23:29.213 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:23:29.214 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-06 21:23:39.214 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:23:39.215 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-06 21:23:49.225 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:23:49.225 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-06 21:23:59.225 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:23:59.226 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6252ms - processed: 0 items - remaining: 1 items
2026-02-06 21:24:09.234 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:24:09.235 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:24:19.247 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:24:19.249 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:24:29.259 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:24:29.259 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:24:39.270 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:24:39.271 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 21:24:49.284 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:24:49.285 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:24:59.299 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:24:59.299 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:25:09.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:25:09.304 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-06 21:34:51.462 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:34:51.530 +03:00 [DBG] Hosting starting
2026-02-06 21:34:51.667 +03:00 [DBG] Connection id "0HNJ5LPL62KEN" accepted.
2026-02-06 21:34:51.667 +03:00 [DBG] Connection id "0HNJ5LPL62KEO" accepted.
2026-02-06 21:34:51.668 +03:00 [DBG] Connection id "0HNJ5LPL62KEN" started.
2026-02-06 21:34:51.668 +03:00 [DBG] Connection id "0HNJ5LPL62KEO" started.
2026-02-06 21:34:51.669 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:34:51.671 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:34:51.671 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:34:51.672 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:34:51.672 +03:00 [DBG] Connection id "0HNJ5LPL62KEO" received FIN.
2026-02-06 21:34:51.672 +03:00 [DBG] Connection id "0HNJ5LPL62KEN" received FIN.
2026-02-06 21:34:51.679 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:34:51.682 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:34:51.686 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:34:51.686 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:34:51.714 +03:00 [DBG] Connection id "0HNJ5LPL62KEO" stopped.
2026-02-06 21:34:51.714 +03:00 [DBG] Connection id "0HNJ5LPL62KEN" stopped.
2026-02-06 21:34:51.718 +03:00 [DBG] Connection id "0HNJ5LPL62KEO" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:34:51.718 +03:00 [DBG] Connection id "0HNJ5LPL62KEN" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:34:51.730 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:34:51.731 +03:00 [INF] Hosting environment: Development
2026-02-06 21:34:51.732 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:34:51.732 +03:00 [DBG] Hosting started
2026-02-06 21:34:51.972 +03:00 [DBG] Connection id "0HNJ5LPL62KEP" accepted.
2026-02-06 21:34:51.974 +03:00 [DBG] Connection id "0HNJ5LPL62KEP" started.
2026-02-06 21:34:52.005 +03:00 [DBG] Connection 0HNJ5LPL62KEP established using the following protocol: "Tls13"
2026-02-06 21:34:52.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:34:52.157 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:34:52.168 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:34:52.169 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:34:52.172 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:34:52.198 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:34:52.199 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:34:52.209 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:34:52.210 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:34:52.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 176.2633ms
2026-02-06 21:34:52.231 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:34:52.238 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.7912ms
2026-02-06 21:34:52.264 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:34:52.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8332ms
2026-02-06 21:34:52.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:34:52.343 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:34:52.344 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:34:52.346 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:34:52.352 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.8398ms
2026-02-06 21:34:55.001 +03:00 [DBG] Connection id "0HNJ5LPL62KEQ" received FIN.
2026-02-06 21:34:55.001 +03:00 [DBG] Connection id "0HNJ5LPL62KEQ" accepted.
2026-02-06 21:34:55.002 +03:00 [DBG] Connection id "0HNJ5LPL62KEQ" started.
2026-02-06 21:34:55.003 +03:00 [DBG] Connection id "0HNJ5LPL62KER" accepted.
2026-02-06 21:34:55.004 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:34:55.004 +03:00 [DBG] Connection id "0HNJ5LPL62KER" started.
2026-02-06 21:34:55.006 +03:00 [DBG] Connection id "0HNJ5LPL62KEQ" stopped.
2026-02-06 21:34:55.007 +03:00 [DBG] Connection id "0HNJ5LPL62KEQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:34:55.008 +03:00 [DBG] Connection 0HNJ5LPL62KER established using the following protocol: "Tls13"
2026-02-06 21:34:55.011 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-06 21:34:55.015 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:34:55.017 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:34:55.018 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:34:55.019 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:34:55.020 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:34:55.022 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:34:55.035 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:34:55.037 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:34:55.038 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:34:55.039 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:34:55.041 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:34:55.042 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:34:55.044 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:34:55.100 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:34:55.106 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:34:55.114 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:34:55.116 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:34:55.118 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:34:55.118 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:34:55.119 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:34:55.123 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:34:55.124 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:34:55.125 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:34:55.127 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:34:55.128 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:34:55.129 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:34:55.130 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:34:55.183 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 138.4159ms
2026-02-06 21:34:55.184 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:34:55.196 +03:00 [ERR] HTTP 400 - Date is out of supported range
WeatherInfo.API.Exceptions.BadRequestException: Date is out of supported range
   at WeatherInfo.API.Services.WeatherRequestValidator.ValidateDate(DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherRequestValidator.cs:line 22
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 50
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:34:55.209 +03:00 [DBG] Connection id "0HNJ5LPL62KER" completed keep alive response.
2026-02-06 21:34:55.210 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json 199.1477ms
2026-02-06 21:43:13.905 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:43:13.971 +03:00 [DBG] Hosting starting
2026-02-06 21:43:14.069 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:43:14.070 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:43:14.071 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:43:14.072 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:43:14.072 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:43:14.073 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:43:14.095 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:43:14.096 +03:00 [INF] Hosting environment: Development
2026-02-06 21:43:14.097 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:43:14.097 +03:00 [DBG] Hosting started
2026-02-06 21:43:14.115 +03:00 [DBG] Connection id "0HNJ5LUATPQBF" received FIN.
2026-02-06 21:43:14.115 +03:00 [DBG] Connection id "0HNJ5LUATPQBF" accepted.
2026-02-06 21:43:14.117 +03:00 [DBG] Connection id "0HNJ5LUATPQBF" started.
2026-02-06 21:43:14.126 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:43:14.143 +03:00 [DBG] Connection id "0HNJ5LUATPQBF" stopped.
2026-02-06 21:43:14.146 +03:00 [DBG] Connection id "0HNJ5LUATPQBF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:43:14.339 +03:00 [DBG] Connection id "0HNJ5LUATPQBG" accepted.
2026-02-06 21:43:14.343 +03:00 [DBG] Connection id "0HNJ5LUATPQBG" started.
2026-02-06 21:43:14.374 +03:00 [DBG] Connection 0HNJ5LUATPQBG established using the following protocol: "Tls13"
2026-02-06 21:43:14.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:43:14.490 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:43:14.502 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:43:14.503 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:43:14.505 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:43:14.533 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:43:14.535 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:43:14.544 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:43:14.545 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:43:14.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 122.4704ms
2026-02-06 21:43:14.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:43:14.576 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.5098ms
2026-02-06 21:43:14.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:43:14.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.4568ms
2026-02-06 21:43:14.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:43:14.701 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:43:14.702 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:43:14.703 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:43:14.710 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.0556ms
2026-02-06 21:43:20.698 +03:00 [DBG] Connection id "0HNJ5LUATPQBH" accepted.
2026-02-06 21:43:20.698 +03:00 [DBG] Connection id "0HNJ5LUATPQBH" received FIN.
2026-02-06 21:43:20.699 +03:00 [DBG] Connection id "0HNJ5LUATPQBH" started.
2026-02-06 21:43:20.700 +03:00 [DBG] Connection id "0HNJ5LUATPQBI" accepted.
2026-02-06 21:43:20.704 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:43:20.704 +03:00 [DBG] Connection id "0HNJ5LUATPQBI" started.
2026-02-06 21:43:20.706 +03:00 [DBG] Connection id "0HNJ5LUATPQBH" stopped.
2026-02-06 21:43:20.707 +03:00 [DBG] Connection id "0HNJ5LUATPQBH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:43:20.708 +03:00 [DBG] Connection 0HNJ5LUATPQBI established using the following protocol: "Tls13"
2026-02-06 21:43:20.711 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-06 21:43:20.715 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-06 21:43:20.716 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-06 21:43:20.718 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:20.719 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:43:20.720 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:43:20.722 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:20.735 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:43:20.737 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:43:20.738 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:43:20.739 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:43:20.740 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:43:20.741 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:43:20.742 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:43:20.802 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:43:20.809 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:43:20.819 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:43:20.821 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:43:20.822 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:43:20.823 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:43:20.823 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:43:20.827 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:43:20.828 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:43:20.829 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:43:20.831 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:20.832 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:20.833 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:43:20.834 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:20.848 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 21:43:20.853 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 21:43:21.143 +03:00 [INF] Received HTTP response headers after 287.8081ms - 200
2026-02-06 21:43:21.145 +03:00 [INF] End processing HTTP request after 297.3552ms - 200
2026-02-06 21:43:21.152 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-06 21:43:21.237 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 493.8746ms
2026-02-06 21:43:21.238 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:21.265 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 64
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:43:21.277 +03:00 [DBG] Connection id "0HNJ5LUATPQBI" completed keep alive response.
2026-02-06 21:43:21.279 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json 568.0639ms
2026-02-06 21:43:24.664 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 21:43:24.666 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:43:24.667 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:43:24.668 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:24.668 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:43:24.669 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:43:24.669 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:24.670 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:43:24.671 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:43:24.672 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:43:24.673 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:43:24.674 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:43:24.675 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:43:24.676 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:43:24.680 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:43:24.681 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:43:24.682 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:43:24.683 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:43:24.684 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:43:24.685 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:43:24.686 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:43:24.687 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:43:24.688 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:43:24.690 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:24.691 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:24.692 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:43:24.693 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:24.694 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 21:43:24.695 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 21:43:24.697 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 21:43:24.699 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 21:43:24.700 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 21:43:24.702 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 21:43:24.703 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 21:43:24.710 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 34.1978ms
2026-02-06 21:43:24.711 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:24.712 +03:00 [DBG] Connection id "0HNJ5LUATPQBI" completed keep alive response.
2026-02-06 21:43:24.712 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 48.3926ms
2026-02-06 21:43:28.087 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-06 21:43:28.089 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:43:28.090 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:43:28.091 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:28.091 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:43:28.092 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:43:28.092 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:28.093 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:43:28.094 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:43:28.095 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:43:28.096 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:43:28.097 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:43:28.098 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:43:28.099 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:43:28.103 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:43:28.104 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:43:28.105 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:43:28.106 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:43:28.107 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:43:28.107 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:43:28.108 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:43:28.109 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:43:28.110 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:43:28.111 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:28.112 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:28.113 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:43:28.114 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:43:28.115 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 21:43:28.116 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 21:43:28.390 +03:00 [INF] Received HTTP response headers after 273.3189ms - 200
2026-02-06 21:43:28.390 +03:00 [INF] End processing HTTP request after 275.7151ms - 200
2026-02-06 21:43:28.396 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 21:43:28.396 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 21:43:31.769 +03:00 [INF] Received HTTP response headers after 3372.4686ms - 400
2026-02-06 21:43:31.770 +03:00 [INF] End processing HTTP request after 3375.3564ms - 400
2026-02-06 21:43:31.772 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05. Body: {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 21:43:31.829 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 3730.1243ms
2026-02-06 21:43:31.830 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:43:31.851 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 66
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:43:31.855 +03:00 [DBG] Connection id "0HNJ5LUATPQBI" completed keep alive response.
2026-02-06 21:43:31.856 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json 3768.7543ms
2026-02-06 21:45:20.841 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 21:45:30.843 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:45:30.845 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0387ms - processed: 0 items - remaining: 1 items
2026-02-06 21:45:40.849 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:45:40.850 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 21:45:50.855 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:45:50.856 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:46:00.860 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:46:00.861 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 21:46:10.870 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:46:10.871 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:46:20.886 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:46:20.887 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:46:30.901 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:46:30.903 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-06 21:46:40.914 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:46:40.915 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2026-02-06 21:46:50.918 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:46:50.919 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2026-02-06 21:47:00.936 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:47:00.938 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:47:10.949 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:47:10.949 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:47:20.964 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:47:20.965 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 21:47:30.979 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:47:30.981 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-06 21:47:40.997 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:47:40.998 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:47:51.007 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:47:51.008 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:48:01.018 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:48:01.019 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-06 21:48:11.033 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:48:11.035 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-06 21:48:21.047 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:48:21.048 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 21:48:28.130 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 21:48:28.192 +03:00 [DBG] Hosting starting
2026-02-06 21:48:28.282 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 21:48:28.283 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 21:48:28.283 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 21:48:28.284 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 21:48:28.285 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 21:48:28.285 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 21:48:28.307 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 21:48:28.308 +03:00 [INF] Hosting environment: Development
2026-02-06 21:48:28.308 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 21:48:28.309 +03:00 [DBG] Hosting started
2026-02-06 21:48:28.380 +03:00 [DBG] Connection id "0HNJ5M18IRO41" received FIN.
2026-02-06 21:48:28.383 +03:00 [DBG] Connection id "0HNJ5M18IRO41" accepted.
2026-02-06 21:48:28.384 +03:00 [DBG] Connection id "0HNJ5M18IRO41" started.
2026-02-06 21:48:28.394 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:48:28.410 +03:00 [DBG] Connection id "0HNJ5M18IRO41" stopped.
2026-02-06 21:48:28.413 +03:00 [DBG] Connection id "0HNJ5M18IRO41" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:48:28.983 +03:00 [DBG] Connection id "0HNJ5M18IRO42" accepted.
2026-02-06 21:48:28.985 +03:00 [DBG] Connection id "0HNJ5M18IRO42" started.
2026-02-06 21:48:29.011 +03:00 [DBG] Connection 0HNJ5M18IRO42 established using the following protocol: "Tls13"
2026-02-06 21:48:29.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 21:48:29.123 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 21:48:29.136 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 21:48:29.137 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:48:29.140 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:48:29.168 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 21:48:29.169 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 21:48:29.178 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 21:48:29.179 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 21:48:29.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 133.4352ms
2026-02-06 21:48:29.204 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 21:48:29.210 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.513ms
2026-02-06 21:48:29.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 21:48:29.262 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.1306ms
2026-02-06 21:48:29.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 21:48:29.324 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 21:48:29.325 +03:00 [DBG] Request did not match any endpoints
2026-02-06 21:48:29.326 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 21:48:29.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.3439ms
2026-02-06 21:48:32.908 +03:00 [DBG] Connection id "0HNJ5M18IRO43" accepted.
2026-02-06 21:48:32.908 +03:00 [DBG] Connection id "0HNJ5M18IRO43" received FIN.
2026-02-06 21:48:32.910 +03:00 [DBG] Connection id "0HNJ5M18IRO43" started.
2026-02-06 21:48:32.910 +03:00 [DBG] Connection id "0HNJ5M18IRO44" accepted.
2026-02-06 21:48:32.911 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 21:48:32.912 +03:00 [DBG] Connection id "0HNJ5M18IRO44" started.
2026-02-06 21:48:32.913 +03:00 [DBG] Connection id "0HNJ5M18IRO43" stopped.
2026-02-06 21:48:32.915 +03:00 [DBG] Connection id "0HNJ5M18IRO43" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:48:32.916 +03:00 [DBG] Connection 0HNJ5M18IRO44 established using the following protocol: "Tls13"
2026-02-06 21:48:32.920 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-06 21:48:32.923 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:48:32.925 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:48:32.926 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:48:32.928 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:48:32.928 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:48:32.930 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:48:32.944 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:48:32.946 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:48:32.947 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:48:32.948 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:48:32.949 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:48:32.950 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:48:32.952 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:48:33.010 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 21:48:33.016 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:48:33.024 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:48:33.026 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:48:33.027 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:48:33.028 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:48:33.029 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:48:33.033 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:48:33.034 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:48:33.035 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:48:33.037 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:48:33.038 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:48:33.039 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:48:33.040 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:48:33.054 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 21:48:33.060 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 21:48:33.351 +03:00 [INF] Received HTTP response headers after 289.1521ms - 200
2026-02-06 21:48:33.353 +03:00 [INF] End processing HTTP request after 299.8996ms - 200
2026-02-06 21:48:33.362 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 21:48:33.363 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 21:48:33.663 +03:00 [INF] Received HTTP response headers after 298.7019ms - 400
2026-02-06 21:48:33.664 +03:00 [INF] End processing HTTP request after 301.7765ms - 400
2026-02-06 21:48:33.666 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05. Body: {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 21:48:33.741 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 787.8749ms
2026-02-06 21:48:33.743 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:48:33.774 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 66
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 21:48:33.789 +03:00 [DBG] Connection id "0HNJ5M18IRO44" completed keep alive response.
2026-02-06 21:48:33.791 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json 871.8455ms
2026-02-06 21:48:38.901 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 21:48:38.904 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 21:48:38.904 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 21:48:38.905 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:48:38.906 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:48:38.906 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 21:48:38.907 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:48:38.908 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 21:48:38.909 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 21:48:38.910 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 21:48:38.911 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 21:48:38.912 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 21:48:38.913 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 21:48:38.914 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:48:38.919 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 21:48:38.920 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 21:48:38.921 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 21:48:38.922 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:48:38.922 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 21:48:38.923 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 21:48:38.924 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 21:48:38.925 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:48:38.926 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 21:48:38.929 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:48:38.930 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:48:38.931 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 21:48:38.932 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 21:48:38.933 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 21:48:38.934 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 21:48:38.936 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 21:48:38.938 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 21:48:38.939 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 21:48:38.941 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 21:48:38.942 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 21:48:38.949 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 35.0438ms
2026-02-06 21:48:38.950 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 21:48:38.951 +03:00 [DBG] Connection id "0HNJ5M18IRO44" completed keep alive response.
2026-02-06 21:48:38.952 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 50.324ms
2026-02-06 21:50:33.048 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-06 21:50:43.054 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:50:43.056 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0223ms - processed: 0 items - remaining: 1 items
2026-02-06 21:50:53.070 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:50:53.071 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:03.087 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:51:03.088 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:13.095 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:51:13.096 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:23.107 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:51:23.108 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:33.118 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:51:33.119 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:43.129 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:51:43.131 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:53.143 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:51:53.144 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 21:51:57.603 +03:00 [DBG] Connection id "0HNJ5M18IRO42" received FIN.
2026-02-06 21:51:57.610 +03:00 [DBG] The connection queue processing loop for 0HNJ5M18IRO42 completed.
2026-02-06 21:51:57.611 +03:00 [DBG] Connection id "0HNJ5M18IRO42" is closed. The last processed stream ID was 7.
2026-02-06 21:51:57.611 +03:00 [DBG] Connection id "0HNJ5M18IRO42" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 21:51:57.614 +03:00 [DBG] Connection id "0HNJ5M18IRO42" stopped.
2026-02-06 21:52:03.150 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:52:03.151 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-06 21:52:13.155 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:52:13.156 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:52:23.165 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:52:23.166 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-06 21:52:33.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:52:33.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2026-02-06 21:52:43.179 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:52:43.181 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6176ms - processed: 0 items - remaining: 1 items
2026-02-06 21:52:53.188 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:52:53.189 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-06 21:53:03.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:53:03.205 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:53:13.211 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:53:13.212 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-06 21:53:23.216 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:53:23.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-06 21:53:33.223 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:53:33.223 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:53:43.231 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:53:43.232 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-06 21:53:53.242 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:53:53.243 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-06 21:54:03.249 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:54:03.250 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0085ms - processed: 0 items - remaining: 1 items
2026-02-06 21:54:13.260 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:54:13.261 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-06 21:54:23.271 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:54:23.272 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-06 21:54:33.283 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:54:33.284 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:54:43.298 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:54:43.299 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-06 21:54:53.315 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:54:53.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-06 21:55:03.331 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:55:03.332 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-06 21:55:13.334 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-06 21:55:13.335 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4658ms - processed: 0 items - remaining: 1 items
2026-02-06 22:07:03.932 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 22:07:03.995 +03:00 [DBG] Hosting starting
2026-02-06 22:07:04.097 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 22:07:04.098 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 22:07:04.099 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 22:07:04.100 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 22:07:04.100 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 22:07:04.101 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 22:07:04.126 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 22:07:04.127 +03:00 [INF] Hosting environment: Development
2026-02-06 22:07:04.128 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 22:07:04.128 +03:00 [DBG] Hosting started
2026-02-06 22:07:04.227 +03:00 [DBG] Connection id "0HNJ5MBL4DASS" accepted.
2026-02-06 22:07:04.227 +03:00 [DBG] Connection id "0HNJ5MBL4DASR" accepted.
2026-02-06 22:07:04.228 +03:00 [DBG] Connection id "0HNJ5MBL4DASS" started.
2026-02-06 22:07:04.229 +03:00 [DBG] Connection id "0HNJ5MBL4DASR" started.
2026-02-06 22:07:04.246 +03:00 [DBG] Connection id "0HNJ5MBL4DASS" received FIN.
2026-02-06 22:07:04.246 +03:00 [DBG] Connection id "0HNJ5MBL4DASR" received FIN.
2026-02-06 22:07:04.255 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 22:07:04.255 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 22:07:04.290 +03:00 [DBG] Connection id "0HNJ5MBL4DASS" stopped.
2026-02-06 22:07:04.290 +03:00 [DBG] Connection id "0HNJ5MBL4DASR" stopped.
2026-02-06 22:07:04.293 +03:00 [DBG] Connection id "0HNJ5MBL4DASS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 22:07:04.293 +03:00 [DBG] Connection id "0HNJ5MBL4DASR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 22:07:04.390 +03:00 [DBG] Connection id "0HNJ5MBL4DAST" accepted.
2026-02-06 22:07:04.392 +03:00 [DBG] Connection id "0HNJ5MBL4DAST" started.
2026-02-06 22:07:04.418 +03:00 [DBG] Connection 0HNJ5MBL4DAST established using the following protocol: "Tls13"
2026-02-06 22:07:04.450 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 22:07:04.516 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 22:07:04.528 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 22:07:04.530 +03:00 [DBG] Request did not match any endpoints
2026-02-06 22:07:04.534 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 22:07:04.566 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 22:07:04.567 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 22:07:04.577 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 22:07:04.578 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 22:07:04.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 134.1888ms
2026-02-06 22:07:04.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 22:07:04.612 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 10.9983ms
2026-02-06 22:07:04.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 22:07:04.664 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.2904ms
2026-02-06 22:07:04.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 22:07:04.720 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 22:07:04.721 +03:00 [DBG] Request did not match any endpoints
2026-02-06 22:07:04.722 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 22:07:04.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.5227ms
2026-02-06 22:07:07.686 +03:00 [DBG] Connection id "0HNJ5MBL4DASU" received FIN.
2026-02-06 22:07:07.687 +03:00 [DBG] Connection id "0HNJ5MBL4DASU" accepted.
2026-02-06 22:07:07.688 +03:00 [DBG] Connection id "0HNJ5MBL4DASU" started.
2026-02-06 22:07:07.688 +03:00 [DBG] Connection id "0HNJ5MBL4DASV" accepted.
2026-02-06 22:07:07.689 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 22:07:07.689 +03:00 [DBG] Connection id "0HNJ5MBL4DASV" started.
2026-02-06 22:07:07.691 +03:00 [DBG] Connection id "0HNJ5MBL4DASU" stopped.
2026-02-06 22:07:07.693 +03:00 [DBG] Connection id "0HNJ5MBL4DASU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 22:07:07.694 +03:00 [DBG] Connection 0HNJ5MBL4DASV established using the following protocol: "Tls13"
2026-02-06 22:07:07.698 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-06 22:07:07.701 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 22:07:07.703 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 22:07:07.705 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:07.706 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 22:07:07.707 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 22:07:07.709 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:07.721 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 22:07:07.723 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 22:07:07.724 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 22:07:07.725 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 22:07:07.726 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 22:07:07.727 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 22:07:07.729 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 22:07:07.788 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 22:07:07.793 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 22:07:07.801 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 22:07:07.803 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 22:07:07.804 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 22:07:07.805 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 22:07:07.805 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 22:07:07.809 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 22:07:07.810 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 22:07:07.811 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 22:07:07.813 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:07.814 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:07.815 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 22:07:07.816 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:07.830 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 22:07:07.835 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 22:07:08.142 +03:00 [INF] Received HTTP response headers after 305.0449ms - 200
2026-02-06 22:07:08.145 +03:00 [INF] End processing HTTP request after 315.7651ms - 200
2026-02-06 22:07:08.154 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 22:07:08.155 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 22:07:08.436 +03:00 [INF] Received HTTP response headers after 279.9049ms - 400
2026-02-06 22:07:08.437 +03:00 [INF] End processing HTTP request after 283.2893ms - 400
2026-02-06 22:07:08.439 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05. Body: {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 22:07:08.513 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 783.7036ms
2026-02-06 22:07:08.515 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:08.543 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 66
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 22:07:08.558 +03:00 [DBG] Connection id "0HNJ5MBL4DASV" completed keep alive response.
2026-02-06 22:07:08.559 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json; charset=utf-8 861.7251ms
2026-02-06 22:07:11.561 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 22:07:11.563 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 22:07:11.564 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 22:07:11.565 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:11.566 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 22:07:11.567 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 22:07:11.568 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:11.568 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 22:07:11.570 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 22:07:11.571 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 22:07:11.572 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 22:07:11.573 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 22:07:11.574 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 22:07:11.575 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 22:07:11.581 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 22:07:11.582 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 22:07:11.583 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 22:07:11.584 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 22:07:11.585 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 22:07:11.586 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 22:07:11.587 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 22:07:11.588 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 22:07:11.588 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 22:07:11.591 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:11.592 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:11.592 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 22:07:11.593 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:11.594 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 22:07:11.596 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 22:07:11.598 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 22:07:11.600 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 22:07:11.601 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 22:07:11.603 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 22:07:11.604 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 22:07:11.613 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 37.1204ms
2026-02-06 22:07:11.613 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:11.614 +03:00 [DBG] Connection id "0HNJ5MBL4DASV" completed keep alive response.
2026-02-06 22:07:11.615 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 54.6293ms
2026-02-06 22:07:15.134 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-06 22:07:15.135 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-06 22:07:15.136 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-06 22:07:15.137 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:15.138 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 22:07:15.138 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 22:07:15.139 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:15.140 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 22:07:15.141 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 22:07:15.142 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 22:07:15.143 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 22:07:15.144 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 22:07:15.145 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 22:07:15.146 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 22:07:15.150 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 22:07:15.151 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 22:07:15.152 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 22:07:15.153 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 22:07:15.153 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 22:07:15.154 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 22:07:15.155 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 22:07:15.155 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 22:07:15.156 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 22:07:15.157 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:15.158 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:15.158 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 22:07:15.159 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 22:07:15.160 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 22:07:15.161 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 22:07:15.225 +03:00 [INF] Received HTTP response headers after 62.9843ms - 200
2026-02-06 22:07:15.225 +03:00 [INF] End processing HTTP request after 65.1163ms - 200
2026-02-06 22:07:15.227 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-06 22:07:15.265 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 119.7789ms
2026-02-06 22:07:15.267 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 22:07:15.286 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 64
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 22:07:15.289 +03:00 [DBG] Connection id "0HNJ5MBL4DASV" completed keep alive response.
2026-02-06 22:07:15.290 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 156.5148ms
2026-02-06 23:05:17.703 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 23:05:17.775 +03:00 [DBG] Hosting starting
2026-02-06 23:05:17.944 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 23:05:17.945 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 23:05:17.945 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 23:05:17.946 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 23:05:17.946 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 23:05:17.947 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 23:05:17.959 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ9" accepted.
2026-02-06 23:05:17.959 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ8" accepted.
2026-02-06 23:05:17.960 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ9" started.
2026-02-06 23:05:17.960 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ8" started.
2026-02-06 23:05:17.970 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ8" received FIN.
2026-02-06 23:05:17.970 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ9" received FIN.
2026-02-06 23:05:17.981 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:05:17.982 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 23:05:17.981 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:05:18.000 +03:00 [INF] Hosting environment: Development
2026-02-06 23:05:18.002 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 23:05:18.002 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ9" stopped.
2026-02-06 23:05:18.002 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ8" stopped.
2026-02-06 23:05:18.003 +03:00 [DBG] Hosting started
2026-02-06 23:05:18.006 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:05:18.006 +03:00 [DBG] Connection id "0HNJ5NC6B7HQ8" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:05:18.118 +03:00 [DBG] Connection id "0HNJ5NC6B7HQA" accepted.
2026-02-06 23:05:18.122 +03:00 [DBG] Connection id "0HNJ5NC6B7HQA" started.
2026-02-06 23:05:18.159 +03:00 [DBG] Connection 0HNJ5NC6B7HQA established using the following protocol: "Tls13"
2026-02-06 23:05:18.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 23:05:18.266 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 23:05:18.279 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 23:05:18.283 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:05:18.287 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:05:18.325 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 23:05:18.326 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 23:05:18.338 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 23:05:18.339 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 23:05:18.341 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 141.4302ms
2026-02-06 23:05:18.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 23:05:18.382 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.721ms
2026-02-06 23:05:18.407 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 23:05:18.432 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.8924ms
2026-02-06 23:05:18.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 23:05:18.587 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 23:05:18.588 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:05:18.589 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:05:18.595 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.5056ms
2026-02-06 23:05:31.100 +03:00 [DBG] Connection id "0HNJ5NC6B7HQB" accepted.
2026-02-06 23:05:31.100 +03:00 [DBG] Connection id "0HNJ5NC6B7HQB" received FIN.
2026-02-06 23:05:31.101 +03:00 [DBG] Connection id "0HNJ5NC6B7HQB" started.
2026-02-06 23:05:31.102 +03:00 [DBG] Connection id "0HNJ5NC6B7HQC" accepted.
2026-02-06 23:05:31.103 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:05:31.103 +03:00 [DBG] Connection id "0HNJ5NC6B7HQC" started.
2026-02-06 23:05:31.105 +03:00 [DBG] Connection id "0HNJ5NC6B7HQB" stopped.
2026-02-06 23:05:31.106 +03:00 [DBG] Connection id "0HNJ5NC6B7HQB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:05:31.108 +03:00 [DBG] Connection 0HNJ5NC6B7HQC established using the following protocol: "Tls13"
2026-02-06 23:05:31.111 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-05 - null null
2026-02-06 23:05:31.113 +03:00 [DBG] No candidates found for the request path '/api/weather/'
2026-02-06 23:05:31.114 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:05:31.115 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:05:31.116 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:05:31.122 +03:00 [DBG] Connection id "0HNJ5NC6B7HQC" completed keep alive response.
2026-02-06 23:05:31.122 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-05 - 404 0 null 11.5235ms
2026-02-06 23:05:31.125 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/api/weather/, Response status code: 404
2026-02-06 23:05:53.852 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/ ?date=2026-02-05 - null null
2026-02-06 23:05:53.855 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ '
2026-02-06 23:05:53.857 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ '
2026-02-06 23:05:53.858 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:05:53.859 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:05:53.860 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:05:53.861 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:05:53.875 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:05:53.877 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:05:53.878 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:05:53.880 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:05:53.881 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:05:53.882 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:05:53.884 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:05:53.941 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 23:05:53.947 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:05:53.952 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:05:53.953 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:05:53.954 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:05:53.955 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:05:53.956 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:05:53.960 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:05:53.961 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:05:53.962 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:05:53.964 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:05:53.965 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:05:53.965 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:05:53.966 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:05:53.968 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:05:53.968 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:05:53.970 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:05:53.972 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:05:53.973 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:05:53.975 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:05:53.975 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:05:53.986 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 102.2202ms
2026-02-06 23:05:53.988 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:05:53.989 +03:00 [DBG] Connection id "0HNJ5NC6B7HQC" completed keep alive response.
2026-02-06 23:05:53.991 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/ ?date=2026-02-05 - 400 null application/problem+json; charset=utf-8 138.7505ms
2026-02-06 23:08:03.265 +03:00 [DBG] Connection id "0HNJ5NC6B7HQD" received FIN.
2026-02-06 23:08:03.269 +03:00 [DBG] Connection id "0HNJ5NC6B7HQD" accepted.
2026-02-06 23:08:03.269 +03:00 [DBG] Connection id "0HNJ5NC6B7HQD" started.
2026-02-06 23:08:03.270 +03:00 [DBG] Connection id "0HNJ5NC6B7HQE" accepted.
2026-02-06 23:08:03.273 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:08:03.273 +03:00 [DBG] Connection id "0HNJ5NC6B7HQE" started.
2026-02-06 23:08:03.275 +03:00 [DBG] Connection id "0HNJ5NC6B7HQD" stopped.
2026-02-06 23:08:03.276 +03:00 [DBG] Connection id "0HNJ5NC6B7HQD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:08:03.278 +03:00 [DBG] Connection 0HNJ5NC6B7HQE established using the following protocol: "Tls13"
2026-02-06 23:08:03.279 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-05 - null null
2026-02-06 23:08:03.280 +03:00 [DBG] No candidates found for the request path '/api/weather/'
2026-02-06 23:08:03.281 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:08:03.281 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:08:03.282 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:08:03.283 +03:00 [DBG] Connection id "0HNJ5NC6B7HQE" completed keep alive response.
2026-02-06 23:08:03.283 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-05 - 404 0 null 4.6268ms
2026-02-06 23:08:03.285 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/api/weather/, Response status code: 404
2026-02-06 23:29:19.318 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 23:29:19.396 +03:00 [DBG] Hosting starting
2026-02-06 23:29:19.509 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 23:29:19.510 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 23:29:19.511 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 23:29:19.512 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 23:29:19.513 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 23:29:19.513 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 23:29:19.543 +03:00 [DBG] Connection id "0HNJ5NPJV7U44" accepted.
2026-02-06 23:29:19.543 +03:00 [DBG] Connection id "0HNJ5NPJV7U43" accepted.
2026-02-06 23:29:19.544 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 23:29:19.545 +03:00 [DBG] Connection id "0HNJ5NPJV7U44" started.
2026-02-06 23:29:19.546 +03:00 [DBG] Connection id "0HNJ5NPJV7U43" started.
2026-02-06 23:29:19.547 +03:00 [INF] Hosting environment: Development
2026-02-06 23:29:19.550 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 23:29:19.550 +03:00 [DBG] Hosting started
2026-02-06 23:29:19.557 +03:00 [DBG] Connection id "0HNJ5NPJV7U44" received FIN.
2026-02-06 23:29:19.569 +03:00 [DBG] Connection id "0HNJ5NPJV7U43" received FIN.
2026-02-06 23:29:19.581 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:29:19.581 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:29:19.611 +03:00 [DBG] Connection id "0HNJ5NPJV7U43" stopped.
2026-02-06 23:29:19.611 +03:00 [DBG] Connection id "0HNJ5NPJV7U44" stopped.
2026-02-06 23:29:19.615 +03:00 [DBG] Connection id "0HNJ5NPJV7U44" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:29:19.615 +03:00 [DBG] Connection id "0HNJ5NPJV7U43" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:29:19.699 +03:00 [DBG] Connection id "0HNJ5NPJV7U45" accepted.
2026-02-06 23:29:19.701 +03:00 [DBG] Connection id "0HNJ5NPJV7U45" started.
2026-02-06 23:29:19.735 +03:00 [DBG] Connection 0HNJ5NPJV7U45 established using the following protocol: "Tls13"
2026-02-06 23:29:19.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 23:29:19.821 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 23:29:19.831 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 23:29:19.833 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:29:19.835 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:29:19.866 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 23:29:19.867 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 23:29:19.876 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 23:29:19.877 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 23:29:19.879 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 117.1058ms
2026-02-06 23:29:19.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 23:29:19.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.97ms
2026-02-06 23:29:19.934 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 23:29:19.968 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.2072ms
2026-02-06 23:29:20.062 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 23:29:20.068 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 23:29:20.069 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:29:20.070 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:29:20.076 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.4949ms
2026-02-06 23:29:23.801 +03:00 [DBG] Connection id "0HNJ5NPJV7U46" received FIN.
2026-02-06 23:29:23.801 +03:00 [DBG] Connection id "0HNJ5NPJV7U46" accepted.
2026-02-06 23:29:23.802 +03:00 [DBG] Connection id "0HNJ5NPJV7U46" started.
2026-02-06 23:29:23.803 +03:00 [DBG] Connection id "0HNJ5NPJV7U47" accepted.
2026-02-06 23:29:23.804 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:29:23.804 +03:00 [DBG] Connection id "0HNJ5NPJV7U47" started.
2026-02-06 23:29:23.805 +03:00 [DBG] Connection id "0HNJ5NPJV7U46" stopped.
2026-02-06 23:29:23.806 +03:00 [DBG] Connection id "0HNJ5NPJV7U46" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:29:23.808 +03:00 [DBG] Connection 0HNJ5NPJV7U47 established using the following protocol: "Tls13"
2026-02-06 23:29:23.811 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-05 - null null
2026-02-06 23:29:23.813 +03:00 [DBG] No candidates found for the request path '/api/weather/'
2026-02-06 23:29:23.813 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:29:23.814 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:29:23.815 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:29:23.822 +03:00 [DBG] Connection id "0HNJ5NPJV7U47" completed keep alive response.
2026-02-06 23:29:23.823 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-05 - 404 0 null 11.6902ms
2026-02-06 23:29:23.825 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/api/weather/, Response status code: 404
2026-02-06 23:29:28.747 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/ ?date=2026-02-05 - null null
2026-02-06 23:29:28.750 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ '
2026-02-06 23:29:28.752 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ '
2026-02-06 23:29:28.753 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:28.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:29:28.755 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:29:28.756 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:28.768 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:29:28.770 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:29:28.771 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:29:28.772 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:29:28.773 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:29:28.773 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:29:28.775 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:29:28.840 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 23:29:28.845 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:29:28.850 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:29:28.851 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:29:28.852 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:29:28.853 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:29:28.854 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:29:28.857 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:29:28.859 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:29:28.860 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:29:28.863 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:28.864 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:28.865 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:29:28.866 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:28.867 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:29:28.869 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:29:28.870 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:29:28.872 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:29:28.873 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:29:28.875 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:29:28.876 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:29:28.887 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 111.5147ms
2026-02-06 23:29:28.888 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:28.889 +03:00 [DBG] Connection id "0HNJ5NPJV7U47" completed keep alive response.
2026-02-06 23:29:28.890 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/ ?date=2026-02-05 - 400 null application/problem+json; charset=utf-8 143.716ms
2026-02-06 23:29:35.572 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 23:29:35.574 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:29:35.575 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:29:35.576 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:35.577 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:29:35.578 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:29:35.578 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:35.579 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:29:35.580 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:29:35.581 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:29:35.582 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:29:35.583 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:29:35.584 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:29:35.585 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:29:35.589 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:29:35.591 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:29:35.592 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:29:35.593 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:29:35.594 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:29:35.595 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:29:35.596 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:29:35.596 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:29:35.597 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:29:35.600 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:35.601 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:35.602 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:29:35.603 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:35.603 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:29:35.604 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:29:35.605 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:29:35.607 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:29:35.608 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:29:35.609 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:29:35.610 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:29:35.611 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 26.5044ms
2026-02-06 23:29:35.612 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:35.613 +03:00 [DBG] Connection id "0HNJ5NPJV7U47" completed keep alive response.
2026-02-06 23:29:35.614 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 41.2665ms
2026-02-06 23:29:37.810 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 23:29:37.812 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:29:37.813 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:29:37.814 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:37.814 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:29:37.815 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:29:37.815 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:37.816 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:29:37.817 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:29:37.818 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:29:37.819 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:29:37.820 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:29:37.821 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:29:37.822 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:29:37.826 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:29:37.827 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:29:37.828 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:29:37.829 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:29:37.830 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:29:37.831 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:29:37.831 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:29:37.832 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:29:37.833 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:29:37.834 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:37.835 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:37.836 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:29:37.836 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:29:37.837 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:29:37.838 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:29:37.838 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:29:37.840 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:29:37.840 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:29:37.841 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:29:37.842 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:29:37.843 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 21.3211ms
2026-02-06 23:29:37.844 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:29:37.845 +03:00 [DBG] Connection id "0HNJ5NPJV7U47" completed keep alive response.
2026-02-06 23:29:37.846 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 35.978ms
2026-02-06 23:31:50.494 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-06 23:31:50.559 +03:00 [DBG] Hosting starting
2026-02-06 23:31:50.659 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-06 23:31:50.660 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-06 23:31:50.661 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-06 23:31:50.661 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-06 23:31:50.661 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-06 23:31:50.662 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-06 23:31:50.682 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-06 23:31:50.683 +03:00 [INF] Hosting environment: Development
2026-02-06 23:31:50.683 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-06 23:31:50.684 +03:00 [DBG] Hosting started
2026-02-06 23:31:50.722 +03:00 [DBG] Connection id "0HNJ5NR110B74" received FIN.
2026-02-06 23:31:50.728 +03:00 [DBG] Connection id "0HNJ5NR110B74" accepted.
2026-02-06 23:31:50.729 +03:00 [DBG] Connection id "0HNJ5NR110B74" started.
2026-02-06 23:31:50.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:31:50.754 +03:00 [DBG] Connection id "0HNJ5NR110B74" stopped.
2026-02-06 23:31:50.757 +03:00 [DBG] Connection id "0HNJ5NR110B74" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:31:51.073 +03:00 [DBG] Connection id "0HNJ5NR110B75" accepted.
2026-02-06 23:31:51.074 +03:00 [DBG] Connection id "0HNJ5NR110B75" started.
2026-02-06 23:31:51.100 +03:00 [DBG] Connection 0HNJ5NR110B75 established using the following protocol: "Tls13"
2026-02-06 23:31:51.131 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-06 23:31:51.186 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-06 23:31:51.199 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-06 23:31:51.200 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:31:51.204 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:31:51.253 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-06 23:31:51.255 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-06 23:31:51.265 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-06 23:31:51.266 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-06 23:31:51.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 140.3068ms
2026-02-06 23:31:51.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-06 23:31:51.302 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 11.6858ms
2026-02-06 23:31:51.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-06 23:31:51.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.1119ms
2026-02-06 23:31:51.411 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-06 23:31:51.413 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-06 23:31:51.414 +03:00 [DBG] Request did not match any endpoints
2026-02-06 23:31:51.415 +03:00 [DBG] The request path  does not match the path filter
2026-02-06 23:31:51.420 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.3972ms
2026-02-06 23:32:00.662 +03:00 [DBG] Connection id "0HNJ5NR110B76" accepted.
2026-02-06 23:32:00.662 +03:00 [DBG] Connection id "0HNJ5NR110B76" received FIN.
2026-02-06 23:32:00.663 +03:00 [DBG] Connection id "0HNJ5NR110B76" started.
2026-02-06 23:32:00.663 +03:00 [DBG] Connection id "0HNJ5NR110B77" accepted.
2026-02-06 23:32:00.665 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-06 23:32:00.665 +03:00 [DBG] Connection id "0HNJ5NR110B77" started.
2026-02-06 23:32:00.666 +03:00 [DBG] Connection id "0HNJ5NR110B76" stopped.
2026-02-06 23:32:00.668 +03:00 [DBG] Connection id "0HNJ5NR110B76" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-06 23:32:00.669 +03:00 [DBG] Connection 0HNJ5NR110B77 established using the following protocol: "Tls13"
2026-02-06 23:32:00.672 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 23:32:00.675 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:32:00.677 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:32:00.678 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:00.680 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:00.680 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:00.682 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:00.695 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:32:00.697 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:32:00.698 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:32:00.699 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:32:00.701 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:32:00.702 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:32:00.704 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:00.761 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-06 23:32:00.766 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:00.774 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:32:00.776 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:32:00.777 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:00.778 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:00.779 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:32:00.782 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:32:00.784 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:00.785 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:32:00.787 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:00.788 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:00.789 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:00.790 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:00.791 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:32:00.792 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:32:00.794 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:32:00.796 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:32:00.796 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:32:00.798 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:32:00.799 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:32:00.810 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 106.2054ms
2026-02-06 23:32:00.812 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:00.812 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:32:00.814 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 142.0635ms
2026-02-06 23:32:08.228 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 23:32:08.230 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:32:08.230 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:32:08.231 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:08.232 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:08.232 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:08.233 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:08.233 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:32:08.234 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:32:08.235 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:32:08.237 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:32:08.238 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:32:08.239 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:32:08.239 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:08.244 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:08.245 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:32:08.246 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:32:08.247 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:08.248 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:08.248 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:32:08.249 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:32:08.250 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:08.251 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:32:08.252 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:08.253 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:08.254 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:08.255 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:08.257 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:32:08.257 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:32:08.258 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:32:08.260 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:32:08.260 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:32:08.262 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:32:08.263 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:32:08.264 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 24.6198ms
2026-02-06 23:32:08.265 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:08.266 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:32:08.266 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 38.8979ms
2026-02-06 23:32:34.812 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/ ?date=2026-02-05 - null null
2026-02-06 23:32:34.813 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ '
2026-02-06 23:32:34.814 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ '
2026-02-06 23:32:34.815 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:34.816 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:34.816 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:34.817 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:34.817 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:32:34.818 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:32:34.819 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:32:34.820 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:32:34.821 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:32:34.822 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:32:34.823 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:34.826 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:34.827 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:32:34.828 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:32:34.829 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:34.830 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:34.831 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:32:34.832 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:32:34.833 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:34.834 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:32:34.835 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:34.835 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:34.836 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:34.837 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:34.838 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:32:34.839 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:32:34.840 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:32:34.841 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:32:34.842 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:32:34.843 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:32:34.844 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:32:34.845 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 21.9029ms
2026-02-06 23:32:34.846 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:34.846 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:32:34.847 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/ ?date=2026-02-05 - 400 null application/problem+json; charset=utf-8 35.6242ms
2026-02-06 23:32:40.445 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 23:32:40.447 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:32:40.448 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:32:40.449 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:40.450 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:40.451 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:32:40.451 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:40.452 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:32:40.454 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:32:40.455 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:32:40.456 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:32:40.458 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:32:40.459 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:32:40.460 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:40.461 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:32:40.462 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:32:40.463 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:32:40.465 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:40.466 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:32:40.467 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:32:40.467 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:32:40.469 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:40.470 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:32:40.471 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:40.472 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:40.473 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:32:40.474 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:32:40.475 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:32:40.476 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:32:40.477 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:32:40.478 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:32:40.479 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:32:40.481 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:32:40.481 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:32:40.483 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 22.6552ms
2026-02-06 23:32:40.484 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:32:40.484 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:32:40.486 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 40.3977ms
2026-02-06 23:33:01.158 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-06 23:33:01.160 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:33:01.161 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:33:01.161 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:01.162 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:33:01.162 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:33:01.163 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:01.163 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:33:01.164 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:33:01.165 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:33:01.165 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:33:01.167 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:33:01.167 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:33:01.168 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:33:01.169 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:33:01.170 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:33:01.170 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:33:01.171 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:33:01.171 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:33:01.172 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:33:01.173 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:33:01.174 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:33:01.175 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:33:01.176 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:01.177 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:01.178 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:33:01.178 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:01.182 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-06 23:33:01.183 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-06 23:33:01.184 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-06 23:33:01.185 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-06 23:33:01.185 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-06 23:33:01.186 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-06 23:33:01.187 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-06 23:33:01.188 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 19.9708ms
2026-02-06 23:33:01.189 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:01.189 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:33:01.190 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/problem+json; charset=utf-8 32.0975ms
2026-02-06 23:33:14.000 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-06 23:33:14.002 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-06 23:33:14.002 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-06 23:33:14.003 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:14.004 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:33:14.004 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:33:14.005 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:14.005 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:33:14.006 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:33:14.007 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:33:14.008 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:33:14.009 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:33:14.010 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:33:14.011 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:33:14.012 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:33:14.013 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:33:14.013 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:33:14.014 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:33:14.015 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:33:14.016 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:33:14.017 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:33:14.017 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:33:14.018 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:33:14.019 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:14.020 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:14.020 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:33:14.021 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:36.046 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 23:33:36.051 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-06 23:33:36.359 +03:00 [INF] Received HTTP response headers after 305.6767ms - 200
2026-02-06 23:33:36.361 +03:00 [INF] End processing HTTP request after 315.2033ms - 200
2026-02-06 23:33:36.367 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-06 23:33:36.425 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 22414.3247ms
2026-02-06 23:33:36.426 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:36.452 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 65
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 23:33:36.464 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:33:36.465 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 22465.0241ms
2026-02-06 23:33:54.415 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-06 23:33:54.417 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-06 23:33:54.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-06 23:33:54.418 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:54.419 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:33:54.419 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-06 23:33:54.420 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:33:54.421 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-06 23:33:54.421 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-06 23:33:54.422 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-06 23:33:54.423 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-06 23:33:54.424 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-06 23:33:54.425 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-06 23:33:54.426 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:33:54.428 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-06 23:33:54.429 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-06 23:33:54.429 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-06 23:33:54.430 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:33:54.431 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-06 23:33:54.431 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-06 23:33:54.432 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-06 23:33:54.433 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:33:54.433 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' using the name 'date' in request data ...
2026-02-06 23:33:54.434 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:54.435 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:33:54.436 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-06 23:33:54.436 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-06 23:34:03.533 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 23:34:03.534 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-06 23:34:03.599 +03:00 [INF] Received HTTP response headers after 63.9625ms - 200
2026-02-06 23:34:03.600 +03:00 [INF] End processing HTTP request after 66.3414ms - 200
2026-02-06 23:34:03.604 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 23:34:03.604 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-06 23:34:03.890 +03:00 [INF] Received HTTP response headers after 285.0891ms - 400
2026-02-06 23:34:03.891 +03:00 [INF] End processing HTTP request after 287.3301ms - 400
2026-02-06 23:34:03.893 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05. Body: {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-05 to 2026-02-21"}
2026-02-06 23:34:03.951 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 9525.3509ms
2026-02-06 23:34:03.953 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-06 23:34:03.976 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 67
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-06 23:34:03.980 +03:00 [DBG] Connection id "0HNJ5NR110B77" completed keep alive response.
2026-02-06 23:34:03.981 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json; charset=utf-8 9565.7414ms
