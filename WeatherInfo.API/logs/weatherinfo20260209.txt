2026-02-09 11:32:19.347 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-09 11:32:19.515 +03:00 [DBG] Hosting starting
2026-02-09 11:32:19.672 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-09 11:32:19.673 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-09 11:32:19.674 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-09 11:32:19.675 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-09 11:32:19.675 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-09 11:32:19.676 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-09 11:32:19.698 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-09 11:32:19.699 +03:00 [INF] Hosting environment: Development
2026-02-09 11:32:19.700 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-09 11:32:19.700 +03:00 [DBG] Hosting started
2026-02-09 11:32:19.960 +03:00 [DBG] Connection id "0HNJ7MMUOBT6U" received FIN.
2026-02-09 11:32:19.964 +03:00 [DBG] Connection id "0HNJ7MMUOBT6U" accepted.
2026-02-09 11:32:19.965 +03:00 [DBG] Connection id "0HNJ7MMUOBT6U" started.
2026-02-09 11:32:19.975 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 11:32:20.012 +03:00 [DBG] Connection id "0HNJ7MMUOBT6U" stopped.
2026-02-09 11:32:20.015 +03:00 [DBG] Connection id "0HNJ7MMUOBT6U" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 11:32:22.363 +03:00 [DBG] Connection id "0HNJ7MMUOBT6V" accepted.
2026-02-09 11:32:22.364 +03:00 [DBG] Connection id "0HNJ7MMUOBT6V" started.
2026-02-09 11:32:22.396 +03:00 [DBG] Connection 0HNJ7MMUOBT6V established using the following protocol: "Tls13"
2026-02-09 11:32:22.439 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-09 11:32:22.523 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-09 11:32:22.534 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-09 11:32:22.535 +03:00 [DBG] Request did not match any endpoints
2026-02-09 11:32:22.537 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 11:32:22.563 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-09 11:32:22.564 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-09 11:32:22.574 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-09 11:32:22.574 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-09 11:32:22.577 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 140.3902ms
2026-02-09 11:32:22.596 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-09 11:32:22.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.7261ms
2026-02-09 11:32:22.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-09 11:32:22.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.8632ms
2026-02-09 11:32:22.737 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-09 11:32:22.739 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-09 11:32:22.740 +03:00 [DBG] Request did not match any endpoints
2026-02-09 11:32:22.741 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 11:32:22.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.999ms
2026-02-09 11:32:28.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/health/ready - null null
2026-02-09 11:32:28.440 +03:00 [DBG] 1 candidate(s) found for the request path '/health/ready'
2026-02-09 11:32:28.441 +03:00 [DBG] Request matched endpoint 'Health checks'
2026-02-09 11:32:28.443 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 11:32:28.444 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 11:32:28.446 +03:00 [INF] Executing endpoint 'Health checks'
2026-02-09 11:32:28.448 +03:00 [DBG] Running health checks
2026-02-09 11:32:28.452 +03:00 [DBG] Running health check memory-cache
2026-02-09 11:32:28.455 +03:00 [DBG] Health check memory-cache with status "Healthy" completed after 1.5913ms with message 'MemoryCache is available'
2026-02-09 11:32:28.556 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 11:32:28.562 +03:00 [DBG] Running health check sqlite-db
2026-02-09 11:32:28.842 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 11:32:28.848 +03:00 [DBG] Creating DbConnection.
2026-02-09 11:32:28.854 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-09 11:32:28.856 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 11:32:28.869 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 11:32:28.872 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 11:32:28.875 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 11:32:28.876 +03:00 [DBG] Health check sqlite-db with status "Healthy" completed after 314.5931ms with message 'null'
2026-02-09 11:32:28.878 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 11:32:28.883 +03:00 [DBG] Health check processing with combined status "Healthy" completed after 432.9818ms
2026-02-09 11:32:28.885 +03:00 [INF] Executed endpoint 'Health checks'
2026-02-09 11:32:28.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/health/ready - 200 null text/plain 454.083ms
2026-02-09 11:32:28.915 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/favicon.ico - null null
2026-02-09 11:32:28.918 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2026-02-09 11:32:28.919 +03:00 [DBG] Request did not match any endpoints
2026-02-09 11:32:28.919 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 11:32:28.921 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 11:32:28.922 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/favicon.ico - 404 0 null 7.2025ms
2026-02-09 11:32:28.925 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/favicon.ico, Response status code: 404
2026-02-09 11:33:29.094 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-09 11:33:29.168 +03:00 [DBG] Hosting starting
2026-02-09 11:33:29.265 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-09 11:33:29.269 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-09 11:33:29.269 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-09 11:33:29.270 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-09 11:33:29.270 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-09 11:33:29.271 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-09 11:33:29.299 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-09 11:33:29.300 +03:00 [INF] Hosting environment: Development
2026-02-09 11:33:29.300 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-09 11:33:29.301 +03:00 [DBG] Hosting started
2026-02-09 11:33:29.604 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8M" accepted.
2026-02-09 11:33:29.606 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8M" started.
2026-02-09 11:33:29.614 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8N" accepted.
2026-02-09 11:33:29.615 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8N" started.
2026-02-09 11:33:29.631 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8N" received FIN.
2026-02-09 11:33:29.631 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8M" received FIN.
2026-02-09 11:33:29.636 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 11:33:29.636 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 11:33:29.653 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8M" stopped.
2026-02-09 11:33:29.653 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8N" stopped.
2026-02-09 11:33:29.655 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8N" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 11:33:29.655 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8M" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 11:33:29.722 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8O" accepted.
2026-02-09 11:33:29.724 +03:00 [DBG] Connection id "0HNJ7MNJGHJ8O" started.
2026-02-09 11:33:29.747 +03:00 [DBG] Connection 0HNJ7MNJGHJ8O established using the following protocol: "Tls13"
2026-02-09 11:33:29.774 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-09 11:33:29.827 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-09 11:33:29.836 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-09 11:33:29.836 +03:00 [DBG] Request did not match any endpoints
2026-02-09 11:33:29.839 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 11:33:29.863 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-09 11:33:29.865 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-09 11:33:29.873 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-09 11:33:29.873 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-09 11:33:29.875 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 104.0872ms
2026-02-09 11:33:29.893 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-09 11:33:29.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.3372ms
2026-02-09 11:33:29.921 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-09 11:33:29.943 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.8341ms
2026-02-09 11:33:29.991 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-09 11:33:29.993 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-09 11:33:29.994 +03:00 [DBG] Request did not match any endpoints
2026-02-09 11:33:29.995 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 11:33:30.000 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.1377ms
2026-02-09 11:33:36.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/health/ready - null null
2026-02-09 11:33:36.603 +03:00 [DBG] 1 candidate(s) found for the request path '/health/ready'
2026-02-09 11:33:36.604 +03:00 [DBG] Request matched endpoint 'Health checks'
2026-02-09 11:33:36.605 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 11:33:36.606 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 11:33:36.608 +03:00 [INF] Executing endpoint 'Health checks'
2026-02-09 11:33:36.610 +03:00 [DBG] Running health checks
2026-02-09 11:33:36.614 +03:00 [DBG] Running health check memory-cache
2026-02-09 11:33:36.617 +03:00 [DBG] Health check memory-cache with status "Healthy" completed after 1.6657ms with message 'MemoryCache is available'
2026-02-09 11:33:36.666 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 11:33:36.673 +03:00 [DBG] Running health check sqlite-db
2026-02-09 11:33:36.892 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 11:33:36.898 +03:00 [DBG] Creating DbConnection.
2026-02-09 11:33:36.903 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-09 11:33:36.905 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 11:33:36.910 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 11:33:36.913 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 11:33:36.916 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 11:33:36.917 +03:00 [DBG] Health check sqlite-db with status "Healthy" completed after 243.4951ms with message 'null'
2026-02-09 11:33:36.919 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 11:33:36.923 +03:00 [DBG] Health check processing with combined status "Healthy" completed after 311.6055ms
2026-02-09 11:33:36.925 +03:00 [INF] Executed endpoint 'Health checks'
2026-02-09 11:33:36.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/health/ready - 200 null text/plain 331.506ms
2026-02-09 11:33:50.748 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/health/live - null null
2026-02-09 11:33:50.752 +03:00 [DBG] 1 candidate(s) found for the request path '/health/live'
2026-02-09 11:33:50.753 +03:00 [DBG] Request matched endpoint 'Health checks'
2026-02-09 11:33:50.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 11:33:50.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 11:33:50.755 +03:00 [INF] Executing endpoint 'Health checks'
2026-02-09 11:33:50.755 +03:00 [DBG] Running health checks
2026-02-09 11:33:50.756 +03:00 [DBG] Running health check self
2026-02-09 11:33:50.757 +03:00 [DBG] Health check self with status "Healthy" completed after 1.0169ms with message 'Service is running'
2026-02-09 11:33:50.758 +03:00 [DBG] Health check processing with combined status "Healthy" completed after 2.8586ms
2026-02-09 11:33:50.759 +03:00 [INF] Executed endpoint 'Health checks'
2026-02-09 11:33:50.760 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/health/live - 200 null text/plain 12.118ms
2026-02-09 16:12:30.339 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-09 16:12:30.406 +03:00 [DBG] Hosting starting
2026-02-09 16:12:30.519 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-09 16:12:30.520 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-09 16:12:30.520 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-09 16:12:30.521 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-09 16:12:30.521 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-09 16:12:30.522 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-09 16:12:30.543 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-09 16:12:30.544 +03:00 [INF] Hosting environment: Development
2026-02-09 16:12:30.544 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-09 16:12:30.545 +03:00 [DBG] Hosting started
2026-02-09 16:12:30.892 +03:00 [DBG] Connection id "0HNJ7RJGPT35E" accepted.
2026-02-09 16:12:30.893 +03:00 [DBG] Connection id "0HNJ7RJGPT35E" started.
2026-02-09 16:12:30.901 +03:00 [DBG] Connection id "0HNJ7RJGPT35F" accepted.
2026-02-09 16:12:30.902 +03:00 [DBG] Connection id "0HNJ7RJGPT35F" started.
2026-02-09 16:12:30.935 +03:00 [DBG] Connection id "0HNJ7RJGPT35F" received FIN.
2026-02-09 16:12:30.935 +03:00 [DBG] Connection id "0HNJ7RJGPT35E" received FIN.
2026-02-09 16:12:30.940 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 16:12:30.940 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 16:12:30.957 +03:00 [DBG] Connection id "0HNJ7RJGPT35E" stopped.
2026-02-09 16:12:30.957 +03:00 [DBG] Connection id "0HNJ7RJGPT35F" stopped.
2026-02-09 16:12:30.960 +03:00 [DBG] Connection id "0HNJ7RJGPT35F" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 16:12:30.960 +03:00 [DBG] Connection id "0HNJ7RJGPT35E" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 16:12:31.078 +03:00 [DBG] Connection id "0HNJ7RJGPT35G" accepted.
2026-02-09 16:12:31.080 +03:00 [DBG] Connection id "0HNJ7RJGPT35G" started.
2026-02-09 16:12:31.106 +03:00 [DBG] Connection 0HNJ7RJGPT35G established using the following protocol: "Tls13"
2026-02-09 16:12:31.135 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-09 16:12:31.192 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-09 16:12:31.200 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-09 16:12:31.201 +03:00 [DBG] Request did not match any endpoints
2026-02-09 16:12:31.203 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 16:12:31.227 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-09 16:12:31.228 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-09 16:12:31.243 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-09 16:12:31.243 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-09 16:12:31.245 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 113.502ms
2026-02-09 16:12:31.269 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-09 16:12:31.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.0293ms
2026-02-09 16:12:31.294 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-09 16:12:31.318 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.1255ms
2026-02-09 16:12:31.379 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-09 16:12:31.381 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-09 16:12:31.382 +03:00 [DBG] Request did not match any endpoints
2026-02-09 16:12:31.383 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 16:12:31.390 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.8372ms
2026-02-09 16:12:53.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Нижний-Новгород?date=2026-02-09 - null null
2026-02-09 16:12:53.059 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Нижний-Новгород'
2026-02-09 16:12:53.061 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Нижний-Новгород'
2026-02-09 16:12:53.062 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:12:53.063 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:12:53.064 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:12:53.066 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:12:53.080 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:12:53.081 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:12:53.082 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:12:53.083 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:12:53.084 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:12:53.085 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:12:53.087 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:12:53.141 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 16:12:53.147 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:12:53.165 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:12:53.167 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:12:53.168 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:12:53.168 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:12:53.169 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:12:53.172 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:12:53.174 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:12:53.178 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:12:53.179 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:12:53.180 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:12:53.199 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9-%D0%9D%D0%BE%D0%B2%D0%B3%D0%BE%D1%80%D0%BE%D0%B4&count=1&language=ru
2026-02-09 16:12:53.203 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9-%D0%9D%D0%BE%D0%B2%D0%B3%D0%BE%D1%80%D0%BE%D0%B4&count=1&language=ru
2026-02-09 16:12:53.505 +03:00 [INF] Received HTTP response headers after 299.6379ms - 200
2026-02-09 16:12:53.507 +03:00 [INF] End processing HTTP request after 308.9553ms - 200
2026-02-09 16:12:53.514 +03:00 [WRN] City not found in Geocoding API: Нижний-Новгород
2026-02-09 16:12:53.608 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 519.9867ms
2026-02-09 16:12:53.609 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:12:53.640 +03:00 [ERR] HTTP 404 - City 'Нижний-Новгород' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Нижний-Новгород' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 174
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 59
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-09 16:12:53.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Нижний-Новгород?date=2026-02-09 - 404 null application/json; charset=utf-8 601.3533ms
2026-02-09 16:13:08.989 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород?date=2026-02-09 - null null
2026-02-09 16:13:08.995 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Нижний Новгород'
2026-02-09 16:13:08.996 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Нижний Новгород'
2026-02-09 16:13:08.997 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:13:08.998 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:08.999 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:08.999 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:13:09.000 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:13:09.001 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:13:09.002 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:13:09.002 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:13:09.003 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:13:09.004 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:13:09.005 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:09.010 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:09.011 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:13:09.011 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:13:09.012 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:09.013 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:09.014 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:13:09.014 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:13:09.015 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:13:09.016 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:13:09.016 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:13:09.017 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:13:09.018 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9%20%D0%9D%D0%BE%D0%B2%D0%B3%D0%BE%D1%80%D0%BE%D0%B4&count=1&language=ru
2026-02-09 16:13:09.019 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9%20%D0%9D%D0%BE%D0%B2%D0%B3%D0%BE%D1%80%D0%BE%D0%B4&count=1&language=ru
2026-02-09 16:13:09.080 +03:00 [INF] Received HTTP response headers after 60.4355ms - 200
2026-02-09 16:13:09.081 +03:00 [INF] End processing HTTP request after 62.4776ms - 200
2026-02-09 16:13:09.085 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.32867&longitude=44.00205&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 16:13:09.085 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.32867&longitude=44.00205&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 16:13:09.436 +03:00 [INF] Received HTTP response headers after 350.0586ms - 200
2026-02-09 16:13:09.437 +03:00 [INF] End processing HTTP request after 352.1484ms - 200
2026-02-09 16:13:09.658 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:13:09.675 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:09.708 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:09.711 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:09.713 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:09.720 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:13:09.753 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:13:09.759 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-09 16:13:09.761 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:09.768 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:09.772 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:09.776 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-09 16:13:09.778 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-09 16:13:09.783 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:09.800 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:09.808 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:13:09.813 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:09.816 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-09 16:13:09.819 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:09.820 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 16:13:09.826 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:09.827 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:13:09.829 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:13:09.831 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:13:09.831 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:13:09.832 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:13:09.833 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:13:09.834 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 16:13:09.839 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 833.8062ms
2026-02-09 16:13:09.840 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:13:09.841 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:13:09.843 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:09.844 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 16:13:09.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород?date=2026-02-09 - 200 null application/json; charset=utf-8 856.1629ms
2026-02-09 16:13:24.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород?date=2026-02-09 - null null
2026-02-09 16:13:24.217 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Нижний Новгород'
2026-02-09 16:13:24.218 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Нижний Новгород'
2026-02-09 16:13:24.219 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:13:24.219 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:24.220 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:24.220 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:13:24.221 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:13:24.222 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:13:24.223 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:13:24.224 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:13:24.225 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:13:24.226 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:13:24.227 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:24.230 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:24.231 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:13:24.232 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:13:24.233 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:24.233 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:24.234 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:13:24.235 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:13:24.236 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:13:24.236 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:13:24.237 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:13:24.238 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:13:24.266 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:13:24.268 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:24.269 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:24.269 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:24.270 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:24.271 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:13:24.272 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:13:24.272 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:13:24.273 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:24.274 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:24.275 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:24.276 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:13:24.276 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:13:24.277 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:24.278 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:24.280 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:13:24.281 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:24.282 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:13:24.282 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:24.283 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:24.284 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:24.285 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:13:24.286 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:13:24.287 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:13:24.287 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:13:24.288 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:13:24.288 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:13:24.289 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 16:13:24.290 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 63.0223ms
2026-02-09 16:13:24.291 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:13:24.291 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:13:24.292 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:24.292 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:24.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород?date=2026-02-09 - 200 null application/json; charset=utf-8 78.7903ms
2026-02-09 16:13:29.927 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород/week - null null
2026-02-09 16:13:29.929 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Нижний Новгород/week'
2026-02-09 16:13:29.930 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Нижний Новгород/week'
2026-02-09 16:13:29.931 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:13:29.931 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:29.932 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:29.932 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:13:29.935 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:13:29.936 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:13:29.937 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:13:29.937 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:13:29.938 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:13:29.939 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:13:29.940 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:29.940 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:29.941 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:13:29.942 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:13:29.943 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:29.943 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:29.944 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:13:29.945 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:13:29.948 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9%20%D0%9D%D0%BE%D0%B2%D0%B3%D0%BE%D1%80%D0%BE%D0%B4&count=1&language=ru
2026-02-09 16:13:29.948 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9%20%D0%9D%D0%BE%D0%B2%D0%B3%D0%BE%D1%80%D0%BE%D0%B4&count=1&language=ru
2026-02-09 16:13:30.006 +03:00 [INF] Received HTTP response headers after 57.3134ms - 200
2026-02-09 16:13:30.007 +03:00 [INF] End processing HTTP request after 59.8863ms - 200
2026-02-09 16:13:30.009 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.32867&longitude=44.00205&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 16:13:30.009 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.32867&longitude=44.00205&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 16:13:30.239 +03:00 [INF] Received HTTP response headers after 229.1317ms - 200
2026-02-09 16:13:30.240 +03:00 [INF] End processing HTTP request after 231.1735ms - 200
2026-02-09 16:13:30.247 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:13:30.248 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:30.249 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:30.250 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:30.251 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:30.251 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:13:30.252 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:13:30.253 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:13:30.253 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:30.254 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:30.255 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:30.255 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:13:30.256 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:13:30.257 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:30.258 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:30.259 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:13:30.261 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:30.262 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:13:30.263 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:30.263 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:30.264 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:30.265 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:13:30.266 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:13:30.267 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:13:30.268 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:13:30.268 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:13:30.268 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:13:30.269 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 16:13:30.272 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 331.9821ms
2026-02-09 16:13:30.272 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:13:30.273 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:13:30.274 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:30.275 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 16:13:30.276 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород/week - 200 null application/json; charset=utf-8 348.5372ms
2026-02-09 16:13:34.416 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород/week - null null
2026-02-09 16:13:34.417 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Нижний Новгород/week'
2026-02-09 16:13:34.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Нижний Новгород/week'
2026-02-09 16:13:34.419 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:13:34.419 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:34.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:34.420 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:13:34.421 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:13:34.422 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:13:34.423 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:13:34.424 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:13:34.425 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:13:34.426 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:13:34.426 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:34.427 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:34.428 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:13:34.429 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:13:34.429 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:34.430 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:34.431 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:13:34.431 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:13:34.432 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:13:34.433 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:34.434 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:34.435 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:34.435 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:34.436 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:13:34.437 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:13:34.437 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:13:34.438 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:34.438 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:34.439 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:34.440 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:13:34.440 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:13:34.441 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:34.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:34.443 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:13:34.445 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:34.445 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 16:13:34.446 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:34.447 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:34.448 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:34.448 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:13:34.449 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:13:34.450 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:13:34.451 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:13:34.451 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:13:34.451 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:13:34.452 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 16:13:34.453 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 26.338ms
2026-02-09 16:13:34.454 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:13:34.454 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:13:34.455 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:34.455 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:34.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород/week - 200 null application/json; charset=utf-8 40.7314ms
2026-02-09 16:13:41.567 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород/week/chart - null null
2026-02-09 16:13:41.569 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Нижний Новгород/week/chart'
2026-02-09 16:13:41.569 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Нижний Новгород/week/chart'
2026-02-09 16:13:41.570 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:13:41.571 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:41.571 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:41.572 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:13:41.574 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:13:41.575 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:13:41.576 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:13:41.577 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:13:41.578 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:13:41.579 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:13:41.579 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:41.580 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:13:41.581 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:13:41.582 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:13:41.583 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:41.583 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:13:41.584 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:13:41.585 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:13:41.587 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:13:41.588 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:41.589 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:41.590 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:41.590 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:41.591 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:13:41.592 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:13:41.592 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:13:41.593 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:41.593 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:41.594 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:41.595 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:13:41.595 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:13:41.596 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:41.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:41.598 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:13:41.600 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:41.601 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:13:41.601 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:41.602 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:41.603 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:41.604 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:13:41.605 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:41.606 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:41.607 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:41.607 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:13:41.609 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:13:41.610 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:41.610 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:41.611 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:41.611 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:13:41.612 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:13:41.613 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:41.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:13:41.615 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:13:41.617 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:41.618 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:13:41.618 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:41.619 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:41.620 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:13:41.621 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:13:41.621 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:13:41.622 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:13:41.623 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:13:41.623 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:13:41.624 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:13:41.624 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 16:13:41.626 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 46.7834ms
2026-02-09 16:13:41.627 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:13:41.627 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:13:41.628 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:41.629 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:41.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Нижний Новгород/week/chart - 200 null application/json; charset=utf-8 62.6508ms
2026-02-09 16:13:59.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - null null
2026-02-09 16:13:59.355 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-09 16:13:59.356 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-09 16:13:59.357 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 16:13:59.358 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:59.359 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:13:59.359 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 16:13:59.362 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 16:13:59.363 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:13:59.364 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:13:59.365 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:13:59.366 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:13:59.366 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:13:59.367 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:13:59.368 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:13:59.369 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:13:59.369 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:13:59.370 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:13:59.371 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:13:59.371 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:13:59.372 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:13:59.373 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:13:59.374 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:13:59.374 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-09 16:13:59.375 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-09 16:13:59.376 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 16:13:59.377 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 16:13:59.377 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-09 16:13:59.378 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-09 16:13:59.389 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:13:59.407 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-09 16:13:59.506 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 16:13:59.518 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:13:59.519 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:13:59.519 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:59.520 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:59.521 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:13:59.521 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:13:59.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:13:59.522 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 16:13:59.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 16:13:59.526 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:59.527 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 16:13:59.528 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:13:59.528 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:59.529 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:13:59.530 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:13:59.531 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:13:59.531 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:13:59.531 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:13:59.532 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-09 16:13:59.533 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 166.2366ms
2026-02-09 16:13:59.534 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 16:13:59.535 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:13:59.535 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:13:59.536 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:13:59.537 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - 200 null application/json; charset=utf-8 183.3457ms
2026-02-09 16:14:07.509 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - null null
2026-02-09 16:14:07.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-09 16:14:07.512 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-09 16:14:07.513 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:14:07.513 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:14:07.514 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:14:07.514 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:14:07.517 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 16:14:07.518 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:14:07.519 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:14:07.520 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:14:07.521 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:14:07.522 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:14:07.522 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:14:07.523 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:14:07.524 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:14:07.525 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:14:07.525 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:14:07.526 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:14:07.527 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:14:07.527 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:14:07.528 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:14:07.529 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:14:07.529 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-09 16:14:07.530 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-09 16:14:07.531 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 16:14:07.532 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 16:14:07.532 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-09 16:14:07.533 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-09 16:14:07.533 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 16:14:07.534 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-09 16:14:07.535 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:14:07.535 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:14:07.536 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 16:14:07.537 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:14:07.539 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:14:07.541 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-09 16:14:07.545 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-09 16:14:07.548 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:14:07.548 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:14:07.549 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:14:07.549 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:14:07.550 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:14:07.551 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:14:07.551 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:14:07.552 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 16:14:07.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 16:14:07.554 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:14:07.555 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 16:14:07.555 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:14:07.556 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:14:07.557 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-09 16:14:07.561 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 16:14:07.562 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:14:07.563 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:14:07.563 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:14:07.564 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:14:07.564 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:14:07.565 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 16:14:07.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 16:14:07.568 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:14:07.568 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 16:14:07.569 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:14:07.570 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:14:07.571 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:14:07.572 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:14:07.572 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:14:07.572 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:14:07.573 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:14:07.574 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-09 16:14:07.579 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 56.7126ms
2026-02-09 16:14:07.580 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:14:07.580 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:14:07.581 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:14:07.582 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:14:07.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - 200 null application/json; charset=utf-8 73.5292ms
2026-02-09 16:14:53.210 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-09 16:15:03.227 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:15:03.229 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0334ms - processed: 0 items - remaining: 1 items
2026-02-09 16:15:13.234 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:15:13.235 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-09 16:15:23.248 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:15:23.249 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-09 16:15:33.259 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:15:33.260 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-09 16:15:43.270 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:15:43.271 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-09 16:15:53.284 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:15:53.285 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-09 16:16:03.286 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:16:03.287 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2026-02-09 16:16:13.298 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:16:13.299 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-09 16:16:23.313 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:16:23.314 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0066ms - processed: 0 items - remaining: 1 items
2026-02-09 16:16:33.315 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:16:33.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-09 16:16:43.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:16:43.326 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-09 16:16:53.340 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:16:53.341 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-09 16:17:03.353 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:17:03.354 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-09 16:17:13.365 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:17:13.365 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-09 16:17:23.373 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:17:23.374 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-09 16:17:33.377 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:17:33.377 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-09 16:17:43.384 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:17:43.385 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-09 16:17:47.188 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-09 16:17:47.261 +03:00 [DBG] Hosting starting
2026-02-09 16:17:47.367 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-09 16:17:47.368 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-09 16:17:47.368 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-09 16:17:47.368 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-09 16:17:47.369 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-09 16:17:47.370 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-09 16:17:47.391 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-09 16:17:47.392 +03:00 [INF] Hosting environment: Development
2026-02-09 16:17:47.392 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-09 16:17:47.393 +03:00 [DBG] Hosting started
2026-02-09 16:17:47.415 +03:00 [DBG] Connection id "0HNJ7RMF4GDCH" accepted.
2026-02-09 16:17:47.417 +03:00 [DBG] Connection id "0HNJ7RMF4GDCH" started.
2026-02-09 16:17:47.426 +03:00 [DBG] Connection id "0HNJ7RMF4GDCI" accepted.
2026-02-09 16:17:47.427 +03:00 [DBG] Connection id "0HNJ7RMF4GDCI" started.
2026-02-09 16:17:47.457 +03:00 [DBG] Connection id "0HNJ7RMF4GDCH" received FIN.
2026-02-09 16:17:47.457 +03:00 [DBG] Connection id "0HNJ7RMF4GDCI" received FIN.
2026-02-09 16:17:47.462 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 16:17:47.462 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 16:17:47.481 +03:00 [DBG] Connection id "0HNJ7RMF4GDCH" stopped.
2026-02-09 16:17:47.481 +03:00 [DBG] Connection id "0HNJ7RMF4GDCI" stopped.
2026-02-09 16:17:47.483 +03:00 [DBG] Connection id "0HNJ7RMF4GDCI" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 16:17:47.483 +03:00 [DBG] Connection id "0HNJ7RMF4GDCH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 16:17:47.556 +03:00 [DBG] Connection id "0HNJ7RMF4GDCJ" accepted.
2026-02-09 16:17:47.558 +03:00 [DBG] Connection id "0HNJ7RMF4GDCJ" started.
2026-02-09 16:17:47.582 +03:00 [DBG] Connection 0HNJ7RMF4GDCJ established using the following protocol: "Tls13"
2026-02-09 16:17:47.609 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-09 16:17:47.661 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-09 16:17:47.669 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-09 16:17:47.670 +03:00 [DBG] Request did not match any endpoints
2026-02-09 16:17:47.674 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 16:17:47.698 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-09 16:17:47.699 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-09 16:17:47.708 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-09 16:17:47.708 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-09 16:17:47.710 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 103.7135ms
2026-02-09 16:17:47.730 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-09 16:17:47.737 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.9007ms
2026-02-09 16:17:47.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-09 16:17:47.783 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.501ms
2026-02-09 16:17:47.832 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-09 16:17:47.834 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-09 16:17:47.834 +03:00 [DBG] Request did not match any endpoints
2026-02-09 16:17:47.835 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 16:17:47.840 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.4168ms
2026-02-09 16:18:14.008 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону?date=2026-02-09 - null null
2026-02-09 16:18:14.012 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Ростов-на-Дону'
2026-02-09 16:18:14.014 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Ростов-на-Дону'
2026-02-09 16:18:14.016 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:18:14.017 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:14.018 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:14.020 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:18:14.032 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:18:14.034 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:18:14.035 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:18:14.036 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:18:14.037 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:18:14.037 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:18:14.039 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:14.097 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 16:18:14.103 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:14.110 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:18:14.111 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:18:14.113 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:14.114 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:14.115 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:18:14.118 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:18:14.119 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:18:14.123 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:18:14.123 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:18:14.125 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:18:14.135 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A0%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%94%D0%BE%D0%BD%D1%83&count=1&language=ru
2026-02-09 16:18:14.140 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A0%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%94%D0%BE%D0%BD%D1%83&count=1&language=ru
2026-02-09 16:18:14.450 +03:00 [INF] Received HTTP response headers after 307.7351ms - 200
2026-02-09 16:18:14.452 +03:00 [INF] End processing HTTP request after 316.881ms - 200
2026-02-09 16:18:14.461 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=47.23135&longitude=39.72328&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 16:18:14.462 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=47.23135&longitude=39.72328&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 16:18:14.777 +03:00 [INF] Received HTTP response headers after 313.9442ms - 200
2026-02-09 16:18:14.778 +03:00 [INF] End processing HTTP request after 316.7163ms - 200
2026-02-09 16:18:15.006 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:18:15.023 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:15.051 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:15.053 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:15.055 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:15.064 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:18:15.099 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:18:15.104 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-09 16:18:15.106 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:15.114 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:15.119 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:18:15.122 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:18:15.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-09 16:18:15.129 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:15.141 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:15.149 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:18:15.154 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:15.157 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-09 16:18:15.160 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:15.162 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-09 16:18:15.168 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:15.169 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:18:15.172 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:18:15.174 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:18:15.174 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:18:15.175 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:18:15.176 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:18:15.177 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 16:18:15.185 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1145.4878ms
2026-02-09 16:18:15.187 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:18:15.189 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:18:15.191 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:15.192 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 16:18:15.193 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону?date=2026-02-09 - 200 null application/json; charset=utf-8 1187.8901ms
2026-02-09 16:18:24.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону?date=2026-02-09 - null null
2026-02-09 16:18:24.792 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Ростов-на-Дону'
2026-02-09 16:18:24.793 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Ростов-на-Дону'
2026-02-09 16:18:24.794 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:18:24.795 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:24.795 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:24.796 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:18:24.796 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:18:24.797 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:18:24.798 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:18:24.799 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:18:24.800 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:18:24.801 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:18:24.802 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:24.803 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:24.804 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:18:24.805 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:18:24.806 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:24.806 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:24.807 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:18:24.808 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:18:24.808 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:18:24.809 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:18:24.810 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:18:24.810 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:18:24.838 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:18:24.840 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:24.841 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:24.842 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:24.843 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:24.843 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:18:24.844 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:18:24.845 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:18:24.845 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:24.846 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:24.847 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:18:24.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:18:24.848 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:18:24.849 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:24.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:24.852 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:18:24.853 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:24.854 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:18:24.855 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:24.856 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:24.857 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:24.857 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:18:24.858 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:18:24.859 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:18:24.860 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:18:24.860 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:18:24.861 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:18:24.862 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 16:18:24.863 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 61.0123ms
2026-02-09 16:18:24.864 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:18:24.864 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:18:24.866 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:24.867 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 16:18:24.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону?date=2026-02-09 - 200 null application/json; charset=utf-8 78.8392ms
2026-02-09 16:18:35.294 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/2026-02-09/week - null null
2026-02-09 16:18:35.298 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/2026-02-09/week'
2026-02-09 16:18:35.299 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/2026-02-09/week'
2026-02-09 16:18:35.300 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:35.300 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:35.301 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:35.301 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:35.304 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:18:35.306 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:18:35.306 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:18:35.307 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:18:35.308 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:18:35.309 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:18:35.310 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:35.313 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:35.314 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:18:35.315 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:18:35.316 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:35.316 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:35.317 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:18:35.318 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:18:35.320 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=2026-02-09&count=1&language=ru
2026-02-09 16:18:35.321 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=2026-02-09&count=1&language=ru
2026-02-09 16:18:35.389 +03:00 [INF] Received HTTP response headers after 67.1736ms - 200
2026-02-09 16:18:35.390 +03:00 [INF] End processing HTTP request after 69.3479ms - 200
2026-02-09 16:18:35.391 +03:00 [WRN] City not found in Geocoding API: 2026-02-09
2026-02-09 16:18:35.479 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 169.5125ms
2026-02-09 16:18:35.480 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:35.510 +03:00 [ERR] HTTP 404 - City '2026-02-09' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City '2026-02-09' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass10_0.<<GetWeatherWeekAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 97
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 174
   at WeatherInfo.API.Services.WeatherService.GetWeatherWeekAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 93
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-09 16:18:35.521 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/2026-02-09/week - 404 null application/json; charset=utf-8 227.3426ms
2026-02-09 16:18:43.469 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week - null null
2026-02-09 16:18:43.471 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Ростов-на-Дону/week'
2026-02-09 16:18:43.472 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Ростов-на-Дону/week'
2026-02-09 16:18:43.473 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:43.473 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:43.474 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:43.474 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:43.475 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:18:43.476 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:18:43.476 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:18:43.477 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:18:43.478 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:18:43.479 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:18:43.480 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:43.481 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:43.481 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:18:43.482 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:18:43.483 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:43.484 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:43.484 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:18:43.485 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:18:43.486 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A0%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%94%D0%BE%D0%BD%D1%83&count=1&language=ru
2026-02-09 16:18:43.487 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A0%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%94%D0%BE%D0%BD%D1%83&count=1&language=ru
2026-02-09 16:18:43.553 +03:00 [INF] Received HTTP response headers after 65.7171ms - 200
2026-02-09 16:18:43.554 +03:00 [INF] End processing HTTP request after 67.8393ms - 200
2026-02-09 16:18:43.555 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=47.23135&longitude=39.72328&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 16:18:43.556 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=47.23135&longitude=39.72328&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 16:18:43.617 +03:00 [INF] Received HTTP response headers after 60.4567ms - 200
2026-02-09 16:18:43.618 +03:00 [INF] End processing HTTP request after 62.476ms - 200
2026-02-09 16:18:43.627 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:18:43.628 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:43.629 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:43.630 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:43.631 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:43.631 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:18:43.632 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:18:43.632 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:18:43.633 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:43.634 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:43.634 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:18:43.635 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:18:43.636 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:18:43.636 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:43.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:43.638 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:18:43.640 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:43.641 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:18:43.641 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:43.642 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:43.643 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:43.644 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:18:43.645 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:18:43.646 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:18:43.647 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:18:43.647 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:18:43.648 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:18:43.648 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 16:18:43.651 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 171.4955ms
2026-02-09 16:18:43.652 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:43.653 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:18:43.653 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:43.654 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:43.655 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week - 200 null application/json; charset=utf-8 186.1016ms
2026-02-09 16:18:49.100 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week - null null
2026-02-09 16:18:49.101 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Ростов-на-Дону/week'
2026-02-09 16:18:49.102 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Ростов-на-Дону/week'
2026-02-09 16:18:49.103 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:49.104 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:49.104 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:49.105 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:49.105 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:18:49.106 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:18:49.107 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:18:49.108 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:18:49.109 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:18:49.110 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:18:49.111 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:49.111 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:49.112 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:18:49.113 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:18:49.114 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:49.115 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:49.115 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:18:49.116 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:18:49.117 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:18:49.118 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:49.119 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:49.120 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:49.121 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:49.121 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:18:49.122 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:18:49.123 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:18:49.123 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:49.124 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:49.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:18:49.126 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:18:49.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:18:49.128 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:49.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:49.131 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:18:49.133 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:49.134 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:18:49.134 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:49.135 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:49.136 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:49.137 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:18:49.138 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:18:49.139 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:18:49.140 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:18:49.140 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:18:49.140 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:18:49.141 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 16:18:49.142 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 31.2475ms
2026-02-09 16:18:49.143 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:18:49.143 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:18:49.144 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:49.144 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:49.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week - 200 null application/json; charset=utf-8 45.6606ms
2026-02-09 16:18:57.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week/chart - null null
2026-02-09 16:18:57.074 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Ростов-на-Дону/week/chart'
2026-02-09 16:18:57.074 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Ростов-на-Дону/week/chart'
2026-02-09 16:18:57.075 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:18:57.076 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:57.076 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:18:57.077 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:18:57.080 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:18:57.082 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:18:57.083 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:18:57.084 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:18:57.085 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:18:57.086 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:18:57.086 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:57.087 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:18:57.088 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:18:57.089 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:18:57.089 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:57.090 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:18:57.091 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:18:57.092 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:18:57.094 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:18:57.095 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:57.096 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:57.097 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:57.097 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:57.098 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:18:57.099 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:18:57.099 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:18:57.100 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:57.101 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:57.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:18:57.102 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:18:57.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:18:57.103 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:57.104 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:57.105 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:18:57.107 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:57.108 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:18:57.108 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:57.109 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:57.110 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:57.111 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:18:57.112 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:57.113 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:57.114 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:57.115 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:18:57.116 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:18:57.117 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:57.118 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:57.118 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:18:57.119 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:18:57.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:18:57.120 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:57.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:18:57.122 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:18:57.124 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:57.125 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:18:57.126 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:18:57.127 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:57.127 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:18:57.128 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:18:57.129 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:18:57.130 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:18:57.131 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:18:57.131 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:18:57.132 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:18:57.132 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 16:18:57.134 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 47.8577ms
2026-02-09 16:18:57.135 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:18:57.136 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:18:57.136 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:18:57.137 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:18:57.138 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week/chart - 200 null application/json; charset=utf-8 65.917ms
2026-02-09 16:19:00.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week/chart - null null
2026-02-09 16:19:00.198 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Ростов-на-Дону/week/chart'
2026-02-09 16:19:00.198 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Ростов-на-Дону/week/chart'
2026-02-09 16:19:00.199 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:19:00.200 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:19:00.200 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:19:00.201 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:19:00.201 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:19:00.202 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:19:00.203 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:19:00.204 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:19:00.205 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:19:00.205 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:19:00.206 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:19:00.207 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:19:00.208 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:19:00.209 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:19:00.209 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:19:00.210 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:19:00.211 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:19:00.211 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:19:00.212 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:19:00.213 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:19:00.214 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:19:00.215 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:19:00.216 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:19:00.216 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:19:00.217 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:19:00.217 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:19:00.218 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:19:00.218 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:00.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:19:00.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:19:00.220 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:19:00.221 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:19:00.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 14), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:19:00.224 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:19:00.225 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:00.226 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:19:00.227 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:00.227 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:19:00.228 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:19:00.229 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:19:00.230 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:19:00.231 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:19:00.232 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:19:00.232 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:19:00.233 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:19:00.233 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 16:19:00.234 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 27.7733ms
2026-02-09 16:19:00.235 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:19:00.235 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:19:00.236 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:19:00.237 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:19:00.238 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Ростов-на-Дону/week/chart - 200 null application/json; charset=utf-8 41.5678ms
2026-02-09 16:19:12.487 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - null null
2026-02-09 16:19:12.488 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-09 16:19:12.489 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-09 16:19:12.490 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:19:12.491 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:19:12.491 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:19:12.492 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:19:12.495 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 16:19:12.496 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:19:12.497 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:19:12.498 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:19:12.499 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:19:12.500 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:19:12.501 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:19:12.501 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:19:12.502 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:19:12.503 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:19:12.504 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:19:12.504 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:19:12.505 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:19:12.506 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:19:12.507 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:19:12.507 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:19:12.508 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-09 16:19:12.509 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-09 16:19:12.510 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 16:19:12.510 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 16:19:12.511 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-09 16:19:12.512 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-09 16:19:12.512 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 16:19:12.513 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-09 16:19:12.514 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:19:12.515 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:19:12.516 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 16:19:12.516 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:19:12.522 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:19:12.546 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-09 16:19:12.624 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-09 16:19:12.636 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:19:12.637 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:19:12.637 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:19:12.638 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:12.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:19:12.639 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:19:12.640 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:19:12.640 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 16:19:12.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 16:19:12.643 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:12.644 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 16:19:12.645 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:12.645 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:19:12.649 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-09 16:19:12.656 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 16:19:12.659 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:19:12.660 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:12.660 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:19:12.661 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:19:12.661 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:19:12.662 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 16:19:12.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 16:19:12.666 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:12.667 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:19:12.668 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:19:12.668 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:19:12.669 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:19:12.670 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:19:12.671 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:19:12.671 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:19:12.672 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:19:12.672 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-09 16:19:12.677 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 176.5247ms
2026-02-09 16:19:12.678 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:19:12.678 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:19:12.679 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:19:12.680 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:19:12.681 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - 200 null application/json; charset=utf-8 194.1414ms
2026-02-09 16:20:14.149 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-09 16:20:24.155 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:20:24.157 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.025ms - processed: 0 items - remaining: 1 items
2026-02-09 16:20:34.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:20:34.174 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-09 16:20:44.187 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:20:44.188 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-09 16:20:54.200 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:20:54.201 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-09 16:21:04.216 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:21:04.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-09 16:21:14.227 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:21:14.228 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-09 16:21:24.229 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:21:24.230 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-09 16:21:34.238 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:21:34.239 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-09 16:21:44.255 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:21:44.256 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-09 16:21:54.269 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:21:54.270 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-09 16:22:04.279 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:22:04.279 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-09 16:22:14.290 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:22:14.291 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-09 16:22:24.300 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:22:24.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-09 16:22:34.316 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:22:34.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-09 16:22:44.331 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:22:44.331 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-09 16:22:54.338 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:22:54.339 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-09 16:23:04.345 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:23:04.347 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-09 16:23:14.361 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:23:14.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-09 16:23:24.369 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:23:24.370 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-09 16:23:34.384 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:23:34.385 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-09 16:23:44.393 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:23:44.393 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-09 16:23:54.397 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:23:54.398 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4588ms - processed: 0 items - remaining: 1 items
2026-02-09 16:24:04.401 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:24:04.402 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-09 16:24:14.416 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:24:14.416 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-09 16:24:24.433 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:24:24.434 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-09 16:24:34.440 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:24:34.441 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-09 16:24:44.446 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:24:44.447 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-09 16:24:54.459 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:24:54.460 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-09 16:25:04.473 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:25:04.474 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-09 16:25:14.486 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:25:14.488 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-09 16:25:24.500 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:25:24.500 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-09 16:25:34.513 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:25:34.514 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-09 16:25:44.520 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:25:44.521 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-09 16:25:54.527 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:25:54.527 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-09 16:26:04.532 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:26:04.533 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-09 16:26:14.544 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:26:14.544 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-09 16:26:24.555 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:26:24.555 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-09 16:26:34.566 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:26:34.566 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-09 16:26:44.579 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:26:44.580 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-09 16:26:54.588 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:26:54.589 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2026-02-09 16:27:04.592 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:27:04.593 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-09 16:27:14.606 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:27:14.607 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-09 16:27:24.614 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 16:27:24.614 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-09 16:39:33.140 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-09 16:39:33.208 +03:00 [DBG] Hosting starting
2026-02-09 16:39:33.315 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-09 16:39:33.315 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-09 16:39:33.316 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-09 16:39:33.316 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-09 16:39:33.317 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-09 16:39:33.317 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-09 16:39:33.339 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-09 16:39:33.340 +03:00 [INF] Hosting environment: Development
2026-02-09 16:39:33.340 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-09 16:39:33.341 +03:00 [DBG] Hosting started
2026-02-09 16:39:33.708 +03:00 [DBG] Connection id "0HNJ7S2KE9D5L" accepted.
2026-02-09 16:39:33.709 +03:00 [DBG] Connection id "0HNJ7S2KE9D5L" started.
2026-02-09 16:39:33.719 +03:00 [DBG] Connection id "0HNJ7S2KE9D5M" accepted.
2026-02-09 16:39:33.720 +03:00 [DBG] Connection id "0HNJ7S2KE9D5M" started.
2026-02-09 16:39:33.736 +03:00 [DBG] Connection id "0HNJ7S2KE9D5L" received FIN.
2026-02-09 16:39:33.736 +03:00 [DBG] Connection id "0HNJ7S2KE9D5M" received FIN.
2026-02-09 16:39:33.741 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 16:39:33.741 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 16:39:33.759 +03:00 [DBG] Connection id "0HNJ7S2KE9D5M" stopped.
2026-02-09 16:39:33.759 +03:00 [DBG] Connection id "0HNJ7S2KE9D5L" stopped.
2026-02-09 16:39:33.761 +03:00 [DBG] Connection id "0HNJ7S2KE9D5L" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 16:39:33.761 +03:00 [DBG] Connection id "0HNJ7S2KE9D5M" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 16:39:33.834 +03:00 [DBG] Connection id "0HNJ7S2KE9D5N" accepted.
2026-02-09 16:39:33.836 +03:00 [DBG] Connection id "0HNJ7S2KE9D5N" started.
2026-02-09 16:39:33.863 +03:00 [DBG] Connection 0HNJ7S2KE9D5N established using the following protocol: "Tls13"
2026-02-09 16:39:33.892 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-09 16:39:33.950 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-09 16:39:33.963 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-09 16:39:33.964 +03:00 [DBG] Request did not match any endpoints
2026-02-09 16:39:33.966 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 16:39:33.996 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-09 16:39:33.998 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-09 16:39:34.008 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-09 16:39:34.009 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-09 16:39:34.010 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 120.2816ms
2026-02-09 16:39:34.031 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-09 16:39:34.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.0612ms
2026-02-09 16:39:34.058 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-09 16:39:34.083 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.0222ms
2026-02-09 16:39:34.131 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-09 16:39:34.133 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-09 16:39:34.134 +03:00 [DBG] Request did not match any endpoints
2026-02-09 16:39:34.135 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 16:39:34.139 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.661ms
2026-02-09 16:40:02.482 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск?date=2026-02-09 - null null
2026-02-09 16:40:02.489 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Петрозаводск'
2026-02-09 16:40:02.491 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Петрозаводск'
2026-02-09 16:40:02.492 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:40:02.494 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:02.494 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:02.496 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:40:02.508 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:40:02.510 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:02.511 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:02.512 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:02.513 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:02.514 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:02.515 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:02.569 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 16:40:02.575 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:02.582 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:40:02.584 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:40:02.585 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:02.586 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:02.587 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:40:02.591 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:40:02.592 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:40:02.597 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:40:02.598 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:40:02.599 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:40:02.610 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%82%D1%80%D0%BE%D0%B7%D0%B0%D0%B2%D0%BE%D0%B4%D1%81%D0%BA&count=1&language=ru
2026-02-09 16:40:02.615 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%82%D1%80%D0%BE%D0%B7%D0%B0%D0%B2%D0%BE%D0%B4%D1%81%D0%BA&count=1&language=ru
2026-02-09 16:40:02.882 +03:00 [INF] Received HTTP response headers after 264.971ms - 200
2026-02-09 16:40:02.884 +03:00 [INF] End processing HTTP request after 274.2927ms - 200
2026-02-09 16:40:02.894 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=61.78491&longitude=34.34691&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 16:40:02.894 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=61.78491&longitude=34.34691&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 16:40:06.017 +03:00 [INF] Received HTTP response headers after 3121.3489ms - 200
2026-02-09 16:40:06.018 +03:00 [INF] End processing HTTP request after 3124.2329ms - 200
2026-02-09 16:40:06.242 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:06.259 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:06.286 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:06.289 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:06.291 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:06.299 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:06.335 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:06.340 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-09 16:40:06.342 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:06.350 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:06.355 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:06.358 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-09 16:40:06.360 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-09 16:40:06.365 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:06.377 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:06.385 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:06.390 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:06.394 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-09 16:40:06.397 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:06.399 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-09 16:40:06.404 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:06.406 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:06.409 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:06.411 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:06.411 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:06.411 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:06.412 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:06.413 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 16:40:06.422 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 3905.6382ms
2026-02-09 16:40:06.423 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:40:06.425 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:06.427 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:06.429 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 16:40:06.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск?date=2026-02-09 - 200 null application/json; charset=utf-8 3947.9267ms
2026-02-09 16:40:11.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск?date=2026-02-09 - null null
2026-02-09 16:40:11.944 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Петрозаводск'
2026-02-09 16:40:11.944 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Петрозаводск'
2026-02-09 16:40:11.945 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:40:11.946 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:11.946 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:11.947 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:40:11.948 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:40:11.949 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:11.950 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:11.950 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:11.951 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:11.952 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:11.953 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:11.955 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:11.956 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:40:11.956 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:40:11.957 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:11.958 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:11.959 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:40:11.960 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:40:11.960 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:40:11.961 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:40:11.962 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 16:40:11.963 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 16:40:11.992 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:11.994 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:11.995 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:11.996 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:11.997 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:11.997 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:11.998 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:11.999 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:40:11.999 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:12.000 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:12.001 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:12.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:12.002 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:12.003 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:12.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:12.005 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:12.007 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:12.008 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:40:12.008 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:12.009 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:12.010 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:12.011 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:12.012 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:12.013 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:12.013 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:12.013 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:12.014 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:12.015 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 16:40:12.015 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 62.3813ms
2026-02-09 16:40:12.016 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 16:40:12.017 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:12.017 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:12.018 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:12.019 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск?date=2026-02-09 - 200 null application/json; charset=utf-8 77.3409ms
2026-02-09 16:40:22.030 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week - null null
2026-02-09 16:40:22.034 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Петрозаводск/week'
2026-02-09 16:40:22.035 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Петрозаводск/week'
2026-02-09 16:40:22.036 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:40:22.036 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:22.037 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:22.037 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:40:22.041 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:40:22.042 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:22.043 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:22.043 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:22.044 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:22.045 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:22.046 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:22.049 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:22.050 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:40:22.051 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:40:22.051 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:22.052 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:22.053 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:40:22.054 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:40:22.056 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%82%D1%80%D0%BE%D0%B7%D0%B0%D0%B2%D0%BE%D0%B4%D1%81%D0%BA&count=1&language=ru
2026-02-09 16:40:22.057 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%B5%D1%82%D1%80%D0%BE%D0%B7%D0%B0%D0%B2%D0%BE%D0%B4%D1%81%D0%BA&count=1&language=ru
2026-02-09 16:40:22.109 +03:00 [INF] Received HTTP response headers after 51.3612ms - 200
2026-02-09 16:40:22.109 +03:00 [INF] End processing HTTP request after 53.3591ms - 200
2026-02-09 16:40:22.111 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=61.78491&longitude=34.34691&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 16:40:22.111 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=61.78491&longitude=34.34691&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 16:40:22.334 +03:00 [INF] Received HTTP response headers after 221.9022ms - 200
2026-02-09 16:40:22.335 +03:00 [INF] End processing HTTP request after 223.9332ms - 200
2026-02-09 16:40:22.342 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:22.343 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:22.344 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:22.345 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:22.346 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:22.346 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:22.347 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:22.347 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:40:22.348 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:22.349 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:22.349 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:22.350 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:22.350 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:22.351 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:22.352 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:22.353 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:22.435 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:22.436 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 83ms reading results.
2026-02-09 16:40:22.437 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:22.438 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:22.439 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:22.440 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:22.441 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:22.442 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:22.442 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:22.443 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:22.443 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:22.444 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 16:40:22.446 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 400.3868ms
2026-02-09 16:40:22.447 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:40:22.447 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:22.448 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:22.449 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:22.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week - 200 null application/json; charset=utf-8 419.846ms
2026-02-09 16:40:36.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week/chart - null null
2026-02-09 16:40:36.428 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Петрозаводск/week/chart'
2026-02-09 16:40:36.429 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Петрозаводск/week/chart'
2026-02-09 16:40:36.430 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:40:36.431 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:36.431 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:36.431 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:40:36.434 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:40:36.435 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:36.436 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:36.436 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:36.438 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:36.439 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:36.439 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:36.440 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:36.441 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:40:36.442 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:40:36.442 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:36.443 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:36.444 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:40:36.444 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:40:36.447 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:36.448 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:36.449 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:36.449 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:36.450 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:36.450 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:36.451 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:36.452 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:40:36.452 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:36.453 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:36.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:36.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:36.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:36.456 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:36.457 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:36.458 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:36.459 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:36.460 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:40:36.461 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:36.461 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:36.462 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:36.463 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:36.464 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:36.465 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:36.466 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:36.466 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:36.468 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:36.469 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:36.469 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:36.470 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:36.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:36.472 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:36.472 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:36.473 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:36.474 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:36.476 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:36.477 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:40:36.477 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:36.478 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:36.479 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:36.480 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:36.481 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:36.482 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:36.482 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:36.482 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:36.483 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:36.484 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 16:40:36.486 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 46.5069ms
2026-02-09 16:40:36.487 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:40:36.487 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:36.488 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:36.489 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:36.489 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week/chart - 200 null application/json; charset=utf-8 62.865ms
2026-02-09 16:40:44.324 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week - null null
2026-02-09 16:40:44.326 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Петрозаводск/week'
2026-02-09 16:40:44.326 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Петрозаводск/week'
2026-02-09 16:40:44.327 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:40:44.328 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:44.328 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:44.329 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:40:44.329 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:40:44.330 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:44.331 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:44.332 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:44.333 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:44.334 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:44.335 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:44.336 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:44.336 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:40:44.337 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:40:44.338 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:44.339 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:44.339 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:40:44.340 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:40:44.341 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:44.342 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:44.343 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:44.344 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:44.345 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:44.345 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:44.346 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:44.346 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:40:44.347 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:44.348 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:44.349 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:44.349 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:44.350 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:44.350 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:44.352 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:44.353 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:44.354 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:44.355 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:40:44.356 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:44.356 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:44.357 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:44.358 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:44.359 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:44.360 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:44.360 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:44.360 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:44.361 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:44.361 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 16:40:44.362 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.469ms
2026-02-09 16:40:44.363 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 16:40:44.363 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:44.364 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:44.365 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:44.366 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week - 200 null application/json; charset=utf-8 41.9052ms
2026-02-09 16:40:47.150 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week/chart - null null
2026-02-09 16:40:47.152 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Петрозаводск/week/chart'
2026-02-09 16:40:47.153 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Петрозаводск/week/chart'
2026-02-09 16:40:47.153 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:40:47.154 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:47.154 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:47.155 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:40:47.156 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 16:40:47.157 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:47.158 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:47.158 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:47.159 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:47.160 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:47.161 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:47.162 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 16:40:47.163 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 16:40:47.164 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 16:40:47.164 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:47.165 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 16:40:47.166 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 16:40:47.167 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 16:40:47.168 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:47.169 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:47.170 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:47.170 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:47.171 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 16:40:47.172 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 16:40:47.173 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:47.173 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:40:47.174 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:47.174 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:47.175 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:47.176 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:47.176 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:47.177 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:47.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 12), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 16:40:47.179 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 16:40:47.181 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:47.182 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:40:47.182 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:47.183 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:47.184 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 16:40:47.185 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 16:40:47.186 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:47.187 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:47.187 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:47.188 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:47.188 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:47.189 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 16:40:47.190 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 28.9285ms
2026-02-09 16:40:47.191 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 16:40:47.191 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:47.192 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:47.192 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:47.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Петрозаводск/week/chart - 200 null application/json; charset=utf-8 43.4039ms
2026-02-09 16:40:54.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - null null
2026-02-09 16:40:54.163 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-09 16:40:54.164 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-09 16:40:54.165 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:40:54.165 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:54.166 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:40:54.166 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:40:54.169 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 16:40:54.170 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:40:54.171 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:40:54.172 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:40:54.173 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:40:54.174 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:40:54.175 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:40:54.176 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:40:54.176 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:40:54.177 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:40:54.178 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:40:54.178 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:40:54.179 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:40:54.180 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:40:54.180 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:40:54.181 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:40:54.182 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-09 16:40:54.182 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-09 16:40:54.183 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 16:40:54.184 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 16:40:54.185 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-09 16:40:54.185 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-09 16:40:54.186 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 16:40:54.187 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-09 16:40:54.188 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:40:54.188 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:40:54.189 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 16:40:54.190 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-09 16:40:54.196 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:40:54.220 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-09 16:40:54.303 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-09 16:40:54.315 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:40:54.315 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:40:54.316 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:54.317 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:54.317 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:54.318 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:54.318 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:54.319 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 16:40:54.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 16:40:54.322 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:54.323 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 16:40:54.324 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:54.325 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:54.328 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-09 16:40:54.335 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 16:40:54.339 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:54.339 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:54.340 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:40:54.341 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:40:54.341 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:40:54.342 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 16:40:54.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 16:40:54.346 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:54.346 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 16:40:54.347 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:40:54.348 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:54.349 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:40:54.350 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:40:54.350 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:40:54.351 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:40:54.351 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:40:54.352 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-09 16:40:54.358 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 183.4268ms
2026-02-09 16:40:54.359 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 16:40:54.359 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:40:54.360 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:40:54.361 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:40:54.362 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - 200 null application/json; charset=utf-8 200.3173ms
2026-02-09 16:41:47.170 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - null null
2026-02-09 16:41:47.178 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-09 16:41:47.178 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-09 16:41:47.179 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 16:41:47.179 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:41:47.180 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 16:41:47.180 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 16:41:47.183 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 16:41:47.184 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 16:41:47.185 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 16:41:47.186 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 16:41:47.187 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 16:41:47.188 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 16:41:47.188 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:41:47.189 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 16:41:47.190 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:41:47.191 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:41:47.192 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 16:41:47.192 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 16:41:47.193 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:41:47.194 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:41:47.194 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 16:41:47.195 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 16:41:47.196 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-09 16:41:47.196 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-09 16:41:47.197 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 16:41:47.198 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 16:41:47.198 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-09 16:41:47.199 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-09 16:41:47.201 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 16:41:47.203 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-09 16:41:47.218 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 16:41:47.219 +03:00 [DBG] Creating DbConnection.
2026-02-09 16:41:47.219 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 16:41:47.220 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:41:47.221 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:41:47.221 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 16:41:47.222 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 16:41:47.223 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 16:41:47.223 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 16:41:47.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 16:41:47.226 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:41:47.226 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 16:41:47.227 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 16:41:47.228 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:41:47.229 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 16:41:47.230 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 16:41:47.230 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 16:41:47.230 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 16:41:47.231 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 16:41:47.231 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-09 16:41:47.233 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 44.3646ms
2026-02-09 16:41:47.233 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 16:41:47.234 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 16:41:47.234 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 16:41:47.235 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 16:41:47.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - 200 null application/json; charset=utf-8 66.2091ms
2026-02-09 16:42:02.614 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-09 18:55:22.565 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 18:55:22.764 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:55:22.767 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:22.771 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-09 18:55:22.774 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:55:22.776 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:22.778 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 18:55:26.474 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 18:55:26.664 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:55:26.666 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:26.670 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-09 18:55:26.672 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:26.673 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:55:26.674 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:26.680 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:26.681 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:26.683 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:26.683 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:26.684 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:26.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:26.685 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:26.687 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:55:26.688 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:26.688 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:33.676 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 18:55:33.879 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:55:33.888 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:33.892 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-09 18:55:33.894 +03:00 [DBG] Migrating using database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.895 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:33.896 +03:00 [DBG] Created DbConnection. (1ms).
2026-02-09 18:55:33.897 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.901 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.901 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.903 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:33.903 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:33.903 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:55:33.903 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.903 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.904 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.904 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:33.904 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.907 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.909 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-09 18:55:33.912 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-09 18:55:33.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2026-02-09 18:55:33.915 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-09 18:55:33.924 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-09 18:55:33.925 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.926 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:33.959 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-09 18:55:33.960 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-09 18:55:33.960 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-09 18:55:33.960 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.960 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.960 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-09 18:55:33.964 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-09 18:55:33.964 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.964 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:33.964 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:55:33.964 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:55:33.964 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.964 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.965 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.965 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:33.966 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-09 18:55:33.966 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-09 18:55:33.966 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-09 18:55:33.966 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:33.966 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.966 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-09 18:55:33.968 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-09 18:55:33.968 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:33.968 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:34.169 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:34.169 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:34.169 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:55:34.169 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:55:34.169 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:55:34.169 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-09 18:55:34.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-09 18:55:34.170 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:34.171 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 18:55:34.171 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:34.171 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:34.175 +03:00 [INF] Applying migration '20260202104928_InitialStatistic'.
2026-02-09 18:55:34.183 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:34.183 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:34.184 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-09 18:55:34.185 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2026-02-09 18:55:34.185 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-09 18:55:34.185 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-09 18:55:34.185 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-09 18:55:34.185 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-09 18:55:34.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-09 18:55:34.186 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-09 18:55:34.186 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-09 18:55:34.186 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-09 18:55:34.186 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-09 18:55:34.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-09 18:55:34.186 +03:00 [DBG] Committing transaction.
2026-02-09 18:55:34.187 +03:00 [DBG] Committed transaction.
2026-02-09 18:55:34.188 +03:00 [DBG] Disposing transaction.
2026-02-09 18:55:34.188 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:55:34.188 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:55:34.189 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:55:34.189 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:55:34.189 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:56:41.195 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-09 18:56:41.269 +03:00 [DBG] Hosting starting
2026-02-09 18:56:41.407 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-09 18:56:41.409 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-09 18:56:41.410 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-09 18:56:41.411 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-09 18:56:41.412 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-09 18:56:41.412 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-09 18:56:41.436 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-09 18:56:41.437 +03:00 [INF] Hosting environment: Development
2026-02-09 18:56:41.438 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-09 18:56:41.438 +03:00 [DBG] Hosting started
2026-02-09 18:56:41.458 +03:00 [DBG] Connection id "0HNJ7UF8G7AQC" received FIN.
2026-02-09 18:56:41.461 +03:00 [DBG] Connection id "0HNJ7UF8G7AQC" accepted.
2026-02-09 18:56:41.462 +03:00 [DBG] Connection id "0HNJ7UF8G7AQC" started.
2026-02-09 18:56:41.472 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-09 18:56:41.492 +03:00 [DBG] Connection id "0HNJ7UF8G7AQC" stopped.
2026-02-09 18:56:41.497 +03:00 [DBG] Connection id "0HNJ7UF8G7AQC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 18:56:41.708 +03:00 [DBG] Connection id "0HNJ7UF8G7AQD" accepted.
2026-02-09 18:56:41.711 +03:00 [DBG] Connection id "0HNJ7UF8G7AQD" started.
2026-02-09 18:56:41.744 +03:00 [DBG] Connection 0HNJ7UF8G7AQD established using the following protocol: "Tls13"
2026-02-09 18:56:41.772 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-09 18:56:41.829 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-09 18:56:41.839 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-09 18:56:41.840 +03:00 [DBG] Request did not match any endpoints
2026-02-09 18:56:41.843 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 18:56:41.868 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-09 18:56:41.869 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-09 18:56:41.877 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-09 18:56:41.878 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-09 18:56:41.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 110.5067ms
2026-02-09 18:56:41.907 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-09 18:56:41.915 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.183ms
2026-02-09 18:56:41.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-09 18:56:41.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.1758ms
2026-02-09 18:56:42.014 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-09 18:56:42.017 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-09 18:56:42.017 +03:00 [DBG] Request did not match any endpoints
2026-02-09 18:56:42.018 +03:00 [DBG] The request path  does not match the path filter
2026-02-09 18:56:42.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.5005ms
2026-02-09 18:56:55.849 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - null null
2026-02-09 18:56:55.853 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-09 18:56:55.855 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-09 18:56:55.856 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:56:55.857 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:56:55.858 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:56:55.861 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:56:55.875 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 18:56:55.877 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:56:55.878 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:56:55.879 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:56:55.880 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:56:55.881 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:56:55.882 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:56:55.937 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-09 18:56:55.943 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:56:55.951 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:56:55.956 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:56:55.957 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:56:55.959 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:56:55.960 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:56:55.961 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:56:55.962 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:56:55.963 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:56:55.964 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-09 18:56:55.964 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-09 18:56:55.966 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 18:56:55.967 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 18:56:55.967 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-09 18:56:55.968 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-09 18:56:55.969 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 18:56:55.970 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-09 18:56:55.971 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:56:55.971 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:56:55.972 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 18:56:55.973 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:56:56.208 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:56:56.236 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-09 18:56:56.325 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-09 18:56:56.342 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:56:56.348 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-09 18:56:56.350 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:56:56.357 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:56:56.360 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:56:56.363 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-09 18:56:56.365 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-09 18:56:56.370 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 18:56:56.381 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 18:56:56.386 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:56:56.389 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-09 18:56:56.392 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:56:56.394 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-09 18:56:56.401 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-09 18:56:56.409 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 18:56:56.412 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:56:56.413 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:56:56.413 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:56:56.414 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:56:56.415 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:56:56.415 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 18:56:56.417 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 18:56:56.418 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:56:56.419 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 18:56:56.420 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:56:56.421 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:56:56.423 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:56:56.425 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:56:56.425 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:56:56.426 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:56:56.426 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:56:56.427 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-09 18:56:56.437 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 553.7498ms
2026-02-09 18:56:56.437 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:56:56.439 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:56:56.441 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:56:56.443 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-09 18:56:56.444 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - 200 null application/json; charset=utf-8 595.2506ms
2026-02-09 18:57:15.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2025-09-16 - null null
2026-02-09 18:57:15.810 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-09 18:57:15.811 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-09 18:57:15.812 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:15.813 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:15.813 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:15.814 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:15.817 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:57:15.818 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:57:15.819 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:57:15.820 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:57:15.821 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:57:15.821 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:57:15.822 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:15.825 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:15.826 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:57:15.827 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:57:15.828 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:15.829 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:15.829 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:57:15.832 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:57:15.833 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 18:57:15.833 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 18:57:15.834 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 18:57:15.835 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 18:57:15.847 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-09 18:57:15.852 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-09 18:57:16.353 +03:00 [INF] Received HTTP response headers after 498.3791ms - 200
2026-02-09 18:57:16.355 +03:00 [INF] End processing HTTP request after 508.7579ms - 200
2026-02-09 18:57:16.364 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-09 18:57:16.365 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16
2026-02-09 18:57:16.727 +03:00 [INF] Received HTTP response headers after 361.1204ms - 400
2026-02-09 18:57:16.728 +03:00 [INF] End processing HTTP request after 363.5895ms - 400
2026-02-09 18:57:16.729 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2025-09-16&end_date=2025-09-16. Body: {"error":true,"reason":"Parameter 'start_date' is out of allowed range from 2025-11-08 to 2026-02-24"}
2026-02-09 18:57:16.846 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1023.8538ms
2026-02-09 18:57:16.847 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:16.885 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 64
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 183
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 59
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-09 18:57:16.896 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2025-09-16 - 400 null application/json; charset=utf-8 1088.7744ms
2026-02-09 18:57:34.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-09 - null null
2026-02-09 18:57:34.411 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-09 18:57:34.411 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-09 18:57:34.412 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:34.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:34.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:34.414 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:34.414 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:57:34.415 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:57:34.416 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:57:34.417 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:57:34.418 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:57:34.418 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:57:34.419 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:34.420 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:34.421 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:57:34.422 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:57:34.423 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:34.423 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:34.424 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:57:34.425 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:57:34.425 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 18:57:34.426 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 18:57:34.427 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 18:57:34.427 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 18:57:34.428 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-09 18:57:34.429 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-09 18:57:34.501 +03:00 [INF] Received HTTP response headers after 71.6412ms - 200
2026-02-09 18:57:34.502 +03:00 [INF] End processing HTTP request after 73.6075ms - 200
2026-02-09 18:57:34.503 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 18:57:34.503 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-09&end_date=2026-02-09
2026-02-09 18:57:34.559 +03:00 [INF] Received HTTP response headers after 55.1814ms - 200
2026-02-09 18:57:34.560 +03:00 [INF] End processing HTTP request after 57.22ms - 200
2026-02-09 18:57:34.592 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:57:34.608 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:34.632 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:34.635 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:34.637 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:34.644 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:57:34.667 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:57:34.668 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:57:34.668 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:34.669 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:34.670 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:57:34.671 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:57:34.672 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:57:34.672 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:34.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:34.679 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:57:34.683 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:34.683 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 8ms reading results.
2026-02-09 18:57:34.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:34.685 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:34.690 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:34.691 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:57:34.693 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:57:34.694 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:57:34.694 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:57:34.695 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:57:34.695 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:57:34.696 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 18:57:34.701 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 281.4624ms
2026-02-09 18:57:34.701 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:34.702 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:57:34.703 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:34.703 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:34.704 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-09 - 200 null application/json; charset=utf-8 295.6348ms
2026-02-09 18:57:38.948 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-09 - null null
2026-02-09 18:57:38.950 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-09 18:57:38.951 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-09 18:57:38.952 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:38.952 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:38.953 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:38.953 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:38.954 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:57:38.955 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:57:38.956 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:57:38.956 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:57:38.957 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:57:38.958 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:57:38.959 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:38.962 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:38.963 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:57:38.964 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:57:38.965 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:38.966 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:38.966 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:57:38.967 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:57:38.968 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 18:57:38.968 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 18:57:38.969 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-09 18:57:38.970 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-09 18:57:38.977 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:57:38.978 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:38.979 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:38.980 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:38.981 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:38.982 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:57:38.983 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:57:38.983 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:57:38.984 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:38.985 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:38.985 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:57:38.986 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:57:38.986 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:57:38.987 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:38.988 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:38.989 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:57:38.991 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:38.991 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:57:38.992 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:38.993 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:38.994 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:38.995 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:57:38.996 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:57:38.997 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:57:38.997 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:57:38.998 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:57:38.998 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:57:38.999 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-09 18:57:38.999 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 40.5588ms
2026-02-09 18:57:39.000 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-09 18:57:39.001 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:57:39.001 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:39.002 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:39.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=2026-02-09 - 200 null application/json; charset=utf-8 54.6695ms
2026-02-09 18:57:50.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week - null null
2026-02-09 18:57:50.399 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week'
2026-02-09 18:57:50.400 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Москва/week'
2026-02-09 18:57:50.400 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:57:50.401 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:50.402 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:50.402 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:57:50.405 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:57:50.406 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:57:50.406 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:57:50.407 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:57:50.408 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:57:50.409 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:57:50.410 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:50.411 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:50.412 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:57:50.413 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:57:50.414 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:50.414 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:50.415 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:57:50.416 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:57:50.418 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-09 18:57:50.419 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-09 18:57:50.498 +03:00 [INF] Received HTTP response headers after 78.7288ms - 200
2026-02-09 18:57:50.499 +03:00 [INF] End processing HTTP request after 80.9221ms - 200
2026-02-09 18:57:50.501 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 18:57:50.501 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 18:57:50.558 +03:00 [INF] Received HTTP response headers after 56.0535ms - 200
2026-02-09 18:57:50.559 +03:00 [INF] End processing HTTP request after 58.0705ms - 200
2026-02-09 18:57:50.561 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:57:50.562 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:50.563 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:50.564 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:50.565 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:50.565 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:57:50.566 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:57:50.567 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:57:50.567 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:50.568 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:50.569 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:57:50.569 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:57:50.570 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:57:50.571 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:50.572 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:50.573 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:57:50.574 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:50.575 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:57:50.576 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:50.577 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:50.578 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:50.579 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:57:50.580 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:57:50.581 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:57:50.581 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:57:50.582 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:57:50.582 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:57:50.583 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 18:57:50.585 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 175.0745ms
2026-02-09 18:57:50.586 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:57:50.586 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:57:50.587 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:50.587 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:50.588 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week - 200 null application/json; charset=utf-8 191.5719ms
2026-02-09 18:57:56.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week - null null
2026-02-09 18:57:56.363 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week'
2026-02-09 18:57:56.363 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Москва/week'
2026-02-09 18:57:56.364 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:57:56.365 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:56.366 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:57:56.366 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:57:56.367 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:57:56.368 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:57:56.369 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:57:56.370 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:57:56.372 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:57:56.373 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:57:56.374 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:56.375 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:57:56.376 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:57:56.377 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:57:56.378 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:56.378 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:57:56.379 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:57:56.380 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:57:56.381 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:57:56.383 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:56.383 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:56.384 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:56.385 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:57:56.385 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:57:56.386 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:57:56.386 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:57:56.387 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:56.387 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:56.388 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:57:56.389 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:57:56.389 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:57:56.390 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:56.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:57:56.392 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:57:56.393 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:56.394 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 18:57:56.395 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:57:56.395 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:56.396 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:57:56.397 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:57:56.398 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:57:56.399 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:57:56.399 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:57:56.400 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:57:56.400 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:57:56.401 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 18:57:56.402 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.6341ms
2026-02-09 18:57:56.402 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:57:56.403 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:57:56.404 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:57:56.404 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:57:56.405 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week - 200 null application/json; charset=utf-8 44.4189ms
2026-02-09 18:58:01.551 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-09 18:58:01.553 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-09 18:58:01.553 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-09 18:58:01.554 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 18:58:01.555 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:01.555 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:01.556 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 18:58:01.559 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:58:01.560 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:58:01.561 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:58:01.562 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:58:01.564 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:58:01.564 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:58:01.565 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:58:01.566 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:58:01.567 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:58:01.568 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:58:01.568 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:58:01.569 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:58:01.570 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:58:01.571 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:58:01.573 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:58:01.574 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:01.575 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:01.576 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:58:01.576 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:58:01.577 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:58:01.578 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:58:01.578 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:58:01.579 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:01.579 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:01.580 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:58:01.581 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:58:01.581 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:58:01.582 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:58:01.583 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:58:01.584 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:58:01.586 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:01.587 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:58:01.587 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:01.588 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:01.589 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:01.590 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:58:01.591 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:01.592 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:01.593 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:58:01.593 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:58:01.595 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:58:01.595 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:01.596 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:01.597 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:58:01.597 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:58:01.598 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:58:01.599 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:58:01.600 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:58:01.601 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:58:01.602 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:01.603 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:58:01.604 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:01.604 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:01.605 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:01.606 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:58:01.607 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:58:01.608 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:58:01.609 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:58:01.609 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:58:01.609 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:58:01.610 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 18:58:01.612 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 46.6865ms
2026-02-09 18:58:01.613 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 18:58:01.613 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:58:01.614 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:01.615 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:01.616 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 64.6346ms
2026-02-09 18:58:05.412 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - null null
2026-02-09 18:58:05.414 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week/chart'
2026-02-09 18:58:05.415 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather/Москва/week/chart'
2026-02-09 18:58:05.416 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 18:58:05.417 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:05.418 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:05.418 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 18:58:05.419 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:58:05.420 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:58:05.421 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:58:05.422 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:58:05.422 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:58:05.423 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:58:05.424 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:58:05.425 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:58:05.425 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:58:05.426 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:58:05.427 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:58:05.428 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:58:05.429 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:58:05.429 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:58:05.431 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:58:05.432 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:05.432 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:05.433 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:58:05.434 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:58:05.434 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:58:05.435 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:58:05.435 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:58:05.436 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:05.436 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:05.437 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:58:05.438 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:58:05.438 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:58:05.439 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:58:05.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 10), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:58:05.441 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:58:05.442 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:05.443 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:58:05.444 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:05.445 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:05.446 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:58:05.446 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:58:05.447 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:58:05.448 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:58:05.449 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:58:05.449 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:58:05.449 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:58:05.450 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-09 18:58:05.451 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 26.7864ms
2026-02-09 18:58:05.451 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-09 18:58:05.452 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:58:05.453 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:05.453 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:05.454 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва/week/chart - 200 null application/json; charset=utf-8 41.8069ms
2026-02-09 18:58:18.866 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - null null
2026-02-09 18:58:18.868 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-09 18:58:18.869 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-09 18:58:18.870 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 18:58:18.870 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:18.871 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:18.871 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 18:58:18.874 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 18:58:18.875 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:58:18.876 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:58:18.877 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:58:18.878 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:58:18.879 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:58:18.880 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:58:18.880 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:58:18.881 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:58:18.882 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:58:18.883 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:58:18.883 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:58:18.884 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:58:18.885 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:58:18.885 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:58:18.886 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:58:18.887 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-09 18:58:18.887 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-09 18:58:18.888 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 18:58:18.889 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 18:58:18.890 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-09 18:58:18.890 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-09 18:58:18.892 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:58:18.894 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-09 18:58:18.910 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-09 18:58:18.912 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:58:18.912 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:58:18.913 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:18.914 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:18.915 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:58:18.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:58:18.916 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:58:18.917 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 18:58:18.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 18:58:18.920 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:18.921 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 18:58:18.921 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:18.922 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:18.923 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:58:18.924 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:58:18.925 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:58:18.925 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:58:18.925 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:58:18.926 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-09 18:58:18.927 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 47.8157ms
2026-02-09 18:58:18.928 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 18:58:18.929 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:58:18.929 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:18.930 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:18.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - 200 null application/json; charset=utf-8 66.4225ms
2026-02-09 18:58:24.460 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - null null
2026-02-09 18:58:24.462 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-09 18:58:24.463 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-09 18:58:24.464 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:58:24.464 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:24.465 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:58:24.465 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:58:24.466 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 18:58:24.467 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:58:24.468 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:58:24.469 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:58:24.470 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:58:24.470 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:58:24.471 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:58:24.472 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:58:24.473 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:58:24.473 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:58:24.474 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:58:24.475 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:58:24.476 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:58:24.476 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:58:24.477 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:58:24.478 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:58:24.479 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-09 18:58:24.479 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-09 18:58:24.480 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 18:58:24.481 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 18:58:24.481 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-09 18:58:24.482 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-09 18:58:24.483 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 18:58:24.483 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-09 18:58:24.484 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:58:24.485 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:58:24.486 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 18:58:24.486 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:58:24.487 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:58:24.490 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:58:24.490 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:58:24.491 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:24.492 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:24.493 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:58:24.493 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:58:24.494 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:58:24.495 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 18:58:24.496 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 18:58:24.497 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:24.498 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 18:58:24.498 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:24.499 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:24.501 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:24.501 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:24.502 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:58:24.502 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:58:24.503 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:58:24.504 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 18:58:24.505 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 18:58:24.506 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:24.507 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-09 18:58:24.508 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:58:24.509 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:24.509 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:58:24.511 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:58:24.511 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:58:24.511 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:58:24.512 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:58:24.512 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-09 18:58:24.514 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 43.1316ms
2026-02-09 18:58:24.515 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:58:24.516 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:58:24.516 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:58:24.517 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:58:24.518 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - 200 null application/json; charset=utf-8 57.7425ms
2026-02-09 18:58:55.597 +03:00 [DBG] Connection id "0HNJ7UF8G7AQD" received FIN.
2026-02-09 18:58:55.602 +03:00 [DBG] Connection id "0HNJ7UF8G7AQD" is closed. The last processed stream ID was 27.
2026-02-09 18:58:55.603 +03:00 [DBG] Connection id "0HNJ7UF8G7AQD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-09 18:58:55.603 +03:00 [DBG] The connection queue processing loop for 0HNJ7UF8G7AQD completed.
2026-02-09 18:58:55.604 +03:00 [DBG] Connection id "0HNJ7UF8G7AQD" stopped.
2026-02-09 18:59:11.145 +03:00 [DBG] Connection id "0HNJ7UF8G7AQE" accepted.
2026-02-09 18:59:11.146 +03:00 [DBG] Connection id "0HNJ7UF8G7AQE" started.
2026-02-09 18:59:11.153 +03:00 [DBG] Connection 0HNJ7UF8G7AQE established using the following protocol: "Tls13"
2026-02-09 18:59:11.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - null null
2026-02-09 18:59:11.156 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Санкт-Петербург/week'
2026-02-09 18:59:11.157 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Санкт-Петербург/week'
2026-02-09 18:59:11.158 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:59:11.159 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:11.159 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:11.159 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:59:11.160 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:59:11.161 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:59:11.162 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:59:11.163 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:59:11.164 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:59:11.164 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:59:11.165 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:59:11.166 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:59:11.166 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:59:11.167 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:59:11.168 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:59:11.168 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:59:11.169 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:59:11.170 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:59:11.171 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3&count=1&language=ru
2026-02-09 18:59:11.171 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3&count=1&language=ru
2026-02-09 18:59:11.545 +03:00 [INF] Received HTTP response headers after 372.6946ms - 200
2026-02-09 18:59:11.546 +03:00 [INF] End processing HTTP request after 375.0586ms - 200
2026-02-09 18:59:11.547 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 18:59:11.547 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-09 18:59:11.949 +03:00 [INF] Received HTTP response headers after 401.0724ms - 200
2026-02-09 18:59:11.950 +03:00 [INF] End processing HTTP request after 403.2066ms - 200
2026-02-09 18:59:11.951 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:59:11.952 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:59:11.953 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:59:11.953 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:59:11.954 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:59:11.954 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:59:11.955 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:59:11.956 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:59:11.956 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:11.957 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:11.957 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:59:11.958 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:59:11.958 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:59:11.959 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:59:11.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:59:11.961 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:59:11.963 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:11.963 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:59:11.964 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:11.965 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:11.966 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:59:11.967 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:59:11.968 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:59:11.969 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:59:11.969 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:59:11.970 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:59:11.970 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:59:11.971 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 18:59:11.971 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 806.4721ms
2026-02-09 18:59:11.972 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:59:11.973 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:59:11.973 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:11.974 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:11.975 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - 200 null application/json; charset=utf-8 820.364ms
2026-02-09 18:59:15.862 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-09 18:59:16.616 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - null null
2026-02-09 18:59:16.617 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Санкт-Петербург/week'
2026-02-09 18:59:16.618 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Санкт-Петербург/week'
2026-02-09 18:59:16.619 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:59:16.619 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:16.620 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:16.620 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:59:16.621 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-09 18:59:16.622 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:59:16.623 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:59:16.624 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:59:16.625 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:59:16.625 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:59:16.626 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:59:16.627 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-09 18:59:16.627 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-09 18:59:16.628 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-09 18:59:16.629 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:59:16.630 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-09 18:59:16.631 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-09 18:59:16.631 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-09 18:59:16.633 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:59:16.634 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:59:16.635 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:59:16.635 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-09 18:59:16.636 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-09 18:59:16.636 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-09 18:59:16.637 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:59:16.637 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:59:16.638 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:16.639 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:16.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:59:16.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:59:16.641 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:59:16.642 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:59:16.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 15), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-09 18:59:16.644 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-09 18:59:16.645 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:16.646 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-09 18:59:16.647 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:16.647 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:16.648 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-09 18:59:16.649 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-09 18:59:16.650 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:59:16.651 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:59:16.651 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:59:16.652 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:59:16.652 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:59:16.653 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-09 18:59:16.654 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.6111ms
2026-02-09 18:59:16.654 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-09 18:59:16.655 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:59:16.656 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:16.656 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:16.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Санкт-Петербург/week - 200 null application/json; charset=utf-8 41.5957ms
2026-02-09 18:59:25.865 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 18:59:25.868 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0365ms - processed: 0 items - remaining: 1 items
2026-02-09 18:59:29.652 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - null null
2026-02-09 18:59:29.654 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-09 18:59:29.655 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-09 18:59:29.656 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:59:29.656 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:29.657 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:29.658 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:59:29.658 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 18:59:29.659 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:59:29.660 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:59:29.661 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:59:29.662 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:59:29.663 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:59:29.664 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:59:29.664 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:59:29.665 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:59:29.666 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:59:29.666 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:59:29.667 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:59:29.668 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:59:29.668 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:59:29.669 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:59:29.670 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:59:29.670 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-09 18:59:29.671 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-09 18:59:29.672 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 18:59:29.672 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-09 18:59:29.673 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-09 18:59:29.673 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-09 18:59:29.674 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 18:59:29.675 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-09 18:59:29.675 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:59:29.676 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:59:29.677 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-09 18:59:29.678 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-09 18:59:29.679 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:59:29.680 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:59:29.680 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:59:29.681 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:29.681 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:29.682 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:59:29.683 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:59:29.683 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:59:29.684 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 18:59:29.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-09 18:59:29.686 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:29.687 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 18:59:29.687 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:29.688 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:29.689 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:29.690 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:29.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:59:29.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:59:29.691 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:59:29.692 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 18:59:29.693 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-09 18:59:29.694 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:29.695 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 18:59:29.696 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:29.697 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:29.697 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:59:29.698 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:59:29.699 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:59:29.699 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:59:29.700 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:59:29.700 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-09 18:59:29.701 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 37.4678ms
2026-02-09 18:59:29.702 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-09 18:59:29.702 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:59:29.703 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:29.703 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:29.704 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-09&to=2026-02-09&page=1&pageSize=10 - 200 null application/json; charset=utf-8 52.1561ms
2026-02-09 18:59:35.882 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-09 18:59:35.883 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-09 18:59:38.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - null null
2026-02-09 18:59:38.877 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-09 18:59:38.878 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-09 18:59:38.879 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 18:59:38.879 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:38.880 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-09 18:59:38.880 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 18:59:38.881 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-09 18:59:38.882 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-09 18:59:38.883 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-09 18:59:38.884 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-09 18:59:38.885 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-09 18:59:38.886 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-09 18:59:38.886 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:59:38.887 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-09 18:59:38.888 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:59:38.889 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:59:38.890 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-09 18:59:38.890 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-09 18:59:38.891 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:59:38.892 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:59:38.892 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-09 18:59:38.893 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-09 18:59:38.894 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-09 18:59:38.894 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-09 18:59:38.895 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 18:59:38.896 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-09 18:59:38.897 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-09 18:59:38.898 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-09 18:59:38.899 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-09 18:59:38.900 +03:00 [DBG] Creating DbConnection.
2026-02-09 18:59:38.900 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-09 18:59:38.901 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:38.902 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:38.902 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-09 18:59:38.903 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-09 18:59:38.904 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-09 18:59:38.904 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 18:59:38.905 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-09 18:59:38.907 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:38.907 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-09 18:59:38.908 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-09 18:59:38.909 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:38.910 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-09 18:59:38.911 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-09 18:59:38.911 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-09 18:59:38.911 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-09 18:59:38.912 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-09 18:59:38.913 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-09 18:59:38.914 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 27.2643ms
2026-02-09 18:59:38.914 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-09 18:59:38.915 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-09 18:59:38.916 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-09 18:59:38.916 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-09 18:59:38.917 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-09&to=2026-02-09&limit=10 - 200 null application/json; charset=utf-8 42.0772ms
