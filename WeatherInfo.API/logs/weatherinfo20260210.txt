2026-02-10 12:13:44.176 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:13:44.258 +03:00 [DBG] Hosting starting
2026-02-10 12:13:44.415 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:13:44.418 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:13:44.420 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:13:44.422 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:13:44.424 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:13:44.425 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:13:44.450 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:13:44.451 +03:00 [INF] Hosting environment: Development
2026-02-10 12:13:44.452 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:13:44.452 +03:00 [DBG] Hosting started
2026-02-10 12:13:44.825 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" accepted.
2026-02-10 12:13:44.826 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" started.
2026-02-10 12:13:44.836 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" accepted.
2026-02-10 12:13:44.837 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" started.
2026-02-10 12:13:44.853 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" received FIN.
2026-02-10 12:13:44.853 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" received FIN.
2026-02-10 12:13:44.858 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:13:44.858 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:13:44.883 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" stopped.
2026-02-10 12:13:44.883 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" stopped.
2026-02-10 12:13:44.886 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:13:44.886 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:13:45.193 +03:00 [DBG] Connection id "0HNJ8GIOGFSL6" accepted.
2026-02-10 12:13:45.195 +03:00 [DBG] Connection id "0HNJ8GIOGFSL6" started.
2026-02-10 12:13:45.230 +03:00 [DBG] Connection 0HNJ8GIOGFSL6 established using the following protocol: "Tls13"
2026-02-10 12:13:45.274 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:13:45.364 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:13:45.378 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:13:45.380 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:13:45.383 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:13:45.415 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:13:45.416 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:13:45.426 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:13:45.427 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:13:45.428 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 158.5042ms
2026-02-10 12:13:45.449 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:13:45.457 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.5145ms
2026-02-10 12:13:45.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:13:45.512 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.1186ms
2026-02-10 12:13:45.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:13:45.572 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:13:45.572 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:13:45.573 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:13:45.579 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.5834ms
2026-02-10 12:14:03.914 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" accepted.
2026-02-10 12:14:03.915 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" received FIN.
2026-02-10 12:14:03.915 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" started.
2026-02-10 12:14:03.916 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" accepted.
2026-02-10 12:14:03.918 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:14:03.918 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" started.
2026-02-10 12:14:03.919 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" stopped.
2026-02-10 12:14:03.921 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:14:03.922 +03:00 [DBG] Connection 0HNJ8GIOGFSL8 established using the following protocol: "Tls13"
2026-02-10 12:14:03.926 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:14:03.929 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:14:03.931 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:14:03.933 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:03.935 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:03.936 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:03.938 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:03.951 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:14:03.953 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:14:03.954 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:14:03.955 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:14:03.956 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:14:03.957 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:14:03.959 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:04.025 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:14:04.030 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:04.041 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:14:04.043 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:14:04.044 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:04.045 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:04.046 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:14:04.051 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:14:04.052 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:04.057 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:04.058 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:04.058 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:04.072 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:14:04.077 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:14:04.366 +03:00 [INF] Received HTTP response headers after 286.6207ms - 200
2026-02-10 12:14:04.369 +03:00 [INF] End processing HTTP request after 297.4034ms - 200
2026-02-10 12:14:04.378 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:14:04.379 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:14:04.644 +03:00 [INF] Received HTTP response headers after 263.7836ms - 200
2026-02-10 12:14:04.645 +03:00 [INF] End processing HTTP request after 266.5827ms - 200
2026-02-10 12:14:04.901 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:14:04.919 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:04.946 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:04.949 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:04.954 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:04.963 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:14:04.999 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:14:05.004 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 12:14:05.006 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:05.019 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:05.023 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:14:05.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:14:05.029 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:14:05.034 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:05.051 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:05.059 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:14:05.063 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:05.067 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-10 12:14:05.070 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:05.073 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 12:14:05.078 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:05.079 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:14:05.087 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:14:05.090 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:14:05.090 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:14:05.091 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:14:05.092 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:14:05.093 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:14:05.104 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1144.0304ms
2026-02-10 12:14:05.105 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:05.106 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" completed keep alive response.
2026-02-10 12:14:05.108 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:14:05.110 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:05.111 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:14:05.112 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1186.9785ms
2026-02-10 12:14:07.448 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:14:07.450 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:14:07.451 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:14:07.453 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:07.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:07.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:07.455 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:07.456 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:14:07.458 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:14:07.458 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:14:07.459 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:14:07.461 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:14:07.461 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:14:07.462 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:07.464 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:07.465 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:14:07.466 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:14:07.467 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:07.467 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:07.468 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:14:07.469 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:14:07.470 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:07.471 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:07.472 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:07.472 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:07.500 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:14:07.502 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:07.503 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:07.504 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:07.504 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:07.505 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:14:07.506 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:14:07.506 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:14:07.507 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:07.508 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:07.509 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:14:07.509 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:14:07.510 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:14:07.511 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:07.512 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:07.513 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:14:07.514 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:07.516 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:14:07.517 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:07.518 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:14:07.519 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:07.520 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:14:07.521 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:14:07.522 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:14:07.523 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:14:07.523 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:14:07.524 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:14:07.525 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:14:07.526 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 63.6888ms
2026-02-10 12:14:07.527 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:07.528 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" completed keep alive response.
2026-02-10 12:14:07.528 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:14:07.529 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:07.530 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:14:07.531 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 83.2185ms
2026-02-10 12:16:04.077 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:16:14.086 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:14.089 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0485ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:24.093 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:24.094 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:34.111 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:34.112 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:36.735 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" accepted.
2026-02-10 12:16:36.736 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" received FIN.
2026-02-10 12:16:36.739 +03:00 [DBG] Connection id "0HNJ8GIOGFSLA" accepted.
2026-02-10 12:16:36.740 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" started.
2026-02-10 12:16:36.743 +03:00 [DBG] Connection id "0HNJ8GIOGFSLA" started.
2026-02-10 12:16:36.745 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:16:36.746 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" stopped.
2026-02-10 12:16:36.747 +03:00 [DBG] Connection 0HNJ8GIOGFSLA established using the following protocol: "Tls13"
2026-02-10 12:16:36.748 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:16:36.749 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0AAB0A6CA6E172F9CE63481B40CE079940A47FD34B6BA9F9476C4DE70E911DAADD - null null
2026-02-10 12:16:36.751 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:16:36.752 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:16:36.753 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:16:36.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:16:36.755 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:16:36.755 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:16:36.756 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:16:36.757 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:16:36.758 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:16:36.759 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:16:36.760 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:16:36.761 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:16:36.762 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:16:36.766 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:16:36.768 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:16:36.769 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:16:36.770 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:16:36.771 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:16:36.772 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:16:36.772 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:16:36.773 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:16:36.774 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:16:36.775 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:16:36.776 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:16:36.783 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:16:36.785 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:16:36.787 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:16:36.788 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:16:36.789 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:16:36.790 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:16:36.790 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:16:36.791 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:16:36.792 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:16:36.792 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:16:36.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:16:36.794 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:16:36.795 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:16:36.796 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:16:36.797 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:16:36.799 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:16:36.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:16:36.802 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 12:16:36.803 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:16:36.804 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:16:36.806 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:16:36.807 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:16:36.808 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:16:36.809 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:16:36.809 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:16:36.810 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:16:36.811 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:16:36.811 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:16:36.813 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 50.4397ms
2026-02-10 12:16:36.813 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:16:36.814 +03:00 [DBG] Connection id "0HNJ8GIOGFSLA" completed keep alive response.
2026-02-10 12:16:36.815 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:16:36.816 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:16:36.817 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:16:36.818 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0AAB0A6CA6E172F9CE63481B40CE079940A47FD34B6BA9F9476C4DE70E911DAADD - 200 null application/json; charset=utf-8 69.5949ms
2026-02-10 12:16:44.119 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:44.120 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:54.128 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:54.129 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:04.143 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:04.143 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:14.158 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:14.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:24.161 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:24.162 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:34.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:34.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:44.177 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:44.178 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:54.191 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:54.193 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:04.199 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:04.200 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:14.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:14.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:24.217 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:24.218 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0045ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:34.229 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:34.231 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6169ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:44.241 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:44.242 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:54.252 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:54.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:04.253 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:04.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:14.261 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:14.262 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:24.266 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:24.267 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:34.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:34.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:44.292 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:44.293 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:54.301 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:54.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:04.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:04.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:14.321 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:14.322 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:24.327 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:24.328 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:34.342 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:34.342 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:44.346 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:44.347 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:54.355 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:54.356 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:21:04.361 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:21:04.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0067ms - processed: 0 items - remaining: 1 items
2026-02-10 12:21:14.374 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:21:14.375 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 0 items - remaining: 1 items
2026-02-10 12:24:36.046 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:24:36.110 +03:00 [DBG] Hosting starting
2026-02-10 12:24:36.209 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:24:36.210 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:24:36.211 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:24:36.211 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:24:36.212 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:24:36.212 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:24:36.233 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:24:36.233 +03:00 [INF] Hosting environment: Development
2026-02-10 12:24:36.234 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:24:36.234 +03:00 [DBG] Hosting started
2026-02-10 12:24:36.325 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" received FIN.
2026-02-10 12:24:36.328 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" accepted.
2026-02-10 12:24:36.329 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" started.
2026-02-10 12:24:36.340 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:24:36.357 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" stopped.
2026-02-10 12:24:36.360 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:24:36.644 +03:00 [DBG] Connection id "0HNJ8GOQLM0KV" accepted.
2026-02-10 12:24:36.645 +03:00 [DBG] Connection id "0HNJ8GOQLM0KV" started.
2026-02-10 12:24:36.677 +03:00 [DBG] Connection 0HNJ8GOQLM0KV established using the following protocol: "Tls13"
2026-02-10 12:24:36.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:24:36.843 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:24:36.853 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:24:36.854 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:24:36.856 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:24:36.891 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:24:36.892 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:24:36.901 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:24:36.902 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:24:36.904 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 127.1353ms
2026-02-10 12:24:36.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:24:36.944 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.8423ms
2026-02-10 12:24:36.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:24:37.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.0551ms
2026-02-10 12:24:37.103 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:24:37.106 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:24:37.107 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:24:37.108 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:24:37.113 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.483ms
2026-02-10 12:24:42.882 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" received FIN.
2026-02-10 12:24:42.882 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" accepted.
2026-02-10 12:24:42.884 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" started.
2026-02-10 12:24:42.884 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" accepted.
2026-02-10 12:24:42.885 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:24:42.886 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" started.
2026-02-10 12:24:42.887 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" stopped.
2026-02-10 12:24:42.889 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:24:42.890 +03:00 [DBG] Connection 0HNJ8GOQLM0L1 established using the following protocol: "Tls13"
2026-02-10 12:24:42.894 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:24:42.898 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:24:42.900 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:24:42.901 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:42.902 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:42.903 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:42.906 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:42.919 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:24:42.921 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:24:42.922 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:24:42.923 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:24:42.925 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:24:42.926 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:24:42.927 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:42.987 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:24:42.994 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:43.004 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:24:43.006 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:24:43.007 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:43.008 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:43.009 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:24:43.012 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:24:43.013 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:43.018 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:43.018 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:43.020 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:43.034 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:24:43.040 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:24:43.333 +03:00 [INF] Received HTTP response headers after 289.9528ms - 200
2026-02-10 12:24:43.336 +03:00 [INF] End processing HTTP request after 302.4284ms - 200
2026-02-10 12:24:43.347 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:24:43.347 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:24:43.642 +03:00 [INF] Received HTTP response headers after 293.7659ms - 200
2026-02-10 12:24:43.643 +03:00 [INF] End processing HTTP request after 296.7726ms - 200
2026-02-10 12:24:43.870 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:24:43.886 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:43.911 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:43.914 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:43.916 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:43.923 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:24:43.957 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:24:43.963 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 12:24:43.966 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:43.973 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:43.977 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:24:43.981 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:24:43.985 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 12:24:43.990 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:44.004 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:44.012 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:24:44.018 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:44.021 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 12:24:44.024 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:44.027 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 12:24:44.032 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:44.035 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:24:44.043 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:24:44.045 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:24:44.045 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:24:44.046 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:24:44.047 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:24:44.048 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:24:44.057 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1129.6855ms
2026-02-10 12:24:44.059 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:44.060 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" completed keep alive response.
2026-02-10 12:24:44.062 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:24:44.065 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:44.067 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:24:44.068 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1174.5205ms
2026-02-10 12:24:52.599 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - null null
2026-02-10 12:24:52.602 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:24:52.602 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:24:52.604 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:52.604 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:52.605 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:52.605 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:52.606 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:24:52.608 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:24:52.609 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:24:52.610 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:24:52.612 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:24:52.613 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:24:52.614 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:52.616 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:52.617 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:24:52.618 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:24:52.619 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:52.620 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:52.621 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:24:52.622 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:24:52.623 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:52.624 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:52.625 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:52.626 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:52.652 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:24:52.654 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:52.656 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:52.657 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:52.658 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:52.659 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:24:52.660 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:24:52.661 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:24:52.662 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:52.663 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:52.663 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:24:52.664 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:24:52.665 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:24:52.666 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:52.667 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:52.669 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:24:52.670 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:52.671 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:24:52.672 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:52.674 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:24:52.675 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:52.676 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:24:52.678 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:24:52.679 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:24:52.679 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:24:52.680 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:24:52.680 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:24:52.681 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:24:52.682 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 68.2396ms
2026-02-10 12:24:52.683 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:52.684 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" completed keep alive response.
2026-02-10 12:24:52.685 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:24:52.686 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:52.687 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:24:52.688 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - 200 null application/json; charset=utf-8 89.0414ms
2026-02-10 12:26:06.013 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" received FIN.
2026-02-10 12:26:06.013 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" accepted.
2026-02-10 12:26:06.014 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" started.
2026-02-10 12:26:06.015 +03:00 [DBG] Connection id "0HNJ8GOQLM0L3" accepted.
2026-02-10 12:26:06.019 +03:00 [DBG] Connection id "0HNJ8GOQLM0L3" started.
2026-02-10 12:26:06.020 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:26:06.023 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" stopped.
2026-02-10 12:26:06.023 +03:00 [DBG] Connection 0HNJ8GOQLM0L3 established using the following protocol: "Tls13"
2026-02-10 12:26:06.024 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:26:06.025 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:26:06.027 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:26:06.028 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:26:06.029 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:26:06.030 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:26:06.030 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:26:06.031 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:26:06.031 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:26:06.032 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:26:06.033 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:26:06.034 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:26:06.035 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:26:06.036 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:26:06.037 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:26:06.041 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:26:06.042 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:26:06.043 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:26:06.044 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:26:06.045 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:26:06.046 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:26:06.047 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:26:06.048 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:26:06.049 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:26:06.049 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:26:06.050 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:26:06.056 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:26:06.058 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:26:06.059 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:26:06.060 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:26:06.061 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:26:06.061 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:26:06.062 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:26:06.062 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:26:06.063 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:26:06.063 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:26:06.064 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:26:06.065 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:26:06.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:26:06.066 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:26:06.067 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:26:06.068 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:26:06.069 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:26:06.070 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:26:06.071 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:26:06.072 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:26:06.073 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:26:06.074 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:26:06.074 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:26:06.076 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:26:06.076 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:26:06.076 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:26:06.077 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:26:06.077 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:26:06.078 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 41.6713ms
2026-02-10 12:26:06.079 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:26:06.079 +03:00 [DBG] Connection id "0HNJ8GOQLM0L3" completed keep alive response.
2026-02-10 12:26:06.080 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:26:06.081 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:26:06.081 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:26:06.082 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 57.8692ms
2026-02-10 12:26:43.047 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:26:53.053 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:26:53.055 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0331ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:03.065 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:03.066 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:13.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:13.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:23.090 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:23.091 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:24.835 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" accepted.
2026-02-10 12:27:24.836 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" received FIN.
2026-02-10 12:27:24.840 +03:00 [DBG] Connection id "0HNJ8GOQLM0L5" accepted.
2026-02-10 12:27:24.840 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" started.
2026-02-10 12:27:24.840 +03:00 [DBG] Connection id "0HNJ8GOQLM0L5" started.
2026-02-10 12:27:24.844 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:27:24.846 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" stopped.
2026-02-10 12:27:24.847 +03:00 [DBG] Connection 0HNJ8GOQLM0L5 established using the following protocol: "Tls13"
2026-02-10 12:27:24.848 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:27:24.848 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:27:24.852 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:27:24.853 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:27:24.854 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:27:24.854 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:27:24.854 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:27:24.855 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:27:24.855 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:27:24.856 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:27:24.857 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:27:24.858 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:27:24.859 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:27:24.859 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:27:24.860 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:27:24.861 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:27:24.862 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:27:24.862 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:27:24.863 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:27:24.864 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:27:24.865 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:27:24.865 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:27:24.866 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:27:24.866 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:27:24.867 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:27:24.868 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:27:24.869 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:27:24.870 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:24.870 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:24.871 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:27:24.872 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:27:24.872 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:27:24.873 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:27:24.873 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:27:24.874 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:27:24.875 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:27:24.875 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:27:24.876 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:27:24.877 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:27:24.877 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:27:24.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:27:24.879 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:27:24.881 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:27:24.882 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:27:24.883 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:27:24.883 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:27:24.884 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:24.885 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:27:24.886 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:27:24.887 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:27:24.887 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:27:24.888 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:27:24.888 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:27:24.889 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:27:24.889 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.2823ms
2026-02-10 12:27:24.890 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:27:24.891 +03:00 [DBG] Connection id "0HNJ8GOQLM0L5" completed keep alive response.
2026-02-10 12:27:24.891 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:27:24.892 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:27:24.893 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:27:24.894 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 45.7284ms
2026-02-10 12:27:33.102 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:33.104 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 1.0072ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:43.118 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:43.119 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:53.131 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:53.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:03.146 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:03.147 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:13.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:13.163 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:23.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:23.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:33.190 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:33.190 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:43.194 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:43.195 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:53.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:53.204 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5662ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:03.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:03.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:13.216 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:13.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:23.223 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:23.223 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:33.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:33.239 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:43.251 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:43.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:53.267 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:53.268 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:03.277 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:03.278 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:09.951 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" received FIN.
2026-02-10 12:30:09.954 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" accepted.
2026-02-10 12:30:09.955 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" started.
2026-02-10 12:30:09.955 +03:00 [DBG] Connection id "0HNJ8GOQLM0L7" accepted.
2026-02-10 12:30:09.958 +03:00 [DBG] Connection id "0HNJ8GOQLM0L7" started.
2026-02-10 12:30:09.959 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:30:09.961 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" stopped.
2026-02-10 12:30:09.962 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:30:09.962 +03:00 [DBG] Connection 0HNJ8GOQLM0L7 established using the following protocol: "Tls13"
2026-02-10 12:30:09.964 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:30:09.965 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:30:09.966 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:30:09.967 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:30:09.968 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:30:09.968 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:30:09.969 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:30:09.969 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:30:09.970 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:30:09.971 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:30:09.972 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:30:09.973 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:30:09.974 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:30:09.975 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:30:09.976 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:30:09.977 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:30:09.978 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:30:09.979 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:30:09.979 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:30:09.980 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:30:09.981 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:30:09.982 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:30:09.983 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:30:09.983 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:30:09.984 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:30:09.985 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:30:09.986 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:09.987 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:09.988 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:30:09.989 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:30:09.989 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:30:09.990 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:30:09.991 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:30:09.991 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:30:09.992 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:30:09.993 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:30:09.994 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:30:09.995 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:30:09.996 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:30:09.997 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:30:09.998 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:30:09.999 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:30:10.000 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:30:10.001 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:30:10.002 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:30:10.003 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:10.004 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:30:10.005 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:30:10.006 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:30:10.006 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:30:10.007 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:30:10.007 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:30:10.008 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:30:10.009 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.8194ms
2026-02-10 12:30:10.010 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:30:10.010 +03:00 [DBG] Connection id "0HNJ8GOQLM0L7" completed keep alive response.
2026-02-10 12:30:10.011 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:30:10.012 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:30:10.013 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:30:10.013 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 49.4712ms
2026-02-10 12:30:13.283 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:13.283 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:23.296 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:23.297 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:33.307 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:33.308 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:43.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:43.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:53.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:53.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:31:03.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:31:03.326 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:32:14.208 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:32:14.272 +03:00 [DBG] Hosting starting
2026-02-10 12:32:14.367 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:32:14.368 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:32:14.369 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:32:14.369 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:32:14.370 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:32:14.370 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:32:14.371 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" accepted.
2026-02-10 12:32:14.371 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" accepted.
2026-02-10 12:32:14.372 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" started.
2026-02-10 12:32:14.372 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" started.
2026-02-10 12:32:14.376 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" received FIN.
2026-02-10 12:32:14.376 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" received FIN.
2026-02-10 12:32:14.389 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:32:14.389 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:32:14.409 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" stopped.
2026-02-10 12:32:14.409 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" stopped.
2026-02-10 12:32:14.409 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:32:14.411 +03:00 [INF] Hosting environment: Development
2026-02-10 12:32:14.412 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:32:14.412 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:32:14.412 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:32:14.412 +03:00 [DBG] Hosting started
2026-02-10 12:32:14.554 +03:00 [DBG] Connection id "0HNJ8GT35UGO4" accepted.
2026-02-10 12:32:14.557 +03:00 [DBG] Connection id "0HNJ8GT35UGO4" started.
2026-02-10 12:32:14.590 +03:00 [DBG] Connection 0HNJ8GT35UGO4 established using the following protocol: "Tls13"
2026-02-10 12:32:14.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:32:14.681 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:32:14.690 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:32:14.691 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:32:14.694 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:32:14.720 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:32:14.721 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:32:14.730 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:32:14.731 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:32:14.733 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 112.8715ms
2026-02-10 12:32:14.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:32:14.763 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.7732ms
2026-02-10 12:32:14.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:32:14.811 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.9928ms
2026-02-10 12:32:14.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:32:14.877 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:32:14.878 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:32:14.879 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:32:14.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.2609ms
2026-02-10 12:32:18.735 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" accepted.
2026-02-10 12:32:18.735 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" received FIN.
2026-02-10 12:32:18.736 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" started.
2026-02-10 12:32:18.736 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" accepted.
2026-02-10 12:32:18.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:32:18.738 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" started.
2026-02-10 12:32:18.740 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" stopped.
2026-02-10 12:32:18.741 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:32:18.742 +03:00 [DBG] Connection 0HNJ8GT35UGO6 established using the following protocol: "Tls13"
2026-02-10 12:32:18.746 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:32:18.749 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:18.751 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:18.752 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:18.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:18.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:18.756 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:18.769 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:18.771 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:18.772 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:18.773 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:18.775 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:18.775 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:18.777 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:18.833 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:32:18.839 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:18.847 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:18.849 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:18.850 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:18.851 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:18.852 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:18.855 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:18.857 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:18.860 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:18.862 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:18.863 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:18.875 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:32:18.880 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:32:19.164 +03:00 [INF] Received HTTP response headers after 281.8122ms - 200
2026-02-10 12:32:19.167 +03:00 [INF] End processing HTTP request after 292.5355ms - 200
2026-02-10 12:32:19.176 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:32:19.177 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:32:19.440 +03:00 [INF] Received HTTP response headers after 262.4604ms - 200
2026-02-10 12:32:19.441 +03:00 [INF] End processing HTTP request after 265.1326ms - 200
2026-02-10 12:32:19.668 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:19.686 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:19.713 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:19.716 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:19.718 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:19.726 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:19.762 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:19.767 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 12:32:19.769 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:19.775 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:19.779 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:19.783 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:19.786 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 12:32:19.791 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:19.805 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:19.813 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:19.820 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:19.823 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 15ms reading results.
2026-02-10 12:32:19.826 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:19.828 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:32:19.834 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:19.836 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:19.842 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:19.844 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:19.844 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:19.845 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:19.846 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:19.847 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:19.856 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1077.9364ms
2026-02-10 12:32:19.857 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:19.858 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:19.860 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:19.862 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:19.864 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:32:19.865 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 1119.6594ms
2026-02-10 12:32:22.032 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:32:22.034 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:22.035 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:22.036 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:22.037 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:22.037 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:22.038 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:22.038 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:22.039 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:22.040 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:22.041 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:22.042 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:22.043 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:22.044 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:22.045 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:22.046 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:22.047 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:22.048 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:22.049 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:22.050 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:22.051 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:22.051 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:22.052 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:22.053 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:22.054 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:22.079 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:22.081 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:22.082 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:22.083 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:22.084 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:22.085 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:22.086 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:22.086 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:32:22.087 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:22.088 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:22.088 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:22.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:32:22.090 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:22.090 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:22.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:22.093 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:22.095 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:22.095 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:32:22.096 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:22.097 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:22.098 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:22.099 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:22.100 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:22.102 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:22.102 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:22.103 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:22.103 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:22.104 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:22.105 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 61.2642ms
2026-02-10 12:32:22.106 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:22.107 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:22.107 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:22.108 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:22.109 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:22.110 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 78.4941ms
2026-02-10 12:32:43.622 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - null null
2026-02-10 12:32:43.625 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:43.626 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:43.627 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:43.628 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:43.629 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:43.630 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:43.631 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:43.632 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:43.634 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:43.635 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:43.637 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:43.638 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:43.639 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:43.644 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:43.645 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:43.646 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:43.648 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:43.649 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:43.650 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:43.651 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:43.652 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:43.653 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:43.654 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:43.655 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:43.661 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:43.663 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:43.664 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:43.665 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:43.666 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:43.667 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:43.668 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:43.668 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:32:43.669 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:43.670 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:43.671 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:43.672 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:32:43.673 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:43.674 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:43.676 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:43.678 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:43.680 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:43.680 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:32:43.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:43.685 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:43.686 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:43.687 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:43.687 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:43.688 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:43.689 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:43.689 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:43.690 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:43.690 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:43.691 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 51.843ms
2026-02-10 12:32:43.692 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:43.693 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:43.693 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:43.694 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:43.694 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:43.695 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - 200 null application/json; charset=utf-8 72.8388ms
2026-02-10 12:32:44.821 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - null null
2026-02-10 12:32:44.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:44.823 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:44.824 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:44.824 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:44.825 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:44.825 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:44.826 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:44.827 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:44.827 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:44.828 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:44.829 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:44.830 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:44.831 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:44.832 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:44.833 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:44.833 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:44.834 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:44.835 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:44.835 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:44.836 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:44.837 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:44.838 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:44.839 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:44.840 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:44.841 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:44.843 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:44.844 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:44.845 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:44.846 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:44.847 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:44.848 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:44.848 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:32:44.849 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:44.850 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:44.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:44.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:32:44.852 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:44.853 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:44.855 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:44.857 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:44.858 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:44.859 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:32:44.860 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:44.861 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:44.862 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:44.863 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:44.864 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:44.866 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:44.867 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:44.867 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:44.868 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:44.869 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:44.870 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 38.9595ms
2026-02-10 12:32:44.871 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:44.872 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:44.872 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:44.873 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:44.874 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:44.875 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - 200 null application/json; charset=utf-8 54.555ms
2026-02-10 12:34:18.883 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:34:28.887 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:28.890 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0571ms - processed: 0 items - remaining: 1 items
2026-02-10 12:34:38.908 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:38.909 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:34:48.910 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:48.911 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2026-02-10 12:34:58.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:58.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:35:11.518 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:35:11.584 +03:00 [DBG] Hosting starting
2026-02-10 12:35:11.703 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:35:11.704 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:35:11.705 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:35:11.706 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:35:11.706 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:35:11.707 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:35:11.741 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:35:11.743 +03:00 [INF] Hosting environment: Development
2026-02-10 12:35:11.743 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:35:11.744 +03:00 [DBG] Hosting started
2026-02-10 12:35:11.770 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" received FIN.
2026-02-10 12:35:11.773 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" accepted.
2026-02-10 12:35:11.774 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" started.
2026-02-10 12:35:11.788 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:35:11.807 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" stopped.
2026-02-10 12:35:11.810 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:35:12.145 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" accepted.
2026-02-10 12:35:12.147 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" started.
2026-02-10 12:35:12.178 +03:00 [DBG] Connection 0HNJ8GUO1OERB established using the following protocol: "Tls13"
2026-02-10 12:35:12.209 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:35:12.265 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:35:12.274 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:35:12.275 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:35:12.278 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:35:12.304 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:35:12.305 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:35:12.319 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:35:12.320 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:35:12.322 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 115.9713ms
2026-02-10 12:35:12.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:35:12.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.776ms
2026-02-10 12:35:12.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:35:12.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.0056ms
2026-02-10 12:35:12.467 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:35:12.470 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:35:12.470 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:35:12.471 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:35:12.476 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.6425ms
2026-02-10 12:35:18.488 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" accepted.
2026-02-10 12:35:18.488 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" received FIN.
2026-02-10 12:35:18.489 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" started.
2026-02-10 12:35:18.489 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" accepted.
2026-02-10 12:35:18.490 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:35:18.491 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" started.
2026-02-10 12:35:18.492 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" stopped.
2026-02-10 12:35:18.493 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:35:18.495 +03:00 [DBG] Connection 0HNJ8GUO1OERD established using the following protocol: "Tls13"
2026-02-10 12:35:18.498 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:35:18.501 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:35:18.503 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:35:18.504 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:18.506 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:18.507 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:18.508 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:18.523 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:35:18.525 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:35:18.526 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:35:18.527 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:35:18.528 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:35:18.529 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:35:18.531 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:18.588 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:35:18.594 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:18.602 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:35:18.604 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:35:18.605 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:18.606 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:18.607 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:35:18.610 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:35:18.611 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:18.615 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:18.616 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:18.617 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:18.629 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:35:18.635 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:35:18.875 +03:00 [INF] Received HTTP response headers after 238.4041ms - 200
2026-02-10 12:35:18.878 +03:00 [INF] End processing HTTP request after 249.0879ms - 200
2026-02-10 12:35:18.887 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:35:18.889 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:35:19.168 +03:00 [INF] Received HTTP response headers after 278.1348ms - 200
2026-02-10 12:35:19.169 +03:00 [INF] End processing HTTP request after 281.8342ms - 200
2026-02-10 12:35:19.412 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:35:19.429 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:19.457 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:19.461 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:19.468 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:19.478 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:35:19.512 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:35:19.519 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 12:35:19.522 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:19.529 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:19.532 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:35:19.535 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:35:19.538 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:35:19.541 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:19.554 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:19.561 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:35:19.566 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:19.570 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-10 12:35:19.572 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:19.574 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 12:35:19.579 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:19.581 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:35:19.587 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:35:19.589 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:35:19.590 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:35:19.591 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:35:19.592 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:35:19.593 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:35:19.602 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1070.3913ms
2026-02-10 12:35:19.603 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:19.604 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" completed keep alive response.
2026-02-10 12:35:19.605 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:35:19.608 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:19.609 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:35:19.610 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1112.2544ms
2026-02-10 12:35:31.058 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:35:31.060 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:35:31.061 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:35:31.062 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:31.063 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:31.064 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:31.065 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:31.065 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:35:31.067 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:35:31.068 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:35:31.069 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:35:31.070 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:35:31.071 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:35:31.072 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:31.074 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:31.075 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:35:31.076 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:35:31.077 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:31.078 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:31.079 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:35:31.080 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:35:31.081 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:31.082 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:31.082 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:31.083 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:31.111 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:35:31.113 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:31.114 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:31.115 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:31.116 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:31.117 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:35:31.118 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:35:31.119 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:35:31.120 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:31.121 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:31.122 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:35:31.122 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:35:31.123 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:35:31.124 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:31.125 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:31.126 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:35:31.128 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:31.129 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:35:31.130 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:31.131 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:35:31.132 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:31.133 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:35:31.134 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:35:31.136 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:35:31.136 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:35:31.137 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:35:31.138 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:35:31.138 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:35:31.140 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 67.6024ms
2026-02-10 12:35:31.140 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:31.141 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" completed keep alive response.
2026-02-10 12:35:31.142 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:35:31.143 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:31.144 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:35:31.145 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 86.8975ms
2026-02-10 12:36:58.076 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" received FIN.
2026-02-10 12:36:58.077 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" accepted.
2026-02-10 12:36:58.078 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" started.
2026-02-10 12:36:58.078 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" accepted.
2026-02-10 12:36:58.082 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" started.
2026-02-10 12:36:58.082 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:36:58.084 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" stopped.
2026-02-10 12:36:58.086 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:36:58.086 +03:00 [DBG] Connection 0HNJ8GUO1OERF established using the following protocol: "Tls13"
2026-02-10 12:36:58.087 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:36:58.089 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:36:58.089 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:36:58.090 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:36:58.091 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:36:58.091 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:36:58.092 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:36:58.093 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:36:58.094 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:36:58.096 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:36:58.097 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:36:58.098 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:36:58.099 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:36:58.100 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:36:58.104 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:36:58.105 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:36:58.109 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:36:58.110 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:36:58.111 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:36:58.112 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:36:58.113 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:36:58.114 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:36:58.115 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:36:58.115 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:36:58.116 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:36:58.125 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:36:58.126 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:36:58.127 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:36:58.128 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:36:58.130 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:36:58.131 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:36:58.132 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:36:58.133 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:36:58.134 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:36:58.135 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:36:58.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:36:58.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:36:58.138 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:36:58.139 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:36:58.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:36:58.141 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:36:58.143 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:36:58.144 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:36:58.144 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:36:58.145 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:36:58.147 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:36:58.148 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:36:58.149 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:36:58.151 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:36:58.152 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:36:58.152 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:36:58.153 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:36:58.154 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:36:58.155 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 54.7583ms
2026-02-10 12:36:58.156 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:36:58.157 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" completed keep alive response.
2026-02-10 12:36:58.157 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:36:58.158 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:36:58.159 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:36:58.160 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 72.4005ms
2026-02-10 12:37:03.872 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match:=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:37:03.874 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:37:03.874 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:37:03.875 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:37:03.876 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:37:03.876 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:37:03.877 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:37:03.877 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:37:03.878 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:37:03.879 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:37:03.880 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:37:03.881 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:37:03.882 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:37:03.883 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:37:03.884 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:37:03.885 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:37:03.886 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:37:03.887 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:37:03.887 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:37:03.888 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:37:03.889 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:37:03.889 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:37:03.890 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:37:03.891 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:37:03.892 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:37:03.893 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:37:03.894 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:37:03.895 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:37:03.896 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:37:03.896 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:37:03.897 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:37:03.897 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:37:03.898 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:37:03.899 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:37:03.900 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:37:03.900 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:37:03.901 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:37:03.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:37:03.903 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:37:03.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:37:03.905 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:37:03.906 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:37:03.907 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:37:03.908 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:37:03.909 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:37:03.910 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:37:03.910 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:37:03.911 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:37:03.912 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:37:03.913 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:37:03.913 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:37:03.914 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:37:03.915 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:37:03.916 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.6346ms
2026-02-10 12:37:03.917 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:37:03.917 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" completed keep alive response.
2026-02-10 12:37:03.918 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:37:03.919 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:37:03.920 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:37:03.920 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match:=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 48.2101ms
2026-02-10 12:37:18.643 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:37:28.648 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:28.651 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:37:38.659 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:38.659 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:37:48.660 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:48.661 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-10 12:37:58.667 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:58.668 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:08.683 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:08.684 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:18.693 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:18.695 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5628ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:28.706 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:28.707 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:38.707 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:38.708 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:48.725 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:48.726 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:58.735 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:58.736 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:08.740 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:08.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:18.755 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:18.756 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:28.764 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:28.765 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.529ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:34.937 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" accepted.
2026-02-10 12:39:34.938 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" received FIN.
2026-02-10 12:39:34.938 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" started.
2026-02-10 12:39:34.941 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" accepted.
2026-02-10 12:39:34.945 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:39:34.945 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" started.
2026-02-10 12:39:34.947 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" stopped.
2026-02-10 12:39:34.948 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:39:34.949 +03:00 [DBG] Connection 0HNJ8GUO1OERH established using the following protocol: "Tls13"
2026-02-10 12:39:34.950 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:39:34.952 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:39:34.952 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:39:34.953 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:39:34.954 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:39:34.954 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:39:34.955 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:39:34.955 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:39:34.956 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:39:34.957 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:39:34.958 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:39:34.959 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:39:34.960 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:39:34.961 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:39:34.962 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:39:34.963 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:39:34.964 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:39:34.965 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:39:34.966 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:39:34.967 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:39:34.968 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:39:34.969 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:39:34.969 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:39:34.970 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:39:34.971 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:39:34.972 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:39:34.973 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:39:34.974 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:39:34.975 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:39:34.975 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:39:34.976 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:39:34.977 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:39:34.977 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:39:34.978 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:39:34.979 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:39:34.980 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:39:34.980 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:39:34.981 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:39:34.982 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:39:34.984 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:39:34.985 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:39:34.987 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:39:34.988 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:39:34.989 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:39:34.990 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:39:34.991 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:39:34.992 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:39:34.993 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:39:34.994 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.6942ms
2026-02-10 12:39:34.995 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:39:34.996 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" completed keep alive response.
2026-02-10 12:39:34.996 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:39:34.997 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:39:34.998 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:39:34.999 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 48.5489ms
2026-02-10 12:39:38.777 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:38.778 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:48.780 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:48.781 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:58.786 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:58.787 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:08.798 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:08.800 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:18.815 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:18.816 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:28.821 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:28.823 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:37.600 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" received FIN.
2026-02-10 12:40:37.603 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" accepted.
2026-02-10 12:40:37.604 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" started.
2026-02-10 12:40:37.604 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" accepted.
2026-02-10 12:40:37.606 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" started.
2026-02-10 12:40:37.608 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:40:37.610 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" stopped.
2026-02-10 12:40:37.611 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:40:37.611 +03:00 [DBG] Connection 0HNJ8GUO1OERJ established using the following protocol: "Tls13"
2026-02-10 12:40:37.613 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:37.614 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:37.615 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:37.615 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:37.616 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:37.616 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:37.617 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:37.618 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:37.619 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:37.620 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:37.620 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:37.622 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:37.622 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:37.623 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:37.624 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:37.625 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:37.626 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:37.627 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:37.627 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:37.628 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:37.629 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:37.630 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:37.630 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:37.631 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:37.632 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:37.633 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:37.634 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:37.635 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:37.636 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:37.637 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:37.637 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:37.638 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:37.638 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:37.639 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:37.640 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:37.641 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:37.641 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:37.642 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:37.643 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:37.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:37.645 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:37.646 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:37.647 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:37.648 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:37.649 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:37.650 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:37.651 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:37.652 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:40:37.653 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:40:37.654 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:40:37.654 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:40:37.655 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:40:37.656 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:40:37.656 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.2473ms
2026-02-10 12:40:37.657 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:37.658 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:37.659 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:37.659 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:37.660 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:37.661 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 48.4659ms
2026-02-10 12:40:38.841 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:38.841 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:39.299 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:39.301 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:39.301 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:39.302 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:39.303 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:39.303 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:39.304 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:39.304 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:39.305 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:39.306 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:39.307 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:39.308 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:39.309 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:39.310 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:39.311 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:39.312 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:39.313 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:39.314 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:39.314 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:39.315 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:39.316 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:39.316 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:39.317 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:39.318 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:39.319 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:39.320 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:39.321 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:39.322 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:39.322 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:39.323 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:39.324 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:39.324 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:39.325 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:39.326 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:39.326 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:39.327 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:39.328 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:39.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:39.329 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:39.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:39.331 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:39.333 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:39.333 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:39.334 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:39.335 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:39.336 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:39.337 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:39.338 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:40:39.339 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:40:39.340 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:40:39.340 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:40:39.341 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:40:39.341 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:40:39.342 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.0394ms
2026-02-10 12:40:39.343 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:39.344 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:39.345 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:39.345 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:39.346 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:39.347 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 47.5632ms
2026-02-10 12:40:42.742 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:42.743 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:42.744 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:42.745 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:42.745 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:42.746 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:42.746 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:42.747 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:42.748 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:42.749 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:42.750 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:42.751 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:42.752 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:42.753 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:42.753 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:42.754 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:42.755 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:42.756 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:42.757 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:42.757 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:42.758 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:42.759 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:42.760 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:42.760 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:42.761 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:42.762 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:42.763 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:42.764 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:42.765 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:42.766 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:42.766 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:42.767 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:42.768 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:42.768 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:42.769 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:42.770 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:42.770 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:42.771 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:42.772 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:42.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:42.774 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:42.776 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:42.776 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:42.777 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:42.778 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:40:42.779 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:42.780 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:42.781 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:40:42.782 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.955ms
2026-02-10 12:40:42.782 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:42.783 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:42.783 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:42.784 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:42.785 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:42.786 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 43.8135ms
2026-02-10 12:40:44.028 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:44.029 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:44.030 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:44.031 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:44.031 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:44.032 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:44.032 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:44.033 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:44.034 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:44.035 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:44.036 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:44.037 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:44.038 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:44.039 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:44.039 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:44.040 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:44.041 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:44.042 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:44.043 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:44.043 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:44.044 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:44.045 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:44.045 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:44.046 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:44.047 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:44.048 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:44.049 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:44.050 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:44.051 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:44.051 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:44.052 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:44.053 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:44.053 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:44.054 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:44.054 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:44.055 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:44.056 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:44.056 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:44.057 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:44.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:44.059 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:44.061 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:44.062 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:44.062 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:44.063 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:44.064 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:44.066 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:44.067 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:40:44.067 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.8545ms
2026-02-10 12:40:44.068 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:44.069 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:44.070 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:44.070 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:44.071 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:44.072 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 44.6269ms
2026-02-10 12:40:48.845 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:48.846 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:58.850 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:58.851 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:06.147 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" received FIN.
2026-02-10 12:41:06.151 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" is closed. The last processed stream ID was 7.
2026-02-10 12:41:06.152 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:06.152 +03:00 [DBG] The connection queue processing loop for 0HNJ8GUO1OERB completed.
2026-02-10 12:41:06.156 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" stopped.
2026-02-10 12:41:08.866 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:08.867 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:18.884 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:18.885 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:28.892 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:28.892 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:35.097 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:41:35.101 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:41:35.101 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:41:35.102 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:35.103 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:35.104 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:35.104 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:35.105 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:41:35.105 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:41:35.106 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:41:35.107 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:41:35.108 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:41:35.109 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:41:35.109 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:35.110 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:35.111 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:41:35.112 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:41:35.112 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:35.113 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:35.114 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:41:35.114 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:41:35.115 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:35.116 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:35.116 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:35.117 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:35.118 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:41:35.119 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:35.120 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:35.121 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:35.122 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:35.122 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:41:35.123 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:41:35.124 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:41:35.124 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:35.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:35.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:41:35.126 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:41:35.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:41:35.128 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:35.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:35.130 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:41:35.131 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:35.132 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:41:35.135 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:35.136 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:35.137 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:35.138 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:41:35.138 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:41:35.139 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:41:35.140 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:41:35.140 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:41:35.141 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:41:35.141 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:41:35.142 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.5209ms
2026-02-10 12:41:35.143 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:35.143 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:41:35.144 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:41:35.144 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:35.145 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:35.146 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 49.4597ms
2026-02-10 12:41:38.906 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:38.907 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:39.913 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:41:39.914 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:41:39.915 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:41:39.916 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:39.916 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:39.917 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:39.917 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:39.918 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:41:39.919 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:41:39.920 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:41:39.921 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:41:39.922 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:41:39.923 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:41:39.924 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:39.924 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:39.925 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:41:39.926 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:41:39.927 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:39.928 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:39.929 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:41:39.929 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:41:39.930 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:39.931 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:39.931 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:39.932 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:39.933 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:41:39.934 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:39.935 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:39.936 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:39.937 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:39.937 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:41:39.938 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:41:39.939 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:41:39.939 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:39.940 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:39.941 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:41:39.941 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:41:39.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:41:39.943 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:39.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:39.945 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:41:39.946 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:39.947 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:41:39.948 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:39.949 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:39.950 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:39.951 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:41:39.952 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:41:39.952 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.7962ms
2026-02-10 12:41:39.953 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:39.954 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:41:39.954 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:41:39.955 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:39.956 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:39.957 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 44.2945ms
2026-02-10 12:41:48.915 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:48.916 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:52.629 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" received FIN.
2026-02-10 12:41:52.630 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" received FIN.
2026-02-10 12:41:52.633 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" disconnecting.
2026-02-10 12:41:52.629 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" received FIN.
2026-02-10 12:41:52.629 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" received FIN.
2026-02-10 12:41:52.634 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" disconnecting.
2026-02-10 12:41:52.635 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" stopped.
2026-02-10 12:41:52.637 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" disconnecting.
2026-02-10 12:41:52.652 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.651 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.656 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" disconnecting.
2026-02-10 12:41:52.652 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.660 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" stopped.
2026-02-10 12:41:52.661 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" stopped.
2026-02-10 12:41:52.657 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.676 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" stopped.
2026-02-10 12:49:37.646 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:49:37.712 +03:00 [DBG] Hosting starting
2026-02-10 12:49:37.805 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:49:37.806 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:49:37.807 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:49:37.807 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:49:37.808 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:49:37.808 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:49:37.830 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:49:37.831 +03:00 [INF] Hosting environment: Development
2026-02-10 12:49:37.831 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:49:37.832 +03:00 [DBG] Hosting started
2026-02-10 12:49:37.931 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" accepted.
2026-02-10 12:49:37.931 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" accepted.
2026-02-10 12:49:37.932 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" started.
2026-02-10 12:49:37.933 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" started.
2026-02-10 12:49:37.950 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" received FIN.
2026-02-10 12:49:37.950 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" received FIN.
2026-02-10 12:49:37.954 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:49:37.954 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:49:37.971 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" stopped.
2026-02-10 12:49:37.971 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" stopped.
2026-02-10 12:49:37.974 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:49:37.974 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:49:38.250 +03:00 [DBG] Connection id "0HNJ8H6Q63TI3" accepted.
2026-02-10 12:49:38.253 +03:00 [DBG] Connection id "0HNJ8H6Q63TI3" started.
2026-02-10 12:49:38.280 +03:00 [DBG] Connection 0HNJ8H6Q63TI3 established using the following protocol: "Tls13"
2026-02-10 12:49:38.307 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:49:38.366 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:49:38.382 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:49:38.383 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:49:38.386 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:49:38.422 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:49:38.424 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:49:38.433 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:49:38.434 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:49:38.436 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 131.2897ms
2026-02-10 12:49:38.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:49:38.479 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 15.5836ms
2026-02-10 12:49:38.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:49:38.520 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.6094ms
2026-02-10 12:49:38.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:49:38.574 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:49:38.575 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:49:38.576 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:49:38.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.4931ms
2026-02-10 12:49:48.588 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" accepted.
2026-02-10 12:49:48.589 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" received FIN.
2026-02-10 12:49:48.589 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" started.
2026-02-10 12:49:48.589 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" accepted.
2026-02-10 12:49:48.594 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:49:48.594 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" started.
2026-02-10 12:49:48.596 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" stopped.
2026-02-10 12:49:48.597 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:49:48.599 +03:00 [DBG] Connection 0HNJ8H6Q63TI5 established using the following protocol: "Tls13"
2026-02-10 12:49:48.602 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:49:48.606 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:49:48.608 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:49:48.609 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:49:48.611 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:49:48.612 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:49:48.614 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:49:48.627 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:49:48.629 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:49:48.630 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:49:48.631 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:49:48.632 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:49:48.633 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:49:48.634 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:49:48.690 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:49:48.696 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:49:48.702 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:49:48.704 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:49:48.705 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:49:48.706 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:49:48.707 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:49:48.711 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:49:48.725 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 12:49:48.731 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 12:49:49.028 +03:00 [INF] Received HTTP response headers after 294.6443ms - 200
2026-02-10 12:49:49.030 +03:00 [INF] End processing HTTP request after 305.8226ms - 200
2026-02-10 12:49:49.039 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 12:49:49.040 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 12:49:49.306 +03:00 [INF] Received HTTP response headers after 265.0063ms - 200
2026-02-10 12:49:49.308 +03:00 [INF] End processing HTTP request after 268.5107ms - 200
2026-02-10 12:49:49.540 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:49:49.557 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:49:49.583 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:49:49.585 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:49:49.588 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:49:49.595 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:49:49.627 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:49:49.631 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 12:49:49.633 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:49:49.639 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:49:49.643 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:49:49.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:49:49.648 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:49:49.652 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:49:49.665 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:49:49.672 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:49:49.677 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:49:49.681 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 12:49:49.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:49:49.685 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:49:49.691 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:49:49.692 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:49:49.699 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:49:49.701 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:49:49.702 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:49:49.702 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:49:49.703 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:49:49.704 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 12:49:49.713 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1077.6704ms
2026-02-10 12:49:49.714 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:49:49.715 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:49:49.717 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:49:49.719 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:49:49.721 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:49:49.722 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 1119.8179ms
2026-02-10 12:50:20.132 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:50:20.134 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:20.135 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:20.136 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:20.136 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:20.137 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:20.138 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:20.138 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:50:20.140 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:50:20.140 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:50:20.141 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:50:20.143 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:50:20.144 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:50:20.145 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:20.147 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:20.148 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:50:20.149 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:50:20.150 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:20.150 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:20.151 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:50:20.152 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:50:20.181 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:50:20.183 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:20.184 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:20.185 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:20.186 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:20.186 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:50:20.188 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:50:20.188 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:50:20.189 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:20.190 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:20.191 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:50:20.192 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:50:20.193 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:50:20.194 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:20.195 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:20.196 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:50:20.198 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:20.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-10 12:50:20.203 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:20.203 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:20.204 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:20.206 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:50:20.207 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:50:20.208 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 62.7947ms
2026-02-10 12:50:20.209 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:20.210 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:50:20.210 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:50:20.211 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:20.212 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:20.213 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 304 null null 81.0678ms
2026-02-10 12:50:57.278 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:50:57.280 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:57.280 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:57.281 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:57.282 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:57.282 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:57.283 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:57.284 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:50:57.284 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:50:57.285 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:50:57.286 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:50:57.287 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:50:57.288 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:50:57.289 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:57.292 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:57.293 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:50:57.294 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:50:57.295 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:57.295 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:57.296 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:50:57.297 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:50:57.304 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:50:57.305 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:57.306 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:57.307 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:57.308 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:57.309 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:50:57.310 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:50:57.310 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:50:57.311 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:57.312 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:57.312 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:50:57.313 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:50:57.314 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:50:57.314 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:57.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:57.317 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:50:57.318 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:57.319 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:50:57.322 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:57.323 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:57.324 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:57.325 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:50:57.326 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:50:57.327 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:50:57.328 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:50:57.328 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:50:57.329 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:50:57.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 12:50:57.330 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 41.7006ms
2026-02-10 12:50:57.331 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:57.332 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:50:57.332 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:50:57.333 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:57.334 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:57.335 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 56.4265ms
2026-02-10 12:50:58.622 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:50:58.623 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:58.624 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:58.625 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:58.625 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:58.626 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:58.626 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:58.627 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:50:58.628 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:50:58.628 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:50:58.629 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:50:58.630 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:50:58.631 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:50:58.632 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:58.633 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:58.634 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:50:58.634 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:50:58.635 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:58.636 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:58.637 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:50:58.637 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:50:58.638 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:50:58.639 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:58.640 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:58.641 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:58.641 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:58.642 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:50:58.643 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:50:58.643 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:50:58.644 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:58.644 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:58.645 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:50:58.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:50:58.646 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:50:58.647 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:58.648 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:58.650 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:50:58.651 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:58.652 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:50:58.653 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:58.653 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:58.654 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:58.655 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:50:58.656 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:50:58.657 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:50:58.657 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:50:58.658 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:50:58.658 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:50:58.659 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 12:50:58.660 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.8072ms
2026-02-10 12:50:58.661 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:58.661 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:50:58.662 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:50:58.663 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:58.664 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:50:58.664 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 42.896ms
2026-02-10 12:51:03.049 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:51:03.051 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:51:03.051 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:51:03.052 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:51:03.053 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:03.053 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:03.054 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:51:03.054 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:51:03.055 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:51:03.056 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:51:03.057 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:51:03.058 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:51:03.059 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:51:03.060 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:03.061 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:03.061 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:51:03.062 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:51:03.063 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:03.064 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:03.064 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:51:03.065 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:51:03.066 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:51:03.067 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:03.068 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:03.069 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:03.070 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:03.070 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:51:03.071 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:51:03.071 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:51:03.072 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:03.073 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:03.073 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:51:03.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:51:03.075 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:51:03.076 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:03.077 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:03.078 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:51:03.080 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:03.081 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:51:03.081 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:03.082 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:03.083 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:03.084 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:51:03.085 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:51:03.086 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 26.128ms
2026-02-10 12:51:03.086 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:51:03.087 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:51:03.088 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:51:03.088 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:03.089 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:03.090 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 304 null null 40.7389ms
2026-02-10 12:51:05.695 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:51:05.697 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:51:05.697 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:51:05.698 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:51:05.699 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:05.699 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:05.700 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:51:05.703 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:51:05.704 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:51:05.705 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:51:05.706 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:51:05.707 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:51:05.708 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:51:05.709 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:05.710 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:05.713 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:51:05.714 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:51:05.714 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:05.715 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:05.716 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:51:05.717 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:51:05.718 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:51:05.720 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:51:05.721 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:51:05.722 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:51:05.724 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:51:05.725 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:51:05.951 +03:00 [INF] Received HTTP response headers after 225.4316ms - 200
2026-02-10 12:51:05.952 +03:00 [INF] End processing HTTP request after 227.9205ms - 200
2026-02-10 12:51:05.954 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:51:05.954 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:51:06.169 +03:00 [INF] Received HTTP response headers after 214.2595ms - 200
2026-02-10 12:51:06.170 +03:00 [INF] End processing HTTP request after 216.5163ms - 200
2026-02-10 12:51:06.172 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:51:06.173 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:06.174 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:06.175 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:06.176 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:06.176 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:51:06.177 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:51:06.177 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:51:06.178 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:06.179 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:06.180 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:51:06.180 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:51:06.181 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:51:06.182 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:06.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:06.184 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:51:06.185 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:06.186 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:51:06.187 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:06.187 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:06.188 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:06.189 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:51:06.190 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:51:06.191 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 481.7153ms
2026-02-10 12:51:06.192 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:51:06.192 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:51:06.193 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:51:06.194 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:06.194 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:06.195 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 500.1311ms
2026-02-10 12:51:27.534 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" received FIN.
2026-02-10 12:51:27.535 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:51:27.536 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" disconnecting.
2026-02-10 12:51:27.551 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" stopped.
2026-02-10 14:06:10.470 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 14:06:10.570 +03:00 [DBG] Hosting starting
2026-02-10 14:06:10.707 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 14:06:10.708 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 14:06:10.708 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 14:06:10.709 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 14:06:10.709 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 14:06:10.710 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 14:06:10.732 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 14:06:10.733 +03:00 [INF] Hosting environment: Development
2026-02-10 14:06:10.734 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 14:06:10.734 +03:00 [DBG] Hosting started
2026-02-10 14:06:10.944 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLK" received FIN.
2026-02-10 14:06:10.947 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLK" accepted.
2026-02-10 14:06:10.948 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLK" started.
2026-02-10 14:06:10.963 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:06:10.997 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLK" stopped.
2026-02-10 14:06:11.000 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:06:11.155 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLL" accepted.
2026-02-10 14:06:11.158 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLL" started.
2026-02-10 14:06:11.194 +03:00 [DBG] Connection 0HNJ8IHJ0FVLL established using the following protocol: "Tls13"
2026-02-10 14:06:11.229 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 14:06:11.312 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 14:06:11.324 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 14:06:11.325 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:06:11.328 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:06:11.356 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 14:06:11.357 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 14:06:11.366 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 14:06:11.367 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 14:06:11.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 142.1602ms
2026-02-10 14:06:11.396 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 14:06:11.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.8188ms
2026-02-10 14:06:11.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 14:06:11.505 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.3299ms
2026-02-10 14:06:11.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 14:06:11.539 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 14:06:11.540 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:06:11.541 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:06:11.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.1199ms
2026-02-10 14:06:25.473 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLM" accepted.
2026-02-10 14:06:25.474 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLM" received FIN.
2026-02-10 14:06:25.474 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLN" accepted.
2026-02-10 14:06:25.474 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLM" started.
2026-02-10 14:06:25.478 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLN" started.
2026-02-10 14:06:25.480 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:06:25.482 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLM" stopped.
2026-02-10 14:06:25.483 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:06:25.483 +03:00 [DBG] Connection 0HNJ8IHJ0FVLN established using the following protocol: "Tls13"
2026-02-10 14:06:25.488 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:06:25.491 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:06:25.493 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:06:25.494 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:06:25.496 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:06:25.497 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:06:25.499 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:06:25.514 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:06:25.516 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:06:25.517 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:06:25.518 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:06:25.520 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:06:25.521 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:06:25.522 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:06:25.607 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 14:06:25.614 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:06:25.625 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:06:25.628 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:06:25.629 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:06:25.631 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:06:25.632 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:06:25.635 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:06:25.637 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:06:25.643 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:06:25.644 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:06:25.645 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:06:25.660 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:06:25.668 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:06:26.001 +03:00 [INF] Received HTTP response headers after 330.6793ms - 200
2026-02-10 14:06:26.004 +03:00 [INF] End processing HTTP request after 344.7137ms - 200
2026-02-10 14:06:26.015 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:06:26.016 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:06:26.327 +03:00 [INF] Received HTTP response headers after 310.1718ms - 200
2026-02-10 14:06:26.328 +03:00 [INF] End processing HTTP request after 313.2689ms - 200
2026-02-10 14:06:26.581 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:06:26.597 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:06:26.624 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:06:26.628 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:06:26.630 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:06:26.638 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:06:26.673 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:06:26.678 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 14:06:26.680 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:06:26.692 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:06:26.696 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:06:26.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 14:06:26.702 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 14:06:26.706 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:06:26.723 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:06:26.734 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:06:26.744 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:06:26.747 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 20ms reading results.
2026-02-10 14:06:26.750 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:06:26.752 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 14:06:26.757 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:06:26.759 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:06:26.766 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:06:26.768 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:06:26.768 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:06:26.769 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:06:26.770 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:06:26.770 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:06:26.778 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1255.6986ms
2026-02-10 14:06:26.780 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:06:26.781 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLN" completed keep alive response.
2026-02-10 14:06:26.783 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:06:26.786 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:06:26.787 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:06:26.788 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1300.7216ms
2026-02-10 14:06:44.824 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:06:44.826 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:06:44.827 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:06:44.828 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:06:44.828 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:06:44.829 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:06:44.830 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:06:44.830 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:06:44.831 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:06:44.832 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:06:44.833 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:06:44.835 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:06:44.835 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:06:44.836 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:06:44.838 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:06:44.839 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:06:44.840 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:06:44.841 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:06:44.841 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:06:44.842 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:06:44.843 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:06:44.844 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:06:44.844 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:06:44.845 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:06:44.846 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:06:44.874 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:06:44.875 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:06:44.876 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:06:44.877 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:06:44.878 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:06:44.879 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:06:44.880 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:06:44.880 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 14:06:44.881 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:06:44.882 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:06:44.883 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:06:44.883 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 14:06:44.884 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:06:44.885 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:06:44.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:06:44.887 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:06:44.890 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:06:44.890 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 14:06:44.891 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:06:44.892 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:06:44.893 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:06:44.894 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:06:44.895 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:06:44.897 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:06:44.897 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:06:44.897 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:06:44.898 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:06:44.899 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:06:44.900 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 63.52ms
2026-02-10 14:06:44.901 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:06:44.901 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLN" completed keep alive response.
2026-02-10 14:06:44.902 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:06:44.902 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:06:44.903 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:06:44.904 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 80.2374ms
2026-02-10 14:08:18.374 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLL" received FIN.
2026-02-10 14:08:18.379 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLL" is closed. The last processed stream ID was 7.
2026-02-10 14:08:18.380 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:08:18.381 +03:00 [DBG] The connection queue processing loop for 0HNJ8IHJ0FVLL completed.
2026-02-10 14:08:18.386 +03:00 [DBG] Connection id "0HNJ8IHJ0FVLL" stopped.
2026-02-10 14:08:25.666 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 14:08:35.672 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:08:35.674 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0395ms - processed: 0 items - remaining: 1 items
2026-02-10 14:08:45.681 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:08:45.682 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-10 14:08:55.693 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:08:55.695 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6839ms - processed: 0 items - remaining: 1 items
2026-02-10 14:09:05.701 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:09:05.701 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 14:09:15.717 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:09:15.718 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 14:09:25.724 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:09:25.725 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 14:41:35.172 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 14:41:35.244 +03:00 [DBG] Hosting starting
2026-02-10 14:41:35.377 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 14:41:35.378 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 14:41:35.379 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 14:41:35.379 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 14:41:35.380 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 14:41:35.380 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 14:41:35.403 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 14:41:35.404 +03:00 [INF] Hosting environment: Development
2026-02-10 14:41:35.404 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 14:41:35.405 +03:00 [DBG] Hosting started
2026-02-10 14:41:35.437 +03:00 [DBG] Connection id "0HNJ8J5C57SLQ" accepted.
2026-02-10 14:41:35.438 +03:00 [DBG] Connection id "0HNJ8J5C57SLQ" started.
2026-02-10 14:41:35.452 +03:00 [DBG] Connection id "0HNJ8J5C57SLR" received FIN.
2026-02-10 14:41:35.452 +03:00 [DBG] Connection id "0HNJ8J5C57SLQ" received FIN.
2026-02-10 14:41:35.453 +03:00 [DBG] Connection id "0HNJ8J5C57SLR" accepted.
2026-02-10 14:41:35.454 +03:00 [DBG] Connection id "0HNJ8J5C57SLR" started.
2026-02-10 14:41:35.458 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:41:35.458 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:41:35.478 +03:00 [DBG] Connection id "0HNJ8J5C57SLR" stopped.
2026-02-10 14:41:35.478 +03:00 [DBG] Connection id "0HNJ8J5C57SLQ" stopped.
2026-02-10 14:41:35.481 +03:00 [DBG] Connection id "0HNJ8J5C57SLQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:41:35.481 +03:00 [DBG] Connection id "0HNJ8J5C57SLR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:41:35.655 +03:00 [DBG] Connection id "0HNJ8J5C57SLS" accepted.
2026-02-10 14:41:35.656 +03:00 [DBG] Connection id "0HNJ8J5C57SLS" started.
2026-02-10 14:41:35.683 +03:00 [DBG] Connection 0HNJ8J5C57SLS established using the following protocol: "Tls13"
2026-02-10 14:41:35.715 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 14:41:35.777 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 14:41:35.788 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 14:41:35.789 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:41:35.793 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:41:35.825 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 14:41:35.827 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 14:41:35.837 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 14:41:35.838 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 14:41:35.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 127.7233ms
2026-02-10 14:41:35.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 14:41:35.879 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 11.5531ms
2026-02-10 14:41:35.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 14:41:35.925 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.6037ms
2026-02-10 14:41:35.995 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 14:41:35.998 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 14:41:35.998 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:41:35.999 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:41:36.004 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.1254ms
2026-02-10 14:41:46.895 +03:00 [DBG] Connection id "0HNJ8J5C57SLT" accepted.
2026-02-10 14:41:46.895 +03:00 [DBG] Connection id "0HNJ8J5C57SLT" received FIN.
2026-02-10 14:41:46.896 +03:00 [DBG] Connection id "0HNJ8J5C57SLT" started.
2026-02-10 14:41:46.896 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" accepted.
2026-02-10 14:41:46.898 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:41:46.898 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" started.
2026-02-10 14:41:46.900 +03:00 [DBG] Connection id "0HNJ8J5C57SLT" stopped.
2026-02-10 14:41:46.900 +03:00 [DBG] Connection id "0HNJ8J5C57SLT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:41:46.902 +03:00 [DBG] Connection 0HNJ8J5C57SLU established using the following protocol: "Tls13"
2026-02-10 14:41:46.905 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:41:46.908 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:41:46.910 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:41:46.911 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:41:46.913 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:41:46.914 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:41:46.915 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:41:46.928 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:41:46.930 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:41:46.931 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:41:46.932 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:41:46.933 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:41:46.934 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:41:46.935 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:41:46.995 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 14:41:47.000 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:41:47.008 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:41:47.010 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:41:47.012 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:41:47.012 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:41:47.013 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:41:47.017 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:41:47.018 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:41:47.022 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:41:47.023 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:41:47.024 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:41:47.036 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:41:47.042 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:41:47.368 +03:00 [INF] Received HTTP response headers after 324.5084ms - 200
2026-02-10 14:41:47.371 +03:00 [INF] End processing HTTP request after 335.9902ms - 200
2026-02-10 14:41:47.382 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:41:47.383 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:41:47.680 +03:00 [INF] Received HTTP response headers after 296.0305ms - 200
2026-02-10 14:41:47.681 +03:00 [INF] End processing HTTP request after 299.1014ms - 200
2026-02-10 14:41:47.907 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:41:47.924 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:41:47.951 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:41:47.954 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:41:47.957 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:41:47.965 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:41:48.000 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:41:48.007 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 14:41:48.009 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:41:48.017 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:41:48.023 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:41:48.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 14:41:48.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 14:41:48.034 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:41:48.047 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:41:48.055 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:41:48.060 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:41:48.064 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 14:41:48.066 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:41:48.068 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:41:48.074 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:41:48.076 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:41:48.082 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:41:48.084 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:41:48.085 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:41:48.085 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:41:48.087 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:41:48.087 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:41:48.097 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1160.7045ms
2026-02-10 14:41:48.098 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:41:48.099 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" completed keep alive response.
2026-02-10 14:41:48.101 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:41:48.103 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:41:48.105 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:41:48.106 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1200.816ms
2026-02-10 14:42:08.716 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-10 14:42:08.718 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-10 14:42:08.719 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-10 14:42:08.720 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:08.721 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:42:08.721 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:42:08.722 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:08.723 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:42:08.724 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:42:08.725 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:42:08.726 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:42:08.727 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:42:08.728 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:42:08.728 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:42:08.730 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:42:08.731 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:42:08.731 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:42:08.732 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:42:08.733 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:42:08.733 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:42:08.734 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:42:08.735 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:42:08.735 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:42:08.736 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:42:08.737 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:42:08.738 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 14:42:08.739 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 14:42:08.801 +03:00 [INF] Received HTTP response headers after 61.0624ms - 200
2026-02-10 14:42:08.801 +03:00 [INF] End processing HTTP request after 63.1824ms - 200
2026-02-10 14:42:08.803 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 14:42:08.913 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 184.9779ms
2026-02-10 14:42:08.915 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:08.955 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 63
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 183
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 59
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 14:42:08.968 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" completed keep alive response.
2026-02-10 14:42:08.969 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 252.9535ms
2026-02-10 14:42:20.798 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:42:20.800 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:42:20.800 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:42:20.801 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:20.802 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:42:20.802 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:42:20.803 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:20.804 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:42:20.804 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:42:20.805 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:42:20.806 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:42:20.807 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:42:20.808 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:42:20.809 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:42:20.813 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:42:20.814 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:42:20.814 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:42:20.815 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:42:20.816 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:42:20.816 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:42:20.817 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:42:20.818 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:42:20.818 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:42:20.819 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:42:20.820 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:42:20.850 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:42:20.852 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:42:20.853 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:42:20.854 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:42:20.855 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:42:20.856 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:42:20.857 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:42:20.858 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 14:42:20.858 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:42:20.859 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:42:20.860 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:42:20.861 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 14:42:20.862 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:42:20.863 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:42:20.864 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:42:20.865 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:42:20.868 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:42:20.872 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 6ms reading results.
2026-02-10 14:42:20.873 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:42:20.874 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:42:20.876 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:42:20.877 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:42:20.879 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 14:42:20.879 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 70.3482ms
2026-02-10 14:42:20.880 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:20.881 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" completed keep alive response.
2026-02-10 14:42:20.882 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:42:20.883 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:42:20.883 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:42:20.885 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 86.2965ms
2026-02-10 14:42:57.616 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:42:57.618 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:42:57.618 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:42:57.619 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:57.619 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:42:57.620 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:42:57.620 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:57.621 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:42:57.622 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:42:57.623 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:42:57.624 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:42:57.625 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:42:57.626 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:42:57.627 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:42:57.628 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:42:57.628 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:42:57.629 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:42:57.630 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:42:57.631 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:42:57.631 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:42:57.632 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:42:57.633 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:42:57.633 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:42:57.634 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:42:57.635 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:42:57.642 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:42:57.643 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:42:57.644 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:42:57.645 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:42:57.646 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:42:57.646 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:42:57.647 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:42:57.648 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 14:42:57.648 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:42:57.649 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:42:57.650 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:42:57.650 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 14:42:57.651 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:42:57.652 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:42:57.653 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:42:57.654 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:42:57.656 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:42:57.659 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 5ms reading results.
2026-02-10 14:42:57.660 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:42:57.661 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:42:57.662 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:42:57.663 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:42:57.664 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 14:42:57.664 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 37.3543ms
2026-02-10 14:42:57.665 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:42:57.665 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" completed keep alive response.
2026-02-10 14:42:57.666 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:42:57.667 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:42:57.667 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:42:57.668 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 52.1539ms
2026-02-10 14:43:02.816 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:43:02.817 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:43:02.818 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:43:02.819 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:43:02.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:43:02.820 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:43:02.820 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:43:02.821 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:43:02.822 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:43:02.823 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:43:02.824 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:43:02.825 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:43:02.826 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:43:02.827 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:43:02.828 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:43:02.829 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:43:02.829 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:43:02.830 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:43:02.831 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:43:02.832 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:43:02.832 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:43:02.833 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:43:02.834 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:43:02.834 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:43:02.835 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:43:02.836 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:43:02.838 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:43:02.839 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:43:02.839 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:43:02.840 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:43:02.841 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:43:02.842 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:43:02.843 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 14:43:02.843 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:43:02.844 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:43:02.845 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:43:02.845 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 14:43:02.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:43:02.847 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:43:02.848 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:43:02.849 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:43:02.851 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:43:02.852 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 14:43:02.853 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:43:02.854 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:43:02.855 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:43:02.856 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:43:02.857 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:43:02.858 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:43:02.859 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:43:02.859 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:43:02.860 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:43:02.860 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:43:02.861 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 34.5089ms
2026-02-10 14:43:02.862 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:43:02.863 +03:00 [DBG] Connection id "0HNJ8J5C57SLU" completed keep alive response.
2026-02-10 14:43:02.863 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:43:02.864 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:43:02.865 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:43:02.866 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 50.0251ms
2026-02-10 14:43:47.046 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 14:43:57.061 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:43:57.064 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0369ms - processed: 0 items - remaining: 1 items
2026-02-10 14:44:07.068 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:44:07.070 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-10 14:44:17.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:44:17.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 14:44:27.096 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:44:27.097 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 14:44:37.098 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:44:37.099 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-10 14:44:47.105 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:44:47.106 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 14:44:57.116 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:44:57.117 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 14:45:07.125 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:45:07.125 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 14:45:17.138 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:45:17.140 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6337ms - processed: 0 items - remaining: 1 items
2026-02-10 14:45:27.157 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:45:27.157 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 14:45:37.160 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:45:37.161 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 14:45:47.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:45:47.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-10 14:45:57.191 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:45:57.193 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 14:46:07.201 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:46:07.202 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 14:46:17.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:46:17.204 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 14:46:27.215 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:46:27.216 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 14:46:37.227 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:46:37.229 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 14:46:47.242 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:46:47.243 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 0 items - remaining: 1 items
2026-02-10 14:46:57.254 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:46:57.255 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 14:47:07.259 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:47:07.260 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 14:47:17.273 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:47:17.274 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 14:47:27.288 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:47:27.289 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 14:47:37.293 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:47:37.294 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 14:47:47.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:47:47.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 14:47:57.316 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:47:57.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 14:48:07.320 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:48:07.322 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.412ms - processed: 0 items - remaining: 1 items
2026-02-10 14:48:17.337 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:48:17.338 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 14:48:27.343 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:48:27.344 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 14:48:37.357 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:48:37.358 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-10 14:48:47.371 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:48:47.372 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 14:48:57.378 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:48:57.379 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-10 14:49:07.384 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:49:07.385 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-10 14:49:17.400 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:49:17.401 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-10 14:49:27.412 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:49:27.413 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-10 14:49:37.420 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:49:37.421 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-10 14:49:47.425 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:49:47.426 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2026-02-10 14:49:57.432 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:49:57.433 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2026-02-10 14:50:07.447 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:50:07.448 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-10 14:50:17.463 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:50:17.464 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-10 14:50:27.466 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 14:50:27.467 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-10 14:50:38.645 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 14:50:38.713 +03:00 [DBG] Hosting starting
2026-02-10 14:50:38.836 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 14:50:38.837 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 14:50:38.838 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 14:50:38.838 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 14:50:38.839 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 14:50:38.839 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 14:50:38.863 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 14:50:38.864 +03:00 [INF] Hosting environment: Development
2026-02-10 14:50:38.865 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 14:50:38.865 +03:00 [DBG] Hosting started
2026-02-10 14:50:39.281 +03:00 [DBG] Connection id "0HNJ8JAE7NTUE" accepted.
2026-02-10 14:50:39.282 +03:00 [DBG] Connection id "0HNJ8JAE7NTUE" started.
2026-02-10 14:50:39.291 +03:00 [DBG] Connection id "0HNJ8JAE7NTUF" accepted.
2026-02-10 14:50:39.292 +03:00 [DBG] Connection id "0HNJ8JAE7NTUF" started.
2026-02-10 14:50:39.307 +03:00 [DBG] Connection id "0HNJ8JAE7NTUF" received FIN.
2026-02-10 14:50:39.307 +03:00 [DBG] Connection id "0HNJ8JAE7NTUE" received FIN.
2026-02-10 14:50:39.314 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:50:39.314 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:50:39.331 +03:00 [DBG] Connection id "0HNJ8JAE7NTUE" stopped.
2026-02-10 14:50:39.331 +03:00 [DBG] Connection id "0HNJ8JAE7NTUF" stopped.
2026-02-10 14:50:39.334 +03:00 [DBG] Connection id "0HNJ8JAE7NTUE" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:50:39.334 +03:00 [DBG] Connection id "0HNJ8JAE7NTUF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:50:39.442 +03:00 [DBG] Connection id "0HNJ8JAE7NTUG" accepted.
2026-02-10 14:50:39.444 +03:00 [DBG] Connection id "0HNJ8JAE7NTUG" started.
2026-02-10 14:50:39.471 +03:00 [DBG] Connection 0HNJ8JAE7NTUG established using the following protocol: "Tls13"
2026-02-10 14:50:39.540 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 14:50:39.596 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 14:50:39.605 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 14:50:39.607 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:50:39.609 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:50:39.637 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 14:50:39.638 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 14:50:39.648 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 14:50:39.649 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 14:50:39.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 113.7597ms
2026-02-10 14:50:39.674 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 14:50:39.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.0973ms
2026-02-10 14:50:39.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 14:50:39.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.1184ms
2026-02-10 14:50:39.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 14:50:39.784 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 14:50:39.785 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:50:39.786 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:50:39.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.5967ms
2026-02-10 14:50:53.766 +03:00 [DBG] Connection id "0HNJ8JAE7NTUH" accepted.
2026-02-10 14:50:53.766 +03:00 [DBG] Connection id "0HNJ8JAE7NTUH" received FIN.
2026-02-10 14:50:53.767 +03:00 [DBG] Connection id "0HNJ8JAE7NTUH" started.
2026-02-10 14:50:53.768 +03:00 [DBG] Connection id "0HNJ8JAE7NTUI" accepted.
2026-02-10 14:50:53.772 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:50:53.772 +03:00 [DBG] Connection id "0HNJ8JAE7NTUI" started.
2026-02-10 14:50:53.774 +03:00 [DBG] Connection id "0HNJ8JAE7NTUH" stopped.
2026-02-10 14:50:53.775 +03:00 [DBG] Connection id "0HNJ8JAE7NTUH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:50:53.776 +03:00 [DBG] Connection 0HNJ8JAE7NTUI established using the following protocol: "Tls13"
2026-02-10 14:50:53.780 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:50:53.783 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:50:53.785 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:50:53.786 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:50:53.787 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:50:53.788 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:50:53.790 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:50:53.804 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:50:53.806 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:50:53.807 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:50:53.809 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:50:53.811 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:50:53.812 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:50:53.814 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:50:53.876 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 14:50:53.882 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:50:53.890 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:50:53.892 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:50:53.894 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:50:53.895 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:50:53.896 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:50:53.901 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:50:53.902 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:50:53.907 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:50:53.908 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:50:53.910 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:50:53.922 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:50:53.929 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:50:54.258 +03:00 [INF] Received HTTP response headers after 326.5132ms - 200
2026-02-10 14:50:54.262 +03:00 [INF] End processing HTTP request after 340.1866ms - 200
2026-02-10 14:50:54.273 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:50:54.274 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:50:54.618 +03:00 [INF] Received HTTP response headers after 342.961ms - 200
2026-02-10 14:50:54.619 +03:00 [INF] End processing HTTP request after 345.9384ms - 200
2026-02-10 14:50:54.850 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:50:54.868 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:50:54.898 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:50:54.902 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:50:54.907 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:50:54.917 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:50:54.951 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:50:54.957 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 14:50:54.959 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:50:54.966 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:50:54.970 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:50:54.973 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:50:54.975 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 14:50:54.980 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:50:54.992 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:50:55.000 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:50:55.005 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:50:55.009 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 14:50:55.012 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:50:55.014 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 14:50:55.020 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:50:55.021 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:50:55.029 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:50:55.031 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:50:55.031 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:50:55.032 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:50:55.032 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:50:55.033 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:50:55.042 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1226.9456ms
2026-02-10 14:50:55.043 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:50:55.044 +03:00 [DBG] Connection id "0HNJ8JAE7NTUI" completed keep alive response.
2026-02-10 14:50:55.046 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:50:55.048 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:50:55.049 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:50:55.050 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1270.5254ms
2026-02-10 14:51:06.212 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:51:06.214 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:51:06.215 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:51:06.216 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:51:06.216 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:51:06.217 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:51:06.218 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:51:06.219 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:51:06.220 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:51:06.221 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:51:06.222 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:51:06.223 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:51:06.224 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:51:06.225 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:51:06.227 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:51:06.228 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:51:06.229 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:51:06.230 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:51:06.231 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:51:06.231 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:51:06.232 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:51:06.233 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:51:06.234 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:51:06.235 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:51:06.236 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:51:06.265 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:51:06.267 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:51:06.268 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:51:06.269 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:51:06.269 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:51:06.270 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:51:06.271 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:51:06.272 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 14:51:06.272 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:51:06.273 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:51:06.274 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:51:06.275 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 14:51:06.275 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:51:06.277 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:51:06.278 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:51:06.280 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:51:06.282 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:51:06.283 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 14:51:06.284 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:51:06.285 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 14:51:06.286 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:51:06.287 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:51:06.288 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:51:06.289 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:51:06.290 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:51:06.290 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:51:06.291 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:51:06.291 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:51:06.293 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 67.2383ms
2026-02-10 14:51:06.294 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:51:06.294 +03:00 [DBG] Connection id "0HNJ8JAE7NTUI" completed keep alive response.
2026-02-10 14:51:06.295 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:51:06.296 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:51:06.297 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:51:06.298 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 86.2995ms
2026-02-10 14:58:48.815 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 14:58:48.882 +03:00 [DBG] Hosting starting
2026-02-10 14:58:48.986 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 14:58:48.987 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 14:58:48.988 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 14:58:48.988 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 14:58:48.989 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 14:58:48.989 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 14:58:49.010 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 14:58:49.011 +03:00 [INF] Hosting environment: Development
2026-02-10 14:58:49.011 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 14:58:49.012 +03:00 [DBG] Hosting started
2026-02-10 14:58:49.205 +03:00 [DBG] Connection id "0HNJ8JF080VF2" accepted.
2026-02-10 14:58:49.206 +03:00 [DBG] Connection id "0HNJ8JF080VF2" started.
2026-02-10 14:58:49.217 +03:00 [DBG] Connection id "0HNJ8JF080VF2" received FIN.
2026-02-10 14:58:49.217 +03:00 [DBG] Connection id "0HNJ8JF080VF3" received FIN.
2026-02-10 14:58:49.220 +03:00 [DBG] Connection id "0HNJ8JF080VF3" accepted.
2026-02-10 14:58:49.221 +03:00 [DBG] Connection id "0HNJ8JF080VF3" started.
2026-02-10 14:58:49.224 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:58:49.224 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:58:49.245 +03:00 [DBG] Connection id "0HNJ8JF080VF3" stopped.
2026-02-10 14:58:49.245 +03:00 [DBG] Connection id "0HNJ8JF080VF2" stopped.
2026-02-10 14:58:49.248 +03:00 [DBG] Connection id "0HNJ8JF080VF2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:58:49.248 +03:00 [DBG] Connection id "0HNJ8JF080VF3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:58:49.355 +03:00 [DBG] Connection id "0HNJ8JF080VF4" accepted.
2026-02-10 14:58:49.357 +03:00 [DBG] Connection id "0HNJ8JF080VF4" started.
2026-02-10 14:58:49.386 +03:00 [DBG] Connection 0HNJ8JF080VF4 established using the following protocol: "Tls13"
2026-02-10 14:58:49.416 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 14:58:49.469 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 14:58:49.477 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 14:58:49.478 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:58:49.480 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:58:49.518 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 14:58:49.519 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 14:58:49.527 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 14:58:49.528 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 14:58:49.530 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 115.9534ms
2026-02-10 14:58:49.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 14:58:49.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.8598ms
2026-02-10 14:58:49.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 14:58:49.602 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.7458ms
2026-02-10 14:58:49.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 14:58:49.654 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 14:58:49.654 +03:00 [DBG] Request did not match any endpoints
2026-02-10 14:58:49.655 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 14:58:49.660 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.6341ms
2026-02-10 14:59:00.055 +03:00 [DBG] Connection id "0HNJ8JF080VF5" received FIN.
2026-02-10 14:59:00.057 +03:00 [DBG] Connection id "0HNJ8JF080VF5" accepted.
2026-02-10 14:59:00.057 +03:00 [DBG] Connection id "0HNJ8JF080VF5" started.
2026-02-10 14:59:00.058 +03:00 [DBG] Connection id "0HNJ8JF080VF6" accepted.
2026-02-10 14:59:00.059 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 14:59:00.059 +03:00 [DBG] Connection id "0HNJ8JF080VF6" started.
2026-02-10 14:59:00.060 +03:00 [DBG] Connection id "0HNJ8JF080VF5" stopped.
2026-02-10 14:59:00.061 +03:00 [DBG] Connection id "0HNJ8JF080VF5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 14:59:00.063 +03:00 [DBG] Connection 0HNJ8JF080VF6 established using the following protocol: "Tls13"
2026-02-10 14:59:00.066 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 14:59:00.070 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 14:59:00.072 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 14:59:00.073 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:59:00.074 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:59:00.075 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 14:59:00.077 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:59:00.091 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 14:59:00.093 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 14:59:00.094 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 14:59:00.096 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 14:59:00.097 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 14:59:00.098 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 14:59:00.099 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:59:00.159 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 14:59:00.165 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 14:59:00.173 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 14:59:00.174 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 14:59:00.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:59:00.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 14:59:00.177 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 14:59:00.180 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 14:59:00.182 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:59:00.186 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:59:00.187 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 14:59:00.189 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 14:59:00.203 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:59:00.209 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 14:59:00.545 +03:00 [INF] Received HTTP response headers after 333.9804ms - 200
2026-02-10 14:59:00.548 +03:00 [INF] End processing HTTP request after 345.3372ms - 200
2026-02-10 14:59:00.558 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:59:00.559 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 14:59:00.886 +03:00 [INF] Received HTTP response headers after 326.0153ms - 200
2026-02-10 14:59:00.887 +03:00 [INF] End processing HTTP request after 328.8192ms - 200
2026-02-10 14:59:00.894 +03:00 [INF] Endpoint=day, City=Москва, Date=2026-02-05, Latency=701ms, Cache=FALSE
2026-02-10 14:59:01.121 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 14:59:01.137 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:59:01.164 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:59:01.167 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 14:59:01.170 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 14:59:01.178 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 14:59:01.213 +03:00 [DBG] Creating DbConnection.
2026-02-10 14:59:01.219 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 14:59:01.221 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:59:01.228 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:59:01.232 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 14:59:01.235 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 14:59:01.237 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 14:59:01.242 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:59:01.254 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 14:59:01.263 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 14:59:01.269 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:59:01.273 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 14ms reading results.
2026-02-10 14:59:01.275 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 14:59:01.277 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:59:01.283 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 14:59:01.285 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 14:59:01.291 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 14:59:01.293 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 14:59:01.294 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 14:59:01.294 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 14:59:01.295 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 14:59:01.296 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 14:59:01.306 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1205.8685ms
2026-02-10 14:59:01.307 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 14:59:01.308 +03:00 [DBG] Connection id "0HNJ8JF080VF6" completed keep alive response.
2026-02-10 14:59:01.310 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 14:59:01.312 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 14:59:01.313 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 14:59:01.314 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1248.34ms
2026-02-10 15:00:03.702 +03:00 [DBG] Connection id "0HNJ8JF080VF7" received FIN.
2026-02-10 15:00:03.702 +03:00 [DBG] Connection id "0HNJ8JF080VF7" accepted.
2026-02-10 15:00:03.703 +03:00 [DBG] Connection id "0HNJ8JF080VF7" started.
2026-02-10 15:00:03.704 +03:00 [DBG] Connection id "0HNJ8JF080VF8" accepted.
2026-02-10 15:00:03.707 +03:00 [DBG] Connection id "0HNJ8JF080VF8" started.
2026-02-10 15:00:03.708 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:00:03.709 +03:00 [DBG] Connection id "0HNJ8JF080VF7" stopped.
2026-02-10 15:00:03.710 +03:00 [DBG] Connection 0HNJ8JF080VF8 established using the following protocol: "Tls13"
2026-02-10 15:00:03.710 +03:00 [DBG] Connection id "0HNJ8JF080VF7" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:00:03.711 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 15:00:03.713 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 15:00:03.714 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 15:00:03.715 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:00:03.716 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:00:03.717 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:00:03.717 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:00:03.719 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:00:03.720 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:00:03.721 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:00:03.722 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:00:03.723 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:00:03.723 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:00:03.724 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:00:03.726 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:00:03.727 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:00:03.728 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:00:03.728 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:00:03.729 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:00:03.730 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:00:03.731 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:00:03.731 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:00:03.732 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:00:03.733 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:00:03.734 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:00:03.735 +03:00 [INF] Endpoint=day, City=Москва, Date=2026-02-05, Latency=0ms, Cache=TRUE
2026-02-10 15:00:03.763 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 15:00:03.765 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:00:03.766 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:00:03.767 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 15:00:03.768 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 15:00:03.769 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 15:00:03.770 +03:00 [DBG] Creating DbConnection.
2026-02-10 15:00:03.771 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 15:00:03.771 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:00:03.772 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:00:03.773 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 15:00:03.773 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 15:00:03.774 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 15:00:03.775 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:00:03.776 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:00:03.778 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 15:00:03.780 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:00:03.781 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 15:00:03.782 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:00:03.783 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 15:00:03.784 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:00:03.786 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 15:00:03.787 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 15:00:03.789 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 15:00:03.789 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 15:00:03.790 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 15:00:03.790 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 15:00:03.791 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 15:00:03.792 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 67.9764ms
2026-02-10 15:00:03.793 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:00:03.794 +03:00 [DBG] Connection id "0HNJ8JF080VF8" completed keep alive response.
2026-02-10 15:00:03.795 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 15:00:03.795 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:00:03.796 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 15:00:03.797 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 86.187ms
2026-02-10 15:01:00.211 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 15:01:06.211 +03:00 [DBG] Connection id "0HNJ8JF080VF9" received FIN.
2026-02-10 15:01:06.214 +03:00 [DBG] Connection id "0HNJ8JF080VF9" accepted.
2026-02-10 15:01:06.215 +03:00 [DBG] Connection id "0HNJ8JF080VF9" started.
2026-02-10 15:01:06.218 +03:00 [DBG] Connection id "0HNJ8JF080VFA" accepted.
2026-02-10 15:01:06.219 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:01:06.220 +03:00 [DBG] Connection id "0HNJ8JF080VFA" started.
2026-02-10 15:01:06.221 +03:00 [DBG] Connection id "0HNJ8JF080VF9" stopped.
2026-02-10 15:01:06.222 +03:00 [DBG] Connection id "0HNJ8JF080VF9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:01:06.224 +03:00 [DBG] Connection 0HNJ8JF080VFA established using the following protocol: "Tls13"
2026-02-10 15:01:06.224 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 15:01:06.226 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 15:01:06.226 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 15:01:06.227 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:01:06.228 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:01:06.228 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:01:06.228 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:01:06.229 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:01:06.230 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:01:06.231 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:01:06.231 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:01:06.232 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:01:06.233 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:01:06.234 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:01:06.238 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:01:06.239 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:01:06.240 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:01:06.240 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:01:06.241 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:01:06.242 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:01:06.242 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:01:06.243 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:01:06.243 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:01:06.244 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:01:06.245 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:01:06.245 +03:00 [INF] Endpoint=day, City=Москва, Date=2026-02-05, Latency=0ms, Cache=TRUE
2026-02-10 15:01:06.253 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 15:01:06.254 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:01:06.255 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:01:06.256 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 15:01:06.257 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 15:01:06.257 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 15:01:06.258 +03:00 [DBG] Creating DbConnection.
2026-02-10 15:01:06.258 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 15:01:06.259 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:01:06.260 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:01:06.260 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 15:01:06.261 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 15:01:06.261 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 15:01:06.262 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:01:06.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:01:06.264 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 15:01:06.266 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:01:06.267 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 15:01:06.268 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:01:06.269 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 15:01:06.270 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:01:06.271 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 15:01:06.272 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 15:01:06.273 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 15:01:06.273 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 15:01:06.274 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 15:01:06.274 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 15:01:06.275 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 15:01:06.276 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 41.5988ms
2026-02-10 15:01:06.277 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:01:06.277 +03:00 [DBG] Connection id "0HNJ8JF080VFA" completed keep alive response.
2026-02-10 15:01:06.278 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 15:01:06.278 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:01:06.279 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 15:01:06.280 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 55.5915ms
2026-02-10 15:01:10.224 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:01:10.227 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0305ms - processed: 0 items - remaining: 1 items
2026-02-10 15:01:20.234 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:01:20.235 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 15:01:30.242 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:01:30.243 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 15:01:40.248 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:01:40.249 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 15:01:50.258 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:01:50.258 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 15:02:00.259 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:02:00.260 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 15:02:10.270 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:02:10.271 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 15:02:20.285 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:02:20.285 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 15:02:30.295 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:02:30.296 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 15:02:40.299 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:02:40.300 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6748ms - processed: 0 items - remaining: 1 items
2026-02-10 15:02:50.303 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:02:50.304 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 15:03:00.316 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:03:00.317 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 15:03:10.322 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:03:10.322 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 15:03:18.359 +03:00 [DBG] Connection id "0HNJ8JF080VF4" received FIN.
2026-02-10 15:03:18.363 +03:00 [DBG] Connection id "0HNJ8JF080VF4" is closed. The last processed stream ID was 7.
2026-02-10 15:03:18.364 +03:00 [DBG] Connection id "0HNJ8JF080VF4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:03:18.364 +03:00 [DBG] The connection queue processing loop for 0HNJ8JF080VF4 completed.
2026-02-10 15:03:18.369 +03:00 [DBG] Connection id "0HNJ8JF080VF4" stopped.
2026-02-10 15:03:20.337 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:03:20.338 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 15:03:30.346 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:03:30.348 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:03:40.355 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:03:40.356 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 15:03:50.369 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:03:50.371 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:04:00.375 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:04:00.376 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 15:04:10.378 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:04:10.379 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 15:04:20.395 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:04:20.396 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 15:04:30.409 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:04:30.410 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 15:04:40.422 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:04:40.422 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:04:50.431 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:04:50.432 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 15:05:00.438 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:05:00.438 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:05:10.450 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:05:10.450 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:05:11.225 +03:00 [DBG] Connection id "0HNJ8JF080VFB" accepted.
2026-02-10 15:05:11.226 +03:00 [DBG] Connection id "0HNJ8JF080VFB" received FIN.
2026-02-10 15:05:11.229 +03:00 [DBG] Connection id "0HNJ8JF080VFC" accepted.
2026-02-10 15:05:11.229 +03:00 [DBG] Connection id "0HNJ8JF080VFB" started.
2026-02-10 15:05:11.231 +03:00 [DBG] Connection id "0HNJ8JF080VFC" started.
2026-02-10 15:05:11.233 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:05:11.234 +03:00 [DBG] Connection id "0HNJ8JF080VFB" stopped.
2026-02-10 15:05:11.235 +03:00 [DBG] Connection 0HNJ8JF080VFC established using the following protocol: "Tls13"
2026-02-10 15:05:11.236 +03:00 [DBG] Connection id "0HNJ8JF080VFB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:05:11.237 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-10 15:05:11.238 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-10 15:05:11.239 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-10 15:05:11.240 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:05:11.241 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:05:11.241 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:05:11.242 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:05:11.242 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:05:11.243 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:05:11.244 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:05:11.245 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:05:11.246 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:05:11.247 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:05:11.247 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:05:11.248 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:05:11.249 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:05:11.250 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:05:11.250 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:05:11.251 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:05:11.252 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:05:11.253 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:05:11.253 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:05:11.254 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:05:11.255 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:05:11.255 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:05:11.257 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:05:11.257 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:05:11.590 +03:00 [INF] Received HTTP response headers after 331.8181ms - 200
2026-02-10 15:05:11.591 +03:00 [INF] End processing HTTP request after 334.5236ms - 200
2026-02-10 15:05:11.593 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 15:05:11.695 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 447.7951ms
2026-02-10 15:05:11.697 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:05:11.729 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 64
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 184
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 60
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 15:05:11.741 +03:00 [DBG] Connection id "0HNJ8JF080VFC" completed keep alive response.
2026-02-10 15:05:11.742 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 505.0649ms
2026-02-10 15:05:20.464 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:05:20.466 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5546ms - processed: 0 items - remaining: 1 items
2026-02-10 15:05:30.479 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:05:30.479 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0076ms - processed: 0 items - remaining: 1 items
2026-02-10 15:05:40.487 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:05:40.488 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:35:03.127 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 15:35:03.212 +03:00 [DBG] Hosting starting
2026-02-10 15:35:03.325 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 15:35:03.326 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 15:35:03.327 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 15:35:03.327 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 15:35:03.328 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 15:35:03.329 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 15:35:03.355 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 15:35:03.355 +03:00 [INF] Hosting environment: Development
2026-02-10 15:35:03.356 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 15:35:03.357 +03:00 [DBG] Hosting started
2026-02-10 15:35:03.755 +03:00 [DBG] Connection id "0HNJ8K38A4OJG" accepted.
2026-02-10 15:35:03.756 +03:00 [DBG] Connection id "0HNJ8K38A4OJG" started.
2026-02-10 15:35:03.813 +03:00 [DBG] Connection id "0HNJ8K38A4OJH" received FIN.
2026-02-10 15:35:03.813 +03:00 [DBG] Connection id "0HNJ8K38A4OJG" received FIN.
2026-02-10 15:35:03.814 +03:00 [DBG] Connection id "0HNJ8K38A4OJH" accepted.
2026-02-10 15:35:03.815 +03:00 [DBG] Connection id "0HNJ8K38A4OJH" started.
2026-02-10 15:35:03.818 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:35:03.818 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:35:03.835 +03:00 [DBG] Connection id "0HNJ8K38A4OJG" stopped.
2026-02-10 15:35:03.835 +03:00 [DBG] Connection id "0HNJ8K38A4OJH" stopped.
2026-02-10 15:35:03.838 +03:00 [DBG] Connection id "0HNJ8K38A4OJH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:35:03.838 +03:00 [DBG] Connection id "0HNJ8K38A4OJG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:35:03.942 +03:00 [DBG] Connection id "0HNJ8K38A4OJI" accepted.
2026-02-10 15:35:03.944 +03:00 [DBG] Connection id "0HNJ8K38A4OJI" started.
2026-02-10 15:35:03.973 +03:00 [DBG] Connection 0HNJ8K38A4OJI established using the following protocol: "Tls13"
2026-02-10 15:35:04.002 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 15:35:04.058 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 15:35:04.068 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 15:35:04.069 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:35:04.072 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:35:04.097 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 15:35:04.098 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 15:35:04.109 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 15:35:04.110 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 15:35:04.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 111.7809ms
2026-02-10 15:35:04.133 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 15:35:04.139 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.3355ms
2026-02-10 15:35:04.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 15:35:04.186 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.7613ms
2026-02-10 15:35:04.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 15:35:04.230 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 15:35:04.231 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:35:04.231 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:35:04.237 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.0703ms
2026-02-10 15:35:11.620 +03:00 [DBG] Connection id "0HNJ8K38A4OJK" received FIN.
2026-02-10 15:35:11.620 +03:00 [DBG] Connection id "0HNJ8K38A4OJJ" accepted.
2026-02-10 15:35:11.622 +03:00 [DBG] Connection id "0HNJ8K38A4OJJ" started.
2026-02-10 15:35:11.622 +03:00 [DBG] Connection id "0HNJ8K38A4OJL" accepted.
2026-02-10 15:35:11.623 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:35:11.623 +03:00 [DBG] Connection id "0HNJ8K38A4OJL" started.
2026-02-10 15:35:11.625 +03:00 [DBG] Connection id "0HNJ8K38A4OJJ" stopped.
2026-02-10 15:35:11.627 +03:00 [DBG] Connection id "0HNJ8K38A4OJJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:35:11.628 +03:00 [DBG] Connection 0HNJ8K38A4OJL established using the following protocol: "Tls13"
2026-02-10 15:35:11.631 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-10 15:35:11.634 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-10 15:35:11.636 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-10 15:35:11.637 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:35:11.639 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:35:11.639 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:35:11.642 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:35:11.656 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:35:11.658 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:35:11.659 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:35:11.660 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:35:11.661 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:35:11.662 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:35:11.663 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:35:11.719 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 15:35:11.725 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:35:11.733 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:35:11.734 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:35:11.736 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:35:11.736 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:35:11.737 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:35:11.741 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:35:11.742 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:35:11.747 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:35:11.747 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:35:11.748 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:35:11.761 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:35:11.767 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:35:12.082 +03:00 [INF] Received HTTP response headers after 312.9908ms - 200
2026-02-10 15:35:12.084 +03:00 [INF] End processing HTTP request after 324.103ms - 200
2026-02-10 15:35:12.091 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 15:35:12.188 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 523.3333ms
2026-02-10 15:35:12.189 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:35:12.219 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 65
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 193
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 61
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 15:35:12.233 +03:00 [DBG] Connection id "0HNJ8K38A4OJL" completed keep alive response.
2026-02-10 15:35:12.235 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 603.7637ms
2026-02-10 15:35:43.743 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 15:35:43.748 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 15:35:43.748 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 15:35:43.749 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:35:43.750 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:35:43.750 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:35:43.751 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:35:43.752 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:35:43.753 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:35:43.754 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:35:43.755 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:35:43.756 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:35:43.756 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:35:43.757 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:35:43.762 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:35:43.763 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:35:43.764 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:35:43.764 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:35:43.765 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:35:43.766 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:35:43.766 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:35:43.767 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:35:43.768 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:35:43.768 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:35:43.769 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:35:43.770 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 15:35:43.771 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 15:35:43.829 +03:00 [INF] Received HTTP response headers after 57.5147ms - 200
2026-02-10 15:35:43.830 +03:00 [INF] End processing HTTP request after 59.8232ms - 200
2026-02-10 15:35:43.834 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 15:35:43.835 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 15:35:44.156 +03:00 [INF] Received HTTP response headers after 320.1915ms - 200
2026-02-10 15:35:44.157 +03:00 [INF] End processing HTTP request after 322.614ms - 200
2026-02-10 15:35:44.164 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 393ms, Cache = FALSE, StatusCode = {StatusCode}
2026-02-10 15:35:44.389 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 15:35:44.406 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:35:44.433 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:35:44.436 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 15:35:44.438 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 15:35:44.445 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 15:35:44.476 +03:00 [DBG] Creating DbConnection.
2026-02-10 15:35:44.481 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 15:35:44.484 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:35:44.491 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:35:44.495 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 15:35:44.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 15:35:44.501 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-10 15:35:44.506 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:35:44.519 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:35:44.527 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 15:35:44.534 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:35:44.538 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 15ms reading results.
2026-02-10 15:35:44.540 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:35:44.542 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 15:35:44.548 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:35:44.550 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 15:35:44.556 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 15:35:44.558 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 15:35:44.559 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 15:35:44.559 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 15:35:44.560 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 15:35:44.561 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 15:35:44.568 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 811.1683ms
2026-02-10 15:35:44.570 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:35:44.571 +03:00 [DBG] Connection id "0HNJ8K38A4OJL" completed keep alive response.
2026-02-10 15:35:44.572 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 15:35:44.574 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:35:44.575 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 15:35:44.576 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 833.441ms
2026-02-10 15:37:11.770 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 15:37:21.785 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:37:21.787 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0327ms - processed: 0 items - remaining: 1 items
2026-02-10 15:37:31.803 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:37:31.804 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 15:37:41.809 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:37:41.809 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 15:37:51.816 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:37:51.817 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 15:38:01.820 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:38:01.821 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.64ms - processed: 0 items - remaining: 1 items
2026-02-10 15:38:11.833 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:38:11.834 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:38:21.845 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:38:21.847 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:38:31.857 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:38:31.859 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 15:38:41.871 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:38:41.872 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:38:51.885 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:38:51.886 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:39:01.903 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:39:01.904 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-10 15:39:11.912 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:39:11.912 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-10 15:39:21.916 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:39:21.918 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5902ms - processed: 0 items - remaining: 1 items
2026-02-10 15:39:31.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:39:31.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-10 15:39:41.925 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:39:41.926 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:39:51.938 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:39:51.939 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 15:40:01.947 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:40:01.949 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:40:11.953 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:40:11.953 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 15:40:21.960 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:40:21.961 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 15:40:31.966 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:40:31.967 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:40:41.972 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:40:41.973 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 15:40:51.989 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:40:51.989 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 15:41:02.005 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:41:02.006 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 15:41:12.013 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:41:12.014 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 15:41:22.028 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:41:22.028 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:41:32.031 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:41:32.032 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5844ms - processed: 0 items - remaining: 1 items
2026-02-10 15:41:42.034 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:41:42.035 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 15:41:52.042 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:41:52.043 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 15:42:02.052 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:42:02.053 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 15:42:12.057 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:42:12.058 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 15:42:22.075 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:42:22.075 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 15:42:32.085 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:42:32.087 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-10 15:42:42.095 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:42:42.096 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-10 15:42:52.109 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:42:52.109 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-10 15:43:01.218 +03:00 [DBG] Connection id "0HNJ8K38A4OJM" received FIN.
2026-02-10 15:43:01.221 +03:00 [DBG] Connection id "0HNJ8K38A4OJM" accepted.
2026-02-10 15:43:01.221 +03:00 [DBG] Connection id "0HNJ8K38A4OJM" started.
2026-02-10 15:43:01.222 +03:00 [DBG] Connection id "0HNJ8K38A4OJN" accepted.
2026-02-10 15:43:01.225 +03:00 [DBG] Connection id "0HNJ8K38A4OJN" started.
2026-02-10 15:43:01.225 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:43:01.227 +03:00 [DBG] Connection id "0HNJ8K38A4OJM" stopped.
2026-02-10 15:43:01.228 +03:00 [DBG] Connection 0HNJ8K38A4OJN established using the following protocol: "Tls13"
2026-02-10 15:43:01.229 +03:00 [DBG] Connection id "0HNJ8K38A4OJM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:43:01.232 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-10 15:43:01.233 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-10 15:43:01.234 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-10 15:43:01.235 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:43:01.236 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:43:01.236 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:43:01.236 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:43:01.237 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:43:01.238 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:43:01.239 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:43:01.240 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:43:01.241 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:43:01.242 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:43:01.242 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:43:01.246 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:43:01.247 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:43:01.248 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:43:01.248 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:43:01.249 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:43:01.250 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:43:01.251 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:43:01.251 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:43:01.252 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:43:01.253 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:43:01.253 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:43:01.255 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:43:01.256 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:43:01.566 +03:00 [INF] Received HTTP response headers after 309.4452ms - 200
2026-02-10 15:43:01.567 +03:00 [INF] End processing HTTP request after 312.2876ms - 200
2026-02-10 15:43:01.568 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 15:43:01.656 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 413.288ms
2026-02-10 15:43:01.657 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:43:01.683 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 65
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 193
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 61
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 15:43:01.687 +03:00 [DBG] Connection id "0HNJ8K38A4OJN" completed keep alive response.
2026-02-10 15:43:01.688 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 457.0421ms
2026-02-10 15:43:02.111 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 15:43:02.112 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-10 15:43:09.244 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 15:43:09.246 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 15:43:09.246 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 15:43:09.247 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:43:09.248 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:43:09.248 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:43:09.249 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:43:09.249 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:43:09.250 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:43:09.251 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:43:09.252 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:43:09.253 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:43:09.254 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:43:09.255 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:43:09.256 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:43:09.256 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:43:09.257 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:43:09.258 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:43:09.259 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:43:09.259 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:43:09.260 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:43:09.261 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:43:09.262 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:43:09.262 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:43:09.263 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:44:38.734 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 15:44:38.817 +03:00 [DBG] Hosting starting
2026-02-10 15:44:38.944 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 15:44:38.944 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 15:44:38.945 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 15:44:38.945 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 15:44:38.946 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 15:44:38.947 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 15:44:38.971 +03:00 [DBG] Connection id "0HNJ8K8JNQOJV" received FIN.
2026-02-10 15:44:38.972 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 15:44:38.973 +03:00 [INF] Hosting environment: Development
2026-02-10 15:44:38.973 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 15:44:38.974 +03:00 [DBG] Hosting started
2026-02-10 15:44:38.974 +03:00 [DBG] Connection id "0HNJ8K8JNQOJV" accepted.
2026-02-10 15:44:38.976 +03:00 [DBG] Connection id "0HNJ8K8JNQOJV" started.
2026-02-10 15:44:38.987 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:44:39.005 +03:00 [DBG] Connection id "0HNJ8K8JNQOJV" stopped.
2026-02-10 15:44:39.008 +03:00 [DBG] Connection id "0HNJ8K8JNQOJV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:44:39.184 +03:00 [DBG] Connection id "0HNJ8K8JNQOK0" accepted.
2026-02-10 15:44:39.185 +03:00 [DBG] Connection id "0HNJ8K8JNQOK0" started.
2026-02-10 15:44:39.218 +03:00 [DBG] Connection 0HNJ8K8JNQOK0 established using the following protocol: "Tls13"
2026-02-10 15:44:39.253 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 15:44:39.316 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 15:44:39.328 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 15:44:39.329 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:44:39.332 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:44:39.368 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 15:44:39.369 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 15:44:39.380 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 15:44:39.381 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 15:44:39.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 134.6482ms
2026-02-10 15:44:39.410 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 15:44:39.420 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.9822ms
2026-02-10 15:44:39.441 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 15:44:39.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.844ms
2026-02-10 15:44:39.541 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 15:44:39.544 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 15:44:39.545 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:44:39.546 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:44:39.553 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.9488ms
2026-02-10 15:44:51.221 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 15:44:51.294 +03:00 [DBG] Hosting starting
2026-02-10 15:44:51.395 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 15:44:51.396 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 15:44:51.396 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 15:44:51.397 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 15:44:51.398 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 15:44:51.398 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 15:44:51.420 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 15:44:51.421 +03:00 [INF] Hosting environment: Development
2026-02-10 15:44:51.422 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 15:44:51.423 +03:00 [DBG] Hosting started
2026-02-10 15:44:51.707 +03:00 [DBG] Connection id "0HNJ8K8NH9IFE" accepted.
2026-02-10 15:44:51.708 +03:00 [DBG] Connection id "0HNJ8K8NH9IFE" started.
2026-02-10 15:44:51.718 +03:00 [DBG] Connection id "0HNJ8K8NH9IFF" accepted.
2026-02-10 15:44:51.720 +03:00 [DBG] Connection id "0HNJ8K8NH9IFF" started.
2026-02-10 15:44:51.749 +03:00 [DBG] Connection id "0HNJ8K8NH9IFF" received FIN.
2026-02-10 15:44:51.749 +03:00 [DBG] Connection id "0HNJ8K8NH9IFE" received FIN.
2026-02-10 15:44:51.755 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:44:51.755 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:44:51.773 +03:00 [DBG] Connection id "0HNJ8K8NH9IFE" stopped.
2026-02-10 15:44:51.773 +03:00 [DBG] Connection id "0HNJ8K8NH9IFF" stopped.
2026-02-10 15:44:51.776 +03:00 [DBG] Connection id "0HNJ8K8NH9IFE" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:44:51.776 +03:00 [DBG] Connection id "0HNJ8K8NH9IFF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:44:51.877 +03:00 [DBG] Connection id "0HNJ8K8NH9IFG" accepted.
2026-02-10 15:44:51.880 +03:00 [DBG] Connection id "0HNJ8K8NH9IFG" started.
2026-02-10 15:44:51.906 +03:00 [DBG] Connection 0HNJ8K8NH9IFG established using the following protocol: "Tls13"
2026-02-10 15:44:51.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 15:44:52.001 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 15:44:52.013 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 15:44:52.014 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:44:52.018 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:44:52.051 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 15:44:52.052 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 15:44:52.062 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 15:44:52.063 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 15:44:52.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 130.2586ms
2026-02-10 15:44:52.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 15:44:52.103 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 12.5861ms
2026-02-10 15:44:52.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 15:44:52.151 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.7158ms
2026-02-10 15:44:52.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 15:44:52.218 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 15:44:52.220 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:44:52.221 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:44:52.227 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.3324ms
2026-02-10 15:44:56.925 +03:00 [DBG] Connection id "0HNJ8K8NH9IFH" accepted.
2026-02-10 15:44:56.925 +03:00 [DBG] Connection id "0HNJ8K8NH9IFH" received FIN.
2026-02-10 15:44:56.926 +03:00 [DBG] Connection id "0HNJ8K8NH9IFH" started.
2026-02-10 15:44:56.926 +03:00 [DBG] Connection id "0HNJ8K8NH9IFI" accepted.
2026-02-10 15:44:56.928 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:44:56.928 +03:00 [DBG] Connection id "0HNJ8K8NH9IFI" started.
2026-02-10 15:44:56.930 +03:00 [DBG] Connection id "0HNJ8K8NH9IFH" stopped.
2026-02-10 15:44:56.931 +03:00 [DBG] Connection id "0HNJ8K8NH9IFH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:44:56.932 +03:00 [DBG] Connection 0HNJ8K8NH9IFI established using the following protocol: "Tls13"
2026-02-10 15:44:56.936 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-10 15:44:56.939 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-10 15:44:56.941 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-10 15:44:56.942 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:44:56.943 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:44:56.944 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:44:56.946 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:44:56.961 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:44:56.963 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:44:56.964 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:44:56.965 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:44:56.966 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:44:56.967 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:44:56.969 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:44:57.024 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 15:44:57.029 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:44:57.037 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:44:57.039 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:44:57.040 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:44:57.041 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:44:57.042 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:44:57.045 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:44:57.046 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:44:57.051 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:44:57.052 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:44:57.053 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:44:57.065 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:44:57.071 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:44:57.310 +03:00 [INF] Received HTTP response headers after 237.1232ms - 200
2026-02-10 15:44:57.313 +03:00 [INF] End processing HTTP request after 247.8439ms - 200
2026-02-10 15:44:57.320 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 15:44:57.424 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 454.1268ms
2026-02-10 15:44:57.425 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:44:57.457 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 65
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 190
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 61
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 15:44:57.471 +03:00 [DBG] Connection id "0HNJ8K8NH9IFI" completed keep alive response.
2026-02-10 15:44:57.473 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 537.0956ms
2026-02-10 15:45:38.930 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора/week - null null
2026-02-10 15:45:38.935 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора/week'
2026-02-10 15:45:38.936 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Алохомора/week'
2026-02-10 15:45:38.937 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 15:45:38.937 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:45:38.938 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:45:38.938 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 15:45:38.942 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:45:38.943 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:45:38.944 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:45:38.945 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:45:38.946 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:45:38.947 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:45:38.948 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:45:38.953 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:45:38.954 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:45:38.954 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:45:38.955 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:45:38.956 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:45:38.956 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:45:38.957 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:45:38.960 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:45:38.960 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:45:39.026 +03:00 [INF] Received HTTP response headers after 65.6351ms - 200
2026-02-10 15:45:39.027 +03:00 [INF] End processing HTTP request after 67.712ms - 200
2026-02-10 15:45:39.028 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 15:45:39.111 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 162.7455ms
2026-02-10 15:45:39.112 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 15:45:39.137 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass10_0.<<GetWeatherWeekAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 104
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 190
   at WeatherInfo.API.Services.WeatherService.GetWeatherWeekAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 100
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 15:45:39.140 +03:00 [DBG] Connection id "0HNJ8K8NH9IFI" completed keep alive response.
2026-02-10 15:45:39.141 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора/week - 404 null application/json; charset=utf-8 210.6211ms
2026-02-10 15:45:52.353 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-10 15:45:52.354 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-10 15:45:52.355 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-10 15:45:52.355 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:45:52.356 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:45:52.356 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:45:52.357 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:45:52.358 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:45:52.359 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:45:52.359 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:45:52.360 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:45:52.361 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:45:52.362 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:45:52.363 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:45:52.367 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:45:52.368 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:45:52.369 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:45:52.370 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:45:52.371 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:45:52.371 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:45:52.372 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:45:52.373 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:45:52.374 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:45:52.374 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:45:52.375 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:45:52.376 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:45:52.376 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-10 15:45:52.437 +03:00 [INF] Received HTTP response headers after 60.4638ms - 200
2026-02-10 15:45:52.438 +03:00 [INF] End processing HTTP request after 62.6418ms - 200
2026-02-10 15:45:52.439 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-10 15:45:52.513 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 150.755ms
2026-02-10 15:45:52.514 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:45:52.538 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 62
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 65
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 190
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 61
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-10 15:45:52.541 +03:00 [DBG] Connection id "0HNJ8K8NH9IFI" completed keep alive response.
2026-02-10 15:45:52.542 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 189.6101ms
2026-02-10 15:46:21.923 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 15:46:21.993 +03:00 [DBG] Hosting starting
2026-02-10 15:46:22.095 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 15:46:22.098 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 15:46:22.099 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 15:46:22.100 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 15:46:22.101 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 15:46:22.102 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 15:46:22.147 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 15:46:22.148 +03:00 [INF] Hosting environment: Development
2026-02-10 15:46:22.150 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 15:46:22.152 +03:00 [DBG] Hosting started
2026-02-10 15:46:22.283 +03:00 [DBG] Connection id "0HNJ8K9IH34I2" accepted.
2026-02-10 15:46:22.284 +03:00 [DBG] Connection id "0HNJ8K9IH34I2" started.
2026-02-10 15:46:22.293 +03:00 [DBG] Connection id "0HNJ8K9IH34I3" received FIN.
2026-02-10 15:46:22.293 +03:00 [DBG] Connection id "0HNJ8K9IH34I2" received FIN.
2026-02-10 15:46:22.295 +03:00 [DBG] Connection id "0HNJ8K9IH34I3" accepted.
2026-02-10 15:46:22.296 +03:00 [DBG] Connection id "0HNJ8K9IH34I3" started.
2026-02-10 15:46:22.299 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:46:22.299 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:46:22.317 +03:00 [DBG] Connection id "0HNJ8K9IH34I3" stopped.
2026-02-10 15:46:22.317 +03:00 [DBG] Connection id "0HNJ8K9IH34I2" stopped.
2026-02-10 15:46:22.320 +03:00 [DBG] Connection id "0HNJ8K9IH34I2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:46:22.320 +03:00 [DBG] Connection id "0HNJ8K9IH34I3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:46:22.544 +03:00 [DBG] Connection id "0HNJ8K9IH34I4" accepted.
2026-02-10 15:46:22.546 +03:00 [DBG] Connection id "0HNJ8K9IH34I4" started.
2026-02-10 15:46:22.571 +03:00 [DBG] Connection 0HNJ8K9IH34I4 established using the following protocol: "Tls13"
2026-02-10 15:46:22.602 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 15:46:22.663 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 15:46:22.674 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 15:46:22.675 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:46:22.678 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:46:22.706 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 15:46:22.707 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 15:46:22.720 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 15:46:22.721 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 15:46:22.723 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 124.5336ms
2026-02-10 15:46:22.745 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 15:46:22.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.2197ms
2026-02-10 15:46:22.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 15:46:22.802 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.5914ms
2026-02-10 15:46:22.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 15:46:22.848 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 15:46:22.849 +03:00 [DBG] Request did not match any endpoints
2026-02-10 15:46:22.850 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 15:46:22.855 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.7766ms
2026-02-10 15:46:32.821 +03:00 [DBG] Connection id "0HNJ8K9IH34I5" received FIN.
2026-02-10 15:46:32.821 +03:00 [DBG] Connection id "0HNJ8K9IH34I5" accepted.
2026-02-10 15:46:32.823 +03:00 [DBG] Connection id "0HNJ8K9IH34I5" started.
2026-02-10 15:46:32.823 +03:00 [DBG] Connection id "0HNJ8K9IH34I6" accepted.
2026-02-10 15:46:32.825 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 15:46:32.825 +03:00 [DBG] Connection id "0HNJ8K9IH34I6" started.
2026-02-10 15:46:32.826 +03:00 [DBG] Connection id "0HNJ8K9IH34I5" stopped.
2026-02-10 15:46:32.827 +03:00 [DBG] Connection id "0HNJ8K9IH34I5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 15:46:32.829 +03:00 [DBG] Connection 0HNJ8K9IH34I6 established using the following protocol: "Tls13"
2026-02-10 15:46:32.832 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 15:46:32.836 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 15:46:32.837 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 15:46:32.839 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:46:32.840 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:46:32.841 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:46:32.843 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:46:32.858 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:46:32.860 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:46:32.861 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:46:32.862 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:46:32.863 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:46:32.864 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:46:32.866 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:46:32.921 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 15:46:32.927 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:46:32.935 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:46:32.936 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:46:32.938 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:46:32.939 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:46:32.939 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:46:32.943 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:46:32.944 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:46:32.948 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:46:32.949 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:46:32.950 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:46:32.964 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 15:46:32.970 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 15:46:33.204 +03:00 [INF] Received HTTP response headers after 232.1635ms - 200
2026-02-10 15:46:33.207 +03:00 [INF] End processing HTTP request after 243.7283ms - 200
2026-02-10 15:46:33.217 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 15:46:33.218 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 15:46:33.530 +03:00 [INF] Received HTTP response headers after 311.6708ms - 200
2026-02-10 15:46:33.531 +03:00 [INF] End processing HTTP request after 314.2868ms - 200
2026-02-10 15:46:37.026 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 585ms, Cache = FALSE
2026-02-10 15:46:37.263 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 15:46:37.281 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:46:37.309 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:46:37.315 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 15:46:37.317 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 15:46:37.325 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 15:46:37.360 +03:00 [DBG] Creating DbConnection.
2026-02-10 15:46:37.366 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 15:46:37.369 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:46:37.376 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:46:37.380 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 15:46:37.384 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 15:46:37.386 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-10 15:46:37.391 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:46:37.404 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:46:37.412 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 15:46:37.417 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:46:37.421 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 15:46:37.423 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:46:37.426 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 15:46:37.432 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:46:37.433 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 15:46:37.440 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 15:46:37.443 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 15:46:37.443 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 15:46:37.444 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 15:46:37.445 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 15:46:37.446 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 15:46:37.456 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 4589.2542ms
2026-02-10 15:46:37.457 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:46:37.458 +03:00 [DBG] Connection id "0HNJ8K9IH34I6" completed keep alive response.
2026-02-10 15:46:37.460 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 15:46:37.463 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:46:37.465 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 15:46:37.467 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 4634.7205ms
2026-02-10 15:47:01.019 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 15:47:01.021 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 15:47:01.021 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 15:47:01.022 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:47:01.023 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:47:01.023 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 15:47:01.023 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:47:01.024 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 15:47:01.025 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 15:47:01.026 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 15:47:01.027 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 15:47:01.028 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 15:47:01.028 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 15:47:01.029 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:47:01.031 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 15:47:01.032 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 15:47:01.032 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 15:47:01.033 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:47:01.034 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 15:47:01.035 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 15:47:01.036 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 15:47:01.036 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:47:01.037 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:47:01.038 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 15:47:01.038 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 15:47:04.919 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, Cache = TRUE
2026-02-10 15:47:04.951 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 15:47:04.953 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:47:04.954 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:47:04.955 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 15:47:04.955 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 15:47:04.956 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 15:47:04.957 +03:00 [DBG] Creating DbConnection.
2026-02-10 15:47:04.957 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 15:47:04.958 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:47:04.959 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:47:04.960 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 15:47:04.960 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 15:47:04.961 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 15:47:04.961 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:47:04.963 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 15:47:04.964 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 15:47:04.965 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:47:04.966 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 15:47:04.967 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 15:47:04.968 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 15:47:04.968 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 15:47:04.969 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 15:47:04.970 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 15:47:04.971 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 15:47:04.972 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 15:47:04.972 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 15:47:04.973 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 15:47:04.974 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 15:47:04.974 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 3945.3618ms
2026-02-10 15:47:04.975 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 15:47:04.976 +03:00 [DBG] Connection id "0HNJ8K9IH34I6" completed keep alive response.
2026-02-10 15:47:04.976 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 15:47:04.977 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 15:47:04.978 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 15:47:04.979 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 3959.84ms
2026-02-10 16:44:59.488 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 16:44:59.650 +03:00 [DBG] Hosting starting
2026-02-10 16:44:59.777 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 16:44:59.778 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 16:44:59.779 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 16:44:59.779 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 16:44:59.780 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 16:44:59.781 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 16:44:59.808 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 16:44:59.809 +03:00 [INF] Hosting environment: Development
2026-02-10 16:44:59.810 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 16:44:59.811 +03:00 [DBG] Hosting started
2026-02-10 16:44:59.883 +03:00 [DBG] Connection id "0HNJ8LAARHL2B" received FIN.
2026-02-10 16:44:59.883 +03:00 [DBG] Connection id "0HNJ8LAARHL2C" received FIN.
2026-02-10 16:44:59.887 +03:00 [DBG] Connection id "0HNJ8LAARHL2C" accepted.
2026-02-10 16:44:59.887 +03:00 [DBG] Connection id "0HNJ8LAARHL2B" accepted.
2026-02-10 16:44:59.888 +03:00 [DBG] Connection id "0HNJ8LAARHL2C" started.
2026-02-10 16:44:59.889 +03:00 [DBG] Connection id "0HNJ8LAARHL2B" started.
2026-02-10 16:44:59.898 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:44:59.898 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:44:59.917 +03:00 [DBG] Connection id "0HNJ8LAARHL2B" stopped.
2026-02-10 16:44:59.917 +03:00 [DBG] Connection id "0HNJ8LAARHL2C" stopped.
2026-02-10 16:44:59.920 +03:00 [DBG] Connection id "0HNJ8LAARHL2B" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:44:59.920 +03:00 [DBG] Connection id "0HNJ8LAARHL2C" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:00.220 +03:00 [DBG] Connection id "0HNJ8LAARHL2D" accepted.
2026-02-10 16:45:00.221 +03:00 [DBG] Connection id "0HNJ8LAARHL2D" started.
2026-02-10 16:45:00.249 +03:00 [DBG] Connection 0HNJ8LAARHL2D established using the following protocol: "Tls13"
2026-02-10 16:45:00.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 16:45:00.373 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 16:45:00.386 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 16:45:00.387 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:45:00.390 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:45:00.427 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 16:45:00.429 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 16:45:00.439 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 16:45:00.440 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 16:45:00.442 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 167.3505ms
2026-02-10 16:45:00.472 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 16:45:00.483 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 11.5789ms
2026-02-10 16:45:00.508 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 16:45:00.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 123.477ms
2026-02-10 16:45:00.688 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 16:45:00.691 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 16:45:00.692 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:45:00.693 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:45:00.697 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.8343ms
2026-02-10 16:45:03.545 +03:00 [DBG] Connection id "0HNJ8LAARHL2E" accepted.
2026-02-10 16:45:03.545 +03:00 [DBG] Connection id "0HNJ8LAARHL2E" received FIN.
2026-02-10 16:45:03.546 +03:00 [DBG] Connection id "0HNJ8LAARHL2E" started.
2026-02-10 16:45:03.546 +03:00 [DBG] Connection id "0HNJ8LAARHL2F" accepted.
2026-02-10 16:45:03.548 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:45:03.548 +03:00 [DBG] Connection id "0HNJ8LAARHL2F" started.
2026-02-10 16:45:03.549 +03:00 [DBG] Connection id "0HNJ8LAARHL2E" stopped.
2026-02-10 16:45:03.550 +03:00 [DBG] Connection id "0HNJ8LAARHL2E" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:03.552 +03:00 [DBG] Connection 0HNJ8LAARHL2F established using the following protocol: "Tls13"
2026-02-10 16:45:03.555 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:03.558 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:03.560 +03:00 [DBG] Connection id "0HNJ8LAARHL2F" received FIN.
2026-02-10 16:45:03.561 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:03.561 +03:00 [DBG] Connection id "0HNJ8LAARHL2F" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:03.562 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:03.563 +03:00 [DBG] Connection id "0HNJ8LAARHL2F" disconnecting.
2026-02-10 16:45:03.565 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:03.565 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:03.571 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:03.585 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:03.588 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:03.589 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:03.590 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:03.592 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:03.593 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:03.595 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:03.649 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 16:45:03.655 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:03.663 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:03.666 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:03.668 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:03.669 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:03.670 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:03.673 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:03.675 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:03.679 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:03.680 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:03.682 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:03.693 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:45:03.699 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:45:04.025 +03:00 [INF] Received HTTP response headers after 324.3963ms - 200
2026-02-10 16:45:04.028 +03:00 [INF] End processing HTTP request after 335.1801ms - 200
2026-02-10 16:45:04.037 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:45:04.038 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:45:04.062 +03:00 [DBG] Connection id "0HNJ8LAARHL2G" accepted.
2026-02-10 16:45:04.062 +03:00 [DBG] Connection id "0HNJ8LAARHL2G" received FIN.
2026-02-10 16:45:04.063 +03:00 [DBG] Connection id "0HNJ8LAARHL2G" started.
2026-02-10 16:45:04.063 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" accepted.
2026-02-10 16:45:04.065 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:45:04.065 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" started.
2026-02-10 16:45:04.067 +03:00 [DBG] Connection id "0HNJ8LAARHL2G" stopped.
2026-02-10 16:45:04.069 +03:00 [DBG] Connection id "0HNJ8LAARHL2G" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:04.069 +03:00 [DBG] Connection 0HNJ8LAARHL2H established using the following protocol: "Tls13"
2026-02-10 16:45:04.071 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:04.073 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:04.074 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:04.075 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:04.076 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:04.076 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:04.077 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:04.077 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:04.079 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:04.080 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:04.080 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:04.082 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:04.082 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:04.083 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:04.089 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:04.091 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:04.092 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:04.093 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:04.094 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:04.094 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:04.095 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:04.096 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:04.097 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:04.098 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:04.099 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:04.100 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:45:04.101 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:45:04.168 +03:00 [INF] Received HTTP response headers after 66.7313ms - 200
2026-02-10 16:45:04.170 +03:00 [INF] End processing HTTP request after 69.7417ms - 200
2026-02-10 16:45:04.171 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:45:04.171 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:45:04.332 +03:00 [INF] Received HTTP response headers after 293.5204ms - 200
2026-02-10 16:45:04.333 +03:00 [INF] End processing HTTP request after 296.3099ms - 200
2026-02-10 16:45:04.340 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 655ms, CacheHit = FALSE
2026-02-10 16:45:04.394 +03:00 [INF] Received HTTP response headers after 222.0722ms - 200
2026-02-10 16:45:04.395 +03:00 [INF] End processing HTTP request after 224.5538ms - 200
2026-02-10 16:45:04.396 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 296ms, CacheHit = FALSE
2026-02-10 16:45:04.567 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:04.567 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:04.587 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:04.587 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:04.627 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:04.627 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:04.631 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:04.631 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:04.633 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:04.633 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:04.643 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:04.643 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:04.676 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:04.676 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:04.682 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 16:45:04.682 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 16:45:04.684 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:04.684 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:04.691 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:04.695 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:04.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:04.701 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 16:45:04.704 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:04.705 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:04.705 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:04.706 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:04.708 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 16:45:04.708 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:04.718 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:04.726 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:04.731 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:04.736 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 16:45:04.738 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:04.741 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 16:45:04.748 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:04.750 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:04.758 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:04.760 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:04.760 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:04.761 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:04.761 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:04.762 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:04.772 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 687.2548ms
2026-02-10 16:45:04.774 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:04.775 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:04.777 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:04.779 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:04.781 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:04.782 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 711.4241ms
2026-02-10 16:45:04.872 +03:00 [INF] Executed DbCommand (170ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:04.874 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:04.875 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:04.876 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:04.876 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:04.877 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:04.878 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:04.879 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:04.880 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:04.881 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:04.881 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:04.882 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:04.882 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:04.883 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:04.885 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1290.9109ms
2026-02-10 16:45:04.886 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:04.887 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:04.887 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:04.888 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:04.889 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 1334.5198ms
2026-02-10 16:45:04.892 +03:00 [DBG] Connection id "0HNJ8LAARHL2F" stopped.
2026-02-10 16:45:06.963 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:06.965 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:06.966 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:06.967 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:06.968 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:06.968 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:06.969 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:06.970 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:06.971 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:06.973 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:06.973 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:06.975 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:06.976 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:06.977 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:06.981 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:06.982 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:06.983 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:06.985 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:06.986 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:06.987 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:06.988 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:06.989 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:06.990 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:06.991 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:06.992 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:06.993 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:07.028 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:07.030 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:07.032 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:07.033 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:07.035 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:07.036 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:07.038 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:07.038 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:07.039 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:07.040 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:07.041 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:07.042 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:07.043 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:07.044 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:07.045 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:07.047 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:07.049 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:07.050 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:07.051 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:07.052 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:07.053 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:07.054 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:07.056 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:07.057 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:07.058 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:07.058 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:07.059 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:07.060 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:07.061 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 83.8364ms
2026-02-10 16:45:07.062 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:07.063 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:07.063 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:07.064 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:07.065 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:07.066 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 102.8892ms
2026-02-10 16:45:07.704 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:07.707 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:07.708 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:07.709 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:07.709 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:07.710 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:07.710 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:07.711 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:07.712 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:07.713 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:07.714 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:07.715 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:07.716 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:07.717 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:07.718 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:07.719 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:07.720 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:07.721 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:07.722 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:07.722 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:07.723 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:07.724 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:07.725 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:07.726 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:07.726 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:07.727 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:07.729 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:07.730 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:07.731 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:07.732 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:07.732 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:07.733 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:07.734 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:07.734 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:07.735 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:07.736 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:07.737 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:07.737 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:07.738 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:07.739 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:07.740 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:07.742 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:07.743 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:07.744 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:07.745 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:07.746 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:07.746 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:07.747 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:07.748 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:07.749 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:07.749 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:07.750 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:07.750 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:07.751 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:07.753 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 35.7561ms
2026-02-10 16:45:07.754 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:07.754 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:07.755 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:07.756 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:07.756 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:07.757 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 53.3437ms
2026-02-10 16:45:08.463 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:08.465 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:08.466 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:08.468 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:08.468 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:08.469 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:08.469 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:08.470 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:08.471 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:08.472 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:08.473 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:08.474 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:08.474 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:08.475 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:08.476 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:08.477 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:08.478 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:08.478 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:08.479 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:08.480 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:08.481 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:08.481 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:08.482 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:08.483 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:08.484 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:08.485 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:08.486 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:08.488 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:08.489 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:08.490 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:08.490 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:08.491 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:08.492 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:08.493 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:08.493 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:08.494 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:08.495 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:08.496 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:08.496 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:08.497 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:08.499 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:08.500 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:08.501 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:08.502 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:08.503 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:08.504 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:08.505 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:08.506 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:08.507 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:08.508 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:08.509 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:08.509 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:08.509 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:08.510 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:08.511 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 35.9783ms
2026-02-10 16:45:08.512 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:08.513 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:08.513 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:08.514 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:08.515 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:08.516 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 52.4651ms
2026-02-10 16:45:08.831 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:08.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:08.833 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:08.834 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:08.835 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:08.835 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:08.836 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:08.836 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:08.837 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:08.838 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:08.839 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:08.840 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:08.841 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:08.842 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:08.843 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:08.844 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:08.845 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:08.845 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:08.846 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:08.847 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:08.847 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:08.848 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:08.849 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:08.849 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:08.850 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:08.851 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:08.852 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:08.853 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:08.854 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:08.855 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:08.855 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:08.856 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:08.857 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:08.858 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:08.858 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:08.859 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:08.860 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:08.860 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:08.861 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:08.861 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:08.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:08.863 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:08.865 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:08.866 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:08.866 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:08.867 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:08.868 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:08.869 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:08.869 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:08.870 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:08.871 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:08.871 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:08.871 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:08.872 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:08.873 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.1599ms
2026-02-10 16:45:08.874 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:08.875 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:08.875 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:08.876 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:08.876 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:08.877 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.2244ms
2026-02-10 16:45:09.582 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:09.584 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:09.585 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:09.585 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:09.586 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:09.586 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:09.587 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:09.588 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:09.589 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:09.590 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:09.592 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:09.594 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:09.595 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:09.596 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:09.597 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:09.599 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:09.600 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:09.601 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:09.602 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:09.604 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:09.605 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:09.606 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:09.607 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:09.609 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:09.610 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:09.611 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:09.613 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:09.615 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:09.616 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:09.617 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:09.618 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:09.619 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:09.620 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:09.621 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:09.622 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:09.623 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:09.624 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:09.625 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:09.626 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 16:45:09.628 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:09.629 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:09.631 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:09.633 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:09.634 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:09.635 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:09.636 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:09.638 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:09.639 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:09.640 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:09.642 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:09.643 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:09.644 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:09.644 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:09.646 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:09.647 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 50.8337ms
2026-02-10 16:45:09.648 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:09.649 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:09.650 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:09.651 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:09.652 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:09.654 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 71.2019ms
2026-02-10 16:45:10.001 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:10.004 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:10.005 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:10.006 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:10.007 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:10.008 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:10.009 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:10.010 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:10.011 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:10.013 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:10.014 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:10.016 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:10.017 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:10.019 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:10.020 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:10.021 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:10.022 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:10.024 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:10.025 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:10.026 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:10.027 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:10.028 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:10.029 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:10.031 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:10.032 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:10.033 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:10.035 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:10.037 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:10.038 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:10.039 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:10.040 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:10.041 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:10.043 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:10.043 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:10.044 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:10.046 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:10.047 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:10.048 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:10.049 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 16:45:10.050 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:10.052 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:10.054 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:10.056 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:10.057 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 16:45:10.058 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:10.059 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:10.061 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:10.063 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:10.064 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:10.066 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:10.066 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:10.067 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:10.068 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:10.069 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:10.070 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 51.7053ms
2026-02-10 16:45:10.071 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:10.072 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:10.073 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:10.074 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:10.076 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:10.077 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 76.0934ms
2026-02-10 16:45:10.749 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:10.751 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:10.752 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:10.753 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:10.753 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:10.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:10.755 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:10.755 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:10.757 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:10.758 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:10.759 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:10.761 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:10.762 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:10.763 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:10.764 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:10.765 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:10.766 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:10.767 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:10.768 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:10.769 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:10.770 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:10.770 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:10.771 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:10.772 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:10.773 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:10.774 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:10.776 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:10.778 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:10.779 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:10.780 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:10.781 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:10.781 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:10.782 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:10.783 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:10.784 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:10.784 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:10.785 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:10.786 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:10.787 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:10.788 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:10.789 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:10.791 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:10.792 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:10.793 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:10.794 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:10.795 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:10.796 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:10.797 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:10.798 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:10.800 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:10.800 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:10.801 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:10.801 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:10.802 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:10.803 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 40.2386ms
2026-02-10 16:45:10.804 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:10.805 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:10.806 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:10.807 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:10.807 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:10.809 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 59.6718ms
2026-02-10 16:45:11.124 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:11.126 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:11.126 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:11.127 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:11.127 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:11.128 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:11.128 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:11.129 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:11.130 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:11.130 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:11.131 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:11.132 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:11.133 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:11.133 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:11.134 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:11.135 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:11.135 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:11.136 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:11.137 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:11.138 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:11.138 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:11.139 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:11.140 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:11.141 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:11.141 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:11.142 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:11.143 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:11.144 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:11.145 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:11.146 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:11.147 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:11.147 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:11.148 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:11.148 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:11.149 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:11.149 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:11.150 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:11.151 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:11.152 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:11.152 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:11.153 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:11.154 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:11.156 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:11.157 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:11.157 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:11.158 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:11.159 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:11.159 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:11.160 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:11.161 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:11.161 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:11.162 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:11.162 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:11.163 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:11.164 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.2911ms
2026-02-10 16:45:11.165 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:11.165 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:11.166 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:11.166 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:11.167 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:11.168 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.2486ms
2026-02-10 16:45:12.284 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:12.286 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:12.286 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:12.287 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:12.288 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:12.288 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:12.289 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:12.290 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:12.291 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:12.292 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:12.293 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:12.295 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:12.296 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:12.297 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:12.298 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:12.299 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:12.300 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:12.301 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:12.302 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:12.302 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:12.303 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:12.303 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:12.304 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:12.305 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:12.306 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:12.306 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:12.308 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:12.309 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:12.310 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:12.311 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:12.312 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:12.312 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:12.313 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:12.314 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:12.314 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:12.315 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:12.315 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:12.316 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:12.317 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:12.317 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:12.318 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:12.319 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:12.320 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:12.321 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:12.322 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:12.323 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:12.324 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:12.325 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:12.326 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:12.327 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:12.327 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:12.328 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:12.328 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:12.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:12.329 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.5639ms
2026-02-10 16:45:12.330 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:12.331 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:12.332 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:12.333 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:12.333 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:12.334 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 50.3626ms
2026-02-10 16:45:12.677 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:12.679 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:12.680 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:12.681 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:12.681 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:12.682 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:12.682 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:12.683 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:12.685 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:12.685 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:12.686 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:12.687 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:12.688 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:12.689 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:12.690 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:12.691 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:12.691 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:12.692 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:12.693 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:12.693 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:12.694 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:12.695 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:12.696 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:12.696 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:12.697 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:12.698 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:12.699 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:12.700 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:12.701 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:12.702 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:12.703 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:12.704 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:12.705 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:12.706 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:12.707 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:12.707 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:12.708 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:12.709 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:12.709 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:12.710 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:12.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:12.712 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:12.713 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:12.714 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:12.715 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:12.716 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:12.717 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:12.718 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:12.719 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:12.720 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:12.720 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:12.721 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:12.721 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:12.722 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:12.723 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.6541ms
2026-02-10 16:45:12.723 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:12.724 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:12.725 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:12.725 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:12.726 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:12.727 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 49.3895ms
2026-02-10 16:45:13.082 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:13.084 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:13.084 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:13.085 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:13.086 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:13.086 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:13.087 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:13.087 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:13.088 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:13.090 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:13.090 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:13.091 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:13.092 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:13.093 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:13.093 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:13.094 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:13.095 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:13.096 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:13.096 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:13.097 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:13.097 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:13.098 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:13.099 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:13.099 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:13.100 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:13.100 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:13.101 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:13.102 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:13.103 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:13.104 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:13.104 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:13.105 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:13.106 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:13.106 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:13.107 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:13.107 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:13.108 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:13.108 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:13.109 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:13.110 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:13.111 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:13.112 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:13.113 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:13.114 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:13.115 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:13.115 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:13.116 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:13.117 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:13.118 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:13.119 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:13.119 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:13.120 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:13.120 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:13.121 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:13.122 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.842ms
2026-02-10 16:45:13.122 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:13.123 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" completed keep alive response.
2026-02-10 16:45:13.124 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:13.124 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:13.125 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:13.126 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.0484ms
2026-02-10 16:45:13.874 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:13.877 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:13.878 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:13.879 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:13.880 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:13.881 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:13.881 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:13.883 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:13.884 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:13.886 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:13.887 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:13.889 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:13.890 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:13.892 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:13.893 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:13.894 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:13.895 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:13.896 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" received FIN.
2026-02-10 16:45:13.897 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:13.897 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:13.898 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:13.900 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" disconnecting.
2026-02-10 16:45:13.901 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:13.903 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:13.904 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:13.905 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:13.906 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:13.907 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:13.908 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:13.910 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:13.912 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:13.913 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:13.914 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:13.915 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:13.916 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:13.918 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:13.919 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:13.920 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:13.921 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:13.922 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:13.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:13.924 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:13.925 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:13.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:13.928 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:13.930 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:13.931 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:13.932 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:13.933 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:13.935 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:13.936 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:13.937 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:13.939 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:13.940 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:13.940 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:13.941 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:13.942 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:13.944 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 52.5264ms
2026-02-10 16:45:13.945 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:13.946 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:13.947 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:13.948 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:13.950 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 75.4398ms
2026-02-10 16:45:13.952 +03:00 [DBG] Connection id "0HNJ8LAARHL2H" stopped.
2026-02-10 16:45:14.290 +03:00 [DBG] Connection id "0HNJ8LAARHL2I" accepted.
2026-02-10 16:45:14.290 +03:00 [DBG] Connection id "0HNJ8LAARHL2I" received FIN.
2026-02-10 16:45:14.291 +03:00 [DBG] Connection id "0HNJ8LAARHL2I" started.
2026-02-10 16:45:14.291 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" accepted.
2026-02-10 16:45:14.294 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:45:14.294 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" started.
2026-02-10 16:45:14.296 +03:00 [DBG] Connection id "0HNJ8LAARHL2I" stopped.
2026-02-10 16:45:14.298 +03:00 [DBG] Connection id "0HNJ8LAARHL2I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:14.298 +03:00 [DBG] Connection 0HNJ8LAARHL2J established using the following protocol: "Tls13"
2026-02-10 16:45:14.300 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:14.303 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:14.304 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:14.305 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:14.306 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:14.307 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:14.308 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:14.309 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:14.310 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:14.312 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:14.313 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:14.315 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:14.316 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:14.317 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:14.319 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:14.320 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:14.321 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:14.323 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:14.324 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:14.325 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:14.326 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:14.327 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:14.329 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:14.330 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:14.331 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:14.332 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:14.334 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:14.336 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:14.337 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:14.338 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:14.339 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:14.340 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:14.341 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:14.342 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:14.343 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:14.344 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:14.345 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:14.346 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:14.347 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:14.348 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:14.350 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:14.351 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:14.353 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:14.354 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:14.356 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:14.357 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:14.358 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:14.360 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:14.361 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:14.363 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:14.363 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:14.364 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:14.365 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:14.366 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:14.367 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 49.9193ms
2026-02-10 16:45:14.368 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:14.369 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" completed keep alive response.
2026-02-10 16:45:14.370 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:14.371 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:14.372 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:14.374 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 73.3634ms
2026-02-10 16:45:15.089 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:15.091 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:15.092 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:15.093 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.094 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:15.094 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:15.095 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.096 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:15.097 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:15.098 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:15.099 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:15.101 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:15.102 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:15.103 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:15.104 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:15.105 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:15.106 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:15.107 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.108 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.108 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:15.109 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.109 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:15.110 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:15.111 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:15.111 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:15.112 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:15.113 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:15.114 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.115 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.115 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:15.116 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:15.117 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:15.117 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:15.118 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:15.118 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:15.119 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.119 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:15.120 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:15.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:15.121 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:15.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:15.124 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:15.125 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.126 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:15.126 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.127 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:15.128 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.129 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:15.129 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:15.130 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:15.131 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:15.131 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:15.131 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:15.132 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:15.133 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.5346ms
2026-02-10 16:45:15.134 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.134 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" completed keep alive response.
2026-02-10 16:45:15.135 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:15.135 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:15.136 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:15.137 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 48.2639ms
2026-02-10 16:45:15.470 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:15.471 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:15.472 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:15.473 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.473 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:15.474 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:15.474 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.475 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:15.476 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:15.476 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:15.477 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:15.478 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:15.479 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:15.479 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:15.480 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:15.481 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:15.482 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:15.482 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.483 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.484 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:15.485 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.485 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:15.486 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:15.487 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:15.487 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:15.488 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" received FIN.
2026-02-10 16:45:15.488 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:15.489 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:15.490 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:15.491 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" disconnecting.
2026-02-10 16:45:15.492 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.493 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.494 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:15.494 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:15.495 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:15.495 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:15.496 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:15.496 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:15.497 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.497 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:15.498 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:15.499 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:15.499 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:15.500 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:15.501 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:15.502 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.503 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:15.504 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.505 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:15.506 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.507 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:15.507 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:15.508 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:15.509 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:15.509 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:15.510 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:15.511 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:15.512 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.7041ms
2026-02-10 16:45:15.513 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.513 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:15.514 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:15.515 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:15.515 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 45.9221ms
2026-02-10 16:45:15.517 +03:00 [DBG] Connection id "0HNJ8LAARHL2J" stopped.
2026-02-10 16:45:15.910 +03:00 [DBG] Connection id "0HNJ8LAARHL2K" received FIN.
2026-02-10 16:45:15.910 +03:00 [DBG] Connection id "0HNJ8LAARHL2K" accepted.
2026-02-10 16:45:15.911 +03:00 [DBG] Connection id "0HNJ8LAARHL2K" started.
2026-02-10 16:45:15.912 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" accepted.
2026-02-10 16:45:15.913 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:45:15.913 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" started.
2026-02-10 16:45:15.914 +03:00 [DBG] Connection id "0HNJ8LAARHL2K" stopped.
2026-02-10 16:45:15.915 +03:00 [DBG] Connection id "0HNJ8LAARHL2K" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:15.916 +03:00 [DBG] Connection 0HNJ8LAARHL2L established using the following protocol: "Tls13"
2026-02-10 16:45:15.917 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:15.919 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:15.919 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:15.920 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.921 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:15.921 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:15.922 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.923 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:15.924 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:15.924 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:15.925 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:15.926 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:15.927 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:15.928 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:15.928 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:15.929 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:15.930 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:15.931 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.932 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.932 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:15.933 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:15.934 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:15.934 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:15.935 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:15.935 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:15.936 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:15.937 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:15.938 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.939 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.940 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:15.940 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:15.941 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:15.942 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:15.942 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:15.943 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:15.943 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.944 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:15.945 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:15.945 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:15.946 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:15.947 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:15.948 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:15.949 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.950 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:15.951 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:15.952 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:15.952 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:15.953 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:15.954 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:15.955 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:15.956 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:15.956 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:15.956 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:15.957 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:15.958 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.9838ms
2026-02-10 16:45:15.958 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:15.959 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" completed keep alive response.
2026-02-10 16:45:15.959 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:15.960 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:15.961 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:15.962 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.4787ms
2026-02-10 16:45:16.735 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:16.736 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:16.737 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:16.738 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:16.738 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:16.739 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:16.739 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:16.740 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:16.741 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:16.742 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:16.743 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:16.744 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:16.745 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:16.746 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:16.746 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" received FIN.
2026-02-10 16:45:16.747 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:16.747 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:16.748 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:16.749 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" disconnecting.
2026-02-10 16:45:16.749 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:16.750 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:16.751 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:16.752 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:16.752 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:16.753 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:16.754 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:16.754 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:16.755 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:16.756 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:16.757 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:16.758 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:16.759 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:16.760 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:16.761 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:16.761 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:16.762 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:16.762 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:16.763 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:16.764 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:16.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:16.765 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:16.766 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:16.766 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:16.767 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:16.768 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:16.770 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:16.770 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:16.771 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:16.772 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:16.773 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:16.773 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:16.774 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:16.776 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:16.776 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:16.777 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:16.777 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:16.778 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:16.779 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.0856ms
2026-02-10 16:45:16.779 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:16.780 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:16.780 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:16.781 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:16.782 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 47.3241ms
2026-02-10 16:45:16.783 +03:00 [DBG] Connection id "0HNJ8LAARHL2L" stopped.
2026-02-10 16:45:17.179 +03:00 [DBG] Connection id "0HNJ8LAARHL2M" received FIN.
2026-02-10 16:45:17.179 +03:00 [DBG] Connection id "0HNJ8LAARHL2M" accepted.
2026-02-10 16:45:17.180 +03:00 [DBG] Connection id "0HNJ8LAARHL2M" started.
2026-02-10 16:45:17.181 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" accepted.
2026-02-10 16:45:17.182 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:45:17.182 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" started.
2026-02-10 16:45:17.183 +03:00 [DBG] Connection id "0HNJ8LAARHL2M" stopped.
2026-02-10 16:45:17.184 +03:00 [DBG] Connection id "0HNJ8LAARHL2M" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:17.185 +03:00 [DBG] Connection 0HNJ8LAARHL2N established using the following protocol: "Tls13"
2026-02-10 16:45:17.187 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:17.188 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:17.188 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:17.189 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:17.190 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:17.190 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:17.191 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:17.191 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:17.192 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:17.193 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:17.194 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:17.195 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:17.195 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:17.196 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:17.197 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:17.197 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:17.198 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:17.199 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:17.199 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:17.200 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:17.200 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:17.201 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:17.202 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:17.202 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:17.203 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:17.203 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:17.204 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:17.205 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:17.206 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:17.207 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:17.207 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:17.208 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:17.209 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:17.209 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:17.209 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:17.210 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:17.211 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:17.211 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:17.212 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:17.212 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:17.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:17.214 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:17.215 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:17.216 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:17.217 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:17.218 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:17.218 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:17.219 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:17.220 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:17.221 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:17.222 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:17.222 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:17.223 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:17.223 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:17.224 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.1288ms
2026-02-10 16:45:17.225 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:17.225 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:17.226 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:17.226 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:17.227 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:17.228 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.199ms
2026-02-10 16:45:26.246 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:26.247 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:26.248 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:26.249 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:26.249 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:26.250 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:26.250 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:26.251 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:26.252 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:26.253 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:26.254 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:26.255 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:26.256 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:26.257 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:26.258 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:26.259 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:26.260 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:26.260 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:26.261 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:26.262 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:26.262 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:26.263 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:26.263 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:26.264 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:26.265 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:26.265 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:26.267 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:26.268 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:26.269 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:26.270 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:26.270 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:26.271 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:26.271 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:26.272 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:26.272 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:26.273 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:26.274 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:26.274 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:26.275 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:26.276 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:26.277 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:26.278 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:26.279 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:26.280 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:26.281 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:26.282 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:26.282 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:26.283 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:26.284 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:26.285 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:26.285 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:26.286 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:26.286 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:26.287 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:26.288 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.7939ms
2026-02-10 16:45:26.288 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:26.289 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:26.290 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:26.290 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:26.291 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:26.292 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.8633ms
2026-02-10 16:45:26.948 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:26.950 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:26.950 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:26.951 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:26.952 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:26.952 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:26.953 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:26.953 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:26.954 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:26.955 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:26.956 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:26.957 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:26.958 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:26.959 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:26.960 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:26.961 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:26.961 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:26.962 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:26.963 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:26.963 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:26.964 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:26.965 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:26.965 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:26.966 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:26.966 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:26.967 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:26.968 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:26.969 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:26.970 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:26.971 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:26.971 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:26.972 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:26.973 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:26.973 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:26.974 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:26.975 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:26.975 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:26.976 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:26.976 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:26.977 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:26.978 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:26.979 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:26.980 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:26.981 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:26.982 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:26.983 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:26.983 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:26.984 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:26.985 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:26.986 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:26.986 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:26.987 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:26.987 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:26.988 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:26.988 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.3857ms
2026-02-10 16:45:26.990 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:26.991 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:26.992 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:26.992 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:26.994 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:26.994 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.2318ms
2026-02-10 16:45:28.719 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:28.721 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:28.721 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:28.722 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:28.723 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:28.724 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:28.724 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:28.725 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:28.726 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:28.727 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:28.727 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:28.728 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:28.729 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:28.730 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:28.731 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:28.731 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:28.732 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:28.733 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:28.733 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:28.734 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:28.735 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:28.735 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:28.736 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:28.736 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:28.737 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:28.738 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:28.739 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:28.741 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:28.742 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:28.743 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:28.743 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:28.744 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:28.745 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:28.746 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:28.746 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:28.747 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:28.747 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:28.748 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:28.748 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:28.749 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:28.750 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:28.751 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:28.753 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:28.754 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:28.755 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:28.755 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:28.756 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:28.757 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:28.758 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:28.759 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:28.760 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:28.760 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:28.761 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:28.761 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:28.762 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.4048ms
2026-02-10 16:45:28.763 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:28.764 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:28.764 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:28.765 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:28.765 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:28.766 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.8982ms
2026-02-10 16:45:29.418 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:29.419 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:29.420 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:29.421 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:29.422 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:29.422 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:29.423 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:29.423 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:29.424 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:29.425 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:29.426 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:29.427 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:29.428 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:29.429 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:29.429 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:29.430 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:29.431 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:29.431 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:29.432 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:29.433 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:29.433 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:29.434 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:29.435 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:29.435 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:29.436 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:29.437 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:29.438 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:29.439 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:29.440 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:29.441 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:29.442 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:29.442 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:29.443 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:29.443 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:29.444 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:29.444 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:29.445 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:29.446 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:29.446 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:29.447 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:29.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:29.449 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:29.451 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:29.451 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:29.452 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:29.453 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:29.454 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:29.455 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:29.455 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:29.456 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:29.457 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:29.457 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:29.458 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:29.458 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:29.459 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.6614ms
2026-02-10 16:45:29.460 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:29.461 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:29.461 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:29.462 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:29.463 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:29.463 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.5842ms
2026-02-10 16:45:31.202 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:31.203 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:31.204 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:31.205 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:31.205 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:31.206 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:31.206 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:31.207 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:31.208 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:31.209 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:31.209 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:31.210 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:31.211 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:31.212 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:31.213 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:31.213 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:31.214 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:31.215 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:31.215 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:31.216 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:31.216 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:31.217 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:31.218 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:31.218 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:31.220 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:31.221 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:31.222 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:31.223 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:31.224 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:31.224 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:31.225 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:31.225 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:31.226 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:31.226 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:31.227 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:31.228 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:31.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:31.229 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:31.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:31.230 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:31.231 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:31.232 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:31.233 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:31.234 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:31.235 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:31.236 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:31.236 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:31.237 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:31.238 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:31.239 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:31.239 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:31.240 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:31.240 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:31.241 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:31.241 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.486ms
2026-02-10 16:45:31.242 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:31.243 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:31.243 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:31.244 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:31.244 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:31.245 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.2836ms
2026-02-10 16:45:33.021 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:33.023 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:33.024 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:33.024 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:33.025 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:33.025 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:33.026 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:33.026 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:33.027 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:33.028 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:33.029 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:33.030 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:33.031 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:33.031 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:33.032 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:33.033 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:33.033 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:33.034 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:33.035 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:33.035 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:33.036 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:33.037 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:33.037 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:33.038 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:33.039 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:33.040 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:33.041 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:33.042 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:33.043 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:33.044 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:33.044 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:33.045 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:33.045 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:33.046 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:33.046 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:33.047 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:33.048 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:33.048 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:33.049 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:33.049 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:33.050 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:33.051 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:33.053 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:33.053 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:33.054 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:33.055 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:45:33.056 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:33.057 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:33.058 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:33.059 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:33.060 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:33.060 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:33.060 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:33.061 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:33.062 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.3029ms
2026-02-10 16:45:33.062 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:33.063 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:33.064 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:33.064 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:33.065 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:33.065 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.0073ms
2026-02-10 16:45:33.386 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:33.388 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:33.388 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:33.389 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:33.390 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:33.390 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:33.391 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:33.391 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:33.392 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:33.393 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:33.394 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:33.395 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:33.395 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:33.396 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:33.397 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:33.398 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:33.399 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:33.399 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:33.400 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:33.401 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:33.401 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:33.402 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:33.402 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:33.403 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:33.404 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:33.404 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:33.406 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:33.407 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:33.407 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:33.408 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:33.409 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:33.409 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:33.410 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:33.410 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:33.411 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:33.411 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:33.412 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:33.412 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:33.413 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:33.414 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:33.415 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:33.416 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:33.417 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:33.418 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:33.419 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:33.419 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:33.420 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:33.421 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:33.421 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:33.423 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:33.423 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:33.423 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:33.424 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:33.424 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:33.425 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.0948ms
2026-02-10 16:45:33.426 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:33.426 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:33.427 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:33.427 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:33.428 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:33.429 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.1083ms
2026-02-10 16:45:34.138 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:34.140 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:34.140 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:34.141 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:34.142 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:34.142 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:34.143 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:34.143 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:34.144 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:34.145 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:34.146 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:34.147 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:34.148 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:34.149 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:34.149 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:34.150 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:34.151 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:34.152 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:34.152 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:34.153 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:34.153 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:34.154 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:34.155 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:34.156 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:34.157 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:34.157 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:34.159 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:34.160 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:34.161 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:34.161 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:34.162 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:34.163 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:34.163 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:34.164 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:34.164 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:34.165 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:34.166 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:34.167 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:34.167 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:34.168 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:34.169 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:34.170 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:34.171 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:34.172 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:34.173 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:34.173 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:34.174 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:34.175 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:34.176 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:34.177 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:34.177 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:34.178 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:34.178 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:34.179 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:34.180 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.1437ms
2026-02-10 16:45:34.180 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:34.181 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:34.182 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:34.182 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:34.183 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:34.183 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.4303ms
2026-02-10 16:45:34.886 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:34.887 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:34.888 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:34.889 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:34.889 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:34.890 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:34.890 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:34.891 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:34.892 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:34.893 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:34.893 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:34.894 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:34.895 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:34.896 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:34.897 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:34.898 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:34.898 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:34.899 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:34.899 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:34.900 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:34.901 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:34.901 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:34.902 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:34.902 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:34.903 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:34.903 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:34.904 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:34.905 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:34.906 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:34.907 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:34.907 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:34.908 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:34.908 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:34.909 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:34.909 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:34.910 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:34.910 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:34.911 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:34.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:34.912 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:34.913 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:34.914 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:34.915 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:34.916 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:34.917 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:34.917 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:34.918 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:34.919 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:34.920 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:34.921 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:34.921 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:34.921 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:34.922 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:34.923 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:34.923 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.4699ms
2026-02-10 16:45:34.924 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:34.925 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:34.925 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:34.926 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:34.926 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:34.927 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.6151ms
2026-02-10 16:45:35.270 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:35.272 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:35.273 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:35.273 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:35.274 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:35.275 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:35.275 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:35.276 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:35.277 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:35.277 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:35.278 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:35.280 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:35.280 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:35.281 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:35.282 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:35.283 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:35.283 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:35.284 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:35.285 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:35.286 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:35.286 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:35.287 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:35.288 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:35.288 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:35.289 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:35.290 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:35.291 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:35.292 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:35.293 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:35.294 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:35.294 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:35.295 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:35.296 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:35.296 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:35.297 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:35.297 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:35.298 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:35.299 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:35.299 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:35.300 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:35.301 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:35.302 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:35.304 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:35.304 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:35.305 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:35.306 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:35.307 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:35.308 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:35.308 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:35.310 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:35.310 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:35.310 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:35.311 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:35.311 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:35.312 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.9751ms
2026-02-10 16:45:35.313 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:35.314 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:35.314 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:35.315 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:35.315 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:35.316 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.2391ms
2026-02-10 16:45:36.035 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:36.036 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:36.037 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:36.037 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:36.038 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:36.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:36.039 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:36.040 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:36.041 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:36.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:36.043 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:36.044 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:36.045 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:36.045 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:36.046 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:36.047 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:36.047 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:36.048 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:36.049 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:36.049 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:36.050 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:36.050 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:36.051 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:36.052 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:36.052 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:36.053 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:36.054 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:36.055 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:36.056 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:36.056 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:36.057 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:36.057 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:36.058 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:36.058 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:36.059 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:36.060 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:36.060 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:36.061 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:36.061 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:36.062 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:36.063 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:36.064 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:36.065 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:36.066 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:36.066 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:36.067 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:36.068 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:36.069 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:36.069 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:36.070 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:36.071 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:36.071 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:36.071 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:36.072 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:36.073 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.8491ms
2026-02-10 16:45:36.074 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:36.075 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:36.075 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:36.076 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:36.076 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:36.077 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.5319ms
2026-02-10 16:45:36.403 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:36.404 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:36.405 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:36.406 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:36.406 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:36.407 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:36.407 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:36.408 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:36.409 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:36.409 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:36.410 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:36.411 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:36.412 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:36.413 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:36.414 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:36.415 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:36.416 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:36.417 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:36.418 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:36.419 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:36.419 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:36.420 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:36.421 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:36.421 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:36.422 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:36.423 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:36.425 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:36.426 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:36.427 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:36.427 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:36.428 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:36.428 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:36.429 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:36.429 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:36.430 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:36.431 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:36.432 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:36.432 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:36.433 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:36.433 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:36.435 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:36.436 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:36.437 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:36.438 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:36.439 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:36.439 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:36.440 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:36.441 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:36.442 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:36.444 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:36.444 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:36.445 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:36.445 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:36.446 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:36.446 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.2632ms
2026-02-10 16:45:36.447 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:36.448 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:36.448 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:36.449 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:36.450 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:36.451 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 47.8808ms
2026-02-10 16:45:37.151 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:37.152 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:37.153 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:37.154 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:37.154 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:37.154 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:37.155 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:37.156 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:37.157 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:37.157 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:37.158 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:37.159 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:37.160 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:37.161 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:37.162 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:37.162 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:37.163 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:37.164 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:37.165 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:37.165 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:37.166 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:37.166 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:37.167 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:37.168 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:37.168 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:37.169 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:37.170 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:37.171 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:37.172 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:37.173 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:37.173 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:37.174 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:37.174 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:37.175 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:37.175 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:37.176 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:37.177 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:37.177 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:37.178 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:37.178 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:37.179 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:37.180 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:37.181 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:37.182 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:37.183 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:37.184 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:37.184 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:37.185 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:37.186 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:37.187 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:37.187 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:37.188 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:37.188 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:37.189 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:37.190 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.6757ms
2026-02-10 16:45:37.190 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:37.191 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:37.192 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:37.192 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:37.193 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:37.193 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.8965ms
2026-02-10 16:45:37.888 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:37.889 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:37.890 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:37.891 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:37.891 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:37.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:37.892 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:37.893 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:37.894 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:37.895 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:37.896 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:37.897 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:37.898 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:37.899 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:37.899 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:37.900 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:37.901 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:37.901 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:37.902 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:37.903 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:37.903 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:37.904 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:37.904 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:37.905 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:37.906 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:37.906 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:37.907 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:37.908 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:37.909 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:37.910 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:37.910 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:37.911 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:37.912 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:37.912 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:37.913 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:37.913 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:37.914 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:37.914 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:37.915 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:37.916 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:37.917 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:37.918 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:37.919 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:37.920 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:37.921 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:37.921 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:37.922 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:37.923 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:37.924 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:37.925 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:37.926 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:37.926 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:37.927 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:37.928 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:37.928 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.6917ms
2026-02-10 16:45:37.929 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:37.930 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:37.930 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:37.931 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:37.932 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:37.932 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.5266ms
2026-02-10 16:45:38.284 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:38.286 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:38.287 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:38.288 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:38.288 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:38.289 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:38.289 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:38.290 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:38.291 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:38.292 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:38.292 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:38.293 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:38.294 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:38.295 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:38.296 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:38.296 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:38.297 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:38.298 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:38.298 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:38.299 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:38.300 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:38.300 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:38.301 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:38.302 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:38.302 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:38.303 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:38.304 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:38.305 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:38.306 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:38.306 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:38.307 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:38.308 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:38.308 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:38.309 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:38.309 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:38.310 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:38.310 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:38.311 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:38.312 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:38.312 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:38.313 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:38.315 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:38.316 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:38.316 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:38.317 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:38.318 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:38.319 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:38.320 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:38.320 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:38.321 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:38.322 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:38.322 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:38.323 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:38.323 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:38.324 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.0947ms
2026-02-10 16:45:38.325 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:38.325 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" completed keep alive response.
2026-02-10 16:45:38.326 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:38.327 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:38.327 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:38.328 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.9082ms
2026-02-10 16:45:38.645 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:38.647 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:38.647 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:38.648 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:38.649 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:38.649 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:38.650 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:38.650 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:38.651 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" received FIN.
2026-02-10 16:45:38.652 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:38.652 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:38.653 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:38.654 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" disconnecting.
2026-02-10 16:45:38.654 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:38.656 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:38.657 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:38.657 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:38.658 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:38.659 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:38.660 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:38.660 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:38.661 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:38.661 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:38.662 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:38.663 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:38.663 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:38.664 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:38.665 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:38.665 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:38.666 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:38.668 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:38.668 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:38.669 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:38.670 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:38.670 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:38.671 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:38.671 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:38.672 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:38.672 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:38.673 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:38.674 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:38.675 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:38.676 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:38.677 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:38.678 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:38.680 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:38.680 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:38.681 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:38.682 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:38.683 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:38.684 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:38.684 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:38.685 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:38.686 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:38.686 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:38.687 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:38.688 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:38.689 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.4099ms
2026-02-10 16:45:38.690 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:38.690 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:38.691 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:38.691 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:38.692 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 46.6572ms
2026-02-10 16:45:38.694 +03:00 [DBG] Connection id "0HNJ8LAARHL2N" stopped.
2026-02-10 16:45:39.040 +03:00 [DBG] Connection id "0HNJ8LAARHL2O" received FIN.
2026-02-10 16:45:39.040 +03:00 [DBG] Connection id "0HNJ8LAARHL2O" accepted.
2026-02-10 16:45:39.041 +03:00 [DBG] Connection id "0HNJ8LAARHL2O" started.
2026-02-10 16:45:39.041 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" accepted.
2026-02-10 16:45:39.042 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:45:39.042 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" started.
2026-02-10 16:45:39.044 +03:00 [DBG] Connection id "0HNJ8LAARHL2O" stopped.
2026-02-10 16:45:39.045 +03:00 [DBG] Connection id "0HNJ8LAARHL2O" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:45:39.046 +03:00 [DBG] Connection 0HNJ8LAARHL2Q established using the following protocol: "Tls13"
2026-02-10 16:45:39.047 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:39.048 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:39.048 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:39.049 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:39.050 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:39.050 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:39.050 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:39.051 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:39.052 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:39.053 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:39.054 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:39.055 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:39.055 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:39.056 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:39.057 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:39.058 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:39.058 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:39.059 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:39.060 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:39.060 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:39.061 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:39.062 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:39.062 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:39.063 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:39.063 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:39.064 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:39.065 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:39.066 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:39.067 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:39.067 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:39.068 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:39.069 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:39.069 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:39.070 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:39.070 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:39.071 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:39.071 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:39.072 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:39.072 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:39.073 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:39.074 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:39.075 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:39.077 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:39.077 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:39.078 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:39.079 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:39.079 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:39.080 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:39.081 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:39.082 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:39.082 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:39.083 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:39.083 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:39.083 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:39.084 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.9394ms
2026-02-10 16:45:39.085 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:39.086 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:39.086 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:39.087 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:39.087 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:39.088 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.1374ms
2026-02-10 16:45:39.427 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:39.428 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:39.429 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:39.430 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:39.430 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:39.431 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:39.431 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:39.432 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:39.433 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:39.434 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:39.435 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:39.436 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:39.437 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:39.438 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:39.439 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:39.440 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:39.440 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:39.441 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:39.442 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:39.442 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:39.443 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:39.444 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:39.444 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:39.445 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:39.446 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:39.446 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:39.447 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:39.449 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:39.449 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:39.450 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:39.451 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:39.451 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:39.452 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:39.452 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:39.453 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:39.453 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:39.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:39.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:39.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:39.456 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:39.457 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:39.458 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:39.459 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:39.460 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:39.461 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:39.461 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:39.462 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:39.463 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:39.464 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:39.465 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:39.466 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:39.466 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:39.466 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:39.467 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:39.468 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.9018ms
2026-02-10 16:45:39.469 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:39.469 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:39.470 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:39.470 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:39.471 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:39.472 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.2519ms
2026-02-10 16:45:40.155 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:40.157 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:40.158 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:40.159 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:40.160 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:40.160 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:40.161 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:40.161 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:40.162 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:40.163 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:40.164 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:40.165 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:40.165 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:40.166 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:40.167 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:40.168 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:40.169 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:40.169 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:40.170 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:40.170 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:40.171 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:40.172 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:40.172 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:40.173 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:40.174 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:40.174 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:40.176 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:40.177 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:40.178 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:40.178 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:40.179 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:40.179 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:40.180 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:40.180 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:40.181 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:40.181 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:40.182 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:40.183 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:40.183 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:40.184 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:40.185 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:40.186 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:40.187 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:40.188 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:40.188 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:40.189 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:40.190 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:40.191 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:40.191 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:40.192 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:40.193 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:40.193 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:40.193 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:40.194 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:40.195 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.2651ms
2026-02-10 16:45:40.195 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:40.196 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:40.196 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:40.197 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:40.198 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:40.198 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.504ms
2026-02-10 16:45:41.588 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:41.590 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:41.591 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:41.591 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:41.592 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:41.592 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:41.593 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:41.593 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:41.594 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:41.595 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:41.596 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:41.597 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:41.598 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:41.599 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:41.599 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:41.600 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:41.600 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:41.601 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:41.602 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:41.602 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:41.603 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:41.604 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:41.604 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:41.605 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:41.605 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:41.606 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:41.607 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:41.608 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:41.609 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:41.609 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:41.610 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:41.610 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:41.611 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:41.611 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:41.612 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:41.613 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:41.613 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:41.614 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:41.614 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:41.615 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:41.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:41.617 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:41.618 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:41.619 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:41.619 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:41.620 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:41.621 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:41.622 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:41.622 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:41.623 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:41.624 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:41.624 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:41.624 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:41.625 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:41.626 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.0725ms
2026-02-10 16:45:41.626 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:41.627 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:41.627 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:41.628 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:41.629 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:41.630 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.1755ms
2026-02-10 16:45:45.708 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:45.710 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:45.710 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:45.711 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:45.712 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:45.712 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:45.712 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:45.713 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:45.714 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:45.715 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:45.716 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:45.717 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:45.718 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:45.718 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:45.719 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:45.720 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:45.720 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:45.721 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:45.722 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:45.722 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:45.723 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:45.724 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:45.724 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:45.725 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:45.726 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:45.726 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:45.728 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:45.729 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:45.730 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:45.730 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:45.731 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:45.731 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:45.732 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:45.733 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:45.733 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:45.734 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:45.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:45.735 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:45.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:45.736 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:45.737 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:45.738 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:45.739 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:45.740 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:45.741 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:45.741 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:45.742 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:45.743 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:45.744 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:45.744 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:45.745 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:45.746 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:45.746 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:45.747 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:45.747 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.8753ms
2026-02-10 16:45:45.748 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:45.748 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:45.749 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:45.750 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:45.750 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:45.751 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.6901ms
2026-02-10 16:45:46.781 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:46.782 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:46.783 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:46.784 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:46.784 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:46.784 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:46.785 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:46.785 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:46.786 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:46.787 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:46.787 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:46.788 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:46.789 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:46.790 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:46.790 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:46.791 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:46.792 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:46.793 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:46.793 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:46.794 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:46.795 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:46.795 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:46.796 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:46.796 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:46.797 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:46.797 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:46.799 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:46.799 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:46.800 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:46.801 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:46.801 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:46.802 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:46.802 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:46.803 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:46.803 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:46.804 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:46.804 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:46.805 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:46.805 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:46.806 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:46.807 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:46.808 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:46.809 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:46.810 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:46.811 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:46.811 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:46.812 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:46.813 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:46.813 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:46.814 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:46.815 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:46.815 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:46.815 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:46.816 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:46.817 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 26.9789ms
2026-02-10 16:45:46.817 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:46.818 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:46.819 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:46.819 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:46.820 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:46.821 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 39.7595ms
2026-02-10 16:45:57.477 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:57.478 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:57.479 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:57.480 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:57.480 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:57.481 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:57.481 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:57.482 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:57.483 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:57.483 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:57.484 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:57.485 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:57.486 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:57.487 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:57.488 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:57.488 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:57.489 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:57.490 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:57.491 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:57.491 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:57.492 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:57.493 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:57.494 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:57.494 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:57.495 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:57.496 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:57.497 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:57.498 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:57.499 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:57.499 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:57.500 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:57.501 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:57.501 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:57.502 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:57.502 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:57.503 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:57.504 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:57.504 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:57.505 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:57.506 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:57.507 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:57.508 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:57.510 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:57.510 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:57.511 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:57.512 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:57.513 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:57.514 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:57.514 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:57.515 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:57.516 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:57.516 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:57.517 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:57.518 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:57.518 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.4036ms
2026-02-10 16:45:57.519 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:57.520 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:57.520 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:57.521 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:57.521 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:57.522 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.7072ms
2026-02-10 16:45:58.629 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:58.631 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:58.631 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:58.632 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:58.633 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:58.633 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:58.633 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:58.634 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:58.635 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:58.636 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:58.636 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:58.637 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:58.638 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:58.639 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:58.640 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:58.640 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:58.641 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:58.642 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:58.643 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:58.643 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:58.644 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:58.645 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:58.645 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:58.646 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:58.647 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:58.647 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:58.648 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:58.649 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:58.650 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:58.651 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:58.651 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:58.652 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:58.653 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:58.653 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:58.654 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:58.654 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:58.655 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:58.656 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:58.657 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:58.657 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:58.659 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:58.660 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:58.661 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:58.661 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:45:58.662 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:58.663 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:58.664 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:58.665 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:58.665 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:58.666 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:58.667 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:58.667 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:58.668 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:58.668 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:58.669 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.31ms
2026-02-10 16:45:58.670 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:58.670 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:58.671 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:58.672 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:58.672 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:58.673 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.8289ms
2026-02-10 16:45:59.625 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:45:59.627 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:45:59.627 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:45:59.628 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:59.629 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:59.629 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:45:59.629 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:59.630 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:45:59.631 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:45:59.632 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:45:59.632 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:45:59.633 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:45:59.634 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:45:59.635 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:59.636 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:45:59.637 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:45:59.637 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:45:59.638 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:59.639 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:45:59.639 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:45:59.640 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:45:59.641 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:59.642 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:59.642 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:45:59.643 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:45:59.644 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:45:59.645 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:45:59.646 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:59.647 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:59.648 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:59.648 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:45:59.649 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:45:59.649 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:45:59.650 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:45:59.651 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:59.651 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:59.652 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:45:59.653 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:45:59.653 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:45:59.654 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:59.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:45:59.656 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:45:59.657 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:59.658 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:45:59.659 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:45:59.660 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:59.661 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:45:59.662 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:45:59.663 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:45:59.664 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:45:59.664 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:45:59.665 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:45:59.665 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:45:59.666 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:45:59.667 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.5549ms
2026-02-10 16:45:59.668 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:45:59.668 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:45:59.669 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:45:59.669 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:45:59.670 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:45:59.671 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.5379ms
2026-02-10 16:46:00.484 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:00.486 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:00.486 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:00.487 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:00.488 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:00.488 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:00.489 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:00.489 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:00.490 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:00.491 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:00.492 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:00.494 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:00.494 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:00.495 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:00.496 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:00.497 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:00.497 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:00.498 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:00.499 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:00.499 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:00.500 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:00.500 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:00.501 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:00.502 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:00.503 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:00.503 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:00.504 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:00.505 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:00.506 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:00.507 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:00.508 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:00.508 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:00.509 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:00.510 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:00.510 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:00.511 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:00.511 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:00.512 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:00.513 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:00.513 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:00.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:00.515 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:00.516 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:00.517 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:00.518 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:00.519 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:00.519 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:00.520 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:00.521 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:00.522 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:00.523 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:00.523 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:00.524 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:00.524 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:00.525 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.0812ms
2026-02-10 16:46:00.526 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:00.526 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:00.527 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:00.528 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:00.528 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:00.529 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.8832ms
2026-02-10 16:46:01.152 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:01.154 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:01.154 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:01.155 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:01.156 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:01.156 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:01.157 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:01.157 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:01.158 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:01.159 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:01.160 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:01.161 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:01.162 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:01.163 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:01.164 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:01.164 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:01.165 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:01.166 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:01.166 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:01.167 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:01.168 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:01.168 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:01.169 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:01.169 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:01.170 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:01.171 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:01.172 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:01.173 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:01.173 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:01.174 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:01.175 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:01.175 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:01.176 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:01.176 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:01.177 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:01.178 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:01.178 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:01.179 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:01.180 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:01.180 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:01.181 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:01.182 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:01.183 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:01.184 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:01.185 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:01.186 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:01.186 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:01.187 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:01.188 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:01.189 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:01.189 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:01.190 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:01.190 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:01.191 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:01.192 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.0274ms
2026-02-10 16:46:01.193 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:01.193 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:01.194 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:01.194 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:01.195 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:01.196 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.5469ms
2026-02-10 16:46:01.802 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:01.803 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:01.804 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:01.804 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:01.805 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:01.805 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:01.806 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:01.807 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:01.808 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:01.809 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:01.809 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:01.810 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:01.811 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:01.812 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:01.813 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:01.813 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:01.814 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:01.815 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:01.815 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:01.816 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:01.816 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:01.817 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:01.817 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:01.818 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:01.819 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:01.819 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:01.820 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:01.821 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:01.822 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:01.823 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:01.823 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:01.824 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:01.825 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:01.825 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:01.826 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:01.826 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:01.827 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:01.827 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:01.828 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:01.829 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:01.830 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:01.831 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:01.832 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:01.833 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:01.834 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:01.834 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:01.835 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:01.836 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:01.836 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:01.837 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:01.838 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:01.838 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:01.838 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:01.839 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:01.840 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.9657ms
2026-02-10 16:46:01.841 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:01.841 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:01.842 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:01.843 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:01.843 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:01.844 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.6119ms
2026-02-10 16:46:02.410 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:02.411 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:02.412 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:02.412 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:02.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:02.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:02.414 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:02.414 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:02.415 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:02.416 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:02.416 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:02.417 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:02.418 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:02.418 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:02.419 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:02.420 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:02.420 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:02.421 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:02.422 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:02.423 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:02.423 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:02.424 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:02.425 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:02.425 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:02.426 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:02.427 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:02.428 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:02.429 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:02.430 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:02.431 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:02.431 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:02.432 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:02.432 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:02.433 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:02.433 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:02.434 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:02.434 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:02.435 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:02.436 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:02.436 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:02.437 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:02.438 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:02.439 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:02.440 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:02.441 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:02.442 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:02.443 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:02.444 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:02.444 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:02.445 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:02.446 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:02.446 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:02.447 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:02.447 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:02.448 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.3414ms
2026-02-10 16:46:02.448 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:02.449 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:02.450 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:02.450 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:02.451 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:02.452 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.1374ms
2026-02-10 16:46:03.048 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:03.050 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:03.050 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:03.051 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:03.051 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:03.052 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:03.052 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:03.053 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:03.054 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:03.055 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:03.055 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:03.057 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:03.057 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:03.058 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:03.059 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:03.060 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:03.060 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:03.061 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:03.062 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:03.062 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:03.063 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:03.064 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:03.064 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:03.065 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:03.065 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:03.066 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:03.067 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:03.068 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:03.069 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:03.069 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:03.070 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:03.070 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:03.071 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:03.071 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:03.072 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:03.073 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:03.074 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:03.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:03.075 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:03.076 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:03.077 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:03.078 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:03.079 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:03.080 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:03.081 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:03.082 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:03.082 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:03.083 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:03.084 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:03.085 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:03.085 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:03.086 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:03.086 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:03.087 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:03.087 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.0497ms
2026-02-10 16:46:03.088 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:03.089 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:03.089 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:03.090 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:03.091 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:03.092 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.4886ms
2026-02-10 16:46:03.659 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:03.661 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:03.661 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:03.662 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:03.663 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:03.663 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:03.664 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:03.664 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:03.665 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:03.666 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:03.666 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:03.668 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:03.668 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:03.669 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:03.670 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:03.671 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:03.671 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:03.672 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:03.673 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:03.673 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:03.674 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:03.675 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:03.675 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:03.676 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:03.677 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:03.677 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:03.678 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:03.679 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:03.680 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:03.681 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:03.681 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:03.682 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:03.683 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:03.683 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:03.684 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:03.684 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:03.685 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:03.685 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:03.686 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:03.686 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:03.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:03.688 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:03.689 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:03.690 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:03.691 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:03.692 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:03.693 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:03.694 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:03.694 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:03.695 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:03.696 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:03.696 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:03.696 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:03.697 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:03.698 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.7509ms
2026-02-10 16:46:03.699 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:03.699 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:03.700 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:03.701 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:03.701 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:03.702 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.9374ms
2026-02-10 16:46:04.249 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:04.250 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:04.251 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:04.251 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:04.252 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:04.252 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:04.253 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:04.253 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:04.254 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:04.255 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:04.255 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:04.257 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:04.257 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:04.258 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:04.259 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:04.260 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:04.260 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:04.261 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:04.262 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:04.262 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:04.263 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:04.263 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:04.264 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:04.264 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:04.265 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:04.266 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:04.267 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:04.268 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:04.268 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:04.269 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:04.270 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:04.270 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:04.271 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:04.271 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:04.272 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:04.272 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:04.273 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:04.273 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:04.274 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:04.275 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:04.276 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:04.277 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:04.278 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:04.279 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:04.280 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:04.280 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:04.281 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:04.282 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:04.283 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:04.284 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:04.284 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:04.285 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:04.285 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:04.286 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:04.286 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.1494ms
2026-02-10 16:46:04.287 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:04.287 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:04.288 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:04.289 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:04.289 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:04.290 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.3191ms
2026-02-10 16:46:04.982 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:04.984 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:04.985 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:04.985 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:04.986 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:04.986 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:04.987 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:04.987 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:04.988 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:04.989 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:04.990 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:04.991 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:04.991 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:04.992 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:04.993 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:04.994 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:04.994 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:04.995 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:04.996 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:04.996 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:04.997 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:04.997 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:04.998 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:04.999 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:04.999 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:05.000 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:05.001 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:05.002 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:05.002 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:05.003 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:05.003 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:05.004 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:05.004 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:05.005 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:05.005 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:05.006 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:05.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:05.007 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:05.008 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:05.009 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:05.010 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:05.011 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:05.012 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:05.013 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:05.014 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:05.014 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:05.015 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:05.016 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:05.017 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:05.018 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:05.018 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:05.018 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:05.019 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:05.019 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:05.020 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.8352ms
2026-02-10 16:46:05.021 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:05.021 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:05.022 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:05.023 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:05.023 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:05.024 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.4966ms
2026-02-10 16:46:05.434 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:05.435 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:05.436 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:05.437 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:05.437 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:05.437 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:05.438 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:05.438 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:05.439 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:05.440 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:05.441 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:05.442 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:05.443 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:05.444 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:05.445 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:05.446 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:05.446 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:05.447 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:05.448 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:05.449 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:05.450 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:05.451 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:05.452 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:05.452 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:05.453 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:05.454 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:05.455 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:05.456 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:05.457 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:05.458 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:05.458 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:05.459 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:05.460 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:05.460 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:05.461 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:05.461 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:05.462 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:05.462 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:05.463 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:05.464 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:05.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:05.466 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:05.467 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:05.468 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:05.468 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:05.469 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:05.470 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:05.471 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:05.471 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:05.472 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:05.473 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:05.473 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:05.474 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:05.475 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:05.476 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.5261ms
2026-02-10 16:46:05.476 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:05.477 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:05.478 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:05.478 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:05.479 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:05.480 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.3615ms
2026-02-10 16:46:05.981 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:05.982 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:05.983 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:05.984 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:05.984 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:05.985 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:05.985 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:05.986 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:05.987 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:05.988 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:05.988 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:05.990 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:05.991 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:05.991 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:05.992 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:05.993 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:05.994 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:05.995 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:05.995 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:05.996 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:05.997 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:05.997 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:05.998 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:05.999 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:05.999 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:06.000 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:06.001 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:06.002 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:06.003 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:06.004 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:06.004 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:06.005 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:06.006 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:06.006 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:06.007 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:06.008 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:06.009 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:06.009 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:06.010 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:06.011 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:06.012 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:06.013 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:06.014 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:06.015 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:06.015 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:06.016 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:06.017 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:06.018 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:06.019 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:06.020 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:06.020 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:06.020 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:06.021 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:06.021 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:06.022 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.758ms
2026-02-10 16:46:06.023 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:06.024 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:06.024 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:06.025 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:06.026 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:06.027 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.5257ms
2026-02-10 16:46:06.620 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:06.621 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:06.622 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:06.623 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:06.623 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:06.624 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:06.624 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:06.625 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:06.626 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:06.626 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:06.627 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:06.628 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:06.629 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:06.629 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:06.630 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:06.631 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:06.631 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:06.632 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:06.633 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:06.633 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:06.634 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:06.635 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:06.635 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:06.636 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:06.636 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:06.637 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:06.638 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:06.639 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:06.640 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:06.640 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:06.641 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:06.642 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:06.642 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:06.643 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:06.643 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:06.644 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:06.644 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:06.645 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:06.646 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:06.646 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:06.647 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:06.648 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:06.649 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:06.650 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:06.651 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:06.652 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:06.653 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:06.653 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:06.654 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:06.655 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:06.655 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:06.656 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:06.656 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:06.657 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:06.658 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.2591ms
2026-02-10 16:46:06.659 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:06.659 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:06.660 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:06.660 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:06.661 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:06.662 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.8758ms
2026-02-10 16:46:07.064 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:07.066 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:07.066 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:07.067 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:07.068 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:07.068 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:07.068 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:07.069 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:07.070 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:07.071 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:07.071 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:07.072 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:07.073 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:07.074 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:07.075 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:07.076 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:07.076 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:07.077 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:07.078 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:07.078 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:07.079 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:07.079 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:07.080 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:07.081 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:07.081 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:07.082 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:07.083 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:07.084 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:07.085 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:07.085 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:07.086 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:07.086 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:07.087 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:07.087 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:07.088 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:07.088 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:07.089 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:07.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:07.090 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:07.091 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:07.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:07.093 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:07.094 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:07.095 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:07.096 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:07.097 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:07.098 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:07.098 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:07.099 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:07.100 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:07.101 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:07.101 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:07.101 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:07.102 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:07.103 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.7648ms
2026-02-10 16:46:07.103 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:07.104 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" completed keep alive response.
2026-02-10 16:46:07.105 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:07.105 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:07.106 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:07.107 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.2778ms
2026-02-10 16:46:07.707 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:07.708 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:07.709 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:07.710 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:07.710 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:07.711 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:07.711 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:07.712 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:07.713 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:07.714 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:07.714 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:07.715 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:07.716 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:07.717 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:07.718 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:07.719 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" received FIN.
2026-02-10 16:46:07.719 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:07.720 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:46:07.721 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:07.722 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" disconnecting.
2026-02-10 16:46:07.722 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:07.724 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:07.725 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:07.726 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:07.727 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:07.728 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:07.728 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:07.729 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:07.730 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:07.731 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:07.732 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:07.733 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:07.733 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:07.734 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:07.735 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:07.735 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:07.736 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:07.736 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:07.737 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:07.737 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:07.738 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:07.739 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:07.739 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:07.740 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:07.741 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:07.743 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:07.743 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:07.744 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:07.745 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:07.745 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:07.746 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:07.747 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:07.748 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:07.748 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:07.748 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:07.749 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:07.750 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:07.751 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.9807ms
2026-02-10 16:46:07.752 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:07.752 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:07.753 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:07.753 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:07.754 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 47.4303ms
2026-02-10 16:46:07.756 +03:00 [DBG] Connection id "0HNJ8LAARHL2Q" stopped.
2026-02-10 16:46:09.191 +03:00 [DBG] Connection id "0HNJ8LAARHL2R" received FIN.
2026-02-10 16:46:09.191 +03:00 [DBG] Connection id "0HNJ8LAARHL2R" accepted.
2026-02-10 16:46:09.192 +03:00 [DBG] Connection id "0HNJ8LAARHL2R" started.
2026-02-10 16:46:09.192 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" accepted.
2026-02-10 16:46:09.196 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" started.
2026-02-10 16:46:09.197 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:46:09.198 +03:00 [DBG] Connection 0HNJ8LAARHL2S established using the following protocol: "Tls13"
2026-02-10 16:46:09.198 +03:00 [DBG] Connection id "0HNJ8LAARHL2R" stopped.
2026-02-10 16:46:09.199 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:09.200 +03:00 [DBG] Connection id "0HNJ8LAARHL2R" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:46:09.201 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:09.202 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:09.203 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:09.204 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:09.204 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:09.205 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:09.205 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:09.207 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:09.208 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:09.209 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:09.210 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:09.211 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:09.212 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:09.213 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:09.214 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:09.215 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:09.215 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:09.216 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:09.217 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:09.218 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:09.219 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:09.219 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:09.220 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:09.221 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:09.221 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:09.223 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:09.224 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:09.225 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:09.226 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:09.226 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:09.227 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:09.227 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:09.228 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:09.228 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:09.229 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:09.230 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:09.230 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:09.231 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:09.232 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:09.233 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:09.234 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:09.236 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:09.236 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:09.237 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:09.238 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:09.239 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:09.240 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:09.241 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:09.242 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:09.242 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:09.243 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:09.243 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:09.244 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:09.244 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.1499ms
2026-02-10 16:46:09.245 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:09.246 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:09.246 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:09.247 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:09.248 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:09.249 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 49.6145ms
2026-02-10 16:46:09.823 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:09.824 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:09.825 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:09.826 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:09.827 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:09.828 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:09.828 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:09.829 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:09.830 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:09.830 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:09.831 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:09.832 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:09.833 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:09.834 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:09.835 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:09.835 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:09.836 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:09.837 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:09.837 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:09.838 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:09.839 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:09.840 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:09.840 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:09.841 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:09.842 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:09.843 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:09.844 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:09.845 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:09.846 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:09.846 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:09.847 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:09.848 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:09.848 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:09.849 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:09.849 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:09.850 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:09.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:09.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:09.852 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:09.853 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:09.854 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:09.855 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:09.856 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:09.857 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:09.858 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:09.858 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:09.859 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:09.860 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:09.861 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:09.862 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:09.863 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:09.863 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:09.864 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:09.864 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:09.865 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.012ms
2026-02-10 16:46:09.866 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:09.866 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:09.867 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:09.867 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:09.868 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:09.869 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.2938ms
2026-02-10 16:46:10.465 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:10.467 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:10.467 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:10.468 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:10.469 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:10.469 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:10.469 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:10.470 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:10.471 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:10.472 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:10.472 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:10.473 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:10.474 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:10.475 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:10.476 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:10.477 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:10.478 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:10.478 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:10.479 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:10.480 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:10.480 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:10.481 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:10.482 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:10.482 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:10.483 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:10.484 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:10.485 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:10.486 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:10.487 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:10.487 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:10.488 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:10.488 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:10.489 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:10.489 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:10.490 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:10.490 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:10.491 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:10.492 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:10.493 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:10.493 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:10.494 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:10.495 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:10.496 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:10.497 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:10.498 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:10.498 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:10.499 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:10.500 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:10.501 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:10.502 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:10.502 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:10.502 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:10.503 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:10.503 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:10.504 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.9363ms
2026-02-10 16:46:10.504 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:10.505 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:10.506 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:10.506 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:10.507 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:10.508 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.0279ms
2026-02-10 16:46:10.919 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:10.921 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:10.921 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:10.922 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:10.923 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:10.923 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:10.924 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:10.924 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:10.925 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:10.926 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:10.927 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:10.928 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:10.929 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:10.930 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:10.930 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:10.931 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:10.932 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:10.932 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:10.933 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:10.934 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:10.934 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:10.935 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:10.936 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:10.936 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:10.937 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:10.938 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:10.939 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:10.940 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:10.941 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:10.942 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:10.942 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:10.943 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:10.944 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:10.944 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:10.945 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:10.945 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:10.946 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:10.947 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:10.948 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:10.948 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:10.949 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:10.950 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:10.952 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:10.952 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:10.953 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:10.954 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:10.955 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:10.956 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:10.956 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:10.958 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:10.958 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:10.959 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:10.959 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:10.960 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:10.961 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.4208ms
2026-02-10 16:46:10.962 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:10.962 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:10.963 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:10.963 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:10.964 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:10.965 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.8042ms
2026-02-10 16:46:11.328 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:11.330 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:11.330 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:11.331 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:11.332 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:11.332 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:11.332 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:11.333 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:11.334 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:11.335 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:11.335 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:11.336 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:11.337 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:11.338 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:11.339 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:11.340 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:11.340 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:11.341 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:11.342 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:11.343 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:11.343 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:11.344 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:11.345 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:11.345 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:11.346 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:11.347 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:11.348 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:11.349 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:11.350 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:11.350 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:11.351 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:11.351 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:11.352 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:11.352 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:11.353 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:11.354 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:11.355 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:11.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:11.356 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:11.357 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:11.358 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:11.359 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:11.361 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:11.361 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:11.362 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:11.363 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:11.364 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:11.364 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:11.365 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:11.366 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:11.367 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:11.367 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:11.367 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:11.368 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:11.369 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.7902ms
2026-02-10 16:46:11.370 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:11.370 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:11.371 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:11.371 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:11.372 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:11.373 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.7939ms
2026-02-10 16:46:11.840 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:11.842 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:11.842 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:11.843 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:11.843 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:11.844 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:11.844 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:11.845 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:11.846 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:11.846 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:11.847 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:11.848 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:11.849 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:11.850 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:11.851 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:11.851 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:11.852 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:11.853 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:11.854 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:11.854 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:11.855 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:11.856 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:11.856 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:11.857 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:11.858 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:11.858 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:11.859 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:11.860 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:11.861 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:11.862 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:11.862 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:11.862 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:11.863 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:11.863 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:11.864 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:11.864 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:11.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:11.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:11.866 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:11.867 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:11.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:11.869 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:11.870 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:11.871 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:11.872 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:11.872 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:11.873 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:11.874 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:11.875 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:11.876 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:11.876 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:11.876 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:11.877 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:11.877 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:11.878 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.0324ms
2026-02-10 16:46:11.879 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:11.879 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:11.880 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:11.880 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:11.881 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:11.882 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.8007ms
2026-02-10 16:46:20.676 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:20.677 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:20.677 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:20.678 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:20.679 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:20.679 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:20.680 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:20.680 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:20.681 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:20.682 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:20.682 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:20.683 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:20.684 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:20.686 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:20.687 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:20.688 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:20.689 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:20.690 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:20.690 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:20.691 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:20.692 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:20.692 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:20.693 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:20.694 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:20.695 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:20.696 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:20.697 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:20.698 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:20.699 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:20.700 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:20.700 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:20.701 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:20.702 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:20.702 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:20.703 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:20.704 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:20.704 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:20.705 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:20.706 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:20.707 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:20.708 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:20.709 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:20.711 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:20.711 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:20.712 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:20.713 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:20.714 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:20.715 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:20.715 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:20.717 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:20.717 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:20.719 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:20.719 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:20.720 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:20.721 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 34.2218ms
2026-02-10 16:46:20.721 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:20.722 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:20.722 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:20.723 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:20.724 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:20.725 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 49.0266ms
2026-02-10 16:46:21.868 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:21.869 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:21.869 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:21.870 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:21.871 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:21.871 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:21.872 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:21.872 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:21.873 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:21.874 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:21.875 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:21.876 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:21.877 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:21.878 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:21.879 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:21.879 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:21.880 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:21.881 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:21.881 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:21.882 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:21.883 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:21.883 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:21.884 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:21.884 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:21.885 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:21.886 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:21.887 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:21.888 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:21.889 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:21.890 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:21.890 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:21.891 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:21.891 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:21.892 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:21.893 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:21.893 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:21.894 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:21.895 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:21.896 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:21.896 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:21.897 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:21.899 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:21.900 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:21.901 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:21.902 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:21.903 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:21.903 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:21.904 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:21.905 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:21.906 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:21.906 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:21.907 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:21.907 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:21.908 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:21.909 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.899ms
2026-02-10 16:46:21.910 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:21.911 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:21.911 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:21.912 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:21.913 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:21.914 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.089ms
2026-02-10 16:46:22.929 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:22.930 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:22.931 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:22.932 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:22.932 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:22.933 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:22.933 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:22.933 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:22.934 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:22.935 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:22.936 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:22.937 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:22.938 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:22.938 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:22.939 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:22.940 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:22.941 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:22.942 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:22.943 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:22.944 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:22.945 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:22.945 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:22.946 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:22.947 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:22.948 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:22.949 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:22.950 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:22.951 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:22.952 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:22.952 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:22.953 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:22.953 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:22.954 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:22.955 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:22.955 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:22.956 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:22.956 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:22.957 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:22.958 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:22.958 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:22.959 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:22.960 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:22.962 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:22.962 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:22.963 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:22.964 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:22.964 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:22.965 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:22.966 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:22.967 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:22.968 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:22.968 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:22.968 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:22.969 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:22.970 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.7408ms
2026-02-10 16:46:22.971 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:22.972 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:22.972 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:22.973 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:22.973 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:22.974 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.5431ms
2026-02-10 16:46:24.036 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:24.037 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:24.038 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:24.038 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:24.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:24.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:24.040 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:24.040 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:24.041 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:24.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:24.043 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:24.044 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:24.045 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:24.046 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:24.047 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:24.048 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:24.048 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:24.049 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:24.050 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:24.051 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:24.051 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:24.052 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:24.053 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:24.053 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:24.054 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:24.055 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:24.056 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:24.057 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:24.058 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:24.059 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:24.059 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:24.060 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:24.061 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:24.061 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:24.062 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:24.062 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:24.063 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:24.064 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:24.064 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:24.065 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:24.066 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:24.067 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:24.068 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:24.069 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:24.070 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:24.071 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:24.071 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:24.072 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:24.073 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:24.074 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:24.075 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:24.076 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:24.076 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:24.077 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:24.078 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.7545ms
2026-02-10 16:46:24.078 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:24.079 +03:00 [DBG] Connection id "0HNJ8LAARHL2S" completed keep alive response.
2026-02-10 16:46:24.080 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:24.080 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:24.081 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:24.082 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.0948ms
2026-02-10 16:46:48.941 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 16:46:49.020 +03:00 [DBG] Hosting starting
2026-02-10 16:46:49.172 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 16:46:49.173 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 16:46:49.173 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 16:46:49.174 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 16:46:49.175 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 16:46:49.176 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 16:46:49.201 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 16:46:49.202 +03:00 [INF] Hosting environment: Development
2026-02-10 16:46:49.203 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 16:46:49.204 +03:00 [DBG] Hosting started
2026-02-10 16:46:49.207 +03:00 [DBG] Connection id "0HNJ8LBBE4FMC" accepted.
2026-02-10 16:46:49.208 +03:00 [DBG] Connection id "0HNJ8LBBE4FMC" started.
2026-02-10 16:46:49.218 +03:00 [DBG] Connection id "0HNJ8LBBE4FMD" accepted.
2026-02-10 16:46:49.219 +03:00 [DBG] Connection id "0HNJ8LBBE4FMD" started.
2026-02-10 16:46:49.250 +03:00 [DBG] Connection id "0HNJ8LBBE4FMD" received FIN.
2026-02-10 16:46:49.250 +03:00 [DBG] Connection id "0HNJ8LBBE4FMC" received FIN.
2026-02-10 16:46:49.264 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:46:49.264 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:46:49.283 +03:00 [DBG] Connection id "0HNJ8LBBE4FMC" stopped.
2026-02-10 16:46:49.283 +03:00 [DBG] Connection id "0HNJ8LBBE4FMD" stopped.
2026-02-10 16:46:49.285 +03:00 [DBG] Connection id "0HNJ8LBBE4FMC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:46:49.285 +03:00 [DBG] Connection id "0HNJ8LBBE4FMD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:46:49.517 +03:00 [DBG] Connection id "0HNJ8LBBE4FME" accepted.
2026-02-10 16:46:49.519 +03:00 [DBG] Connection id "0HNJ8LBBE4FME" started.
2026-02-10 16:46:49.551 +03:00 [DBG] Connection 0HNJ8LBBE4FME established using the following protocol: "Tls13"
2026-02-10 16:46:49.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 16:46:49.682 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 16:46:49.695 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 16:46:49.697 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:46:49.700 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:46:49.732 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 16:46:49.734 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 16:46:49.746 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 16:46:49.746 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 16:46:49.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 137.7349ms
2026-02-10 16:46:49.772 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 16:46:49.778 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.1753ms
2026-02-10 16:46:49.804 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 16:46:49.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4054ms
2026-02-10 16:46:49.885 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 16:46:49.888 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 16:46:49.889 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:46:49.890 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:46:49.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.0638ms
2026-02-10 16:46:52.834 +03:00 [DBG] Connection id "0HNJ8LBBE4FMF" received FIN.
2026-02-10 16:46:52.834 +03:00 [DBG] Connection id "0HNJ8LBBE4FMF" accepted.
2026-02-10 16:46:52.835 +03:00 [DBG] Connection id "0HNJ8LBBE4FMF" started.
2026-02-10 16:46:52.836 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" accepted.
2026-02-10 16:46:52.837 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:46:52.837 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" started.
2026-02-10 16:46:52.838 +03:00 [DBG] Connection id "0HNJ8LBBE4FMF" stopped.
2026-02-10 16:46:52.839 +03:00 [DBG] Connection id "0HNJ8LBBE4FMF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:46:52.841 +03:00 [DBG] Connection 0HNJ8LBBE4FMG established using the following protocol: "Tls13"
2026-02-10 16:46:52.844 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:52.847 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:52.849 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:52.850 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:52.852 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:52.853 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:52.858 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:52.871 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:52.872 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:52.873 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:52.874 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:52.876 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:52.877 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:52.878 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:52.933 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 16:46:52.939 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:52.947 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:52.949 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:52.950 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:52.951 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:52.952 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:52.955 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:52.956 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:52.961 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:52.961 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:52.962 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:52.974 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:46:52.979 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:46:53.296 +03:00 [INF] Received HTTP response headers after 315.0654ms - 200
2026-02-10 16:46:53.299 +03:00 [INF] End processing HTTP request after 325.6488ms - 200
2026-02-10 16:46:53.308 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:46:53.309 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:46:53.542 +03:00 [INF] Received HTTP response headers after 231.6072ms - 200
2026-02-10 16:46:53.543 +03:00 [INF] End processing HTTP request after 234.3101ms - 200
2026-02-10 16:46:53.549 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 584ms, CacheHit = FALSE
2026-02-10 16:46:53.770 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:53.786 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:53.811 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:53.814 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:53.816 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:53.823 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:53.860 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:53.867 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 16:46:53.870 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:53.877 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:53.881 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:53.884 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:53.886 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 16:46:53.890 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:53.902 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:53.909 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:53.913 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:53.917 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-10 16:46:53.919 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:53.921 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:46:53.926 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:53.928 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:53.934 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:53.936 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:53.936 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:53.937 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:53.938 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:53.939 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:53.947 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1068.8761ms
2026-02-10 16:46:53.948 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:53.950 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" completed keep alive response.
2026-02-10 16:46:53.951 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:53.954 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:53.955 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:46:53.956 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1112.04ms
2026-02-10 16:46:54.776 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:54.778 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:54.778 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:54.779 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:54.780 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:54.780 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:54.781 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:54.782 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:54.783 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:54.784 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:54.784 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:54.786 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:54.787 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:54.787 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:54.789 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:54.790 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:54.791 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:54.792 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:54.792 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:54.793 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:54.794 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:54.795 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:54.795 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:54.796 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:54.797 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:54.798 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:54.824 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:54.826 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:54.827 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:54.828 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:54.829 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:54.829 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:54.830 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:54.831 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:54.831 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:54.832 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:54.833 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:54.834 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:54.834 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:54.835 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:54.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:54.837 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:54.839 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:54.840 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:54.841 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:54.842 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:54.843 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:54.844 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:54.845 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:54.846 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:54.846 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:54.846 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:54.847 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:54.848 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:54.849 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 61.5074ms
2026-02-10 16:46:54.850 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:54.850 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" completed keep alive response.
2026-02-10 16:46:54.851 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:54.852 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:54.852 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:54.853 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 77.4657ms
2026-02-10 16:46:55.598 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:55.600 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:55.600 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:55.601 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:55.602 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:55.602 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:55.603 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:55.604 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:55.604 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:55.605 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:55.606 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:55.608 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:55.608 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:55.609 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:55.614 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:55.614 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:55.615 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:55.616 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:55.617 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:55.618 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:55.619 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:55.620 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:55.620 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:55.621 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:55.622 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:55.623 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:55.631 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:55.632 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:55.633 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:55.634 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:55.635 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:55.635 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:55.636 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:55.637 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:55.637 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:55.638 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:55.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:55.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:55.640 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:55.641 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:55.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:55.644 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:55.645 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:55.646 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:55.647 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:55.648 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:55.649 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:55.650 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:55.651 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:55.652 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:55.653 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:55.653 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:55.654 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:55.655 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:55.655 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 46.0667ms
2026-02-10 16:46:55.656 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:55.657 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" completed keep alive response.
2026-02-10 16:46:55.658 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:55.658 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:55.659 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:55.660 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 61.8948ms
2026-02-10 16:46:56.253 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:56.254 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:56.255 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:56.256 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:56.256 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:56.257 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:56.257 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:56.258 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:56.259 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:56.260 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:56.260 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:56.261 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:56.262 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:56.263 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:56.264 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:56.265 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:56.266 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:56.267 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:56.268 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:56.268 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:56.269 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:56.269 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:56.270 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:56.271 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:56.271 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:56.272 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:56.273 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:56.275 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:56.276 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:56.276 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:56.277 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:56.277 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:56.278 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:56.279 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:56.279 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:56.280 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:56.281 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:56.281 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:56.282 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:56.282 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:56.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:56.285 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:56.286 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:56.287 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:46:56.287 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:56.288 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:56.289 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:56.290 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:56.290 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:56.291 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:56.292 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:56.292 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:56.293 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:56.294 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:56.294 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.519ms
2026-02-10 16:46:56.295 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:56.296 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" completed keep alive response.
2026-02-10 16:46:56.296 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:56.297 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:56.297 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:56.298 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.3405ms
2026-02-10 16:46:56.940 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:56.941 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:56.942 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:56.943 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:56.943 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:56.944 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:56.944 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:56.945 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:46:56.946 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:46:56.946 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:46:56.947 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:46:56.948 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:46:56.949 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:46:56.949 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:56.950 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:46:56.951 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:46:56.951 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:46:56.952 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:56.953 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:46:56.953 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:46:56.954 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:46:56.955 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:56.955 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:56.956 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:46:56.957 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:46:56.957 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:46:56.959 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:46:56.960 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:56.961 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:56.961 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:56.962 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:46:56.962 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:46:56.963 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:46:56.964 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:46:56.964 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:56.965 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:56.966 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:46:56.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:46:56.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:46:56.967 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:56.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:46:56.970 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:46:56.971 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:56.972 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:46:56.972 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:46:56.973 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:56.974 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:46:56.976 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:46:56.976 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:46:56.978 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:46:56.978 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:46:56.978 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:46:56.979 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:46:56.979 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:46:56.980 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.1876ms
2026-02-10 16:46:56.981 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:56.982 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" completed keep alive response.
2026-02-10 16:46:56.982 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:46:56.983 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:46:56.983 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:46:56.984 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.1448ms
2026-02-10 16:46:57.643 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:46:57.644 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:46:57.645 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:46:57.645 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:46:57.646 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:57.646 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:46:57.648 +03:00 [DBG] Rate limits exceeded, rejecting this request.
2026-02-10 16:46:57.648 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" completed keep alive response.
2026-02-10 16:46:57.649 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 429 0 null 6.369ms
2026-02-10 16:47:07.204 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" received FIN.
2026-02-10 16:47:07.205 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:47:07.206 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" disconnecting.
2026-02-10 16:47:07.207 +03:00 [DBG] Connection id "0HNJ8LBBE4FMG" stopped.
2026-02-10 16:47:21.747 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 16:47:21.820 +03:00 [DBG] Hosting starting
2026-02-10 16:47:22.041 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 16:47:22.042 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 16:47:22.043 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 16:47:22.043 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 16:47:22.044 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 16:47:22.044 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 16:47:22.071 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 16:47:22.072 +03:00 [INF] Hosting environment: Development
2026-02-10 16:47:22.073 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 16:47:22.074 +03:00 [DBG] Hosting started
2026-02-10 16:47:22.496 +03:00 [DBG] Connection id "0HNJ8LBLBJJTH" received FIN.
2026-02-10 16:47:22.496 +03:00 [DBG] Connection id "0HNJ8LBLBJJTI" received FIN.
2026-02-10 16:47:22.503 +03:00 [DBG] Connection id "0HNJ8LBLBJJTI" accepted.
2026-02-10 16:47:22.503 +03:00 [DBG] Connection id "0HNJ8LBLBJJTH" accepted.
2026-02-10 16:47:22.504 +03:00 [DBG] Connection id "0HNJ8LBLBJJTI" started.
2026-02-10 16:47:22.504 +03:00 [DBG] Connection id "0HNJ8LBLBJJTH" started.
2026-02-10 16:47:22.513 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:47:22.513 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:47:22.532 +03:00 [DBG] Connection id "0HNJ8LBLBJJTI" stopped.
2026-02-10 16:47:22.532 +03:00 [DBG] Connection id "0HNJ8LBLBJJTH" stopped.
2026-02-10 16:47:22.535 +03:00 [DBG] Connection id "0HNJ8LBLBJJTH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:47:22.535 +03:00 [DBG] Connection id "0HNJ8LBLBJJTI" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:47:22.637 +03:00 [DBG] Connection id "0HNJ8LBLBJJTJ" accepted.
2026-02-10 16:47:22.639 +03:00 [DBG] Connection id "0HNJ8LBLBJJTJ" started.
2026-02-10 16:47:22.664 +03:00 [DBG] Connection 0HNJ8LBLBJJTJ established using the following protocol: "Tls13"
2026-02-10 16:47:22.692 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 16:47:22.746 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 16:47:22.756 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 16:47:22.757 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:47:22.760 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:47:22.784 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 16:47:22.785 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 16:47:22.794 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 16:47:22.795 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 16:47:22.797 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 107.1539ms
2026-02-10 16:47:22.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 16:47:22.829 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.2831ms
2026-02-10 16:47:22.851 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 16:47:22.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.0127ms
2026-02-10 16:47:22.933 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 16:47:22.935 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 16:47:22.936 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:47:22.937 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:47:22.942 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.9527ms
2026-02-10 16:47:26.794 +03:00 [DBG] Connection id "0HNJ8LBLBJJTK" accepted.
2026-02-10 16:47:26.795 +03:00 [DBG] Connection id "0HNJ8LBLBJJTK" received FIN.
2026-02-10 16:47:26.796 +03:00 [DBG] Connection id "0HNJ8LBLBJJTK" started.
2026-02-10 16:47:26.796 +03:00 [DBG] Connection id "0HNJ8LBLBJJTL" accepted.
2026-02-10 16:47:26.801 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:47:26.801 +03:00 [DBG] Connection id "0HNJ8LBLBJJTL" started.
2026-02-10 16:47:26.803 +03:00 [DBG] Connection id "0HNJ8LBLBJJTK" stopped.
2026-02-10 16:47:26.804 +03:00 [DBG] Connection id "0HNJ8LBLBJJTK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:47:26.806 +03:00 [DBG] Connection 0HNJ8LBLBJJTL established using the following protocol: "Tls13"
2026-02-10 16:47:26.810 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:47:26.813 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:47:26.816 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:47:26.817 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:26.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:47:26.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:47:26.825 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:26.837 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:47:26.839 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:47:26.840 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:47:26.841 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:47:26.843 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:47:26.844 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:47:26.846 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:47:26.899 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 16:47:26.905 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:47:26.913 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:47:26.915 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:47:26.916 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:47:26.917 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:47:26.918 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:47:26.922 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:47:26.924 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:47:26.928 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:47:26.929 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:47:26.930 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:47:26.942 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:47:26.947 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:47:27.203 +03:00 [INF] Received HTTP response headers after 253.4815ms - 200
2026-02-10 16:47:27.205 +03:00 [INF] End processing HTTP request after 263.818ms - 200
2026-02-10 16:47:27.214 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:47:27.215 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:47:27.449 +03:00 [INF] Received HTTP response headers after 232.8618ms - 200
2026-02-10 16:47:27.450 +03:00 [INF] End processing HTTP request after 235.5061ms - 200
2026-02-10 16:47:27.458 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 525ms, CacheHit = FALSE
2026-02-10 16:47:27.672 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:47:27.688 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:27.716 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:27.719 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:47:27.721 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:47:27.729 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:47:27.759 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:47:27.765 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 16:47:27.767 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:47:27.773 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:27.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:47:27.780 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:47:27.783 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-10 16:47:27.788 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:47:27.801 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:47:27.809 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:47:27.814 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:27.817 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-10 16:47:27.820 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:27.821 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:47:27.827 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:27.828 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:47:27.835 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:47:27.837 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:47:27.837 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:47:27.838 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:47:27.839 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:47:27.839 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:47:27.850 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1003.1378ms
2026-02-10 16:47:27.851 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:27.853 +03:00 [DBG] Connection id "0HNJ8LBLBJJTL" completed keep alive response.
2026-02-10 16:47:27.854 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:47:27.856 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:47:27.857 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:47:27.859 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1049.372ms
2026-02-10 16:47:29.568 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:47:29.570 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:47:29.571 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:47:29.572 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:29.572 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:47:29.573 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:47:29.574 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:29.574 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:47:29.576 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:47:29.576 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:47:29.578 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:47:29.579 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:47:29.579 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:47:29.580 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:47:29.582 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:47:29.583 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:47:29.584 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:47:29.584 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:47:29.585 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:47:29.586 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:47:29.587 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:47:29.587 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:47:29.588 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:47:29.589 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:47:29.589 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:47:29.591 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:47:29.622 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:47:29.623 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:29.625 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:29.625 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:47:29.626 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:47:29.627 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:47:29.628 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:47:29.629 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:47:29.629 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:47:29.630 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:29.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:47:29.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:47:29.632 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:47:29.633 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:47:29.634 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:47:29.635 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:47:29.636 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:29.637 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:47:29.638 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:29.639 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:47:29.640 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:29.641 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:47:29.642 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:47:29.644 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:47:29.645 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:47:29.645 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:47:29.645 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:47:29.646 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:47:29.647 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 66.9533ms
2026-02-10 16:47:29.648 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:29.649 +03:00 [DBG] Connection id "0HNJ8LBLBJJTL" completed keep alive response.
2026-02-10 16:47:29.650 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:47:29.651 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:47:29.652 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:47:29.653 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 84.802ms
2026-02-10 16:47:31.368 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:47:31.370 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:47:31.370 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:47:31.371 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:31.372 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:47:31.372 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:47:31.372 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:31.373 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:47:31.374 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:47:31.375 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:47:31.376 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:47:31.377 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:47:31.378 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:47:31.379 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:47:31.383 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:47:31.384 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:47:31.385 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:47:31.386 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:47:31.386 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:47:31.387 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:47:31.388 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:47:31.389 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:47:31.390 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:47:31.390 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:47:31.391 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:47:31.392 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:47:31.401 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:47:31.402 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:31.403 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:31.404 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:47:31.405 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:47:31.405 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:47:31.406 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:47:31.406 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:47:31.407 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:47:31.408 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:31.409 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:47:31.409 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:47:31.410 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:47:31.411 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:47:31.412 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:47:31.413 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:47:31.415 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:31.416 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:47:31.416 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:47:31.417 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:47:31.418 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:47:31.419 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:47:31.420 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:47:31.421 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:47:31.421 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:47:31.421 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:47:31.422 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:47:31.423 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:47:31.424 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 44.7188ms
2026-02-10 16:47:31.424 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:47:31.425 +03:00 [DBG] Connection id "0HNJ8LBLBJJTL" completed keep alive response.
2026-02-10 16:47:31.426 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:47:31.427 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:47:31.428 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:47:31.429 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 60.4878ms
2026-02-10 16:49:26.960 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 16:49:36.966 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:49:36.969 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.043ms - processed: 0 items - remaining: 1 items
2026-02-10 16:49:46.976 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:49:46.976 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 16:49:56.988 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:49:56.989 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 16:50:06.999 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:50:07.000 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 16:50:17.002 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:50:17.003 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:50:27.003 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:50:27.004 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 16:50:37.014 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:50:37.015 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:50:47.026 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:50:47.026 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0066ms - processed: 0 items - remaining: 1 items
2026-02-10 16:50:57.036 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:50:57.037 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:51:07.051 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:51:07.051 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 16:51:17.056 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:51:17.057 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 16:51:27.062 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:51:27.063 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 16:51:37.066 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:51:37.067 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 16:51:47.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:51:47.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-10 16:51:57.087 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:51:57.088 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 16:52:07.097 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:52:07.098 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 16:52:17.107 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:52:17.109 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:52:27.111 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:52:27.112 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 16:52:37.118 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:52:37.119 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 16:52:47.127 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:52:47.128 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 16:52:57.131 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:52:57.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:53:07.145 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:53:07.145 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 16:53:17.149 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:53:17.150 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:53:27.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:53:27.162 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 16:53:37.163 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:53:37.164 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 16:53:47.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:53:47.170 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 16:53:57.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:53:57.177 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 16:54:07.192 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:54:07.192 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2026-02-10 16:54:11.024 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 16:54:11.109 +03:00 [DBG] Hosting starting
2026-02-10 16:54:11.232 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 16:54:11.233 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 16:54:11.234 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 16:54:11.234 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 16:54:11.235 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 16:54:11.235 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 16:54:11.260 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 16:54:11.261 +03:00 [INF] Hosting environment: Development
2026-02-10 16:54:11.261 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 16:54:11.262 +03:00 [DBG] Hosting started
2026-02-10 16:54:11.509 +03:00 [DBG] Connection id "0HNJ8LFF889KQ" accepted.
2026-02-10 16:54:11.510 +03:00 [DBG] Connection id "0HNJ8LFF889KQ" started.
2026-02-10 16:54:11.516 +03:00 [DBG] Connection id "0HNJ8LFF889KR" accepted.
2026-02-10 16:54:11.516 +03:00 [DBG] Connection id "0HNJ8LFF889KR" started.
2026-02-10 16:54:11.547 +03:00 [DBG] Connection id "0HNJ8LFF889KQ" received FIN.
2026-02-10 16:54:11.547 +03:00 [DBG] Connection id "0HNJ8LFF889KR" received FIN.
2026-02-10 16:54:11.552 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:54:11.552 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:54:11.570 +03:00 [DBG] Connection id "0HNJ8LFF889KQ" stopped.
2026-02-10 16:54:11.570 +03:00 [DBG] Connection id "0HNJ8LFF889KR" stopped.
2026-02-10 16:54:11.573 +03:00 [DBG] Connection id "0HNJ8LFF889KQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:11.573 +03:00 [DBG] Connection id "0HNJ8LFF889KR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:11.760 +03:00 [DBG] Connection id "0HNJ8LFF889KS" accepted.
2026-02-10 16:54:11.762 +03:00 [DBG] Connection id "0HNJ8LFF889KS" started.
2026-02-10 16:54:11.791 +03:00 [DBG] Connection 0HNJ8LFF889KS established using the following protocol: "Tls13"
2026-02-10 16:54:11.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 16:54:11.879 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 16:54:11.890 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 16:54:11.891 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:54:11.893 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:54:11.922 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 16:54:11.924 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 16:54:11.933 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 16:54:11.934 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 16:54:11.935 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 116.6099ms
2026-02-10 16:54:11.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 16:54:11.967 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.8074ms
2026-02-10 16:54:11.986 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 16:54:12.011 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.2716ms
2026-02-10 16:54:12.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 16:54:12.067 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 16:54:12.068 +03:00 [DBG] Request did not match any endpoints
2026-02-10 16:54:12.069 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 16:54:12.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4551ms
2026-02-10 16:54:14.743 +03:00 [DBG] Connection id "0HNJ8LFF889KT" received FIN.
2026-02-10 16:54:14.743 +03:00 [DBG] Connection id "0HNJ8LFF889KT" accepted.
2026-02-10 16:54:14.745 +03:00 [DBG] Connection id "0HNJ8LFF889KT" started.
2026-02-10 16:54:14.745 +03:00 [DBG] Connection id "0HNJ8LFF889KU" accepted.
2026-02-10 16:54:14.746 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:54:14.746 +03:00 [DBG] Connection id "0HNJ8LFF889KU" started.
2026-02-10 16:54:14.748 +03:00 [DBG] Connection id "0HNJ8LFF889KT" stopped.
2026-02-10 16:54:14.749 +03:00 [DBG] Connection id "0HNJ8LFF889KT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:14.751 +03:00 [DBG] Connection 0HNJ8LFF889KU established using the following protocol: "Tls13"
2026-02-10 16:54:14.753 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:14.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:14.759 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:14.760 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:14.761 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:14.762 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:14.768 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:14.779 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:14.781 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:14.782 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:14.783 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:14.784 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:14.785 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:14.786 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:14.846 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 16:54:14.852 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:14.860 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:14.862 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:14.864 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:14.865 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:14.865 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:14.869 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:14.870 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:14.874 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:14.875 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:14.876 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:14.888 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:54:14.894 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:54:15.220 +03:00 [INF] Received HTTP response headers after 323.8602ms - 200
2026-02-10 16:54:15.223 +03:00 [INF] End processing HTTP request after 335.1522ms - 200
2026-02-10 16:54:15.232 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:54:15.232 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 16:54:15.560 +03:00 [INF] Received HTTP response headers after 326.8007ms - 200
2026-02-10 16:54:15.561 +03:00 [INF] End processing HTTP request after 329.3954ms - 200
2026-02-10 16:54:15.567 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 688ms, CacheHit = FALSE
2026-02-10 16:54:15.783 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:15.799 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:15.828 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:15.831 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:15.833 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:15.840 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:15.870 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:15.875 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 16:54:15.877 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:15.883 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:15.887 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:15.890 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:15.893 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 16:54:15.898 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:15.910 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:15.918 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:15.924 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:15.927 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 16:54:15.930 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:15.932 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 16:54:15.937 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:15.939 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:15.945 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:15.948 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:15.948 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:15.949 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:15.949 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:15.950 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:15.959 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1172.1417ms
2026-02-10 16:54:15.960 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:15.962 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:15.963 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:15.966 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:15.967 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 16:54:15.968 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1214.9522ms
2026-02-10 16:54:16.783 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:16.785 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:16.785 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:16.786 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:16.787 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:16.788 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:16.788 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:16.789 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:16.790 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:16.791 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:16.792 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:16.793 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:16.794 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:16.794 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:16.796 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:16.797 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:16.798 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:16.799 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:16.799 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:16.800 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:16.801 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:16.801 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:16.802 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:16.803 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:16.803 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:16.804 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:16.830 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:16.832 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:16.833 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:16.834 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:16.835 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:16.835 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:16.836 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:16.837 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:16.837 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:16.838 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:16.839 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:16.839 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:16.840 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:16.841 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:16.842 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:16.843 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:16.844 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:16.845 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:16.846 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:16.847 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:16.848 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:16.849 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:16.850 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:16.851 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:16.851 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:16.852 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:16.852 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:16.853 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:16.854 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 59.3962ms
2026-02-10 16:54:16.854 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:16.855 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:16.856 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:16.856 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:16.857 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:16.858 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 75.1558ms
2026-02-10 16:54:17.453 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:17.455 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:17.455 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:17.456 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:17.457 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:17.457 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:17.458 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:17.459 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:17.459 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:17.460 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:17.461 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:17.462 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:17.463 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:17.464 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:17.467 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:17.468 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:17.469 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:17.470 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:17.470 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:17.471 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:17.472 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:17.472 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:17.473 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:17.474 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:17.474 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:17.475 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:17.483 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:17.484 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:17.485 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:17.486 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:17.487 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:17.488 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:17.488 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:17.489 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:17.490 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:17.491 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:17.492 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:17.492 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:17.493 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:17.494 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:17.495 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:17.496 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:17.497 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:17.498 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:17.499 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:17.500 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:17.500 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:17.501 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:17.502 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:17.503 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:17.504 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:17.504 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:17.504 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:17.505 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:17.506 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 42.3705ms
2026-02-10 16:54:17.507 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:17.508 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:17.508 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:17.509 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:17.510 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:17.511 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 57.1298ms
2026-02-10 16:54:18.511 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:18.513 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:18.514 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:18.515 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:18.515 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:18.516 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:18.516 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:18.517 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:18.518 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:18.519 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:18.520 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:18.521 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:18.522 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:18.522 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:18.523 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:18.524 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:18.525 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:18.525 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:18.526 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:18.527 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:18.528 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:18.528 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:18.529 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:18.530 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:18.530 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:18.532 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:18.534 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:18.536 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:18.536 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:18.537 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:18.538 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:18.539 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:18.539 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:18.540 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:18.540 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:18.541 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:18.542 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:18.543 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:18.544 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:18.545 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:18.546 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:18.547 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:18.549 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:18.550 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:18.551 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:18.551 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:18.552 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:18.553 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:18.554 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:18.555 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:18.556 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:18.556 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:18.556 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:18.557 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:18.558 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 35.708ms
2026-02-10 16:54:18.559 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:18.559 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:18.560 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:18.561 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:18.561 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:18.563 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 51.6884ms
2026-02-10 16:54:19.227 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:19.228 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:19.229 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:19.230 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:19.230 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:19.231 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:19.231 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:19.232 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:19.233 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:19.234 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:19.235 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:19.236 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:19.237 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:19.237 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:19.238 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:19.239 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:19.240 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:19.240 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:19.241 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:19.242 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:19.242 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:19.243 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:19.244 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:19.244 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:19.245 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:19.246 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:19.247 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:19.248 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:19.249 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:19.250 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:19.250 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:19.251 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:19.252 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:19.252 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:19.253 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:19.253 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:19.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:19.254 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:19.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:19.256 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:19.257 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:19.258 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:19.259 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:19.260 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:19.260 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:19.261 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:19.262 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:19.263 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:19.263 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:19.264 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:19.265 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:19.265 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:19.265 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:19.266 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:19.267 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.6846ms
2026-02-10 16:54:19.268 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:19.268 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:19.269 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:19.269 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:19.270 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:19.271 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.0898ms
2026-02-10 16:54:21.692 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:21.693 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:21.694 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:21.694 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:21.695 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:21.695 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:21.696 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:21.697 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:21.698 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:21.699 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:21.700 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:21.701 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:21.702 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:21.702 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:21.703 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:21.704 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:21.704 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:21.705 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:21.706 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:21.706 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:21.707 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:21.708 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:21.708 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:21.709 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:21.709 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:21.710 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:21.711 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:21.713 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:21.713 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:21.714 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:21.714 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:21.715 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:21.716 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:21.716 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:21.717 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:21.717 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:21.718 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:21.718 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:21.719 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:21.719 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:21.720 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:21.721 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:21.722 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:21.723 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:21.724 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:21.725 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:21.725 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:21.726 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:21.727 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:21.729 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:21.729 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:21.729 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:21.730 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:21.730 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:21.731 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.9352ms
2026-02-10 16:54:21.732 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:21.733 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:21.733 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:21.734 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:21.735 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:21.735 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.7793ms
2026-02-10 16:54:22.416 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:22.418 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:22.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:22.419 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:22.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:22.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:22.421 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:22.421 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:22.422 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:22.423 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:22.423 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:22.424 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:22.425 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:22.426 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:22.427 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:22.427 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:22.428 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:22.429 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:22.430 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:22.430 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:22.431 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:22.431 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:22.432 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:22.433 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:22.433 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:22.434 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:22.435 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:22.436 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:22.437 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:22.437 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:22.438 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:22.438 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:22.439 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:22.439 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:22.440 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:22.441 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:22.441 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:22.442 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:22.442 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:22.443 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:22.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:22.445 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:22.446 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:22.447 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:22.448 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:22.448 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:22.449 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:22.450 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:22.451 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:22.452 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:22.452 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:22.452 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:22.453 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:22.453 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:22.454 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.4359ms
2026-02-10 16:54:22.455 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:22.455 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:22.456 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:22.456 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:22.457 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:22.458 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.2927ms
2026-02-10 16:54:23.886 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:23.888 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:23.889 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:23.890 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:23.890 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:23.891 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:23.891 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:23.892 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:23.893 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:23.893 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:23.894 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:23.895 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:23.896 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:23.897 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:23.898 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:23.898 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:23.899 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:23.900 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:23.900 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:23.901 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:23.901 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:23.902 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:23.903 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:23.903 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:23.904 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:23.905 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:23.906 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:23.907 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:23.908 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:23.908 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:23.909 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:23.909 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:23.910 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:23.910 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:23.911 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:23.911 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:23.912 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:23.913 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:23.913 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:23.914 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:23.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:23.916 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:23.917 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:23.918 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:23.918 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:23.919 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:23.920 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:23.921 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:23.921 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:23.922 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:23.923 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:23.923 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:23.923 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:23.924 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:23.925 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 27.8887ms
2026-02-10 16:54:23.925 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:23.926 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:23.926 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:23.927 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:23.927 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:23.928 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.9774ms
2026-02-10 16:54:25.393 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:25.395 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:25.396 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:25.396 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:25.397 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:25.397 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:25.398 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:25.398 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:25.399 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:25.400 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:25.401 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:25.402 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:25.403 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:25.404 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:25.405 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:25.406 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:25.406 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:25.407 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:25.408 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:25.408 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:25.409 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:25.410 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:25.410 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:25.411 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:25.411 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:25.412 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:25.413 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:25.415 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:25.415 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:25.416 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:25.417 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:25.417 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:25.418 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:25.418 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:25.419 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:25.420 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:25.421 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:25.422 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:25.422 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:25.423 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:25.424 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:25.425 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:25.426 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:25.427 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:25.428 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:25.428 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:25.429 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:25.430 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:25.431 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:25.432 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:25.432 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:25.433 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:25.433 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:25.434 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:25.434 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.8272ms
2026-02-10 16:54:25.435 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:25.436 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:25.436 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:25.437 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:25.438 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:25.438 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 45.2962ms
2026-02-10 16:54:25.773 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:25.775 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:25.775 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:25.776 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:25.777 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:25.777 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:25.778 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:25.779 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:25.780 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:25.780 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:25.781 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:25.782 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:25.783 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:25.784 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:25.784 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:25.785 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:25.786 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:25.787 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:25.787 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:25.788 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:25.789 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:25.789 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:25.790 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:25.791 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:25.791 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:25.792 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:25.793 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:25.794 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:25.795 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:25.796 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:25.797 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:25.797 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:25.798 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:25.798 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:25.799 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:25.800 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:25.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:25.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:25.801 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:25.802 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:25.803 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:25.804 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:25.805 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:25.806 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:25.807 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:25.807 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:25.808 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:25.809 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:25.810 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:25.811 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:25.811 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:25.812 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:25.812 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:25.813 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:25.814 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.1088ms
2026-02-10 16:54:25.815 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:25.815 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:25.816 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:25.816 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:25.817 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:25.818 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.6251ms
2026-02-10 16:54:26.162 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:26.163 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:26.164 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:26.165 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:26.165 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:26.166 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:26.166 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:26.167 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:26.168 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:26.169 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:26.170 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:26.171 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:26.172 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:26.173 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:26.174 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:26.174 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:26.175 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:26.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:26.176 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:26.177 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:26.178 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:26.179 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:26.179 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:26.180 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:26.181 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:26.181 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:26.182 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:26.183 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:26.184 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:26.185 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:26.186 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:26.186 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:26.187 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:26.187 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:26.188 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:26.189 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:26.189 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:26.190 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:26.190 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:26.191 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:26.192 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:26.193 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:26.194 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:26.195 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:26.196 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:26.196 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:26.197 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:26.198 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:26.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:26.200 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:26.200 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:26.201 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:26.201 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:26.202 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:26.202 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.4502ms
2026-02-10 16:54:26.203 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:26.204 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:26.204 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:26.205 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:26.205 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:26.206 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.5383ms
2026-02-10 16:54:26.576 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:26.578 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:26.579 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:26.580 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:26.581 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:26.581 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:26.582 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:26.582 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:26.583 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:26.584 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:26.585 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:26.586 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:26.586 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:26.587 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:26.588 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:26.588 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:26.589 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:26.590 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:26.590 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:26.591 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:26.592 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:26.592 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:26.593 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:26.594 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:26.594 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:26.595 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:26.596 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:26.597 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:26.598 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:26.599 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:26.599 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:26.600 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:26.601 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:26.601 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:26.601 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:26.602 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:26.603 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:26.603 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:26.604 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:26.605 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:26.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:26.607 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:26.608 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:26.609 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:26.610 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:26.610 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:26.611 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:26.612 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:26.613 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:26.614 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:26.614 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:26.615 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:26.615 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:26.615 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:26.616 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.3011ms
2026-02-10 16:54:26.617 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:26.618 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:26.618 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:26.619 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:26.619 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:26.620 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.8516ms
2026-02-10 16:54:27.377 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:27.378 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:27.379 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:27.380 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:27.381 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:27.381 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:27.382 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:27.382 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:27.383 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:27.384 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:27.384 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:27.385 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:27.386 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:27.387 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:27.387 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:27.388 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:27.389 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:27.389 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:27.390 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:27.391 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:27.391 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:27.392 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:27.393 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:27.394 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:27.394 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:27.395 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:27.397 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:27.398 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:27.399 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:27.399 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:27.400 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:27.400 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:27.401 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:27.401 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:27.402 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:27.402 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:27.403 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:27.404 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:27.404 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:27.405 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:27.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:27.407 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:27.408 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:27.409 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:27.410 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:27.410 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:27.411 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:27.413 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:27.413 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:27.415 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:27.415 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:27.415 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:27.416 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:27.417 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:27.418 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.8777ms
2026-02-10 16:54:27.418 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:27.419 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:27.419 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:27.420 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:27.421 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:27.421 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.978ms
2026-02-10 16:54:27.763 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:27.764 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:27.765 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:27.766 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:27.766 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:27.767 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:27.767 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:27.768 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:27.769 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:27.769 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:27.770 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:27.771 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:27.772 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:27.773 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:27.774 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:27.774 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:27.775 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:27.776 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:27.777 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:27.778 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:27.779 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:27.780 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:27.780 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:27.781 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:27.782 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:27.783 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:27.784 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:27.785 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:27.786 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:27.786 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:27.787 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:27.787 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:27.788 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:27.788 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:27.789 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:27.789 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:27.790 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:27.791 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:27.791 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:27.792 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:27.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:27.794 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:27.795 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:27.796 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:27.796 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:27.797 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:27.798 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:27.798 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:27.799 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:27.800 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:27.801 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:27.801 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:27.801 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:27.802 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:27.803 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.2884ms
2026-02-10 16:54:27.804 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:27.804 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:27.805 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:27.805 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:27.806 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:27.807 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.0991ms
2026-02-10 16:54:28.156 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:28.157 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:28.158 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:28.159 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.160 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:28.160 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:28.160 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.161 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:28.162 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:28.163 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:28.164 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:28.165 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:28.166 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:28.167 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:28.167 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:28.168 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:28.169 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:28.170 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.170 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.171 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:28.171 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.172 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:28.173 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:28.173 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:28.174 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:28.175 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:28.176 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:28.177 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:28.178 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:28.179 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:28.180 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:28.180 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:28.181 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:28.181 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:28.182 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:28.182 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:28.183 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:28.184 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:28.184 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:28.185 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:28.186 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:28.187 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:28.188 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:28.189 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:28.190 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:28.190 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:28.191 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:28.192 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:28.193 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:28.194 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:28.195 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:28.195 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:28.196 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:28.196 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:28.197 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.7908ms
2026-02-10 16:54:28.198 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.199 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:28.200 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:28.201 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:28.201 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:28.202 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 46.3809ms
2026-02-10 16:54:28.591 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:28.593 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:28.594 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:28.595 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.596 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:28.596 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:28.596 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.597 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:28.598 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:28.599 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:28.600 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:28.601 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:28.602 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:28.602 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:28.603 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:28.604 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:28.604 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:28.605 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.606 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.606 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:28.607 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.608 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:28.608 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:28.609 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:28.610 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:28.611 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:28.612 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:28.613 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:28.614 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:28.614 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:28.615 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:28.615 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:28.616 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:28.616 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:28.617 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:28.617 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:28.618 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:28.618 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:28.619 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:28.620 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:28.620 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:28.621 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:28.622 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:28.623 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:28.624 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:28.625 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:28.626 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:28.627 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:28.628 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:28.629 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:28.630 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:28.630 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:28.631 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:28.631 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:28.632 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.7231ms
2026-02-10 16:54:28.633 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.633 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:28.634 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:28.634 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:28.635 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:28.636 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.2916ms
2026-02-10 16:54:28.985 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:28.986 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:28.987 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:28.987 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.988 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:28.988 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:28.989 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:28.989 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:28.990 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:28.991 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:28.992 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:28.993 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:28.993 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:28.994 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:28.995 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:28.996 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:28.996 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:28.997 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.998 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:28.999 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:28.999 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.000 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:29.000 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:29.001 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:29.002 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:29.002 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:29.003 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:29.004 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.005 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.006 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:29.006 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:29.007 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:29.007 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:29.008 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:29.008 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:29.009 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.009 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:29.010 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:29.011 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:29.011 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:29.012 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:29.014 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:29.015 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.015 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:29.016 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.017 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:29.018 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.018 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:29.019 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:29.020 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:29.020 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:29.021 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:29.021 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:29.022 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:29.022 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.4686ms
2026-02-10 16:54:29.023 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.024 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:29.024 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:29.025 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:29.025 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:29.026 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 41.6133ms
2026-02-10 16:54:29.384 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:29.386 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:29.386 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:29.387 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.388 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:29.388 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:29.388 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.389 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:29.390 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:29.391 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:29.392 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:29.393 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:29.394 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:29.394 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:29.395 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:29.396 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:29.397 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:29.397 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.398 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.399 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:29.399 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.400 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:29.401 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:29.401 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:29.402 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:29.403 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:29.404 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:29.405 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.406 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.406 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:29.407 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:29.407 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:29.408 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:29.408 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:29.409 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:29.410 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.410 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:29.411 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:29.411 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:29.412 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:29.413 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:29.414 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:29.415 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.416 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:29.417 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.417 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:29.418 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.419 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:29.420 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:29.421 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:29.421 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:29.422 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:29.422 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:29.423 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:29.423 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.9893ms
2026-02-10 16:54:29.424 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.425 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:29.425 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:29.426 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:29.426 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:29.427 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.1247ms
2026-02-10 16:54:29.788 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:29.789 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:29.790 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:29.791 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.792 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:29.792 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:29.792 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.793 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:29.794 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:29.795 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:29.796 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:29.797 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:29.798 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:29.799 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:29.800 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:29.800 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:29.801 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:29.802 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.802 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.803 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:29.804 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:29.804 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:29.805 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:29.806 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:29.806 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:29.807 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:29.808 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:29.809 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.810 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.811 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:29.811 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:29.812 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:29.813 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:29.813 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:29.814 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:29.814 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.815 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:29.815 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:29.816 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:29.817 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:29.818 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:29.819 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:29.820 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.820 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:29.821 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:29.822 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:29.822 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:29.823 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:29.824 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:29.825 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:29.826 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:29.826 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:29.826 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:29.827 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:29.828 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.9758ms
2026-02-10 16:54:29.829 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:29.829 +03:00 [DBG] Connection id "0HNJ8LFF889KU" completed keep alive response.
2026-02-10 16:54:29.830 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:29.830 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:29.831 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:29.832 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 43.6795ms
2026-02-10 16:54:30.160 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:30.161 +03:00 [DBG] Connection id "0HNJ8LFF889KU" received FIN.
2026-02-10 16:54:30.162 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:30.163 +03:00 [DBG] Connection id "0HNJ8LFF889KU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:30.163 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:30.164 +03:00 [DBG] Connection id "0HNJ8LFF889KU" disconnecting.
2026-02-10 16:54:30.165 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:30.166 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:30.166 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:30.167 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:30.167 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:30.168 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:30.169 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:30.170 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:30.171 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:30.171 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:30.172 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:30.173 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:30.173 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:30.174 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:30.175 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:30.175 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:30.176 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:30.177 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:30.177 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:30.178 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:30.179 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:30.179 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:30.180 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:30.181 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:30.182 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:30.183 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:30.184 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:30.185 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:30.185 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:30.186 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:30.187 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:30.187 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:30.188 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:30.189 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:30.189 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:30.190 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:30.191 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:30.191 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:30.193 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:30.194 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:30.194 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:30.195 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:30.196 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:30.197 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:30.198 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:30.199 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:30.200 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:30.200 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:30.201 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:30.201 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:30.202 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:30.204 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 31.6853ms
2026-02-10 16:54:30.204 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:30.205 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:30.205 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:30.206 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:30.207 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 499 null application/json; charset=utf-8 47.2169ms
2026-02-10 16:54:30.209 +03:00 [DBG] Connection id "0HNJ8LFF889KU" stopped.
2026-02-10 16:54:30.554 +03:00 [DBG] Connection id "0HNJ8LFF889KV" accepted.
2026-02-10 16:54:30.554 +03:00 [DBG] Connection id "0HNJ8LFF889KV" received FIN.
2026-02-10 16:54:30.554 +03:00 [DBG] Connection id "0HNJ8LFF889KV" started.
2026-02-10 16:54:30.555 +03:00 [DBG] Connection id "0HNJ8LFF889L0" accepted.
2026-02-10 16:54:30.557 +03:00 [DBG] Connection id "0HNJ8LFF889L0" received FIN.
2026-02-10 16:54:30.559 +03:00 [DBG] Connection id "0HNJ8LFF889L0" started.
2026-02-10 16:54:30.559 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:54:30.562 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:54:30.562 +03:00 [DBG] Connection id "0HNJ8LFF889KV" stopped.
2026-02-10 16:54:30.563 +03:00 [DBG] Connection id "0HNJ8LFF889L0" stopped.
2026-02-10 16:54:30.564 +03:00 [DBG] Connection id "0HNJ8LFF889KV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:30.564 +03:00 [DBG] Connection id "0HNJ8LFF889L0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:31.341 +03:00 [DBG] Connection id "0HNJ8LFF889L1" received FIN.
2026-02-10 16:54:31.341 +03:00 [DBG] Connection id "0HNJ8LFF889L1" accepted.
2026-02-10 16:54:31.342 +03:00 [DBG] Connection id "0HNJ8LFF889L1" started.
2026-02-10 16:54:31.342 +03:00 [DBG] Connection id "0HNJ8LFF889L2" accepted.
2026-02-10 16:54:31.344 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:54:31.344 +03:00 [DBG] Connection id "0HNJ8LFF889L2" started.
2026-02-10 16:54:31.345 +03:00 [DBG] Connection id "0HNJ8LFF889L1" stopped.
2026-02-10 16:54:31.346 +03:00 [DBG] Connection id "0HNJ8LFF889L1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:54:31.347 +03:00 [DBG] Connection 0HNJ8LFF889L2 established using the following protocol: "Tls13"
2026-02-10 16:54:31.348 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:31.349 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:31.350 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:31.351 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:31.351 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:31.352 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:31.352 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:31.353 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:31.354 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:31.354 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:31.355 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:31.356 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:31.357 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:31.358 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:31.358 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:31.359 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:31.360 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:31.360 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:31.361 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:31.362 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:31.362 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:31.363 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:31.364 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:31.364 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:31.365 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:31.366 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:31.367 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:31.368 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:31.368 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:31.369 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:31.369 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:31.370 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:31.371 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:31.371 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:31.372 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:31.372 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:31.373 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:31.374 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:31.374 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:31.375 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:31.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:31.378 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:31.379 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:31.380 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:31.380 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:31.381 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:31.382 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:31.383 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:31.384 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:31.385 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:31.385 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:31.385 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:31.386 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:31.386 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:31.387 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.5901ms
2026-02-10 16:54:31.388 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:31.389 +03:00 [DBG] Connection id "0HNJ8LFF889L2" completed keep alive response.
2026-02-10 16:54:31.389 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:31.390 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:31.390 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:31.391 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.9574ms
2026-02-10 16:54:31.726 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:31.728 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:31.729 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:31.729 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:31.730 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:31.730 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:31.731 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:31.732 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:31.733 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:31.734 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:31.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:31.735 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:31.736 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:31.737 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:31.738 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:31.738 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:31.739 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:31.740 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:31.740 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:31.741 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:31.742 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:31.742 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:31.743 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:31.744 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:31.744 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:31.745 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:31.746 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:31.747 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:31.748 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:31.749 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:31.750 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:31.750 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:31.751 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:31.752 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:31.752 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:31.753 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:31.754 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:31.754 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:31.755 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:31.755 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:31.756 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:31.757 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:31.758 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:31.759 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:31.760 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:31.760 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:31.761 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:31.762 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:31.763 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:31.764 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:31.765 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:31.765 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:31.765 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:31.766 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:31.767 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.7253ms
2026-02-10 16:54:31.768 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:31.768 +03:00 [DBG] Connection id "0HNJ8LFF889L2" completed keep alive response.
2026-02-10 16:54:31.769 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:31.769 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:31.770 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:31.771 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 44.5024ms
2026-02-10 16:54:33.227 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 16:54:33.228 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 16:54:33.229 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 16:54:33.230 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:33.230 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:33.231 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:33.231 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:33.232 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:33.232 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:33.233 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:33.234 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:33.235 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:33.235 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:33.236 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:33.237 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:33.238 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:33.238 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:33.239 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:33.240 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:33.240 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:33.241 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:33.242 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:33.242 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:33.243 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 16:54:33.243 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 16:54:33.244 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-10 16:54:33.245 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:33.246 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:33.247 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:33.248 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:33.248 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:33.249 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:33.250 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:33.250 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:33.250 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:33.251 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:33.252 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:33.252 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:33.253 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:33.253 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:33.254 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:33.255 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:33.257 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:33.257 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 16:54:33.258 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:33.259 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:33.259 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:33.260 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:33.261 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:33.262 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:33.263 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:33.263 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:33.263 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:33.264 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 16:54:33.265 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.3167ms
2026-02-10 16:54:33.266 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 16:54:33.266 +03:00 [DBG] Connection id "0HNJ8LFF889L2" completed keep alive response.
2026-02-10 16:54:33.267 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:33.268 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:33.268 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:33.269 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 42.5636ms
2026-02-10 16:54:38.203 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 16:54:38.205 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 16:54:38.206 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 16:54:38.207 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:54:38.207 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:38.208 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:38.208 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:54:38.211 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:38.213 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:38.214 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:38.215 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:38.216 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:38.217 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:38.218 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:38.219 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:38.219 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:38.220 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:38.221 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:38.222 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:38.223 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:38.223 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:38.227 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 16:54:38.227 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 16:54:38.285 +03:00 [INF] Received HTTP response headers after 57.0994ms - 200
2026-02-10 16:54:38.286 +03:00 [INF] End processing HTTP request after 59.3911ms - 200
2026-02-10 16:54:38.287 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:54:38.288 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:54:38.347 +03:00 [INF] Received HTTP response headers after 58.4206ms - 200
2026-02-10 16:54:38.348 +03:00 [INF] End processing HTTP request after 60.7831ms - 200
2026-02-10 16:54:38.350 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 124ms, CacheHit = FALSE
2026-02-10 16:54:38.351 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:38.352 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:38.353 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:38.354 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:38.355 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:38.355 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:38.356 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:38.356 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:38.357 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:38.358 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:38.358 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:38.359 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:38.360 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:38.360 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:38.361 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:38.363 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:38.364 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:38.365 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:38.366 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:38.367 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:38.367 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:38.368 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:38.370 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:38.371 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:38.372 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:38.372 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:38.373 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:38.373 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 16:54:38.377 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 159.1108ms
2026-02-10 16:54:38.378 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:54:38.379 +03:00 [DBG] Connection id "0HNJ8LFF889L2" completed keep alive response.
2026-02-10 16:54:38.380 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:38.380 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:38.381 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:38.382 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 178.9113ms
2026-02-10 16:54:54.432 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва/week - null null
2026-02-10 16:54:54.433 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва/week'
2026-02-10 16:54:54.434 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Москва/week'
2026-02-10 16:54:54.435 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:54:54.435 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:54.436 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:54:54.436 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:54:54.437 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:54:54.438 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:54:54.438 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:54:54.439 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:54:54.440 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:54:54.441 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:54:54.442 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:54.442 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:54:54.443 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:54:54.444 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:54:54.445 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:54.445 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:54:54.446 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:54:54.447 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:54:54.448 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:54:54.448 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 16:54:54.512 +03:00 [INF] Received HTTP response headers after 62.9981ms - 200
2026-02-10 16:54:54.513 +03:00 [INF] End processing HTTP request after 65.4076ms - 200
2026-02-10 16:54:54.514 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:54:54.515 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:54:54.571 +03:00 [INF] Received HTTP response headers after 55.6332ms - 200
2026-02-10 16:54:54.572 +03:00 [INF] End processing HTTP request after 57.7923ms - 200
2026-02-10 16:54:54.573 +03:00 [INF] Endpoint = week, City = Москва, Date = -, Latency = 125ms, CacheHit = FALSE
2026-02-10 16:54:54.574 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:54:54.575 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:54.576 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:54.576 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:54.577 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:54:54.578 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:54:54.578 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:54:54.579 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:54:54.580 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:54.580 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:54.581 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:54:54.582 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:54:54.582 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:54:54.583 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:54.584 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:54:54.585 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:54:54.587 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:54.587 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:54:54.588 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:54:54.589 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:54.590 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:54:54.591 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:54:54.592 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:54:54.593 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:54:54.593 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:54:54.593 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:54:54.594 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:54:54.594 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 16:54:54.595 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 153.678ms
2026-02-10 16:54:54.597 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:54:54.597 +03:00 [DBG] Connection id "0HNJ8LFF889L2" completed keep alive response.
2026-02-10 16:54:54.598 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:54:54.599 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:54:54.600 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:54:54.601 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва/week - 200 null application/json; charset=utf-8 169.0537ms
2026-02-10 16:55:28.487 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Порто/week - null null
2026-02-10 16:55:28.488 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порто/week'
2026-02-10 16:55:28.489 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Порто/week'
2026-02-10 16:55:28.490 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:55:28.490 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:55:28.491 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:55:28.491 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:55:28.492 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:55:28.493 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:55:28.493 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:55:28.494 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:55:28.495 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:55:28.496 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:55:28.497 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:55:28.498 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:55:28.498 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:55:28.499 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:55:28.500 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:55:28.501 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:55:28.501 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:55:28.502 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:55:28.503 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D0%BE&count=1&language=ru
2026-02-10 16:55:28.504 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D0%BE&count=1&language=ru
2026-02-10 16:55:28.561 +03:00 [INF] Received HTTP response headers after 56.6505ms - 200
2026-02-10 16:55:28.562 +03:00 [INF] End processing HTTP request after 58.7887ms - 200
2026-02-10 16:55:28.563 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=-1.05458&longitude=-80.45445&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:55:28.563 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=-1.05458&longitude=-80.45445&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:55:28.626 +03:00 [INF] Received HTTP response headers after 61.5644ms - 200
2026-02-10 16:55:28.626 +03:00 [INF] End processing HTTP request after 63.7408ms - 200
2026-02-10 16:55:28.627 +03:00 [INF] Endpoint = week, City = Порто, Date = -, Latency = 124ms, CacheHit = FALSE
2026-02-10 16:55:28.628 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:55:28.630 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:55:28.631 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:55:28.631 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:55:28.632 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:55:28.632 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:55:28.633 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:55:28.634 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:55:28.634 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:55:28.635 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:55:28.635 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:55:28.636 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:55:28.637 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:55:28.637 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:55:28.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:55:28.639 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:55:28.641 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:55:28.642 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 16:55:28.642 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:55:28.643 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:55:28.644 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:55:28.645 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:55:28.646 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:55:28.647 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:55:28.647 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:55:28.648 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:55:28.648 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:55:28.649 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 16:55:28.650 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 153.1809ms
2026-02-10 16:55:28.651 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:55:28.651 +03:00 [DBG] Connection id "0HNJ8LFF889L2" completed keep alive response.
2026-02-10 16:55:28.652 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:55:28.653 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:55:28.653 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:55:28.654 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Порто/week - 200 null application/json; charset=utf-8 167.6296ms
2026-02-10 16:56:14.900 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 16:56:24.904 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:56:24.906 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0364ms - processed: 0 items - remaining: 1 items
2026-02-10 16:56:34.920 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:56:34.921 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 16:56:44.931 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:56:44.931 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 16:56:54.940 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:56:54.941 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 16:57:04.948 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:57:04.948 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:57:14.956 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:57:14.956 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 16:57:24.969 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:57:24.970 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 16:57:34.980 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:57:34.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 16:57:44.986 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:57:44.987 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:57:55.000 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:57:55.001 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 16:58:05.016 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:58:05.016 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 16:58:15.027 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:58:15.028 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 16:58:25.036 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:58:25.038 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 16:58:35.051 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:58:35.051 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-10 16:58:45.057 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:58:45.058 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 16:58:55.067 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:58:55.069 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5061ms - processed: 0 items - remaining: 1 items
2026-02-10 16:59:05.076 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:59:05.078 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 16:59:15.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:59:15.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 16:59:25.093 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:59:25.094 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-10 16:59:35.099 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:59:35.100 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 16:59:44.973 +03:00 [DBG] Connection id "0HNJ8LFF889L3" received FIN.
2026-02-10 16:59:44.974 +03:00 [DBG] Connection id "0HNJ8LFF889L3" accepted.
2026-02-10 16:59:44.974 +03:00 [DBG] Connection id "0HNJ8LFF889L3" started.
2026-02-10 16:59:44.975 +03:00 [DBG] Connection id "0HNJ8LFF889L4" accepted.
2026-02-10 16:59:44.978 +03:00 [DBG] Connection id "0HNJ8LFF889L4" started.
2026-02-10 16:59:44.979 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 16:59:44.980 +03:00 [DBG] Connection id "0HNJ8LFF889L3" stopped.
2026-02-10 16:59:44.981 +03:00 [DBG] Connection 0HNJ8LFF889L4 established using the following protocol: "Tls13"
2026-02-10 16:59:44.981 +03:00 [DBG] Connection id "0HNJ8LFF889L3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 16:59:44.983 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Порту/week - null null
2026-02-10 16:59:44.985 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порту/week'
2026-02-10 16:59:44.986 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Порту/week'
2026-02-10 16:59:44.988 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:59:44.989 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:59:44.989 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 16:59:44.990 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:59:44.990 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 16:59:44.991 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 16:59:44.992 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 16:59:44.993 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 16:59:44.994 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 16:59:44.995 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 16:59:44.996 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:59:44.997 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 16:59:44.998 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 16:59:44.998 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 16:59:45.000 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:59:45.001 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 16:59:45.002 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 16:59:45.002 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 16:59:45.004 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-10 16:59:45.004 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-10 16:59:45.107 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:59:45.107 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 16:59:45.327 +03:00 [INF] Received HTTP response headers after 321.4838ms - 200
2026-02-10 16:59:45.327 +03:00 [INF] End processing HTTP request after 323.6369ms - 200
2026-02-10 16:59:45.328 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:59:45.329 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 16:59:45.638 +03:00 [INF] Received HTTP response headers after 308.74ms - 200
2026-02-10 16:59:45.639 +03:00 [INF] End processing HTTP request after 310.907ms - 200
2026-02-10 16:59:45.640 +03:00 [INF] Endpoint = week, City = Порту, Date = -, Latency = 636ms, CacheHit = FALSE
2026-02-10 16:59:45.642 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 16:59:45.643 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:59:45.643 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:59:45.644 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 16:59:45.645 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 16:59:45.645 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 16:59:45.646 +03:00 [DBG] Creating DbConnection.
2026-02-10 16:59:45.646 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 16:59:45.647 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:59:45.648 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:59:45.649 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 16:59:45.649 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 16:59:45.650 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 16:59:45.651 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:59:45.653 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 16:59:45.654 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 16:59:45.658 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:59:45.658 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 16:59:45.659 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 16:59:45.660 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:59:45.661 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 16:59:45.662 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 16:59:45.663 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 16:59:45.664 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 16:59:45.664 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 16:59:45.664 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 16:59:45.665 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 16:59:45.666 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 16:59:45.667 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 671.0322ms
2026-02-10 16:59:45.668 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 16:59:45.668 +03:00 [DBG] Connection id "0HNJ8LFF889L4" completed keep alive response.
2026-02-10 16:59:45.669 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 16:59:45.670 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 16:59:45.671 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 16:59:45.672 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Порту/week - 200 null application/json; charset=utf-8 689.4287ms
2026-02-10 16:59:55.123 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 16:59:55.123 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 17:00:05.139 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:00:05.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 17:00:15.145 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:00:15.146 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-10 17:00:25.147 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:00:25.148 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 17:00:35.154 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:00:35.155 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 17:00:45.158 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:00:45.159 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 17:00:55.166 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:00:55.167 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 17:01:05.169 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:01:05.170 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2026-02-10 17:01:15.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:01:15.178 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 17:01:25.188 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:01:25.188 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 17:01:35.197 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:01:35.198 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2026-02-10 17:01:45.005 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 17:01:45.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:01:45.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-10 17:01:55.221 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:01:55.222 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-10 17:02:05.234 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:02:05.234 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2026-02-10 17:02:15.248 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:02:15.249 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-10 17:02:25.263 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:02:25.264 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2026-02-10 17:02:35.269 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:02:35.270 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 2 items
2026-02-10 17:02:45.280 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:02:45.281 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-10 17:02:55.286 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-10 17:02:55.287 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-10 17:08:09.898 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 17:08:09.967 +03:00 [DBG] Hosting starting
2026-02-10 17:08:10.080 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 17:08:10.080 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 17:08:10.081 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 17:08:10.081 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 17:08:10.082 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 17:08:10.083 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 17:08:10.087 +03:00 [DBG] Connection id "0HNJ8LN95I0F0" received FIN.
2026-02-10 17:08:10.090 +03:00 [DBG] Connection id "0HNJ8LN95I0F0" accepted.
2026-02-10 17:08:10.091 +03:00 [DBG] Connection id "0HNJ8LN95I0F0" started.
2026-02-10 17:08:10.100 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 17:08:10.119 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 17:08:10.119 +03:00 [DBG] Connection id "0HNJ8LN95I0F0" stopped.
2026-02-10 17:08:10.120 +03:00 [INF] Hosting environment: Development
2026-02-10 17:08:10.121 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 17:08:10.122 +03:00 [DBG] Hosting started
2026-02-10 17:08:10.122 +03:00 [DBG] Connection id "0HNJ8LN95I0F0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:08:10.374 +03:00 [DBG] Connection id "0HNJ8LN95I0F1" accepted.
2026-02-10 17:08:10.375 +03:00 [DBG] Connection id "0HNJ8LN95I0F1" started.
2026-02-10 17:08:10.399 +03:00 [DBG] Connection 0HNJ8LN95I0F1 established using the following protocol: "Tls13"
2026-02-10 17:08:10.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 17:08:10.490 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 17:08:10.503 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 17:08:10.504 +03:00 [DBG] Request did not match any endpoints
2026-02-10 17:08:10.507 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 17:08:10.532 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 17:08:10.533 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 17:08:10.544 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 17:08:10.545 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 17:08:10.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 121.2118ms
2026-02-10 17:08:10.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 17:08:10.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.909ms
2026-02-10 17:08:10.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 17:08:10.655 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.5225ms
2026-02-10 17:08:10.710 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 17:08:10.713 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 17:08:10.714 +03:00 [DBG] Request did not match any endpoints
2026-02-10 17:08:10.715 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 17:08:10.721 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.6946ms
2026-02-10 17:08:19.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Порту/week - null null
2026-02-10 17:08:19.785 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порту/week'
2026-02-10 17:08:19.787 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Порту/week'
2026-02-10 17:08:19.788 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:08:19.790 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:08:19.791 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:08:19.797 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:08:19.808 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:08:19.810 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:08:19.811 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:08:19.812 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:08:19.813 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:08:19.814 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:08:19.816 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:08:19.869 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 17:08:19.874 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:08:19.880 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:08:19.882 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:08:19.883 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:08:19.884 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:08:19.885 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:08:19.888 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:08:19.902 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-10 17:08:19.908 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-10 17:08:20.235 +03:00 [INF] Received HTTP response headers after 323.9938ms - 200
2026-02-10 17:08:20.238 +03:00 [INF] End processing HTTP request after 336.5056ms - 200
2026-02-10 17:08:20.252 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 17:08:20.253 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 17:08:20.544 +03:00 [INF] Received HTTP response headers after 290.0075ms - 200
2026-02-10 17:08:20.545 +03:00 [INF] End processing HTTP request after 293.4115ms - 200
2026-02-10 17:08:20.552 +03:00 [INF] Endpoint = week, City = Порту, Date = -, Latency = 660ms, CacheHit = FALSE
2026-02-10 17:08:20.769 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:08:20.788 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:08:20.814 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:08:20.817 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:08:20.819 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:08:20.827 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:08:20.862 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:08:20.867 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 17:08:20.869 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:08:20.876 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:20.880 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:08:20.884 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 17:08:20.886 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-10 17:08:20.890 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:08:20.902 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:08:20.911 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:08:20.916 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:20.920 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 17:08:20.923 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:20.926 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 17:08:20.931 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:08:20.933 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:08:20.941 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:08:20.944 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:08:20.945 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:08:20.945 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:08:20.946 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:08:20.947 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 17:08:20.956 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1138.8604ms
2026-02-10 17:08:20.957 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:08:20.959 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:08:20.962 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:08:20.963 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 17:08:20.965 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Порту/week - 200 null application/json; charset=utf-8 1184.0113ms
2026-02-10 17:08:54.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - null null
2026-02-10 17:08:54.029 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-10 17:08:54.030 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-10 17:08:54.031 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:08:54.032 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:08:54.032 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:08:54.033 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:08:54.037 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:08:54.039 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:08:54.040 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:08:54.041 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:08:54.042 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:08:54.043 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:08:54.044 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:08:54.045 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:08:54.048 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:08:54.050 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:08:54.051 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:08:54.052 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:08:54.053 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:08:54.054 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:08:54.055 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:08:54.056 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:08:54.057 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-10 17:08:54.058 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-10 17:08:54.059 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:08:54.060 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:08:54.060 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-10 17:08:54.061 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-10 17:08:54.062 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:08:54.063 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-10 17:08:54.063 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:08:54.064 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:08:54.065 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:08:54.066 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:08:54.100 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:08:54.124 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-10 17:08:54.204 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 17:08:54.216 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:08:54.217 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:08:54.218 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:08:54.219 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:54.220 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:08:54.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:08:54.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:08:54.222 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:08:54.223 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:08:54.225 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:54.226 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 17:08:54.227 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:54.228 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:08:54.232 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-10 17:08:54.239 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-10 17:08:54.242 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:08:54.243 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:54.243 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:08:54.244 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:08:54.245 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:08:54.246 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:08:54.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:08:54.249 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:54.250 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 17:08:54.251 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:08:54.252 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:08:54.253 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:08:54.254 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:08:54.255 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:08:54.255 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:08:54.256 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:08:54.257 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-10 17:08:54.263 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 219.552ms
2026-02-10 17:08:54.264 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:08:54.265 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:08:54.265 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:08:54.266 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:08:54.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - 200 null application/json; charset=utf-8 243.7752ms
2026-02-10 17:09:21.138 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - null null
2026-02-10 17:09:21.145 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-10 17:09:21.146 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-10 17:09:21.147 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:09:21.148 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:09:21.149 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:09:21.150 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:09:21.151 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:09:21.152 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:09:21.154 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:09:21.155 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:09:21.157 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:09:21.158 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:09:21.159 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:09:21.160 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:09:21.161 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:09:21.162 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:09:21.163 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:09:21.165 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:09:21.166 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:09:21.167 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:09:21.168 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:09:21.169 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:09:21.170 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-10 17:09:21.171 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-10 17:09:21.172 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:09:21.174 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:09:21.175 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-10 17:09:21.176 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-10 17:09:21.177 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:09:21.178 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-10 17:09:21.179 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:09:21.180 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:09:21.181 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:09:21.182 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:09:21.189 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:09:21.193 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:09:21.193 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:09:21.194 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:21.194 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:21.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:09:21.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:09:21.197 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:09:21.197 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:09:21.198 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:09:21.200 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:21.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:09:21.201 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:21.202 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:21.204 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:21.205 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:21.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:09:21.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:09:21.207 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:09:21.207 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:09:21.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:09:21.210 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:21.211 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:09:21.212 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:21.212 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:21.213 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:09:21.214 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:09:21.215 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:09:21.215 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:09:21.216 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:09:21.217 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-10 17:09:21.217 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 58.5405ms
2026-02-10 17:09:21.218 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:09:21.219 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:09:21.219 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:21.220 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:21.221 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - 200 null application/json; charset=utf-8 83.5297ms
2026-02-10 17:09:35.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - null null
2026-02-10 17:09:35.607 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-10 17:09:35.608 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-10 17:09:35.609 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:09:35.610 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:09:35.610 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:09:35.611 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:09:35.611 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:09:35.612 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:09:35.613 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:09:35.614 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:09:35.615 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:09:35.616 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:09:35.617 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:09:35.619 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:09:35.620 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:09:35.620 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:09:35.621 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:09:35.622 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:09:35.623 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:09:35.624 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:09:35.624 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:09:35.625 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:09:35.626 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-10 17:09:35.626 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-10 17:09:35.627 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:09:35.628 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:09:35.629 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-10 17:09:35.630 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-10 17:09:35.630 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:09:35.631 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-10 17:09:35.632 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:09:35.632 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:09:35.633 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:09:35.634 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:09:35.635 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:09:35.637 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:09:35.637 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:09:35.638 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:35.639 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:35.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:09:35.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:09:35.641 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:09:35.641 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:09:35.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:09:35.644 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:35.645 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:09:35.646 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:35.646 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:35.647 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:35.648 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:35.649 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:09:35.649 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:09:35.650 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:09:35.651 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:09:35.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:09:35.654 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:35.654 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:09:35.655 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:35.656 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:35.657 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:09:35.658 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:09:35.659 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:09:35.659 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:09:35.660 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:09:35.660 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-10 17:09:35.661 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 44.3471ms
2026-02-10 17:09:35.662 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:09:35.663 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:09:35.663 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:35.664 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:35.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - 200 null application/json; charset=utf-8 61.5219ms
2026-02-10 17:09:56.472 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - null null
2026-02-10 17:09:56.474 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-10 17:09:56.475 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-10 17:09:56.476 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:09:56.476 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:09:56.477 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:09:56.477 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:09:56.480 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:09:56.481 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:09:56.482 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:09:56.483 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:09:56.484 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:09:56.485 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:09:56.486 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:09:56.487 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:09:56.488 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:09:56.489 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:09:56.490 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:09:56.490 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:09:56.491 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:09:56.492 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:09:56.493 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:09:56.493 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:09:56.494 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:09:56.495 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-10 17:09:56.495 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:09:56.496 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:09:56.497 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:09:56.498 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-10 17:09:56.499 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:09:56.502 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-10 17:09:56.516 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-10 17:09:56.518 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:09:56.518 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:09:56.519 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:56.520 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:56.520 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:09:56.521 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:09:56.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:09:56.522 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:09:56.524 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:09:56.525 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:56.526 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:09:56.527 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:09:56.527 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:56.528 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:09:56.529 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:09:56.530 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:09:56.530 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:09:56.531 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:09:56.531 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-10 17:09:56.533 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 46.4797ms
2026-02-10 17:09:56.534 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:09:56.534 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:09:56.535 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:09:56.536 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:09:56.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - 200 null application/json; charset=utf-8 64.3172ms
2026-02-10 17:10:12.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - null null
2026-02-10 17:10:12.791 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-10 17:10:12.791 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-10 17:10:12.792 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:10:12.793 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:10:12.794 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:10:12.794 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:10:12.795 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:10:12.796 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:10:12.797 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:10:12.798 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:10:12.799 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:10:12.799 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:10:12.800 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:10:12.801 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:10:12.802 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:10:12.802 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:10:12.803 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:10:12.804 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:10:12.805 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:10:12.805 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:10:12.806 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:10:12.807 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:10:12.808 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:10:12.808 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-10 17:10:12.809 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:10:12.810 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:10:12.810 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:10:12.811 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-10 17:10:12.812 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:10:12.813 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:10:12.814 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:10:12.814 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:10:12.815 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:10:12.816 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:10:12.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:10:12.817 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:10:12.818 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:10:12.819 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:10:12.820 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:10:12.821 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:10:12.822 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:10:12.822 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:10:12.823 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:10:12.825 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:10:12.825 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:10:12.826 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:10:12.826 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:10:12.827 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-10 17:10:12.827 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 27.0948ms
2026-02-10 17:10:12.828 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:10:12.829 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:10:12.829 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:10:12.830 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:10:12.831 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - 200 null application/json; charset=utf-8 42.2361ms
2026-02-10 17:10:16.797 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 17:10:16.803 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 17:10:16.804 +03:00 [DBG] Request did not match any endpoints
2026-02-10 17:10:16.804 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 17:10:16.805 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 17:10:16.806 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 17:10:16.812 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 17:10:16.812 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 17:10:16.813 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 15.9955ms
2026-02-10 17:10:16.845 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 17:10:16.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 17:10:16.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.7267ms
2026-02-10 17:10:16.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.0526ms
2026-02-10 17:10:16.921 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 17:10:16.923 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 17:10:16.924 +03:00 [DBG] Request did not match any endpoints
2026-02-10 17:10:16.925 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 17:10:16.928 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.1952ms
2026-02-10 17:10:19.903 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 17:10:29.911 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:10:29.913 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.036ms - processed: 0 items - remaining: 1 items
2026-02-10 17:10:39.740 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - null null
2026-02-10 17:10:39.745 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-10 17:10:39.745 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-10 17:10:39.747 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:10:39.747 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:10:39.748 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:10:39.749 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:10:39.749 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:10:39.750 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:10:39.751 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:10:39.752 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:10:39.753 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:10:39.754 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:10:39.754 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:10:39.755 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:10:39.756 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:10:39.757 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:10:39.758 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:10:39.759 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:10:39.760 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:10:39.760 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:10:39.761 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:10:39.762 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:10:39.763 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:10:39.763 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-10 17:10:39.764 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:10:39.765 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:10:39.766 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:10:39.766 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-10 17:10:39.767 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:10:39.769 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:10:39.769 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:10:39.770 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:10:39.771 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:10:39.771 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:10:39.772 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:10:39.773 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:10:39.773 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:10:39.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:10:39.776 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:10:39.777 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:10:39.778 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:10:39.778 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:10:39.779 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:10:39.780 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:10:39.781 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:10:39.781 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:10:39.782 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:10:39.782 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-10 17:10:39.783 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 28.7988ms
2026-02-10 17:10:39.784 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:10:39.785 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:10:39.785 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:10:39.786 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:10:39.787 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - 200 null application/json; charset=utf-8 47.8158ms
2026-02-10 17:10:39.916 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:10:39.917 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 17:12:15.113 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 17:12:15.298 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:12:15.300 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:15.304 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-10 17:12:15.306 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:12:15.308 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:15.310 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 17:12:18.071 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 17:12:18.274 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:12:18.276 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:18.280 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-10 17:12:18.283 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:18.284 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:12:18.285 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:18.289 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:18.291 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:18.293 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:18.293 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:18.294 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:18.294 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:18.295 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:18.297 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:12:18.298 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:18.298 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.504 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 17:12:27.707 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:12:27.716 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:27.720 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-10 17:12:27.722 +03:00 [DBG] Migrating using database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.723 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:27.724 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:12:27.725 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.728 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.729 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.730 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.731 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:27.731 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:12:27.731 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.731 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.731 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.731 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.731 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.734 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.737 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 17:12:27.739 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 17:12:27.739 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2026-02-10 17:12:27.742 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-10 17:12:27.751 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-10 17:12:27.752 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.753 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.786 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 17:12:27.786 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 17:12:27.786 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 17:12:27.787 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.787 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.787 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-10 17:12:27.789 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-10 17:12:27.790 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.790 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.790 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:27.790 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:12:27.790 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.790 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.791 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.791 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.792 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-10 17:12:27.792 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-10 17:12:27.792 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-10 17:12:27.792 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.792 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.792 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-10 17:12:27.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-10 17:12:27.794 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.794 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.862 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.862 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.862 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:12:27.862 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:12:27.862 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:12:27.862 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 17:12:27.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 17:12:27.863 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.864 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:12:27.864 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.864 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.868 +03:00 [INF] Applying migration '20260202104928_InitialStatistic'.
2026-02-10 17:12:27.875 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.875 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.876 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 17:12:27.878 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2026-02-10 17:12:27.878 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 17:12:27.878 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 17:12:27.878 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 17:12:27.878 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-10 17:12:27.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-10 17:12:27.878 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 17:12:27.878 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 17:12:27.878 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 17:12:27.878 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-10 17:12:27.879 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-10 17:12:27.879 +03:00 [DBG] Committing transaction.
2026-02-10 17:12:27.880 +03:00 [DBG] Committed transaction.
2026-02-10 17:12:27.880 +03:00 [DBG] Disposing transaction.
2026-02-10 17:12:27.880 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:27.880 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:27.881 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:12:27.881 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:27.882 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:36.067 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 17:12:36.132 +03:00 [DBG] Hosting starting
2026-02-10 17:12:36.293 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 17:12:36.294 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 17:12:36.294 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 17:12:36.295 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 17:12:36.295 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 17:12:36.296 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 17:12:36.317 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 17:12:36.318 +03:00 [INF] Hosting environment: Development
2026-02-10 17:12:36.318 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 17:12:36.319 +03:00 [DBG] Hosting started
2026-02-10 17:12:36.477 +03:00 [DBG] Connection id "0HNJ8LPOI1N8D" accepted.
2026-02-10 17:12:36.477 +03:00 [DBG] Connection id "0HNJ8LPOI1N8E" accepted.
2026-02-10 17:12:36.478 +03:00 [DBG] Connection id "0HNJ8LPOI1N8D" started.
2026-02-10 17:12:36.478 +03:00 [DBG] Connection id "0HNJ8LPOI1N8E" started.
2026-02-10 17:12:36.502 +03:00 [DBG] Connection id "0HNJ8LPOI1N8D" received FIN.
2026-02-10 17:12:36.502 +03:00 [DBG] Connection id "0HNJ8LPOI1N8E" received FIN.
2026-02-10 17:12:36.508 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 17:12:36.508 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 17:12:36.529 +03:00 [DBG] Connection id "0HNJ8LPOI1N8E" stopped.
2026-02-10 17:12:36.529 +03:00 [DBG] Connection id "0HNJ8LPOI1N8D" stopped.
2026-02-10 17:12:36.532 +03:00 [DBG] Connection id "0HNJ8LPOI1N8D" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:12:36.532 +03:00 [DBG] Connection id "0HNJ8LPOI1N8E" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:12:37.015 +03:00 [DBG] Connection id "0HNJ8LPOI1N8F" accepted.
2026-02-10 17:12:37.018 +03:00 [DBG] Connection id "0HNJ8LPOI1N8F" started.
2026-02-10 17:12:37.044 +03:00 [DBG] Connection 0HNJ8LPOI1N8F established using the following protocol: "Tls13"
2026-02-10 17:12:37.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 17:12:37.156 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 17:12:37.170 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 17:12:37.171 +03:00 [DBG] Request did not match any endpoints
2026-02-10 17:12:37.174 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 17:12:37.211 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 17:12:37.213 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 17:12:37.223 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 17:12:37.224 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 17:12:37.227 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 152.4854ms
2026-02-10 17:12:37.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 17:12:37.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.3368ms
2026-02-10 17:12:37.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 17:12:37.307 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.0003ms
2026-02-10 17:12:37.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 17:12:37.385 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 17:12:37.386 +03:00 [DBG] Request did not match any endpoints
2026-02-10 17:12:37.387 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 17:12:37.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.1022ms
2026-02-10 17:12:40.763 +03:00 [DBG] Connection id "0HNJ8LPOI1N8G" received FIN.
2026-02-10 17:12:40.763 +03:00 [DBG] Connection id "0HNJ8LPOI1N8G" accepted.
2026-02-10 17:12:40.764 +03:00 [DBG] Connection id "0HNJ8LPOI1N8G" started.
2026-02-10 17:12:40.765 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" accepted.
2026-02-10 17:12:40.766 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 17:12:40.766 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" started.
2026-02-10 17:12:40.768 +03:00 [DBG] Connection id "0HNJ8LPOI1N8G" stopped.
2026-02-10 17:12:40.769 +03:00 [DBG] Connection id "0HNJ8LPOI1N8G" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:12:40.771 +03:00 [DBG] Connection 0HNJ8LPOI1N8H established using the following protocol: "Tls13"
2026-02-10 17:12:40.774 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Порту/week - null null
2026-02-10 17:12:40.777 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порту/week'
2026-02-10 17:12:40.779 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Порту/week'
2026-02-10 17:12:40.780 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:12:40.782 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:12:40.782 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:12:40.788 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:12:40.799 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:12:40.801 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:12:40.802 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:12:40.803 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:12:40.805 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:12:40.805 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:12:40.807 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:12:40.861 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 17:12:40.867 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:12:40.873 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:12:40.875 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:12:40.876 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:12:40.877 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:12:40.878 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:12:40.881 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:12:40.895 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-10 17:12:40.901 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-10 17:12:41.222 +03:00 [INF] Received HTTP response headers after 319.12ms - 200
2026-02-10 17:12:41.225 +03:00 [INF] End processing HTTP request after 331.0428ms - 200
2026-02-10 17:12:41.234 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 17:12:41.236 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 17:12:41.545 +03:00 [INF] Received HTTP response headers after 308.1617ms - 200
2026-02-10 17:12:41.546 +03:00 [INF] End processing HTTP request after 311.7284ms - 200
2026-02-10 17:12:41.553 +03:00 [INF] Endpoint = week, City = Порту, Date = -, Latency = 668ms, CacheHit = FALSE
2026-02-10 17:12:41.769 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:12:41.785 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:12:41.814 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:12:41.817 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:12:41.819 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:12:41.827 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:12:41.859 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:41.864 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 17:12:41.866 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:41.873 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:41.876 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:12:41.880 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:12:41.882 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 17:12:41.886 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:12:41.897 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:12:41.905 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:12:41.911 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:41.914 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 17:12:41.916 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:41.919 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 17:12:41.925 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:12:41.927 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:12:41.936 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:12:41.938 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:12:41.938 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:12:41.939 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:12:41.940 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:12:41.941 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 17:12:41.952 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1144.1162ms
2026-02-10 17:12:41.953 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:12:41.955 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" completed keep alive response.
2026-02-10 17:12:41.956 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:12:41.959 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:41.960 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 17:12:41.962 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Порту/week - 200 null application/json; charset=utf-8 1188.3424ms
2026-02-10 17:12:43.714 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Порту/week - null null
2026-02-10 17:12:43.716 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порту/week'
2026-02-10 17:12:43.717 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Порту/week'
2026-02-10 17:12:43.719 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:12:43.720 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:12:43.720 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:12:43.721 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:12:43.722 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:12:43.724 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:12:43.725 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:12:43.726 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:12:43.728 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:12:43.729 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:12:43.730 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:12:43.732 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:12:43.733 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:12:43.734 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:12:43.736 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:12:43.737 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:12:43.738 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:12:43.739 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:12:43.740 +03:00 [INF] Endpoint = week, City = Порту, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-10 17:12:43.766 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:12:43.768 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:12:43.769 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:12:43.770 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:12:43.771 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:12:43.772 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:12:43.773 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:43.774 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:12:43.775 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:43.776 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:43.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:12:43.778 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:12:43.779 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 17:12:43.781 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:12:43.782 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:12:43.784 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:12:43.785 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:43.787 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 17:12:43.788 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:43.790 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 17:12:43.791 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:12:43.792 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:12:43.794 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:12:43.795 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:12:43.796 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:12:43.797 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:12:43.797 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:12:43.798 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 17:12:43.800 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 69.0899ms
2026-02-10 17:12:43.800 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:12:43.801 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" completed keep alive response.
2026-02-10 17:12:43.802 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:12:43.803 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:43.804 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 17:12:43.806 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Порту/week - 200 null application/json; charset=utf-8 91.7711ms
2026-02-10 17:12:55.884 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - null null
2026-02-10 17:12:55.887 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-10 17:12:55.888 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-10 17:12:55.889 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:12:55.890 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:12:55.890 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:12:55.891 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:12:55.895 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:12:55.896 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:12:55.897 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:12:55.898 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:12:55.899 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:12:55.900 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:12:55.900 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:12:55.902 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:12:55.905 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:12:55.908 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:12:55.909 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:12:55.910 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:12:55.910 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:12:55.911 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:12:55.912 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:12:55.912 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:12:55.913 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-10 17:12:55.914 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-10 17:12:55.915 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:12:55.915 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-10 17:12:55.916 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-10 17:12:55.917 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-10 17:12:55.918 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:12:55.919 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-10 17:12:55.920 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:12:55.920 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:12:55.921 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-10 17:12:55.922 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-10 17:12:55.935 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:12:55.961 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-10 17:12:56.043 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 17:12:56.056 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:12:56.056 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:12:56.057 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:56.058 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:56.059 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:12:56.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:12:56.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:12:56.061 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:12:56.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-10 17:12:56.064 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:56.064 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-10 17:12:56.065 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:56.066 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:56.069 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-10 17:12:56.077 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-10 17:12:56.080 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:56.081 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:56.081 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:12:56.082 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:12:56.083 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:12:56.083 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:12:56.084 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-10 17:12:56.087 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:56.088 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 17:12:56.089 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:12:56.090 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:56.091 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:12:56.092 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:12:56.093 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:12:56.093 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:12:56.094 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:12:56.095 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-10 17:12:56.101 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 200.469ms
2026-02-10 17:12:56.102 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-10 17:12:56.102 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:12:56.103 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:12:56.104 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:12:56.105 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=2026-02-10&to=2026-02-10&page=1&pageSize=10 - 200 null application/json; charset=utf-8 220.8288ms
2026-02-10 17:13:22.367 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 17:13:22.369 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:13:22.370 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:13:22.370 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:13:22.371 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:13:22.371 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:13:22.372 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:13:22.372 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:13:22.373 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:13:22.374 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:13:22.375 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:13:22.377 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:13:22.378 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:13:22.379 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:13:22.382 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:13:22.383 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:13:22.384 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:13:22.385 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:13:22.386 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:13:22.386 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:13:22.387 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:13:22.388 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 17:13:22.389 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 17:13:22.446 +03:00 [INF] Received HTTP response headers after 56.3479ms - 200
2026-02-10 17:13:22.447 +03:00 [INF] End processing HTTP request after 58.4312ms - 200
2026-02-10 17:13:22.448 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 17:13:22.448 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 17:13:22.656 +03:00 [INF] Received HTTP response headers after 206.6951ms - 200
2026-02-10 17:13:22.657 +03:00 [INF] End processing HTTP request after 208.9682ms - 200
2026-02-10 17:13:22.658 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 269ms, CacheHit = FALSE
2026-02-10 17:13:22.659 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:13:22.660 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:13:22.661 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:13:22.662 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:13:22.663 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:13:22.663 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:13:22.664 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:13:22.665 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:13:22.665 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:13:22.666 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:22.667 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:13:22.667 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:13:22.668 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:13:22.669 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:13:22.670 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:13:22.671 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:13:22.672 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:22.675 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 17:13:22.704 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:22.705 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:13:22.706 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:13:22.707 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:13:22.708 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:13:22.710 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:13:22.710 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:13:22.711 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:13:22.711 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:13:22.712 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 17:13:22.713 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 334.2943ms
2026-02-10 17:13:22.714 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:13:22.714 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" completed keep alive response.
2026-02-10 17:13:22.715 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:13:22.716 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:13:22.716 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:13:22.717 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 349.9507ms
2026-02-10 17:13:24.416 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 17:13:24.417 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:13:24.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:13:24.418 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:13:24.419 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:13:24.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:13:24.420 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:13:24.421 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:13:24.422 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:13:24.422 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:13:24.423 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:13:24.424 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:13:24.425 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:13:24.426 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:13:24.427 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:13:24.428 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:13:24.429 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:13:24.430 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:13:24.431 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:13:24.431 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:13:24.432 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:13:24.433 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-10 17:13:24.434 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:13:24.436 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:13:24.437 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:13:24.437 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:13:24.438 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:13:24.439 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:13:24.439 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:13:24.440 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:13:24.441 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:13:24.442 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:24.443 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:13:24.443 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:13:24.444 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:13:24.445 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:13:24.446 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:13:24.447 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:13:24.449 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:24.449 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 17:13:24.450 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:24.451 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:13:24.452 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:13:24.453 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:13:24.454 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:13:24.455 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:13:24.456 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:13:24.456 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:13:24.457 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:13:24.458 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 17:13:24.459 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 32.521ms
2026-02-10 17:13:24.460 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:13:24.461 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" completed keep alive response.
2026-02-10 17:13:24.462 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:13:24.462 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:13:24.463 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:13:24.464 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 48.6665ms
2026-02-10 17:13:35.114 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - null null
2026-02-10 17:13:35.119 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-10 17:13:35.120 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-10 17:13:35.121 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:13:35.122 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:13:35.122 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:13:35.123 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:13:35.126 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-10 17:13:35.127 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:13:35.128 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:13:35.129 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 17:13:35.130 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:13:35.130 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:13:35.131 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:13:35.132 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-10 17:13:35.133 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:13:35.134 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:13:35.134 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-10 17:13:35.135 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-10 17:13:35.136 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:13:35.137 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:13:35.137 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-10 17:13:35.138 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-10 17:13:35.138 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:13:35.139 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-10 17:13:35.140 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:13:35.141 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-10 17:13:35.141 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-10 17:13:35.142 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-10 17:13:35.144 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:13:35.146 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-10 17:13:35.163 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-10 17:13:35.164 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:13:35.165 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:13:35.165 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:13:35.166 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:35.167 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:13:35.167 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:13:35.168 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:13:35.169 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:13:35.170 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-10 17:13:35.171 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:35.172 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-10 17:13:35.173 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:13:35.173 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:13:35.174 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:13:35.175 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:13:35.176 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:13:35.176 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:13:35.177 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:13:35.177 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-10 17:13:35.179 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 47.4249ms
2026-02-10 17:13:35.179 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-10 17:13:35.180 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:13:35.180 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:13:35.181 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:13:35.182 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-10&to=2026-02-10&limit=10 - 200 null application/json; charset=utf-8 68.0265ms
2026-02-10 17:14:40.905 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 17:14:50.916 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:14:50.918 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.043ms - processed: 0 items - remaining: 1 items
2026-02-10 17:14:56.464 +03:00 [DBG] Connection id "0HNJ8LPOI1N8I" received FIN.
2026-02-10 17:14:56.465 +03:00 [DBG] Connection id "0HNJ8LPOI1N8I" accepted.
2026-02-10 17:14:56.466 +03:00 [DBG] Connection id "0HNJ8LPOI1N8I" started.
2026-02-10 17:14:56.468 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" accepted.
2026-02-10 17:14:56.470 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 17:14:56.470 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" started.
2026-02-10 17:14:56.471 +03:00 [DBG] Connection id "0HNJ8LPOI1N8I" stopped.
2026-02-10 17:14:56.472 +03:00 [DBG] Connection id "0HNJ8LPOI1N8I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:14:56.474 +03:00 [DBG] Connection 0HNJ8LPOI1N8J established using the following protocol: "Tls13"
2026-02-10 17:14:56.475 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 17:14:56.476 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:14:56.477 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:14:56.478 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:14:56.478 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:14:56.479 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:14:56.479 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:14:56.480 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:14:56.481 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:14:56.482 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:14:56.483 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:14:56.484 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:14:56.485 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:14:56.485 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:14:56.486 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:14:56.487 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:14:56.488 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:14:56.489 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:14:56.490 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:14:56.490 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:14:56.491 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:14:56.492 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-10 17:14:56.493 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:14:56.494 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:14:56.495 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:14:56.496 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:14:56.496 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:14:56.497 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:14:56.497 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:14:56.498 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:14:56.498 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:14:56.499 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:14:56.500 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:14:56.500 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:14:56.501 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:14:56.501 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:14:56.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:14:56.503 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:14:56.505 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:14:56.505 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 17:14:56.506 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:14:56.507 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:14:56.507 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:14:56.508 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:14:56.509 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 17:14:56.510 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 17:14:56.511 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 17:14:56.511 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 17:14:56.511 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 17:14:56.512 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 17:14:56.513 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.2732ms
2026-02-10 17:14:56.514 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:14:56.514 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" completed keep alive response.
2026-02-10 17:14:56.515 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:14:56.515 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:14:56.516 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:14:56.517 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 42.0065ms
2026-02-10 17:15:00.926 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:15:00.927 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 17:15:10.936 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:15:10.938 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3693ms - processed: 0 items - remaining: 1 items
2026-02-10 17:15:17.749 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 17:15:17.751 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:15:17.751 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 17:15:17.752 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:15:17.753 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:15:17.753 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:15:17.754 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:15:17.754 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:15:17.755 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:15:17.756 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:15:17.757 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:15:17.758 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:15:17.758 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:15:17.759 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:15:17.760 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:15:17.761 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:15:17.762 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:15:17.763 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:15:17.764 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:15:17.764 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:15:17.765 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:15:17.766 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-10 17:15:17.767 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:15:17.768 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:15:17.769 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:15:17.770 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:15:17.770 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:15:17.771 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:15:17.772 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:15:17.772 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:15:17.773 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:15:17.774 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:15:17.774 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:15:17.775 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:15:17.776 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:15:17.776 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:15:17.778 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:15:17.779 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:15:17.780 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:15:17.782 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 17:15:17.784 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:15:17.785 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:15:17.786 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:15:17.787 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:15:17.788 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 17:15:17.789 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 29.64ms
2026-02-10 17:15:17.790 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 17:15:17.790 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" completed keep alive response.
2026-02-10 17:15:17.791 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:15:17.791 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:15:17.792 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:15:17.793 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 304 null null 44.4276ms
2026-02-10 17:15:20.950 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:15:20.951 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 17:15:28.574 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 17:15:28.575 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 17:15:28.576 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 17:15:28.577 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 17:15:28.577 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:15:28.578 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 17:15:28.578 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 17:15:28.581 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 17:15:28.583 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 17:15:28.583 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 17:15:28.584 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 17:15:28.585 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 17:15:28.586 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 17:15:28.587 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:15:28.588 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 17:15:28.589 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 17:15:28.589 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 17:15:28.590 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:15:28.591 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 17:15:28.592 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 17:15:28.592 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 17:15:28.593 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 17:15:28.594 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 17:15:28.595 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 17:15:28.596 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 17:15:28.599 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 17:15:28.599 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 17:15:28.834 +03:00 [INF] Received HTTP response headers after 233.7512ms - 200
2026-02-10 17:15:28.835 +03:00 [INF] End processing HTTP request after 235.8915ms - 200
2026-02-10 17:15:28.836 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 17:15:28.837 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 17:15:29.065 +03:00 [INF] Received HTTP response headers after 227.7386ms - 200
2026-02-10 17:15:29.066 +03:00 [INF] End processing HTTP request after 229.9961ms - 200
2026-02-10 17:15:29.067 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 469ms, CacheHit = FALSE
2026-02-10 17:15:29.069 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 17:15:29.070 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:15:29.070 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:15:29.071 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 17:15:29.072 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 17:15:29.072 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 17:15:29.073 +03:00 [DBG] Creating DbConnection.
2026-02-10 17:15:29.074 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 17:15:29.074 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:15:29.075 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:15:29.076 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 17:15:29.076 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 17:15:29.077 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 17:15:29.078 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:15:29.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 17:15:29.080 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 17:15:29.082 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:15:29.082 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 17:15:29.083 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 17:15:29.084 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:15:29.085 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 17:15:29.086 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 17:15:29.087 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 17:15:29.087 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 500.2268ms
2026-02-10 17:15:29.088 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 17:15:29.089 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" completed keep alive response.
2026-02-10 17:15:29.089 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 17:15:29.090 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 17:15:29.091 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 17:15:29.091 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 517.8598ms
2026-02-10 17:15:30.956 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:15:30.957 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 17:15:40.971 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:15:40.971 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 17:15:50.978 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:15:50.979 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 17:16:00.985 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:16:00.986 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 17:16:08.438 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" received FIN.
2026-02-10 17:16:08.439 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" disconnecting.
2026-02-10 17:16:08.441 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" received FIN.
2026-02-10 17:16:08.442 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:16:08.445 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 17:16:08.447 +03:00 [DBG] Connection id "0HNJ8LPOI1N8H" stopped.
2026-02-10 17:16:08.451 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" disconnecting.
2026-02-10 17:16:08.453 +03:00 [DBG] Connection id "0HNJ8LPOI1N8J" stopped.
2026-02-10 17:16:10.991 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 17:16:10.992 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
