2026-02-10 12:13:44.176 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:13:44.258 +03:00 [DBG] Hosting starting
2026-02-10 12:13:44.415 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:13:44.418 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:13:44.420 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:13:44.422 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:13:44.424 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:13:44.425 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:13:44.450 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:13:44.451 +03:00 [INF] Hosting environment: Development
2026-02-10 12:13:44.452 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:13:44.452 +03:00 [DBG] Hosting started
2026-02-10 12:13:44.825 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" accepted.
2026-02-10 12:13:44.826 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" started.
2026-02-10 12:13:44.836 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" accepted.
2026-02-10 12:13:44.837 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" started.
2026-02-10 12:13:44.853 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" received FIN.
2026-02-10 12:13:44.853 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" received FIN.
2026-02-10 12:13:44.858 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:13:44.858 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:13:44.883 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" stopped.
2026-02-10 12:13:44.883 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" stopped.
2026-02-10 12:13:44.886 +03:00 [DBG] Connection id "0HNJ8GIOGFSL5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:13:44.886 +03:00 [DBG] Connection id "0HNJ8GIOGFSL4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:13:45.193 +03:00 [DBG] Connection id "0HNJ8GIOGFSL6" accepted.
2026-02-10 12:13:45.195 +03:00 [DBG] Connection id "0HNJ8GIOGFSL6" started.
2026-02-10 12:13:45.230 +03:00 [DBG] Connection 0HNJ8GIOGFSL6 established using the following protocol: "Tls13"
2026-02-10 12:13:45.274 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:13:45.364 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:13:45.378 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:13:45.380 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:13:45.383 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:13:45.415 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:13:45.416 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:13:45.426 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:13:45.427 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:13:45.428 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 158.5042ms
2026-02-10 12:13:45.449 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:13:45.457 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.5145ms
2026-02-10 12:13:45.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:13:45.512 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.1186ms
2026-02-10 12:13:45.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:13:45.572 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:13:45.572 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:13:45.573 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:13:45.579 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.5834ms
2026-02-10 12:14:03.914 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" accepted.
2026-02-10 12:14:03.915 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" received FIN.
2026-02-10 12:14:03.915 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" started.
2026-02-10 12:14:03.916 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" accepted.
2026-02-10 12:14:03.918 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:14:03.918 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" started.
2026-02-10 12:14:03.919 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" stopped.
2026-02-10 12:14:03.921 +03:00 [DBG] Connection id "0HNJ8GIOGFSL7" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:14:03.922 +03:00 [DBG] Connection 0HNJ8GIOGFSL8 established using the following protocol: "Tls13"
2026-02-10 12:14:03.926 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:14:03.929 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:14:03.931 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:14:03.933 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:03.935 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:03.936 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:03.938 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:03.951 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:14:03.953 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:14:03.954 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:14:03.955 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:14:03.956 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:14:03.957 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:14:03.959 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:04.025 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:14:04.030 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:04.041 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:14:04.043 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:14:04.044 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:04.045 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:04.046 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:14:04.051 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:14:04.052 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:04.057 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:04.058 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:04.058 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:04.072 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:14:04.077 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:14:04.366 +03:00 [INF] Received HTTP response headers after 286.6207ms - 200
2026-02-10 12:14:04.369 +03:00 [INF] End processing HTTP request after 297.4034ms - 200
2026-02-10 12:14:04.378 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:14:04.379 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:14:04.644 +03:00 [INF] Received HTTP response headers after 263.7836ms - 200
2026-02-10 12:14:04.645 +03:00 [INF] End processing HTTP request after 266.5827ms - 200
2026-02-10 12:14:04.901 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:14:04.919 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:04.946 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:04.949 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:04.954 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:04.963 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:14:04.999 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:14:05.004 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 12:14:05.006 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:05.019 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:05.023 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:14:05.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:14:05.029 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:14:05.034 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:05.051 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:05.059 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:14:05.063 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:05.067 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-10 12:14:05.070 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:05.073 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 12:14:05.078 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:05.079 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:14:05.087 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:14:05.090 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:14:05.090 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:14:05.091 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:14:05.092 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:14:05.093 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:14:05.104 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1144.0304ms
2026-02-10 12:14:05.105 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:05.106 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" completed keep alive response.
2026-02-10 12:14:05.108 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:14:05.110 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:05.111 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:14:05.112 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1186.9785ms
2026-02-10 12:14:07.448 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:14:07.450 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:14:07.451 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:14:07.453 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:07.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:07.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:14:07.455 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:07.456 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:14:07.458 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:14:07.458 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:14:07.459 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:14:07.461 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:14:07.461 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:14:07.462 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:07.464 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:14:07.465 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:14:07.466 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:14:07.467 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:07.467 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:14:07.468 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:14:07.469 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:14:07.470 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:07.471 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:07.472 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:14:07.472 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:14:07.500 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:14:07.502 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:07.503 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:07.504 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:07.504 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:14:07.505 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:14:07.506 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:14:07.506 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:14:07.507 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:07.508 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:07.509 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:14:07.509 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:14:07.510 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:14:07.511 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:07.512 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:14:07.513 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:14:07.514 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:07.516 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:14:07.517 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:14:07.518 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:14:07.519 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:14:07.520 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:14:07.521 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:14:07.522 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:14:07.523 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:14:07.523 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:14:07.524 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:14:07.525 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:14:07.526 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 63.6888ms
2026-02-10 12:14:07.527 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:14:07.528 +03:00 [DBG] Connection id "0HNJ8GIOGFSL8" completed keep alive response.
2026-02-10 12:14:07.528 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:14:07.529 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:14:07.530 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:14:07.531 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 83.2185ms
2026-02-10 12:16:04.077 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:16:14.086 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:14.089 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0485ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:24.093 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:24.094 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:34.111 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:34.112 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:36.735 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" accepted.
2026-02-10 12:16:36.736 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" received FIN.
2026-02-10 12:16:36.739 +03:00 [DBG] Connection id "0HNJ8GIOGFSLA" accepted.
2026-02-10 12:16:36.740 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" started.
2026-02-10 12:16:36.743 +03:00 [DBG] Connection id "0HNJ8GIOGFSLA" started.
2026-02-10 12:16:36.745 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:16:36.746 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" stopped.
2026-02-10 12:16:36.747 +03:00 [DBG] Connection 0HNJ8GIOGFSLA established using the following protocol: "Tls13"
2026-02-10 12:16:36.748 +03:00 [DBG] Connection id "0HNJ8GIOGFSL9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:16:36.749 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0AAB0A6CA6E172F9CE63481B40CE079940A47FD34B6BA9F9476C4DE70E911DAADD - null null
2026-02-10 12:16:36.751 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:16:36.752 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:16:36.753 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:16:36.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:16:36.755 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:16:36.755 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:16:36.756 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:16:36.757 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:16:36.758 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:16:36.759 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:16:36.760 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:16:36.761 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:16:36.762 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:16:36.766 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:16:36.768 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:16:36.769 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:16:36.770 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:16:36.771 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:16:36.772 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:16:36.772 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:16:36.773 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:16:36.774 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:16:36.775 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:16:36.776 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:16:36.783 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:16:36.785 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:16:36.787 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:16:36.788 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:16:36.789 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:16:36.790 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:16:36.790 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:16:36.791 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:16:36.792 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:16:36.792 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:16:36.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:16:36.794 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:16:36.795 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:16:36.796 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:16:36.797 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:16:36.799 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:16:36.801 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:16:36.802 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-10 12:16:36.803 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:16:36.804 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:16:36.806 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:16:36.807 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:16:36.808 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:16:36.809 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:16:36.809 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:16:36.810 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:16:36.811 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:16:36.811 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:16:36.813 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 50.4397ms
2026-02-10 12:16:36.813 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:16:36.814 +03:00 [DBG] Connection id "0HNJ8GIOGFSLA" completed keep alive response.
2026-02-10 12:16:36.815 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:16:36.816 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:16:36.817 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:16:36.818 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0AAB0A6CA6E172F9CE63481B40CE079940A47FD34B6BA9F9476C4DE70E911DAADD - 200 null application/json; charset=utf-8 69.5949ms
2026-02-10 12:16:44.119 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:44.120 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:16:54.128 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:16:54.129 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:04.143 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:04.143 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:14.158 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:14.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:24.161 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:24.162 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:34.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:34.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:44.177 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:44.178 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 12:17:54.191 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:17:54.193 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:04.199 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:04.200 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:14.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:14.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:24.217 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:24.218 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0045ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:34.229 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:34.231 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.6169ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:44.241 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:44.242 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2026-02-10 12:18:54.252 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:18:54.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:04.253 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:04.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:14.261 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:14.262 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:24.266 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:24.267 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:34.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:34.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:44.292 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:44.293 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:19:54.301 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:19:54.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:04.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:04.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:14.321 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:14.322 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:24.327 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:24.328 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:34.342 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:34.342 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:44.346 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:44.347 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-10 12:20:54.355 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:20:54.356 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:21:04.361 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:21:04.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0067ms - processed: 0 items - remaining: 1 items
2026-02-10 12:21:14.374 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:21:14.375 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 0 items - remaining: 1 items
2026-02-10 12:24:36.046 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:24:36.110 +03:00 [DBG] Hosting starting
2026-02-10 12:24:36.209 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:24:36.210 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:24:36.211 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:24:36.211 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:24:36.212 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:24:36.212 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:24:36.233 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:24:36.233 +03:00 [INF] Hosting environment: Development
2026-02-10 12:24:36.234 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:24:36.234 +03:00 [DBG] Hosting started
2026-02-10 12:24:36.325 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" received FIN.
2026-02-10 12:24:36.328 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" accepted.
2026-02-10 12:24:36.329 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" started.
2026-02-10 12:24:36.340 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:24:36.357 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" stopped.
2026-02-10 12:24:36.360 +03:00 [DBG] Connection id "0HNJ8GOQLM0KU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:24:36.644 +03:00 [DBG] Connection id "0HNJ8GOQLM0KV" accepted.
2026-02-10 12:24:36.645 +03:00 [DBG] Connection id "0HNJ8GOQLM0KV" started.
2026-02-10 12:24:36.677 +03:00 [DBG] Connection 0HNJ8GOQLM0KV established using the following protocol: "Tls13"
2026-02-10 12:24:36.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:24:36.843 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:24:36.853 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:24:36.854 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:24:36.856 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:24:36.891 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:24:36.892 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:24:36.901 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:24:36.902 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:24:36.904 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 127.1353ms
2026-02-10 12:24:36.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:24:36.944 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.8423ms
2026-02-10 12:24:36.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:24:37.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.0551ms
2026-02-10 12:24:37.103 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:24:37.106 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:24:37.107 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:24:37.108 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:24:37.113 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.483ms
2026-02-10 12:24:42.882 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" received FIN.
2026-02-10 12:24:42.882 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" accepted.
2026-02-10 12:24:42.884 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" started.
2026-02-10 12:24:42.884 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" accepted.
2026-02-10 12:24:42.885 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:24:42.886 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" started.
2026-02-10 12:24:42.887 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" stopped.
2026-02-10 12:24:42.889 +03:00 [DBG] Connection id "0HNJ8GOQLM0L0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:24:42.890 +03:00 [DBG] Connection 0HNJ8GOQLM0L1 established using the following protocol: "Tls13"
2026-02-10 12:24:42.894 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:24:42.898 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:24:42.900 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:24:42.901 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:42.902 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:42.903 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:42.906 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:42.919 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:24:42.921 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:24:42.922 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:24:42.923 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:24:42.925 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:24:42.926 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:24:42.927 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:42.987 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:24:42.994 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:43.004 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:24:43.006 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:24:43.007 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:43.008 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:43.009 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:24:43.012 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:24:43.013 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:43.018 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:43.018 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:43.020 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:43.034 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:24:43.040 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:24:43.333 +03:00 [INF] Received HTTP response headers after 289.9528ms - 200
2026-02-10 12:24:43.336 +03:00 [INF] End processing HTTP request after 302.4284ms - 200
2026-02-10 12:24:43.347 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:24:43.347 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:24:43.642 +03:00 [INF] Received HTTP response headers after 293.7659ms - 200
2026-02-10 12:24:43.643 +03:00 [INF] End processing HTTP request after 296.7726ms - 200
2026-02-10 12:24:43.870 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:24:43.886 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:43.911 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:43.914 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:43.916 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:43.923 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:24:43.957 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:24:43.963 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 12:24:43.966 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:43.973 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:43.977 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:24:43.981 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:24:43.985 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 12:24:43.990 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:44.004 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:44.012 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:24:44.018 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:44.021 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 12:24:44.024 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:44.027 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 12:24:44.032 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:44.035 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:24:44.043 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:24:44.045 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:24:44.045 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:24:44.046 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:24:44.047 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:24:44.048 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:24:44.057 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1129.6855ms
2026-02-10 12:24:44.059 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:44.060 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" completed keep alive response.
2026-02-10 12:24:44.062 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:24:44.065 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:44.067 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:24:44.068 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1174.5205ms
2026-02-10 12:24:52.599 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - null null
2026-02-10 12:24:52.602 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:24:52.602 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:24:52.604 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:52.604 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:52.605 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:24:52.605 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:52.606 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:24:52.608 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:24:52.609 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:24:52.610 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:24:52.612 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:24:52.613 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:24:52.614 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:52.616 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:24:52.617 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:24:52.618 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:24:52.619 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:52.620 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:24:52.621 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:24:52.622 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:24:52.623 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:52.624 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:52.625 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:24:52.626 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:24:52.652 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:24:52.654 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:52.656 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:52.657 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:52.658 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:24:52.659 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:24:52.660 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:24:52.661 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:24:52.662 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:52.663 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:52.663 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:24:52.664 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:24:52.665 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:24:52.666 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:52.667 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:24:52.669 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:24:52.670 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:52.671 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:24:52.672 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:24:52.674 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:24:52.675 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:24:52.676 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:24:52.678 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:24:52.679 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:24:52.679 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:24:52.680 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:24:52.680 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:24:52.681 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:24:52.682 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 68.2396ms
2026-02-10 12:24:52.683 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:24:52.684 +03:00 [DBG] Connection id "0HNJ8GOQLM0L1" completed keep alive response.
2026-02-10 12:24:52.685 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:24:52.686 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:24:52.687 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:24:52.688 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - 200 null application/json; charset=utf-8 89.0414ms
2026-02-10 12:26:06.013 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" received FIN.
2026-02-10 12:26:06.013 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" accepted.
2026-02-10 12:26:06.014 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" started.
2026-02-10 12:26:06.015 +03:00 [DBG] Connection id "0HNJ8GOQLM0L3" accepted.
2026-02-10 12:26:06.019 +03:00 [DBG] Connection id "0HNJ8GOQLM0L3" started.
2026-02-10 12:26:06.020 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:26:06.023 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" stopped.
2026-02-10 12:26:06.023 +03:00 [DBG] Connection 0HNJ8GOQLM0L3 established using the following protocol: "Tls13"
2026-02-10 12:26:06.024 +03:00 [DBG] Connection id "0HNJ8GOQLM0L2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:26:06.025 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:26:06.027 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:26:06.028 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:26:06.029 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:26:06.030 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:26:06.030 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:26:06.031 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:26:06.031 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:26:06.032 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:26:06.033 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:26:06.034 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:26:06.035 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:26:06.036 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:26:06.037 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:26:06.041 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:26:06.042 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:26:06.043 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:26:06.044 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:26:06.045 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:26:06.046 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:26:06.047 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:26:06.048 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:26:06.049 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:26:06.049 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:26:06.050 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:26:06.056 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:26:06.058 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:26:06.059 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:26:06.060 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:26:06.061 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:26:06.061 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:26:06.062 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:26:06.062 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:26:06.063 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:26:06.063 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:26:06.064 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:26:06.065 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:26:06.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:26:06.066 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:26:06.067 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:26:06.068 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:26:06.069 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:26:06.070 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:26:06.071 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:26:06.072 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:26:06.073 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:26:06.074 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:26:06.074 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:26:06.076 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:26:06.076 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:26:06.076 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:26:06.077 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:26:06.077 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:26:06.078 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 41.6713ms
2026-02-10 12:26:06.079 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:26:06.079 +03:00 [DBG] Connection id "0HNJ8GOQLM0L3" completed keep alive response.
2026-02-10 12:26:06.080 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:26:06.081 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:26:06.081 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:26:06.082 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 57.8692ms
2026-02-10 12:26:43.047 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:26:53.053 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:26:53.055 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0331ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:03.065 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:03.066 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:13.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:13.082 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:23.090 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:23.091 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:24.835 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" accepted.
2026-02-10 12:27:24.836 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" received FIN.
2026-02-10 12:27:24.840 +03:00 [DBG] Connection id "0HNJ8GOQLM0L5" accepted.
2026-02-10 12:27:24.840 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" started.
2026-02-10 12:27:24.840 +03:00 [DBG] Connection id "0HNJ8GOQLM0L5" started.
2026-02-10 12:27:24.844 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:27:24.846 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" stopped.
2026-02-10 12:27:24.847 +03:00 [DBG] Connection 0HNJ8GOQLM0L5 established using the following protocol: "Tls13"
2026-02-10 12:27:24.848 +03:00 [DBG] Connection id "0HNJ8GOQLM0L4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:27:24.848 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:27:24.852 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:27:24.853 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:27:24.854 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:27:24.854 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:27:24.854 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:27:24.855 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:27:24.855 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:27:24.856 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:27:24.857 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:27:24.858 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:27:24.859 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:27:24.859 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:27:24.860 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:27:24.861 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:27:24.862 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:27:24.862 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:27:24.863 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:27:24.864 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:27:24.865 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:27:24.865 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:27:24.866 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:27:24.866 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:27:24.867 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:27:24.868 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:27:24.869 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:27:24.870 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:24.870 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:24.871 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:27:24.872 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:27:24.872 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:27:24.873 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:27:24.873 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:27:24.874 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:27:24.875 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:27:24.875 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:27:24.876 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:27:24.877 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:27:24.877 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:27:24.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:27:24.879 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:27:24.881 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:27:24.882 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:27:24.883 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:27:24.883 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:27:24.884 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:24.885 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:27:24.886 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:27:24.887 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:27:24.887 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:27:24.888 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:27:24.888 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:27:24.889 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:27:24.889 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 29.2823ms
2026-02-10 12:27:24.890 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:27:24.891 +03:00 [DBG] Connection id "0HNJ8GOQLM0L5" completed keep alive response.
2026-02-10 12:27:24.891 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:27:24.892 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:27:24.893 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:27:24.894 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 45.7284ms
2026-02-10 12:27:33.102 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:33.104 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 1.0072ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:43.118 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:43.119 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 12:27:53.131 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:27:53.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:03.146 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:03.147 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:13.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:13.163 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:23.175 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:23.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:33.190 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:33.190 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:43.194 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:43.195 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:28:53.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:28:53.204 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5662ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:03.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:03.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:13.216 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:13.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:23.223 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:23.223 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:33.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:33.239 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:43.251 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:43.252 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:29:53.267 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:29:53.268 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:03.277 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:03.278 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:09.951 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" received FIN.
2026-02-10 12:30:09.954 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" accepted.
2026-02-10 12:30:09.955 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" started.
2026-02-10 12:30:09.955 +03:00 [DBG] Connection id "0HNJ8GOQLM0L7" accepted.
2026-02-10 12:30:09.958 +03:00 [DBG] Connection id "0HNJ8GOQLM0L7" started.
2026-02-10 12:30:09.959 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:30:09.961 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" stopped.
2026-02-10 12:30:09.962 +03:00 [DBG] Connection id "0HNJ8GOQLM0L6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:30:09.962 +03:00 [DBG] Connection 0HNJ8GOQLM0L7 established using the following protocol: "Tls13"
2026-02-10 12:30:09.964 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:30:09.965 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:30:09.966 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:30:09.967 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:30:09.968 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:30:09.968 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:30:09.969 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:30:09.969 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:30:09.970 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:30:09.971 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:30:09.972 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:30:09.973 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:30:09.974 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:30:09.975 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:30:09.976 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:30:09.977 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:30:09.978 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:30:09.979 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:30:09.979 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:30:09.980 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:30:09.981 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:30:09.982 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:30:09.983 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:30:09.983 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:30:09.984 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:30:09.985 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:30:09.986 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:09.987 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:09.988 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:30:09.989 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:30:09.989 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:30:09.990 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:30:09.991 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:30:09.991 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:30:09.992 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:30:09.993 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:30:09.994 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:30:09.995 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:30:09.996 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:30:09.997 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:30:09.998 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:30:09.999 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:30:10.000 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:30:10.001 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:30:10.002 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:30:10.003 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:10.004 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:30:10.005 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:30:10.006 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:30:10.006 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:30:10.007 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:30:10.007 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:30:10.008 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:30:10.009 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.8194ms
2026-02-10 12:30:10.010 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:30:10.010 +03:00 [DBG] Connection id "0HNJ8GOQLM0L7" completed keep alive response.
2026-02-10 12:30:10.011 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:30:10.012 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:30:10.013 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:30:10.013 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 49.4712ms
2026-02-10 12:30:13.283 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:13.283 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:23.296 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:23.297 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:33.307 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:33.308 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:43.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:43.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-10 12:30:53.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:30:53.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:31:03.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:31:03.326 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:32:14.208 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:32:14.272 +03:00 [DBG] Hosting starting
2026-02-10 12:32:14.367 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:32:14.368 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:32:14.369 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:32:14.369 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:32:14.370 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:32:14.370 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:32:14.371 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" accepted.
2026-02-10 12:32:14.371 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" accepted.
2026-02-10 12:32:14.372 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" started.
2026-02-10 12:32:14.372 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" started.
2026-02-10 12:32:14.376 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" received FIN.
2026-02-10 12:32:14.376 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" received FIN.
2026-02-10 12:32:14.389 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:32:14.389 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:32:14.409 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" stopped.
2026-02-10 12:32:14.409 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" stopped.
2026-02-10 12:32:14.409 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:32:14.411 +03:00 [INF] Hosting environment: Development
2026-02-10 12:32:14.412 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:32:14.412 +03:00 [DBG] Connection id "0HNJ8GT35UGO2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:32:14.412 +03:00 [DBG] Connection id "0HNJ8GT35UGO3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:32:14.412 +03:00 [DBG] Hosting started
2026-02-10 12:32:14.554 +03:00 [DBG] Connection id "0HNJ8GT35UGO4" accepted.
2026-02-10 12:32:14.557 +03:00 [DBG] Connection id "0HNJ8GT35UGO4" started.
2026-02-10 12:32:14.590 +03:00 [DBG] Connection 0HNJ8GT35UGO4 established using the following protocol: "Tls13"
2026-02-10 12:32:14.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:32:14.681 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:32:14.690 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:32:14.691 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:32:14.694 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:32:14.720 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:32:14.721 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:32:14.730 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:32:14.731 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:32:14.733 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 112.8715ms
2026-02-10 12:32:14.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:32:14.763 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.7732ms
2026-02-10 12:32:14.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:32:14.811 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.9928ms
2026-02-10 12:32:14.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:32:14.877 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:32:14.878 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:32:14.879 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:32:14.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.2609ms
2026-02-10 12:32:18.735 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" accepted.
2026-02-10 12:32:18.735 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" received FIN.
2026-02-10 12:32:18.736 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" started.
2026-02-10 12:32:18.736 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" accepted.
2026-02-10 12:32:18.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:32:18.738 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" started.
2026-02-10 12:32:18.740 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" stopped.
2026-02-10 12:32:18.741 +03:00 [DBG] Connection id "0HNJ8GT35UGO5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:32:18.742 +03:00 [DBG] Connection 0HNJ8GT35UGO6 established using the following protocol: "Tls13"
2026-02-10 12:32:18.746 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:32:18.749 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:18.751 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:18.752 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:18.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:18.754 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:18.756 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:18.769 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:18.771 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:18.772 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:18.773 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:18.775 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:18.775 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:18.777 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:18.833 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:32:18.839 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:18.847 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:18.849 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:18.850 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:18.851 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:18.852 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:18.855 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:18.857 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:18.860 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:18.862 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:18.863 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:18.875 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:32:18.880 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:32:19.164 +03:00 [INF] Received HTTP response headers after 281.8122ms - 200
2026-02-10 12:32:19.167 +03:00 [INF] End processing HTTP request after 292.5355ms - 200
2026-02-10 12:32:19.176 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:32:19.177 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:32:19.440 +03:00 [INF] Received HTTP response headers after 262.4604ms - 200
2026-02-10 12:32:19.441 +03:00 [INF] End processing HTTP request after 265.1326ms - 200
2026-02-10 12:32:19.668 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:19.686 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:19.713 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:19.716 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:19.718 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:19.726 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:19.762 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:19.767 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 12:32:19.769 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:19.775 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:19.779 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:19.783 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:19.786 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 12:32:19.791 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:19.805 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:19.813 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:19.820 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:19.823 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 15ms reading results.
2026-02-10 12:32:19.826 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:19.828 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:32:19.834 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:19.836 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:19.842 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:19.844 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:19.844 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:19.845 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:19.846 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:19.847 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:19.856 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1077.9364ms
2026-02-10 12:32:19.857 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:19.858 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:19.860 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:19.862 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:19.864 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:32:19.865 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 1119.6594ms
2026-02-10 12:32:22.032 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:32:22.034 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:22.035 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:22.036 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:22.037 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:22.037 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:22.038 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:22.038 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:22.039 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:22.040 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:22.041 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:22.042 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:22.043 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:22.044 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:22.045 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:22.046 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:22.047 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:22.048 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:22.049 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:22.050 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:22.051 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:22.051 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:22.052 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:22.053 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:22.054 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:22.079 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:22.081 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:22.082 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:22.083 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:22.084 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:22.085 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:22.086 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:22.086 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:32:22.087 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:22.088 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:22.088 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:22.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:32:22.090 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:22.090 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:22.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:22.093 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:22.095 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:22.095 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:32:22.096 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:22.097 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:22.098 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:22.099 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:22.100 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:22.102 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:22.102 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:22.103 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:22.103 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:22.104 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:22.105 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 61.2642ms
2026-02-10 12:32:22.106 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:22.107 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:22.107 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:22.108 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:22.109 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:22.110 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 78.4941ms
2026-02-10 12:32:43.622 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - null null
2026-02-10 12:32:43.625 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:43.626 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:43.627 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:43.628 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:43.629 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:43.630 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:43.631 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:43.632 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:43.634 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:43.635 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:43.637 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:43.638 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:43.639 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:43.644 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:43.645 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:43.646 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:43.648 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:43.649 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:43.650 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:43.651 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:43.652 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:43.653 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:43.654 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:43.655 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:43.661 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:43.663 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:43.664 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:43.665 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:43.666 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:43.667 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:43.668 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:43.668 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:32:43.669 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:43.670 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:43.671 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:43.672 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:32:43.673 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:43.674 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:43.676 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:43.678 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:43.680 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:43.680 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:32:43.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:43.685 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:43.686 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:43.687 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:43.687 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:43.688 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:43.689 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:43.689 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:43.690 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:43.690 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:43.691 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 51.843ms
2026-02-10 12:32:43.692 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:43.693 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:43.693 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:43.694 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:43.694 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:43.695 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - 200 null application/json; charset=utf-8 72.8388ms
2026-02-10 12:32:44.821 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - null null
2026-02-10 12:32:44.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:32:44.823 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:32:44.824 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:44.824 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:44.825 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:32:44.825 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:44.826 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:32:44.827 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:32:44.827 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:32:44.828 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:32:44.829 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:32:44.830 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:32:44.831 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:44.832 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:32:44.833 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:32:44.833 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:32:44.834 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:44.835 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:32:44.835 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:32:44.836 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:32:44.837 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:44.838 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:44.839 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:32:44.840 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:32:44.841 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:32:44.843 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:44.844 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:44.845 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:44.846 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:32:44.847 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:32:44.848 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:32:44.848 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:32:44.849 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:44.850 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:44.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:32:44.851 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:32:44.852 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:32:44.853 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:44.855 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:32:44.857 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:32:44.858 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:44.859 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:32:44.860 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:32:44.861 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:44.862 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:32:44.863 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:32:44.864 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:32:44.866 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:32:44.867 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:32:44.867 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:32:44.868 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:32:44.869 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:32:44.870 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 38.9595ms
2026-02-10 12:32:44.871 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:32:44.872 +03:00 [DBG] Connection id "0HNJ8GT35UGO6" completed keep alive response.
2026-02-10 12:32:44.872 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:32:44.873 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:32:44.874 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:32:44.875 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=3E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D - 200 null application/json; charset=utf-8 54.555ms
2026-02-10 12:34:18.883 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:34:28.887 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:28.890 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0571ms - processed: 0 items - remaining: 1 items
2026-02-10 12:34:38.908 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:38.909 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:34:48.910 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:48.911 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2026-02-10 12:34:58.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:34:58.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:35:11.518 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:35:11.584 +03:00 [DBG] Hosting starting
2026-02-10 12:35:11.703 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:35:11.704 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:35:11.705 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:35:11.706 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:35:11.706 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:35:11.707 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:35:11.741 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:35:11.743 +03:00 [INF] Hosting environment: Development
2026-02-10 12:35:11.743 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:35:11.744 +03:00 [DBG] Hosting started
2026-02-10 12:35:11.770 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" received FIN.
2026-02-10 12:35:11.773 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" accepted.
2026-02-10 12:35:11.774 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" started.
2026-02-10 12:35:11.788 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:35:11.807 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" stopped.
2026-02-10 12:35:11.810 +03:00 [DBG] Connection id "0HNJ8GUO1OERA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:35:12.145 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" accepted.
2026-02-10 12:35:12.147 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" started.
2026-02-10 12:35:12.178 +03:00 [DBG] Connection 0HNJ8GUO1OERB established using the following protocol: "Tls13"
2026-02-10 12:35:12.209 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:35:12.265 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:35:12.274 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:35:12.275 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:35:12.278 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:35:12.304 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:35:12.305 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:35:12.319 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:35:12.320 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:35:12.322 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 115.9713ms
2026-02-10 12:35:12.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:35:12.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.776ms
2026-02-10 12:35:12.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:35:12.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.0056ms
2026-02-10 12:35:12.467 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:35:12.470 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:35:12.470 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:35:12.471 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:35:12.476 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.6425ms
2026-02-10 12:35:18.488 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" accepted.
2026-02-10 12:35:18.488 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" received FIN.
2026-02-10 12:35:18.489 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" started.
2026-02-10 12:35:18.489 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" accepted.
2026-02-10 12:35:18.490 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:35:18.491 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" started.
2026-02-10 12:35:18.492 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" stopped.
2026-02-10 12:35:18.493 +03:00 [DBG] Connection id "0HNJ8GUO1OERC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:35:18.495 +03:00 [DBG] Connection 0HNJ8GUO1OERD established using the following protocol: "Tls13"
2026-02-10 12:35:18.498 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:35:18.501 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:35:18.503 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:35:18.504 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:18.506 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:18.507 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:18.508 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:18.523 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:35:18.525 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:35:18.526 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:35:18.527 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:35:18.528 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:35:18.529 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:35:18.531 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:18.588 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:35:18.594 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:18.602 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:35:18.604 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:35:18.605 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:18.606 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:18.607 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:35:18.610 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:35:18.611 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:18.615 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:18.616 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:18.617 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:18.629 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:35:18.635 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:35:18.875 +03:00 [INF] Received HTTP response headers after 238.4041ms - 200
2026-02-10 12:35:18.878 +03:00 [INF] End processing HTTP request after 249.0879ms - 200
2026-02-10 12:35:18.887 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:35:18.889 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:35:19.168 +03:00 [INF] Received HTTP response headers after 278.1348ms - 200
2026-02-10 12:35:19.169 +03:00 [INF] End processing HTTP request after 281.8342ms - 200
2026-02-10 12:35:19.412 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:35:19.429 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:19.457 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:19.461 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:19.468 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:19.478 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:35:19.512 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:35:19.519 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-10 12:35:19.522 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:19.529 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:19.532 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:35:19.535 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:35:19.538 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:35:19.541 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:19.554 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:19.561 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:35:19.566 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:19.570 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-10 12:35:19.572 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:19.574 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-10 12:35:19.579 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:19.581 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:35:19.587 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:35:19.589 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:35:19.590 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:35:19.591 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:35:19.592 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:35:19.593 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:35:19.602 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1070.3913ms
2026-02-10 12:35:19.603 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:19.604 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" completed keep alive response.
2026-02-10 12:35:19.605 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:35:19.608 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:19.609 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:35:19.610 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1112.2544ms
2026-02-10 12:35:31.058 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:35:31.060 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:35:31.061 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:35:31.062 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:31.063 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:31.064 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:35:31.065 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:31.065 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:35:31.067 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:35:31.068 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:35:31.069 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:35:31.070 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:35:31.071 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:35:31.072 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:31.074 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:35:31.075 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:35:31.076 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:35:31.077 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:31.078 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:35:31.079 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:35:31.080 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:35:31.081 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:31.082 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:31.082 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:35:31.083 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:35:31.111 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:35:31.113 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:31.114 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:31.115 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:31.116 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:35:31.117 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:35:31.118 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:35:31.119 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:35:31.120 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:31.121 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:31.122 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:35:31.122 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:35:31.123 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:35:31.124 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:31.125 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:35:31.126 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:35:31.128 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:31.129 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:35:31.130 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:35:31.131 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:35:31.132 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:35:31.133 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:35:31.134 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:35:31.136 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:35:31.136 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:35:31.137 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:35:31.138 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:35:31.138 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:35:31.140 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 67.6024ms
2026-02-10 12:35:31.140 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:35:31.141 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" completed keep alive response.
2026-02-10 12:35:31.142 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:35:31.143 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:35:31.144 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:35:31.145 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&ETag=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 86.8975ms
2026-02-10 12:36:58.076 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" received FIN.
2026-02-10 12:36:58.077 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" accepted.
2026-02-10 12:36:58.078 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" started.
2026-02-10 12:36:58.078 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" accepted.
2026-02-10 12:36:58.082 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" started.
2026-02-10 12:36:58.082 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:36:58.084 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" stopped.
2026-02-10 12:36:58.086 +03:00 [DBG] Connection id "0HNJ8GUO1OERE" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:36:58.086 +03:00 [DBG] Connection 0HNJ8GUO1OERF established using the following protocol: "Tls13"
2026-02-10 12:36:58.087 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:36:58.089 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:36:58.089 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:36:58.090 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:36:58.091 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:36:58.091 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:36:58.092 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:36:58.093 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:36:58.094 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:36:58.096 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:36:58.097 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:36:58.098 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:36:58.099 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:36:58.100 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:36:58.104 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:36:58.105 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:36:58.109 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:36:58.110 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:36:58.111 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:36:58.112 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:36:58.113 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:36:58.114 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:36:58.115 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:36:58.115 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:36:58.116 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:36:58.125 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:36:58.126 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:36:58.127 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:36:58.128 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:36:58.130 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:36:58.131 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:36:58.132 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:36:58.133 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:36:58.134 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:36:58.135 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:36:58.136 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:36:58.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:36:58.138 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:36:58.139 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:36:58.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:36:58.141 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:36:58.143 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:36:58.144 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:36:58.144 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:36:58.145 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:36:58.147 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:36:58.148 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:36:58.149 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:36:58.151 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:36:58.152 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:36:58.152 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:36:58.153 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:36:58.154 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:36:58.155 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 54.7583ms
2026-02-10 12:36:58.156 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:36:58.157 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" completed keep alive response.
2026-02-10 12:36:58.157 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:36:58.158 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:36:58.159 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:36:58.160 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 72.4005ms
2026-02-10 12:37:03.872 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match:=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - null null
2026-02-10 12:37:03.874 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:37:03.874 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:37:03.875 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:37:03.876 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:37:03.876 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:37:03.877 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:37:03.877 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:37:03.878 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:37:03.879 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:37:03.880 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:37:03.881 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:37:03.882 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:37:03.883 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:37:03.884 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:37:03.885 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:37:03.886 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:37:03.887 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:37:03.887 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:37:03.888 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:37:03.889 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:37:03.889 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:37:03.890 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:37:03.891 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:37:03.892 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:37:03.893 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:37:03.894 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:37:03.895 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:37:03.896 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:37:03.896 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:37:03.897 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:37:03.897 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:37:03.898 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:37:03.899 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:37:03.900 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:37:03.900 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:37:03.901 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:37:03.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:37:03.903 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:37:03.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:37:03.905 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:37:03.906 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:37:03.907 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:37:03.908 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:37:03.909 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:37:03.910 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:37:03.910 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:37:03.911 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:37:03.912 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:37:03.913 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:37:03.913 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:37:03.914 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:37:03.915 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:37:03.916 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.6346ms
2026-02-10 12:37:03.917 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:37:03.917 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" completed keep alive response.
2026-02-10 12:37:03.918 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:37:03.919 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:37:03.920 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:37:03.920 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05&If-None-Match:=%09%0A%223E08883593395C4A4CE239B5F8D23AE5A6F085DE00457E4394F2D284B2A72C7D%22 - 200 null application/json; charset=utf-8 48.2101ms
2026-02-10 12:37:18.643 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-10 12:37:28.648 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:28.651 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:37:38.659 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:38.659 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:37:48.660 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:48.661 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-10 12:37:58.667 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:37:58.668 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:08.683 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:08.684 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:18.693 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:18.695 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5628ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:28.706 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:28.707 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:38.707 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:38.708 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:48.725 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:48.726 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:38:58.735 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:38:58.736 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:08.740 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:08.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:18.755 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:18.756 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:28.764 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:28.765 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.529ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:34.937 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" accepted.
2026-02-10 12:39:34.938 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" received FIN.
2026-02-10 12:39:34.938 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" started.
2026-02-10 12:39:34.941 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" accepted.
2026-02-10 12:39:34.945 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:39:34.945 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" started.
2026-02-10 12:39:34.947 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" stopped.
2026-02-10 12:39:34.948 +03:00 [DBG] Connection id "0HNJ8GUO1OERG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:39:34.949 +03:00 [DBG] Connection 0HNJ8GUO1OERH established using the following protocol: "Tls13"
2026-02-10 12:39:34.950 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:39:34.952 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:39:34.952 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:39:34.953 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:39:34.954 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:39:34.954 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:39:34.955 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:39:34.955 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:39:34.956 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:39:34.957 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:39:34.958 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:39:34.959 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:39:34.960 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:39:34.961 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:39:34.962 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:39:34.963 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:39:34.964 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:39:34.965 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:39:34.966 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:39:34.967 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:39:34.968 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:39:34.969 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:39:34.969 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:39:34.970 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:39:34.971 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:39:34.972 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:39:34.973 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:39:34.974 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:39:34.975 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:39:34.975 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:39:34.976 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:39:34.977 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:39:34.977 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:39:34.978 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:39:34.979 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:39:34.980 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:39:34.980 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:39:34.981 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:39:34.982 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:39:34.984 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:39:34.985 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:39:34.987 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:39:34.988 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:39:34.989 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:39:34.990 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:39:34.991 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:39:34.992 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:39:34.993 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:39:34.994 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.6942ms
2026-02-10 12:39:34.995 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:39:34.996 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" completed keep alive response.
2026-02-10 12:39:34.996 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:39:34.997 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:39:34.998 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:39:34.999 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 48.5489ms
2026-02-10 12:39:38.777 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:38.778 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:48.780 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:48.781 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-10 12:39:58.786 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:39:58.787 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:08.798 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:08.800 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:18.815 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:18.816 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:28.821 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:28.823 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:37.600 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" received FIN.
2026-02-10 12:40:37.603 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" accepted.
2026-02-10 12:40:37.604 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" started.
2026-02-10 12:40:37.604 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" accepted.
2026-02-10 12:40:37.606 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" started.
2026-02-10 12:40:37.608 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:40:37.610 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" stopped.
2026-02-10 12:40:37.611 +03:00 [DBG] Connection id "0HNJ8GUO1OERI" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:40:37.611 +03:00 [DBG] Connection 0HNJ8GUO1OERJ established using the following protocol: "Tls13"
2026-02-10 12:40:37.613 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:37.614 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:37.615 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:37.615 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:37.616 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:37.616 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:37.617 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:37.618 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:37.619 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:37.620 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:37.620 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:37.622 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:37.622 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:37.623 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:37.624 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:37.625 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:37.626 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:37.627 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:37.627 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:37.628 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:37.629 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:37.630 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:37.630 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:37.631 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:37.632 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:37.633 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:37.634 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:37.635 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:37.636 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:37.637 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:37.637 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:37.638 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:37.638 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:37.639 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:37.640 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:37.641 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:37.641 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:37.642 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:37.643 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:37.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:37.645 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:37.646 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:37.647 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:37.648 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:37.649 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:37.650 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:37.651 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:37.652 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:40:37.653 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:40:37.654 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:40:37.654 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:40:37.655 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:40:37.656 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:40:37.656 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.2473ms
2026-02-10 12:40:37.657 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:37.658 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:37.659 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:37.659 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:37.660 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:37.661 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 48.4659ms
2026-02-10 12:40:38.841 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:38.841 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:39.299 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:39.301 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:39.301 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:39.302 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:39.303 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:39.303 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:39.304 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:39.304 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:39.305 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:39.306 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:39.307 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:39.308 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:39.309 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:39.310 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:39.311 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:39.312 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:39.313 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:39.314 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:39.314 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:39.315 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:39.316 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:39.316 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:39.317 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:39.318 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:39.319 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:39.320 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:39.321 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:39.322 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:39.322 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:39.323 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:39.324 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:39.324 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:39.325 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:39.326 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:39.326 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:39.327 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:39.328 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:39.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:39.329 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:39.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:39.331 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:39.333 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:39.333 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:39.334 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:39.335 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:39.336 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:39.337 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:39.338 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:40:39.339 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:40:39.340 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:40:39.340 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:40:39.341 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:40:39.341 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:40:39.342 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.0394ms
2026-02-10 12:40:39.343 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:39.344 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:39.345 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:39.345 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:39.346 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:39.347 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 47.5632ms
2026-02-10 12:40:42.742 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:42.743 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:42.744 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:42.745 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:42.745 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:42.746 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:42.746 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:42.747 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:42.748 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:42.749 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:42.750 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:42.751 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:42.752 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:42.753 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:42.753 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:42.754 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:42.755 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:42.756 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:42.757 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:42.757 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:42.758 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:42.759 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:42.760 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:42.760 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:42.761 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:42.762 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:42.763 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:42.764 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:42.765 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:42.766 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:42.766 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:42.767 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:42.768 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:42.768 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:42.769 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:42.770 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:42.770 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:42.771 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:42.772 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:42.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:42.774 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:42.776 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:42.776 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:42.777 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:42.778 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:40:42.779 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:42.780 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:42.781 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:40:42.782 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.955ms
2026-02-10 12:40:42.782 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:42.783 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:42.783 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:42.784 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:42.785 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:42.786 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 43.8135ms
2026-02-10 12:40:44.028 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:40:44.029 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:40:44.030 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:40:44.031 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:44.031 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:44.032 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:40:44.032 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:44.033 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:40:44.034 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:40:44.035 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:40:44.036 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:40:44.037 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:40:44.038 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:40:44.039 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:44.039 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:40:44.040 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:40:44.041 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:40:44.042 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:44.043 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:40:44.043 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:40:44.044 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:40:44.045 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:44.045 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:44.046 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:40:44.047 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:40:44.048 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:40:44.049 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:44.050 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:44.051 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:44.051 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:40:44.052 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:40:44.053 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:40:44.053 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:40:44.054 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:44.054 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:44.055 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:40:44.056 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:40:44.056 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:40:44.057 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:44.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:40:44.059 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:40:44.061 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:44.062 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:40:44.062 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:40:44.063 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:44.064 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:40:44.066 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:40:44.067 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:40:44.067 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.8545ms
2026-02-10 12:40:44.068 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:40:44.069 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:40:44.070 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:40:44.070 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:40:44.071 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:40:44.072 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 44.6269ms
2026-02-10 12:40:48.845 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:48.846 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:40:58.850 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:40:58.851 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:06.147 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" received FIN.
2026-02-10 12:41:06.151 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" is closed. The last processed stream ID was 7.
2026-02-10 12:41:06.152 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:06.152 +03:00 [DBG] The connection queue processing loop for 0HNJ8GUO1OERB completed.
2026-02-10 12:41:06.156 +03:00 [DBG] Connection id "0HNJ8GUO1OERB" stopped.
2026-02-10 12:41:08.866 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:08.867 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:18.884 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:18.885 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:28.892 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:28.892 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:35.097 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:41:35.101 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:41:35.101 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:41:35.102 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:35.103 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:35.104 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:35.104 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:35.105 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:41:35.105 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:41:35.106 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:41:35.107 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:41:35.108 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:41:35.109 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:41:35.109 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:35.110 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:35.111 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:41:35.112 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:41:35.112 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:35.113 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:35.114 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:41:35.114 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:41:35.115 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:35.116 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:35.116 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:35.117 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:35.118 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:41:35.119 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:35.120 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:35.121 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:35.122 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:35.122 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:41:35.123 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:41:35.124 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:41:35.124 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:35.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:35.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:41:35.126 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:41:35.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:41:35.128 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:35.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:35.130 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:41:35.131 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:35.132 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:41:35.135 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:35.136 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:35.137 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:35.138 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:41:35.138 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:41:35.139 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:41:35.140 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:41:35.140 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:41:35.141 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:41:35.141 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-10 12:41:35.142 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.5209ms
2026-02-10 12:41:35.143 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:35.143 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:41:35.144 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:41:35.144 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:35.145 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:35.146 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 49.4597ms
2026-02-10 12:41:38.906 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:38.907 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:39.913 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:41:39.914 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:41:39.915 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:41:39.916 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:39.916 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:39.917 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:41:39.917 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:39.918 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:41:39.919 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:41:39.920 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:41:39.921 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:41:39.922 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:41:39.923 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:41:39.924 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:39.924 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:41:39.925 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:41:39.926 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:41:39.927 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:39.928 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:41:39.929 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:41:39.929 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:41:39.930 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:39.931 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:39.931 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:41:39.932 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:41:39.933 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:41:39.934 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:39.935 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:39.936 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:39.937 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:41:39.937 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:41:39.938 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:41:39.939 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:41:39.939 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:39.940 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:39.941 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:41:39.941 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:41:39.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:41:39.943 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:39.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:41:39.945 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:41:39.946 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:39.947 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:41:39.948 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:41:39.949 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:39.950 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:41:39.951 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:41:39.952 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:41:39.952 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.7962ms
2026-02-10 12:41:39.953 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:41:39.954 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" completed keep alive response.
2026-02-10 12:41:39.954 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:41:39.955 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:41:39.956 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:41:39.957 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 44.2945ms
2026-02-10 12:41:48.915 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-10 12:41:48.916 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-10 12:41:52.629 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" received FIN.
2026-02-10 12:41:52.630 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" received FIN.
2026-02-10 12:41:52.633 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" disconnecting.
2026-02-10 12:41:52.629 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" received FIN.
2026-02-10 12:41:52.629 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" received FIN.
2026-02-10 12:41:52.634 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" disconnecting.
2026-02-10 12:41:52.635 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" stopped.
2026-02-10 12:41:52.637 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" disconnecting.
2026-02-10 12:41:52.652 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.651 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.656 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" disconnecting.
2026-02-10 12:41:52.652 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.660 +03:00 [DBG] Connection id "0HNJ8GUO1OERJ" stopped.
2026-02-10 12:41:52.661 +03:00 [DBG] Connection id "0HNJ8GUO1OERD" stopped.
2026-02-10 12:41:52.657 +03:00 [DBG] Connection id "0HNJ8GUO1OERF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:41:52.676 +03:00 [DBG] Connection id "0HNJ8GUO1OERH" stopped.
2026-02-10 12:49:37.646 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:49:37.712 +03:00 [DBG] Hosting starting
2026-02-10 12:49:37.805 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-10 12:49:37.806 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-10 12:49:37.807 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-10 12:49:37.807 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:49:37.808 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:49:37.808 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:49:37.830 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:49:37.831 +03:00 [INF] Hosting environment: Development
2026-02-10 12:49:37.831 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-10 12:49:37.832 +03:00 [DBG] Hosting started
2026-02-10 12:49:37.931 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" accepted.
2026-02-10 12:49:37.931 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" accepted.
2026-02-10 12:49:37.932 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" started.
2026-02-10 12:49:37.933 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" started.
2026-02-10 12:49:37.950 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" received FIN.
2026-02-10 12:49:37.950 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" received FIN.
2026-02-10 12:49:37.954 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:49:37.954 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:49:37.971 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" stopped.
2026-02-10 12:49:37.971 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" stopped.
2026-02-10 12:49:37.974 +03:00 [DBG] Connection id "0HNJ8H6Q63TI1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:49:37.974 +03:00 [DBG] Connection id "0HNJ8H6Q63TI2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:49:38.250 +03:00 [DBG] Connection id "0HNJ8H6Q63TI3" accepted.
2026-02-10 12:49:38.253 +03:00 [DBG] Connection id "0HNJ8H6Q63TI3" started.
2026-02-10 12:49:38.280 +03:00 [DBG] Connection 0HNJ8H6Q63TI3 established using the following protocol: "Tls13"
2026-02-10 12:49:38.307 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-10 12:49:38.366 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:49:38.382 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:49:38.383 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:49:38.386 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:49:38.422 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:49:38.424 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:49:38.433 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:49:38.434 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:49:38.436 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 131.2897ms
2026-02-10 12:49:38.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:49:38.479 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 15.5836ms
2026-02-10 12:49:38.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-10 12:49:38.520 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.6094ms
2026-02-10 12:49:38.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-10 12:49:38.574 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:49:38.575 +03:00 [DBG] Request did not match any endpoints
2026-02-10 12:49:38.576 +03:00 [DBG] The request path  does not match the path filter
2026-02-10 12:49:38.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.4931ms
2026-02-10 12:49:48.588 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" accepted.
2026-02-10 12:49:48.589 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" received FIN.
2026-02-10 12:49:48.589 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" started.
2026-02-10 12:49:48.589 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" accepted.
2026-02-10 12:49:48.594 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 12:49:48.594 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" started.
2026-02-10 12:49:48.596 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" stopped.
2026-02-10 12:49:48.597 +03:00 [DBG] Connection id "0HNJ8H6Q63TI4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:49:48.599 +03:00 [DBG] Connection 0HNJ8H6Q63TI5 established using the following protocol: "Tls13"
2026-02-10 12:49:48.602 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:49:48.606 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:49:48.608 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:49:48.609 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:49:48.611 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:49:48.612 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:49:48.614 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:49:48.627 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:49:48.629 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:49:48.630 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:49:48.631 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:49:48.632 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:49:48.633 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:49:48.634 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:49:48.690 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:49:48.696 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:49:48.702 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:49:48.704 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:49:48.705 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:49:48.706 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:49:48.707 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:49:48.711 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:49:48.725 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 12:49:48.731 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-10 12:49:49.028 +03:00 [INF] Received HTTP response headers after 294.6443ms - 200
2026-02-10 12:49:49.030 +03:00 [INF] End processing HTTP request after 305.8226ms - 200
2026-02-10 12:49:49.039 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 12:49:49.040 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-10 12:49:49.306 +03:00 [INF] Received HTTP response headers after 265.0063ms - 200
2026-02-10 12:49:49.308 +03:00 [INF] End processing HTTP request after 268.5107ms - 200
2026-02-10 12:49:49.540 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:49:49.557 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:49:49.583 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:49:49.585 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:49:49.588 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:49:49.595 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:49:49.627 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:49:49.631 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-10 12:49:49.633 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:49:49.639 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:49:49.643 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:49:49.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:49:49.648 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:49:49.652 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:49:49.665 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:49:49.672 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:49:49.677 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:49:49.681 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-10 12:49:49.684 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:49:49.685 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:49:49.691 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:49:49.692 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:49:49.699 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:49:49.701 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:49:49.702 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:49:49.702 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:49:49.703 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:49:49.704 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 12:49:49.713 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1077.6704ms
2026-02-10 12:49:49.714 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:49:49.715 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:49:49.717 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:49:49.719 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:49:49.721 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:49:49.722 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 1119.8179ms
2026-02-10 12:50:20.132 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:50:20.134 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:20.135 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:20.136 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:20.136 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:20.137 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:20.138 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:20.138 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:50:20.140 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:50:20.140 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:50:20.141 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:50:20.143 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:50:20.144 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:50:20.145 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:20.147 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:20.148 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:50:20.149 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:50:20.150 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:20.150 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:20.151 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:50:20.152 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:50:20.181 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:50:20.183 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:20.184 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:20.185 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:20.186 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:20.186 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:50:20.188 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:50:20.188 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:50:20.189 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:20.190 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:20.191 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:50:20.192 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:50:20.193 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:50:20.194 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:20.195 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:20.196 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:50:20.198 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:20.201 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-10 12:50:20.203 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:20.203 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:20.204 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:20.206 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:50:20.207 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:50:20.208 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 62.7947ms
2026-02-10 12:50:20.209 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:20.210 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:50:20.210 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:50:20.211 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:20.212 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:20.213 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 304 null null 81.0678ms
2026-02-10 12:50:57.278 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:50:57.280 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:57.280 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:57.281 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:57.282 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:57.282 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:57.283 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:57.284 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:50:57.284 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:50:57.285 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:50:57.286 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:50:57.287 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:50:57.288 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:50:57.289 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:57.292 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:57.293 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:50:57.294 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:50:57.295 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:57.295 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:57.296 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:50:57.297 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:50:57.304 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:50:57.305 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:57.306 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:57.307 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:57.308 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:57.309 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:50:57.310 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:50:57.310 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:50:57.311 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:57.312 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:57.312 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:50:57.313 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:50:57.314 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:50:57.314 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:57.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:57.317 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:50:57.318 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:57.319 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:50:57.322 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:57.323 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:57.324 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:57.325 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:50:57.326 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:50:57.327 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:50:57.328 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:50:57.328 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:50:57.329 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:50:57.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 12:50:57.330 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 41.7006ms
2026-02-10 12:50:57.331 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:57.332 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:50:57.332 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:50:57.333 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:57.334 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:57.335 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 56.4265ms
2026-02-10 12:50:58.622 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:50:58.623 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:58.624 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:50:58.625 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:58.625 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:58.626 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:50:58.626 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:58.627 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:50:58.628 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:50:58.628 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:50:58.629 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:50:58.630 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:50:58.631 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:50:58.632 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:58.633 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:50:58.634 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:50:58.634 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:50:58.635 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:58.636 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:50:58.637 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:50:58.637 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:50:58.638 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:50:58.639 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:58.640 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:58.641 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:58.641 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:50:58.642 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:50:58.643 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:50:58.643 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:50:58.644 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:58.644 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:58.645 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:50:58.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:50:58.646 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:50:58.647 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:58.648 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:50:58.650 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:50:58.651 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:58.652 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:50:58.653 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:50:58.653 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:50:58.654 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:50:58.655 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:50:58.656 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:50:58.657 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-10 12:50:58.657 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:50:58.658 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:50:58.658 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:50:58.659 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-10 12:50:58.660 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 27.8072ms
2026-02-10 12:50:58.661 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:50:58.661 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:50:58.662 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:50:58.663 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:50:58.664 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-10 12:50:58.664 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 42.896ms
2026-02-10 12:51:03.049 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-10 12:51:03.051 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:51:03.051 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-10 12:51:03.052 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:51:03.053 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:03.053 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:03.054 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:51:03.054 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:51:03.055 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:51:03.056 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:51:03.057 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:51:03.058 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:51:03.059 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:51:03.060 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:03.061 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:03.061 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:51:03.062 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:51:03.063 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:03.064 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:03.064 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:51:03.065 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:51:03.066 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:51:03.067 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:03.068 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:03.069 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:03.070 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:03.070 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:51:03.071 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:51:03.071 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:51:03.072 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:03.073 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:03.073 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:51:03.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:51:03.075 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:51:03.076 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:03.077 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:03.078 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:51:03.080 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:03.081 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:51:03.081 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:03.082 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:03.083 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:03.084 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:51:03.085 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:51:03.086 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 26.128ms
2026-02-10 12:51:03.086 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-10 12:51:03.087 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:51:03.088 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:51:03.088 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:03.089 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:03.090 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 304 null null 40.7389ms
2026-02-10 12:51:05.695 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-10 12:51:05.697 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-10 12:51:05.697 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-10 12:51:05.698 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:51:05.699 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:05.699 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:51:05.700 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:51:05.703 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-10 12:51:05.704 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:51:05.705 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:51:05.706 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-10 12:51:05.707 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:51:05.708 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:51:05.709 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:05.710 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-10 12:51:05.713 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-10 12:51:05.714 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-10 12:51:05.714 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:05.715 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-10 12:51:05.716 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-10 12:51:05.717 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-10 12:51:05.718 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:51:05.720 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:51:05.721 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-10 12:51:05.722 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-10 12:51:05.724 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:51:05.725 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-10 12:51:05.951 +03:00 [INF] Received HTTP response headers after 225.4316ms - 200
2026-02-10 12:51:05.952 +03:00 [INF] End processing HTTP request after 227.9205ms - 200
2026-02-10 12:51:05.954 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:51:05.954 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-10 12:51:06.169 +03:00 [INF] Received HTTP response headers after 214.2595ms - 200
2026-02-10 12:51:06.170 +03:00 [INF] End processing HTTP request after 216.5163ms - 200
2026-02-10 12:51:06.172 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-10 12:51:06.173 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:06.174 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:06.175 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:06.176 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-10 12:51:06.176 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-10 12:51:06.177 +03:00 [DBG] Creating DbConnection.
2026-02-10 12:51:06.177 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:51:06.178 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:06.179 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:06.180 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:51:06.180 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:51:06.181 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:51:06.182 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:06.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-10 12:51:06.184 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:51:06.185 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:06.186 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-10 12:51:06.187 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-10 12:51:06.187 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:06.188 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:51:06.189 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-10 12:51:06.190 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-10 12:51:06.191 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 481.7153ms
2026-02-10 12:51:06.192 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-10 12:51:06.192 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" completed keep alive response.
2026-02-10 12:51:06.193 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-10 12:51:06.194 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-10 12:51:06.194 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-10 12:51:06.195 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 304 null null 500.1311ms
2026-02-10 12:51:27.534 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" received FIN.
2026-02-10 12:51:27.535 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:51:27.536 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" disconnecting.
2026-02-10 12:51:27.551 +03:00 [DBG] Connection id "0HNJ8H6Q63TI5" stopped.
