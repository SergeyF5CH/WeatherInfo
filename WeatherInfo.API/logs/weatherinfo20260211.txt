2026-02-11 12:14:38.414 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 12:14:38.528 +03:00 [DBG] Hosting starting
2026-02-11 12:14:38.699 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 12:14:38.700 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 12:14:38.700 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 12:14:38.701 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 12:14:38.701 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 12:14:38.702 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 12:14:38.725 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 12:14:38.726 +03:00 [INF] Hosting environment: Development
2026-02-11 12:14:38.727 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 12:14:38.728 +03:00 [DBG] Hosting started
2026-02-11 12:14:38.832 +03:00 [DBG] Connection id "0HNJ99NTQ56GS" accepted.
2026-02-11 12:14:38.834 +03:00 [DBG] Connection id "0HNJ99NTQ56GS" started.
2026-02-11 12:14:38.843 +03:00 [DBG] Connection id "0HNJ99NTQ56GS" received FIN.
2026-02-11 12:14:38.843 +03:00 [DBG] Connection id "0HNJ99NTQ56GT" received FIN.
2026-02-11 12:14:38.845 +03:00 [DBG] Connection id "0HNJ99NTQ56GT" accepted.
2026-02-11 12:14:38.846 +03:00 [DBG] Connection id "0HNJ99NTQ56GT" started.
2026-02-11 12:14:38.849 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 12:14:38.849 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 12:14:38.873 +03:00 [DBG] Connection id "0HNJ99NTQ56GT" stopped.
2026-02-11 12:14:38.873 +03:00 [DBG] Connection id "0HNJ99NTQ56GS" stopped.
2026-02-11 12:14:38.876 +03:00 [DBG] Connection id "0HNJ99NTQ56GT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 12:14:38.876 +03:00 [DBG] Connection id "0HNJ99NTQ56GS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 12:14:41.465 +03:00 [DBG] Connection id "0HNJ99NTQ56GU" accepted.
2026-02-11 12:14:41.467 +03:00 [DBG] Connection id "0HNJ99NTQ56GU" started.
2026-02-11 12:14:41.500 +03:00 [DBG] Connection 0HNJ99NTQ56GU established using the following protocol: "Tls13"
2026-02-11 12:14:41.543 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 12:14:41.630 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 12:14:41.643 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 12:14:41.644 +03:00 [DBG] Request did not match any endpoints
2026-02-11 12:14:41.647 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 12:14:41.675 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 12:14:41.676 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 12:14:41.687 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 12:14:41.688 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 12:14:41.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 150.0035ms
2026-02-11 12:14:41.712 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 12:14:41.719 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.2302ms
2026-02-11 12:14:41.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 12:14:41.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.5259ms
2026-02-11 12:14:41.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 12:14:41.843 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 12:14:41.844 +03:00 [DBG] Request did not match any endpoints
2026-02-11 12:14:41.845 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 12:14:41.851 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.6538ms
2026-02-11 14:16:27.314 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:16:27.384 +03:00 [DBG] Hosting starting
2026-02-11 14:16:27.510 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:16:27.511 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:16:27.512 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:16:27.512 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:16:27.513 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:16:27.514 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:16:27.537 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:16:27.538 +03:00 [INF] Hosting environment: Development
2026-02-11 14:16:27.539 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:16:27.539 +03:00 [DBG] Hosting started
2026-02-11 14:16:27.750 +03:00 [DBG] Connection id "0HNJ9BS01DNSJ" accepted.
2026-02-11 14:16:27.750 +03:00 [DBG] Connection id "0HNJ9BS01DNSK" accepted.
2026-02-11 14:16:27.751 +03:00 [DBG] Connection id "0HNJ9BS01DNSJ" started.
2026-02-11 14:16:27.752 +03:00 [DBG] Connection id "0HNJ9BS01DNSK" started.
2026-02-11 14:16:27.763 +03:00 [DBG] Connection id "0HNJ9BS01DNSK" received FIN.
2026-02-11 14:16:27.763 +03:00 [DBG] Connection id "0HNJ9BS01DNSJ" received FIN.
2026-02-11 14:16:27.769 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:16:27.769 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:16:27.789 +03:00 [DBG] Connection id "0HNJ9BS01DNSJ" stopped.
2026-02-11 14:16:27.789 +03:00 [DBG] Connection id "0HNJ9BS01DNSK" stopped.
2026-02-11 14:16:27.792 +03:00 [DBG] Connection id "0HNJ9BS01DNSJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:16:27.792 +03:00 [DBG] Connection id "0HNJ9BS01DNSK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:16:28.159 +03:00 [DBG] Connection id "0HNJ9BS01DNSL" accepted.
2026-02-11 14:16:28.161 +03:00 [DBG] Connection id "0HNJ9BS01DNSL" started.
2026-02-11 14:16:28.189 +03:00 [DBG] Connection 0HNJ9BS01DNSL established using the following protocol: "Tls13"
2026-02-11 14:16:28.220 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:16:28.275 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:16:28.286 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:16:28.288 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:16:28.294 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:16:28.323 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:16:28.324 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:16:28.333 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:16:28.334 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:16:28.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 117.8408ms
2026-02-11 14:16:28.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:16:28.370 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.2201ms
2026-02-11 14:16:28.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:16:28.425 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.2568ms
2026-02-11 14:16:28.493 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:16:28.495 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:16:28.495 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:16:28.496 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:16:28.503 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.2958ms
2026-02-11 14:16:37.422 +03:00 [DBG] Connection id "0HNJ9BS01DNSM" accepted.
2026-02-11 14:16:37.423 +03:00 [DBG] Connection id "0HNJ9BS01DNSM" received FIN.
2026-02-11 14:16:37.424 +03:00 [DBG] Connection id "0HNJ9BS01DNSM" started.
2026-02-11 14:16:37.424 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" accepted.
2026-02-11 14:16:37.426 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:16:37.426 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" started.
2026-02-11 14:16:37.427 +03:00 [DBG] Connection id "0HNJ9BS01DNSM" stopped.
2026-02-11 14:16:37.428 +03:00 [DBG] Connection id "0HNJ9BS01DNSM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:16:37.430 +03:00 [DBG] Connection 0HNJ9BS01DNSN established using the following protocol: "Tls13"
2026-02-11 14:16:37.434 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 14:16:37.437 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:16:37.439 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:16:37.441 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:16:37.443 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:16:37.444 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:16:37.450 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:16:37.463 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:16:37.465 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:16:37.466 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:16:37.467 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:16:37.468 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:16:37.468 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:16:37.470 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:16:37.566 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 14:16:37.571 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:16:37.588 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:16:37.589 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:16:37.591 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:16:37.591 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:16:37.592 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:16:37.596 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:16:37.597 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:16:37.602 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:16:37.603 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:16:37.604 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:16:37.623 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:16:37.628 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:16:37.892 +03:00 [INF] Received HTTP response headers after 262.0018ms - 200
2026-02-11 14:16:37.895 +03:00 [INF] End processing HTTP request after 272.4976ms - 200
2026-02-11 14:16:37.904 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 14:16:37.905 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 14:16:38.170 +03:00 [INF] Received HTTP response headers after 263.3826ms - 200
2026-02-11 14:16:38.170 +03:00 [INF] End processing HTTP request after 266.1327ms - 200
2026-02-11 14:16:38.177 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 570ms, CacheHit = FALSE
2026-02-11 14:16:38.451 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:16:38.468 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:16:38.499 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:16:38.502 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:16:38.504 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:16:38.511 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:16:38.543 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:16:38.548 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-11 14:16:38.550 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:16:38.560 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:16:38.563 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:16:38.567 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-11 14:16:38.570 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-11 14:16:38.574 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:16:38.589 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:16:38.597 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:16:38.602 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:16:38.606 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-11 14:16:38.608 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:16:38.610 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:16:38.615 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:16:38.617 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:16:38.626 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:16:38.628 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:16:38.629 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:16:38.629 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:16:38.631 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:16:38.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 14:16:38.643 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1172.7352ms
2026-02-11 14:16:38.645 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:16:38.646 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:16:38.648 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:16:38.650 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:16:38.652 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:16:38.653 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1219.8286ms
2026-02-11 14:16:53.902 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 14:16:53.904 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:16:53.905 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:16:53.906 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:16:53.907 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:16:53.908 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:16:53.909 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:16:53.910 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:16:53.911 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:16:53.912 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:16:53.913 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:16:53.915 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:16:53.916 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:16:53.918 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:16:53.920 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:16:53.921 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:16:53.922 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:16:53.924 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:16:53.924 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:16:53.925 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:16:53.926 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:16:53.927 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:16:53.928 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:16:53.929 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:16:53.930 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:16:53.932 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-11 14:16:53.963 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:16:53.965 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:16:53.966 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:16:53.967 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:16:53.968 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:16:53.969 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:16:53.970 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:16:53.971 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:16:53.972 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:16:53.972 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:16:53.973 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:16:53.974 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:16:53.975 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:16:53.976 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:16:53.977 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:16:53.979 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:16:53.980 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:16:53.982 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-11 14:16:53.983 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:16:53.984 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:16:53.985 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:16:53.986 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:16:53.987 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:16:53.989 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:16:53.989 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:16:53.990 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:16:53.990 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:16:53.991 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 14:16:53.992 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 74.3937ms
2026-02-11 14:16:53.993 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:16:53.994 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:16:53.995 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:16:53.996 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:16:53.996 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:16:53.998 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 96.1015ms
2026-02-11 14:17:28.537 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 14:17:28.539 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:17:28.540 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:17:28.541 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:17:28.542 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:17:28.542 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:17:28.543 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:17:28.546 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:17:28.547 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:17:28.548 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:17:28.549 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:17:28.550 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:17:28.551 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:17:28.552 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:17:28.556 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:17:28.557 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:17:28.558 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:17:28.559 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:17:28.559 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:17:28.560 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:17:28.561 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:17:28.564 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 14:17:28.565 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 14:17:28.620 +03:00 [INF] Received HTTP response headers after 53.8976ms - 200
2026-02-11 14:17:28.621 +03:00 [INF] End processing HTTP request after 56.4185ms - 200
2026-02-11 14:17:28.622 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 14:17:28.623 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 14:17:28.840 +03:00 [INF] Received HTTP response headers after 216.3807ms - 200
2026-02-11 14:17:28.841 +03:00 [INF] End processing HTTP request after 218.8586ms - 200
2026-02-11 14:17:28.843 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 279ms, CacheHit = FALSE
2026-02-11 14:17:28.851 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:17:28.853 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:17:28.854 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:17:28.855 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:17:28.856 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:17:28.857 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:17:28.858 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:17:28.859 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:17:28.860 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:17:28.861 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:17:28.862 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:17:28.863 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:17:28.864 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:17:28.864 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:17:28.866 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:17:28.867 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:17:28.869 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:17:28.870 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:17:28.871 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:17:28.873 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:17:28.874 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:17:28.875 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:17:28.877 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:17:28.878 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:17:28.879 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:17:28.879 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:17:28.880 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:17:28.880 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 14:17:28.883 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 330.8046ms
2026-02-11 14:17:28.884 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:17:28.885 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:17:28.886 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:17:28.887 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:17:28.888 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:17:28.889 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 351.5962ms
2026-02-11 14:17:42.772 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 14:17:42.774 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:17:42.774 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:17:42.775 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:17:42.776 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:17:42.776 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:17:42.777 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:17:42.778 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:17:42.779 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:17:42.779 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:17:42.780 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:17:42.782 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:17:42.783 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:17:42.784 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:17:42.784 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:17:42.785 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:17:42.786 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:17:42.787 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:17:42.788 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:17:42.789 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:17:42.789 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:17:42.790 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-11 14:17:42.792 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:17:42.793 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:17:42.794 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:17:42.795 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:17:42.795 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:17:42.796 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:17:42.797 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:17:42.797 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:17:42.798 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:17:42.799 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:17:42.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:17:42.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:17:42.801 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:17:42.802 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:17:42.804 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:17:42.805 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:17:42.806 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:17:42.807 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:17:42.808 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:17:42.809 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:17:42.810 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:17:42.811 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:17:42.812 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:17:42.814 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:17:42.814 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:17:42.815 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:17:42.815 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:17:42.816 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 14:17:42.817 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 33.9778ms
2026-02-11 14:17:42.818 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:17:42.819 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:17:42.820 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:17:42.821 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:17:42.822 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:17:42.823 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 51.4657ms
2026-02-11 14:18:08.627 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/static/icons/thunderstorm.png - null null
2026-02-11 14:18:08.628 +03:00 [DBG] No candidates found for the request path '/static/icons/thunderstorm.png'
2026-02-11 14:18:08.629 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:18:08.637 +03:00 [INF] Sending file. Request path: '/thunderstorm.png'. Physical path: 'C:\Sergey\WeatherInfo\WeatherInfo.API\wwwroot\icons\thunderstorm.png'
2026-02-11 14:18:08.641 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:08.641 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/static/icons/thunderstorm.png - 200 2497 image/png 14.6706ms
2026-02-11 14:18:14.347 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - null null
2026-02-11 14:18:14.349 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 14:18:14.350 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 14:18:14.351 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:14.351 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:14.352 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:14.352 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:14.356 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:14.357 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:14.358 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:14.359 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:14.360 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:14.361 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:14.361 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:14.362 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:14.363 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:14.364 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:14.365 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:14.365 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:14.366 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:14.367 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:14.368 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:14.369 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:14.369 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 14:18:14.370 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 14:18:14.371 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:14.372 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:14.373 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 14:18:14.374 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:14.375 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:18:14.375 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 14:18:14.376 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:14.377 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:14.377 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:18:14.378 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:14.390 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:14.419 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 14:18:14.528 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 14:18:14.544 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:14.545 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:14.546 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:14.547 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:14.548 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:14.549 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:14.551 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-11 14:18:14.552 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:18:14.554 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:18:14.557 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:14.562 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 5ms reading results.
2026-02-11 14:18:14.563 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:14.564 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:18:14.575 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 14:18:14.585 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:18:14.589 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:14.590 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:14.591 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:14.592 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:14.593 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:14.594 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:18:14.595 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:18:14.597 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:14.598 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 14:18:14.600 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:14.601 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:18:14.602 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:14.603 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:14.604 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:14.604 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:14.605 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:14.605 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 14:18:14.611 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 249.2329ms
2026-02-11 14:18:14.611 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:14.612 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:14.613 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:14.614 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:14.615 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:18:14.616 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-04&to=2026-02-04&page=1&pageSize=10 - 200 null application/json; charset=utf-8 268.8862ms
2026-02-11 14:18:17.235 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - null null
2026-02-11 14:18:17.237 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:18:17.238 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:18:17.239 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:17.240 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:17.240 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:17.241 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:17.244 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:17.245 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:17.246 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:17.247 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:17.248 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:17.249 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:17.250 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:17.251 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:17.252 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:17.253 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:17.254 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:17.255 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:17.256 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:17.257 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:17.258 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:17.259 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:17.260 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:17.260 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:18:17.261 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:17.262 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:17.263 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:17.264 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:17.266 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:17.269 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 14:18:17.285 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:18:17.286 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:17.287 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:17.288 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:17.289 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:17.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:17.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:17.291 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:17.292 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:17.293 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:17.294 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:17.295 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:18:17.296 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:17.297 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:17.298 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:17.299 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:17.300 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:17.300 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:17.301 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:17.302 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:18:17.303 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 53.2102ms
2026-02-11 14:18:17.304 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:17.304 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:17.305 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:17.305 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:17.306 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:17.308 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-04&to=2026-02-04&limit=10 - 200 null application/json; charset=utf-8 72.3199ms
2026-02-11 14:18:31.022 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 14:18:31.023 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:18:31.024 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:18:31.025 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:31.025 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:31.026 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:31.026 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:31.027 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:31.028 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:31.030 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:31.030 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:31.032 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:31.033 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:31.034 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:31.035 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:31.036 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:31.037 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:31.038 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:31.039 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:31.040 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:31.040 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:31.041 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:31.042 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:31.043 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:31.044 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:18:31.045 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:31.046 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:31.047 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:31.048 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:31.049 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:31.053 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:31.053 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:31.054 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:31.055 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:31.056 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:31.056 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:31.057 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:31.058 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:31.059 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:31.062 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:31.063 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:18:31.064 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:31.065 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:18:31.067 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:31.068 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:31.069 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:31.069 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:31.070 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:31.071 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:18:31.072 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 38.1533ms
2026-02-11 14:18:31.073 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:31.073 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:31.074 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:31.075 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:31.075 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:31.077 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 55.096ms
2026-02-11 14:18:37.637 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 14:18:41.673 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 14:18:41.674 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 14:18:41.675 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 14:18:41.676 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:41.676 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:41.677 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:41.677 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:41.678 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:41.679 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:41.679 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:41.680 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:41.682 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:41.683 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:41.684 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:41.684 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:41.685 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:41.686 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:41.687 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:41.688 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:41.688 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:41.689 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:41.690 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:41.691 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:41.691 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 14:18:41.692 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 14:18:41.693 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:41.693 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:41.694 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 14:18:41.695 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:41.695 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:18:41.696 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 14:18:41.697 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:41.698 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:41.698 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:18:41.699 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:41.700 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:41.702 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:41.702 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:41.703 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:41.703 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:41.704 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:41.705 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:41.705 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:41.706 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:18:41.707 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:18:41.708 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:41.709 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:18:41.710 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:41.710 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:41.711 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:41.712 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:41.713 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:41.713 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:41.714 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:41.715 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:18:41.716 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:18:41.718 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:41.719 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 14:18:41.719 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:41.720 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:41.721 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:41.722 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:41.723 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:41.723 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:41.723 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:41.724 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 14:18:41.726 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 42.7314ms
2026-02-11 14:18:41.727 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:41.728 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:41.728 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:41.729 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:41.730 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:41.731 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 57.7593ms
2026-02-11 14:18:47.648 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:18:47.650 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0381ms - processed: 0 items - remaining: 1 items
2026-02-11 14:18:51.207 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 14:18:51.209 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:18:51.209 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:18:51.210 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:51.211 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:51.211 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:51.212 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:51.212 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:51.213 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:51.214 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:51.215 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:51.217 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:51.217 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:51.218 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:51.219 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:51.220 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:51.221 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:51.222 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:51.223 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:51.223 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:51.224 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:51.225 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:51.225 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:51.226 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:51.227 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:18:51.227 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:51.228 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:51.229 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:51.229 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:51.230 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:51.232 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:51.233 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:51.233 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:51.234 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:51.235 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:51.236 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:51.237 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:51.237 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:51.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:51.240 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:51.241 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 14:18:51.242 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:51.243 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:51.244 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:51.245 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:51.245 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:51.246 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:51.246 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:51.247 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:18:51.249 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 30.1999ms
2026-02-11 14:18:51.250 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:51.251 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:51.251 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:51.252 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:51.253 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:51.254 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 47.1865ms
2026-02-11 14:18:54.579 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 14:18:54.581 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:18:54.582 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:18:54.583 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:18:54.583 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:54.584 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:54.584 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:18:54.585 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:18:54.586 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:54.587 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:54.588 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:18:54.590 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:54.590 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:54.591 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:18:54.592 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:18:54.593 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:18:54.594 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:18:54.595 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:18:54.596 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:18:54.596 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:18:54.597 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:18:54.598 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:18:54.599 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:18:54.600 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:18:54.600 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:18:54.601 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-11 14:18:54.603 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:54.604 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:18:54.605 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:18:54.606 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:18:54.606 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:18:54.607 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:18:54.608 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:54.609 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:54.609 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:54.610 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:54.611 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:54.612 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:54.612 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:54.613 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:18:54.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:18:54.616 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:18:54.617 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:54.618 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:18:54.619 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:54.620 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:54.621 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:18:54.622 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:18:54.623 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:54.625 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:54.625 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:54.626 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:54.626 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:54.627 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 14:18:54.628 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 37.0862ms
2026-02-11 14:18:54.629 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:18:54.630 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:54.630 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:54.631 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:54.632 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:54.634 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 54.2429ms
2026-02-11 14:18:57.135 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 14:18:57.137 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:18:57.137 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:18:57.138 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:57.139 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:57.139 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:57.140 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:57.141 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:57.142 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:57.143 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:57.143 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:57.145 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:57.146 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:57.147 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:57.147 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:57.149 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:57.149 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:57.150 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:57.151 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:57.152 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:57.153 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:57.153 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:57.154 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:57.155 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:57.155 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:18:57.156 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:57.157 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:57.158 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:18:57.159 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:18:57.160 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:57.161 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:57.162 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:57.162 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:57.163 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:57.164 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:57.164 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:57.165 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:57.166 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:57.167 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:18:57.169 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:57.169 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:18:57.170 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:57.171 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:57.172 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:57.173 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:57.173 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:57.174 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:57.174 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:57.175 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:18:57.176 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 29.3841ms
2026-02-11 14:18:57.177 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:18:57.177 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:57.178 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:57.179 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:57.179 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:57.180 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 45.0635ms
2026-02-11 14:18:57.655 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:18:57.656 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.009ms - processed: 0 items - remaining: 1 items
2026-02-11 14:18:59.888 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 14:18:59.890 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 14:18:59.891 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 14:18:59.892 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:59.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:59.893 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:18:59.893 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:59.894 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:18:59.895 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:18:59.896 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:18:59.897 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:18:59.898 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:18:59.899 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:18:59.900 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:59.901 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:18:59.902 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:59.902 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:59.903 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:18:59.904 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:18:59.905 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:59.906 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:59.906 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:18:59.907 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:18:59.908 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 14:18:59.909 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 14:18:59.910 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:59.910 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:59.911 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 14:18:59.912 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 14:18:59.913 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:18:59.914 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 14:18:59.914 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:59.915 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:59.916 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:18:59.917 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:18:59.918 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:18:59.920 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:18:59.920 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:18:59.921 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:59.922 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:59.923 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:59.924 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:59.924 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:59.925 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:18:59.927 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:18:59.928 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:59.929 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:18:59.930 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:59.930 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:59.932 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:59.933 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:59.934 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:18:59.935 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:18:59.936 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:18:59.936 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:18:59.938 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:18:59.939 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:59.940 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:18:59.941 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:18:59.942 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:59.943 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:18:59.945 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:18:59.946 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:18:59.946 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:18:59.947 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:18:59.948 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 14:18:59.949 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 48.8608ms
2026-02-11 14:18:59.950 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:18:59.950 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:18:59.951 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:18:59.952 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:18:59.952 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:18:59.953 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 65.1492ms
2026-02-11 14:19:05.313 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - null null
2026-02-11 14:19:05.314 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Алохомора'
2026-02-11 14:19:05.315 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Алохомора'
2026-02-11 14:19:05.316 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:05.317 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:19:05.318 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:19:05.318 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:05.319 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:19:05.320 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:19:05.321 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:19:05.322 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:19:05.323 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:19:05.324 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:19:05.325 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:19:05.326 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:19:05.327 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:19:05.328 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:19:05.329 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:19:05.330 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:19:05.331 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:19:05.331 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:19:05.332 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:19:05.333 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:19:05.334 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:19:05.334 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:19:05.336 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-11 14:19:05.336 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%BB%D0%BE%D1%85%D0%BE%D0%BC%D0%BE%D1%80%D0%B0&count=1&language=ru
2026-02-11 14:19:05.586 +03:00 [INF] Received HTTP response headers after 249.2712ms - 200
2026-02-11 14:19:05.587 +03:00 [INF] End processing HTTP request after 251.7162ms - 200
2026-02-11 14:19:05.589 +03:00 [WRN] City not found in Geocoding API: Алохомора
2026-02-11 14:19:05.696 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 370.601ms
2026-02-11 14:19:05.697 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:05.734 +03:00 [ERR] HTTP 404 - City 'Алохомора' not found
WeatherInfo.API.Exceptions.CityNotFoundException: City 'Алохомора' not found
   at WeatherInfo.API.Services.GeocodingService.GetCoordinatesAsync(String city) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\GeocodingService.cs:line 64
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 56
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 181
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 52
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:19:05.745 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:19:05.746 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Алохомора?date=2026-02-05 - 404 null application/json; charset=utf-8 433.4643ms
2026-02-11 14:19:07.664 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:19:07.665 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 14:19:08.851 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-11 14:19:08.853 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:19:08.854 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:19:08.854 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:08.855 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:19:08.856 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:19:08.856 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:08.857 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:19:08.858 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:19:08.858 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:19:08.859 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:19:08.860 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:19:08.861 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:19:08.862 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:19:08.863 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:19:08.864 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:19:08.864 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:19:08.865 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:19:08.866 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:19:08.867 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:19:08.868 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:19:08.868 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:19:08.900 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 37.6525ms
2026-02-11 14:19:08.901 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:08.910 +03:00 [ERR] HTTP 400 - Invalid date format: '02-052026'
WeatherInfo.API.Exceptions.InvalidDateFormatException: Invalid date format: '02-052026'
   at WeatherInfo.API.ModelBinders.DateOnlyModelBinder.BindModelAsync(ModelBindingContext bindingContext) in C:\Sergey\WeatherInfo\WeatherInfo.API\ModelBinders\DateOnlyModelBinder.cs:line 26
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:19:08.913 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:19:08.914 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/json; charset=utf-8 62.6291ms
2026-02-11 14:19:13.885 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-11 14:19:13.886 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:19:13.887 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:19:13.888 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:13.888 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:19:13.889 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:19:13.889 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:13.890 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:19:13.890 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:19:13.891 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:19:13.892 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:19:13.893 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:19:13.894 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:19:13.895 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:19:13.896 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:19:13.896 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:19:13.897 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:19:13.898 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:19:13.899 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:19:13.899 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:19:13.900 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:19:13.901 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:19:13.901 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:19:13.902 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:19:13.903 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:19:13.904 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:19:13.905 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:19:13.964 +03:00 [INF] Received HTTP response headers after 58.602ms - 200
2026-02-11 14:19:13.965 +03:00 [INF] End processing HTTP request after 61.0039ms - 200
2026-02-11 14:19:13.966 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-11 14:19:13.967 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-11 14:19:14.203 +03:00 [INF] Received HTTP response headers after 235.1444ms - 400
2026-02-11 14:19:14.203 +03:00 [INF] End processing HTTP request after 237.4151ms - 400
2026-02-11 14:19:14.205 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05. Body: {"reason":"Parameter 'start_date' is out of allowed range from 2025-11-10 to 2026-02-26","error":true}
2026-02-11 14:19:14.301 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 405.8755ms
2026-02-11 14:19:14.302 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:19:14.330 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 57
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 181
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 52
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:19:14.334 +03:00 [DBG] Connection id "0HNJ9BS01DNSN" completed keep alive response.
2026-02-11 14:19:14.335 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json; charset=utf-8 450.2939ms
2026-02-11 14:19:17.666 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:19:17.667 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-11 14:40:07.358 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:40:07.432 +03:00 [DBG] Hosting starting
2026-02-11 14:40:07.563 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:40:07.571 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:40:07.572 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:40:07.575 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:40:07.576 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:40:07.577 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:40:07.579 +03:00 [DBG] Connection id "0HNJ9C975V8R9" accepted.
2026-02-11 14:40:07.579 +03:00 [DBG] Connection id "0HNJ9C975V8RA" accepted.
2026-02-11 14:40:07.580 +03:00 [DBG] Connection id "0HNJ9C975V8R9" started.
2026-02-11 14:40:07.581 +03:00 [DBG] Connection id "0HNJ9C975V8RA" started.
2026-02-11 14:40:07.589 +03:00 [DBG] Connection id "0HNJ9C975V8RA" received FIN.
2026-02-11 14:40:07.589 +03:00 [DBG] Connection id "0HNJ9C975V8R9" received FIN.
2026-02-11 14:40:07.595 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:40:07.595 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:40:07.615 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:40:07.617 +03:00 [INF] Hosting environment: Development
2026-02-11 14:40:07.617 +03:00 [DBG] Connection id "0HNJ9C975V8RA" stopped.
2026-02-11 14:40:07.617 +03:00 [DBG] Connection id "0HNJ9C975V8R9" stopped.
2026-02-11 14:40:07.618 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:40:07.621 +03:00 [DBG] Hosting started
2026-02-11 14:40:07.621 +03:00 [DBG] Connection id "0HNJ9C975V8R9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:40:07.621 +03:00 [DBG] Connection id "0HNJ9C975V8RA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:40:07.848 +03:00 [DBG] Connection id "0HNJ9C975V8RB" accepted.
2026-02-11 14:40:07.850 +03:00 [DBG] Connection id "0HNJ9C975V8RB" started.
2026-02-11 14:40:07.874 +03:00 [DBG] Connection 0HNJ9C975V8RB established using the following protocol: "Tls13"
2026-02-11 14:40:07.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:40:07.964 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:40:07.975 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:40:07.976 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:40:07.979 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:40:08.006 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:40:08.007 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:40:08.017 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:40:08.017 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:40:08.019 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 117.5755ms
2026-02-11 14:40:08.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:40:08.079 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:40:08.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.125ms
2026-02-11 14:40:08.104 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.4656ms
2026-02-11 14:40:08.154 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:40:08.157 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:40:08.158 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:40:08.158 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:40:08.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.6104ms
2026-02-11 14:40:11.626 +03:00 [DBG] Connection id "0HNJ9C975V8RC" accepted.
2026-02-11 14:40:11.626 +03:00 [DBG] Connection id "0HNJ9C975V8RC" received FIN.
2026-02-11 14:40:11.627 +03:00 [DBG] Connection id "0HNJ9C975V8RC" started.
2026-02-11 14:40:11.627 +03:00 [DBG] Connection id "0HNJ9C975V8RD" accepted.
2026-02-11 14:40:11.629 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:40:11.629 +03:00 [DBG] Connection id "0HNJ9C975V8RD" started.
2026-02-11 14:40:11.631 +03:00 [DBG] Connection id "0HNJ9C975V8RC" stopped.
2026-02-11 14:40:11.633 +03:00 [DBG] Connection id "0HNJ9C975V8RC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:40:11.635 +03:00 [DBG] Connection 0HNJ9C975V8RD established using the following protocol: "Tls13"
2026-02-11 14:40:11.638 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - null null
2026-02-11 14:40:11.642 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:40:11.645 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:40:11.646 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:11.649 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:11.650 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:11.656 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:11.671 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:40:11.674 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:11.675 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:11.677 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:40:11.679 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:11.680 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:11.683 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:11.742 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 14:40:11.749 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:11.758 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:40:11.760 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:40:11.762 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:11.763 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:11.764 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:40:11.769 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:40:11.770 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:11.775 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:40:11.776 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:11.778 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:40:11.791 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:40:11.796 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:40:12.086 +03:00 [INF] Received HTTP response headers after 287.8626ms - 200
2026-02-11 14:40:12.089 +03:00 [INF] End processing HTTP request after 298.6513ms - 200
2026-02-11 14:40:12.099 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-11 14:40:12.100 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05
2026-02-11 14:40:12.380 +03:00 [INF] Received HTTP response headers after 278.8503ms - 400
2026-02-11 14:40:12.382 +03:00 [INF] End processing HTTP request after 283.1764ms - 400
2026-02-11 14:40:12.384 +03:00 [WRN] Open-Meteo returned 400 for https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2020-02-05&end_date=2020-02-05. Body: {"reason":"Parameter 'start_date' is out of allowed range from 2025-11-10 to 2026-02-26","error":true}
2026-02-11 14:40:12.519 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 835.2659ms
2026-02-11 14:40:12.521 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:12.559 +03:00 [ERR] HTTP 400 - Upstream service 'Open-Meteo' rejected request
WeatherInfo.API.Exceptions.UpstreamBadRequestException: Upstream service 'Open-Meteo' rejected request
   at WeatherInfo.API.Services.OpenMeteoService.FetchWeatherAsync(String url) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 81
   at WeatherInfo.API.Services.OpenMeteoService.GetByCoordsAsync(Double latitude, Double longitude, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\OpenMeteoService.cs:line 37
   at WeatherInfo.API.Services.WeatherService.<>c__DisplayClass9_0.<<GetWeatherByDayAsync>b__0>d.MoveNext() in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 57
--- End of stack trace from previous location ---
   at WeatherInfo.API.Services.WeatherService.GetOrRefreshCacheAsync[T](String cacheKey, Func`1 fetchFreshData) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 181
   at WeatherInfo.API.Services.WeatherService.GetWeatherByDayAsync(String city, DateOnly date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Services\WeatherService.cs:line 52
   at WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate(String city, Nullable`1 date) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\WeatherController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:40:12.572 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:12.574 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2020-02-05 - 400 null application/json; charset=utf-8 935.7706ms
2026-02-11 14:40:15.047 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - null null
2026-02-11 14:40:15.049 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:40:15.050 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:40:15.051 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:15.052 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:15.052 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:15.053 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:15.054 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:40:15.055 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:15.056 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:15.057 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:40:15.058 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:15.059 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:15.060 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:15.065 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:15.066 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:40:15.067 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:40:15.068 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:15.069 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:15.069 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:40:15.070 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:40:15.071 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:15.101 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 41.5312ms
2026-02-11 14:40:15.103 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:15.116 +03:00 [ERR] HTTP 400 - Invalid date format: '02-052026'
WeatherInfo.API.Exceptions.InvalidDateFormatException: Invalid date format: '02-052026'
   at WeatherInfo.API.ModelBinders.DateOnlyModelBinder.BindModelAsync(ModelBindingContext bindingContext) in C:\Sergey\WeatherInfo\WeatherInfo.API\ModelBinders\DateOnlyModelBinder.cs:line 26
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:40:15.120 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:15.120 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=02-052026 - 400 null application/json; charset=utf-8 73.5813ms
2026-02-11 14:40:19.093 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 14:40:19.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:40:19.096 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:40:19.097 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:40:19.097 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:19.098 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:19.099 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:40:19.102 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:40:19.104 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:19.105 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:19.106 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:40:19.107 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:19.108 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:19.109 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:19.110 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:19.111 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:19.111 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:19.112 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:19.113 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:19.114 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:19.115 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:19.116 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:19.117 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:19.118 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:40:19.119 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:40:19.120 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:40:19.121 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:40:19.122 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:40:19.123 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:40:19.370 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:19.392 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 14:40:19.516 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:40:19.532 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:19.538 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 14:40:19.540 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:19.547 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:19.550 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:19.554 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-11 14:40:19.557 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-11 14:40:19.561 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:40:19.574 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:40:19.580 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:19.584 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 5ms reading results.
2026-02-11 14:40:19.587 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:19.589 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 14:40:19.592 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:19.594 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:19.594 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:19.595 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:19.596 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:19.597 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:40:19.600 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 491.0794ms
2026-02-11 14:40:19.601 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:40:19.602 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:19.603 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:19.605 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:19.606 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:40:19.608 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 515.0585ms
2026-02-11 14:40:22.242 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 14:40:22.244 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 14:40:22.245 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 14:40:22.246 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:40:22.246 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:22.247 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:22.248 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:40:22.251 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:40:22.252 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:22.253 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:22.254 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:40:22.255 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:22.256 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:22.257 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:22.258 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:22.259 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:22.260 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:22.261 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:22.262 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:22.263 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:22.263 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:22.264 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:22.265 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:22.267 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 14:40:22.267 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 14:40:22.269 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:40:22.269 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:40:22.270 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 14:40:22.271 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 14:40:22.272 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:40:22.272 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 14:40:22.273 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:40:22.274 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:40:22.275 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:40:22.276 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:40:22.305 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:22.308 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 14:40:22.312 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 14:40:22.316 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:22.317 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:22.317 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:22.318 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:22.319 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:22.320 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:22.321 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:22.322 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:40:22.323 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:40:22.324 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:22.325 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 14:40:22.326 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:22.327 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:22.329 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 14:40:22.333 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:40:22.334 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:22.335 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:22.336 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:22.337 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:22.337 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:22.338 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:40:22.340 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:40:22.342 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:22.342 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 14:40:22.344 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:22.345 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:22.346 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:22.347 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:22.348 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:22.348 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:22.349 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:22.350 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 14:40:22.356 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 98.8139ms
2026-02-11 14:40:22.357 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:40:22.358 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:22.359 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:22.360 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:22.360 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:22.361 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 119.4996ms
2026-02-11 14:40:25.202 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 14:40:25.203 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:40:25.204 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:40:25.204 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:25.205 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:25.205 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:25.206 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:25.207 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:40:25.207 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:25.208 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:25.209 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:40:25.210 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:25.211 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:25.212 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:25.216 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:25.216 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:40:25.217 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:40:25.218 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:25.219 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:25.219 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:40:25.220 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:40:25.221 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:25.221 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:40:25.222 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:25.223 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:40:25.224 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:40:25.225 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 14:40:25.295 +03:00 [INF] Received HTTP response headers after 69.538ms - 200
2026-02-11 14:40:25.296 +03:00 [INF] End processing HTTP request after 71.9947ms - 200
2026-02-11 14:40:25.297 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 14:40:25.298 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 14:40:25.355 +03:00 [INF] Received HTTP response headers after 56.4754ms - 200
2026-02-11 14:40:25.356 +03:00 [INF] End processing HTTP request after 58.9715ms - 200
2026-02-11 14:40:25.362 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 137ms, CacheHit = FALSE
2026-02-11 14:40:25.370 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:25.385 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:25.410 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:25.413 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:25.416 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:25.423 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:40:25.450 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:25.451 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:25.451 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:25.452 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:25.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:25.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:25.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:25.456 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:25.457 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:25.463 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:40:25.467 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:25.468 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 9ms reading results.
2026-02-11 14:40:25.469 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:25.469 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:25.476 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:25.477 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:40:25.482 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:25.484 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:25.484 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:25.484 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:25.485 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:25.486 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 14:40:25.490 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 278.1789ms
2026-02-11 14:40:25.491 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:25.492 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:25.492 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:25.493 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:25.493 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:25.494 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 292.7152ms
2026-02-11 14:40:26.888 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 14:40:26.890 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 14:40:26.890 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 14:40:26.891 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:26.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:26.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:26.893 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:26.893 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:40:26.894 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:26.895 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:26.896 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:40:26.897 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:26.898 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:26.898 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:26.899 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:26.900 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:40:26.901 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:40:26.902 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:26.902 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:26.903 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:40:26.904 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:40:26.904 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:26.905 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:40:26.905 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 14:40:26.906 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 14:40:26.907 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-11 14:40:26.909 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:26.910 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:26.911 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:26.912 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:26.912 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:26.913 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:40:26.914 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:26.914 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:26.915 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:26.916 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:26.917 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:26.917 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:26.918 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:26.918 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:26.919 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:26.920 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:40:26.922 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:26.923 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:40:26.924 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:26.924 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:26.925 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:26.926 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:40:26.927 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:26.928 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:26.929 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:26.929 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:26.930 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:26.931 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 14:40:26.932 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 33.1793ms
2026-02-11 14:40:26.932 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 14:40:26.933 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:26.934 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:26.934 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:26.935 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:26.936 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 47.8354ms
2026-02-11 14:40:32.618 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 14:40:32.620 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:40:32.621 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:40:32.621 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:40:32.622 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:32.622 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:32.623 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:40:32.625 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:40:32.626 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:32.627 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:32.628 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:40:32.629 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:32.630 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:32.630 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:32.631 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:32.632 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:40:32.633 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:40:32.634 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:32.635 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:32.635 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:40:32.636 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:40:32.639 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 14:40:32.640 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 14:40:32.702 +03:00 [INF] Received HTTP response headers after 61.5426ms - 200
2026-02-11 14:40:32.703 +03:00 [INF] End processing HTTP request after 63.8217ms - 200
2026-02-11 14:40:32.704 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 14:40:32.705 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 14:40:32.761 +03:00 [INF] Received HTTP response headers after 55.9472ms - 200
2026-02-11 14:40:32.762 +03:00 [INF] End processing HTTP request after 58.128ms - 200
2026-02-11 14:40:32.764 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 125ms, CacheHit = FALSE
2026-02-11 14:40:32.765 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:32.766 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:32.767 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:32.768 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:32.768 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:32.769 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:40:32.770 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:32.770 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:32.771 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:32.771 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:32.772 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:32.773 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:32.773 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:32.774 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:32.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:32.776 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:40:32.777 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:32.778 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 14:40:32.779 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:32.780 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:32.781 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:32.782 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:40:32.783 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:32.784 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:32.785 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:32.785 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:32.786 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:32.786 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 14:40:32.788 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 157.853ms
2026-02-11 14:40:32.789 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:40:32.790 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:32.790 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:32.791 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:32.792 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:32.793 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 174.6178ms
2026-02-11 14:40:33.703 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 14:40:33.704 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:40:33.705 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 14:40:33.706 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:40:33.706 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:33.707 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:33.707 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:40:33.708 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 14:40:33.709 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:33.709 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:33.710 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 14:40:33.712 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:33.712 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:33.713 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:33.714 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 14:40:33.715 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:40:33.716 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:40:33.717 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:33.717 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:40:33.718 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:40:33.719 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:40:33.720 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-11 14:40:33.721 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:33.722 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:33.723 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:33.724 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:33.724 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 14:40:33.725 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 14:40:33.726 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:33.726 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:33.727 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:33.727 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:33.728 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:33.729 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:33.730 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:33.730 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:33.731 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 14:40:33.733 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 14:40:33.734 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:33.735 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:40:33.736 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:33.736 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:33.737 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 14:40:33.738 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 14:40:33.739 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:33.740 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:33.741 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:33.741 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:33.741 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:33.742 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 14:40:33.743 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 30.0445ms
2026-02-11 14:40:33.744 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 14:40:33.744 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:33.745 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:33.746 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:33.746 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:33.747 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 44.5188ms
2026-02-11 14:40:36.696 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 14:40:36.697 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:40:36.698 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:40:36.699 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:40:36.700 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:36.700 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:36.701 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:40:36.701 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:40:36.702 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:36.703 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:36.704 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:40:36.705 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:36.706 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:36.707 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:36.708 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:36.709 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:36.709 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:36.710 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:36.711 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:36.712 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:36.712 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:36.713 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:36.714 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:36.714 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:40:36.715 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:40:36.716 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:40:36.717 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:40:36.717 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:40:36.718 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:40:36.719 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:36.723 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:36.723 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:36.724 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:36.725 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:36.726 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:36.726 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:36.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:36.728 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:40:36.729 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:40:36.730 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:36.731 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:40:36.732 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:36.732 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:36.733 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:36.735 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:36.735 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:36.735 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:36.736 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:36.737 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:40:36.738 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 30.6389ms
2026-02-11 14:40:36.738 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:40:36.739 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:36.740 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:36.740 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:36.741 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:36.742 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 45.8778ms
2026-02-11 14:40:40.957 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 14:40:40.958 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 14:40:40.959 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 14:40:40.959 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:40:40.960 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:40.960 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:40:40.961 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:40:40.961 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:40:40.962 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:40:40.963 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:40:40.964 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:40:40.965 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:40:40.966 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:40:40.967 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:40.968 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:40:40.969 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:40.970 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:40.970 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:40:40.971 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:40:40.972 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:40.972 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:40.973 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:40:40.974 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:40:40.975 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 14:40:40.975 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 14:40:40.976 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:40:40.977 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:40:40.978 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 14:40:40.978 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 14:40:40.979 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:40:40.979 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 14:40:40.980 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:40:40.981 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:40:40.982 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:40:40.983 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:40:40.984 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:40:40.985 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:40:40.986 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:40:40.986 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:40.987 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:40.987 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:40.988 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:40.989 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:40.989 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:40:40.990 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:40:40.991 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:40.992 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:40:40.993 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:40.994 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:40.994 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:40.995 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:40.996 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:40:40.996 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:40:40.997 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:40:40.998 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:40:41.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:40:41.001 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:41.002 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:40:41.002 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:40:41.003 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:41.004 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:40:41.005 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:40:41.006 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:40:41.006 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:40:41.007 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:40:41.007 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 14:40:41.008 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 41.0213ms
2026-02-11 14:40:41.009 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:40:41.010 +03:00 [DBG] Connection id "0HNJ9C975V8RD" completed keep alive response.
2026-02-11 14:40:41.010 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:40:41.011 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:40:41.011 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:40:41.012 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 55.7776ms
2026-02-11 14:45:37.976 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:45:38.047 +03:00 [DBG] Hosting starting
2026-02-11 14:45:38.154 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:45:38.154 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:45:38.155 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:45:38.156 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:45:38.156 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:45:38.157 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:45:38.178 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:45:38.179 +03:00 [INF] Hosting environment: Development
2026-02-11 14:45:38.180 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:45:38.180 +03:00 [DBG] Hosting started
2026-02-11 14:45:38.279 +03:00 [DBG] Connection id "0HNJ9CC9NOTHF" accepted.
2026-02-11 14:45:38.279 +03:00 [DBG] Connection id "0HNJ9CC9NOTHG" accepted.
2026-02-11 14:45:38.281 +03:00 [DBG] Connection id "0HNJ9CC9NOTHF" started.
2026-02-11 14:45:38.281 +03:00 [DBG] Connection id "0HNJ9CC9NOTHG" started.
2026-02-11 14:45:38.295 +03:00 [DBG] Connection id "0HNJ9CC9NOTHF" received FIN.
2026-02-11 14:45:38.295 +03:00 [DBG] Connection id "0HNJ9CC9NOTHG" received FIN.
2026-02-11 14:45:38.300 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:45:38.300 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:45:38.319 +03:00 [DBG] Connection id "0HNJ9CC9NOTHF" stopped.
2026-02-11 14:45:38.319 +03:00 [DBG] Connection id "0HNJ9CC9NOTHG" stopped.
2026-02-11 14:45:38.323 +03:00 [DBG] Connection id "0HNJ9CC9NOTHG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:45:38.323 +03:00 [DBG] Connection id "0HNJ9CC9NOTHF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:45:38.639 +03:00 [DBG] Connection id "0HNJ9CC9NOTHH" accepted.
2026-02-11 14:45:38.641 +03:00 [DBG] Connection id "0HNJ9CC9NOTHH" started.
2026-02-11 14:45:38.671 +03:00 [DBG] Connection 0HNJ9CC9NOTHH established using the following protocol: "Tls13"
2026-02-11 14:45:38.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:45:38.770 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:45:38.781 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:45:38.782 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:45:38.785 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:45:38.816 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:45:38.817 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:45:38.828 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:45:38.831 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:45:38.833 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 131.9313ms
2026-02-11 14:45:38.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:45:38.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.3117ms
2026-02-11 14:45:38.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:45:38.907 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.4748ms
2026-02-11 14:45:38.961 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:45:38.964 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:45:38.964 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:45:38.965 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:45:38.972 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.0797ms
2026-02-11 14:46:29.422 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:46:29.493 +03:00 [DBG] Hosting starting
2026-02-11 14:46:29.628 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:46:29.629 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:46:29.629 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:46:29.630 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:46:29.630 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:46:29.631 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:46:29.668 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:46:29.669 +03:00 [INF] Hosting environment: Development
2026-02-11 14:46:29.670 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:46:29.670 +03:00 [DBG] Hosting started
2026-02-11 14:46:29.687 +03:00 [DBG] Connection id "0HNJ9CCP21GQG" received FIN.
2026-02-11 14:46:29.687 +03:00 [DBG] Connection id "0HNJ9CCP21GQH" received FIN.
2026-02-11 14:46:29.693 +03:00 [DBG] Connection id "0HNJ9CCP21GQG" accepted.
2026-02-11 14:46:29.693 +03:00 [DBG] Connection id "0HNJ9CCP21GQH" accepted.
2026-02-11 14:46:29.694 +03:00 [DBG] Connection id "0HNJ9CCP21GQG" started.
2026-02-11 14:46:29.695 +03:00 [DBG] Connection id "0HNJ9CCP21GQH" started.
2026-02-11 14:46:29.703 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:46:29.703 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:46:29.722 +03:00 [DBG] Connection id "0HNJ9CCP21GQH" stopped.
2026-02-11 14:46:29.722 +03:00 [DBG] Connection id "0HNJ9CCP21GQG" stopped.
2026-02-11 14:46:29.728 +03:00 [DBG] Connection id "0HNJ9CCP21GQH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:46:29.728 +03:00 [DBG] Connection id "0HNJ9CCP21GQG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:46:30.032 +03:00 [DBG] Connection id "0HNJ9CCP21GQI" accepted.
2026-02-11 14:46:30.033 +03:00 [DBG] Connection id "0HNJ9CCP21GQI" started.
2026-02-11 14:46:30.059 +03:00 [DBG] Connection 0HNJ9CCP21GQI established using the following protocol: "Tls13"
2026-02-11 14:46:30.092 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:46:30.150 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:46:30.161 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:46:30.162 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:46:30.165 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:46:30.193 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:46:30.194 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:46:30.204 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:46:30.205 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:46:30.207 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 117.739ms
2026-02-11 14:46:30.230 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:46:30.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.8702ms
2026-02-11 14:46:30.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:46:30.285 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.0977ms
2026-02-11 14:46:30.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:46:30.338 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:46:30.339 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:46:30.340 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:46:30.346 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.7906ms
2026-02-11 14:46:39.827 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search - null null
2026-02-11 14:46:39.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:46:39.834 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:46:39.835 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:46:39.837 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:46:39.837 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:46:39.841 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:46:39.853 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:46:39.855 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:46:39.856 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:46:39.857 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:46:39.858 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:46:39.859 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:46:39.860 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:46:39.863 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:46:39.869 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:46:39.871 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name '' in request data ...
2026-02-11 14:46:39.872 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'city' of type 'System.String'.
2026-02-11 14:46:39.873 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:46:39.873 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:46:39.874 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:46:39.877 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:46:39.879 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 14:46:39.880 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 14:46:39.881 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:46:39.883 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:46:39.884 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 14:46:39.886 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 14:46:39.887 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 14:46:39.898 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 36.4527ms
2026-02-11 14:46:39.899 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:46:39.899 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search - 400 null application/problem+json; charset=utf-8 72.068ms
2026-02-11 14:46:53.859 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20 - null null
2026-02-11 14:46:53.861 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:46:53.862 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:46:53.863 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:46:53.864 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:46:53.864 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:46:53.865 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:46:53.865 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:46:53.866 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:46:53.867 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:46:53.868 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:46:53.870 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:46:53.871 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:46:53.871 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:46:53.872 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:46:53.875 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:46:53.876 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:46:53.877 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:46:53.878 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:46:53.879 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:46:53.879 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:46:53.880 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 14:46:53.881 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 14:46:53.881 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:46:53.882 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:46:53.883 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 14:46:53.884 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 14:46:53.885 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 14:46:53.886 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 14.5734ms
2026-02-11 14:46:53.887 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:46:53.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20 - 400 null application/problem+json; charset=utf-8 28.3037ms
2026-02-11 14:47:26.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20v - null null
2026-02-11 14:47:26.044 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:47:26.045 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:47:26.045 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:26.046 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:26.046 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:26.047 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:26.048 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:47:26.049 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:47:26.049 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:47:26.051 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:47:26.052 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:47:26.053 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:47:26.054 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:26.055 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:26.056 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:47:26.057 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:47:26.057 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:26.058 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:26.059 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:47:26.060 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:47:26.061 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:47:26.062 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:47:26.063 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:47:26.063 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:47:26.064 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:47:26.065 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:47:26.066 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 12.1874ms
2026-02-11 14:47:26.067 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:26.067 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20v - 400 null text/plain; charset=utf-8 28.1285ms
2026-02-11 14:47:32.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20ve - null null
2026-02-11 14:47:32.036 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:47:32.037 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:47:32.037 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:32.038 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:32.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:32.039 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:32.040 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:47:32.041 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:47:32.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:47:32.043 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:47:32.044 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:47:32.045 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:47:32.046 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:32.046 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:32.047 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:47:32.048 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:47:32.049 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:32.049 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:32.050 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:47:32.051 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:47:32.051 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:47:32.053 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:47:32.053 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:47:32.054 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:47:32.054 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:47:32.055 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:47:32.056 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 10.002ms
2026-02-11 14:47:32.056 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:32.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20ve - 400 null text/plain; charset=utf-8 23.3646ms
2026-02-11 14:47:36.693 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20ver - null null
2026-02-11 14:47:36.695 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:47:36.696 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:47:36.697 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:36.697 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:36.698 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:36.698 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:36.699 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:47:36.700 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:47:36.701 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:47:36.701 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:47:36.702 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:47:36.703 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:47:36.704 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:36.705 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:36.706 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:47:36.706 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:47:36.707 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:36.708 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:36.709 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:47:36.709 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:47:36.710 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:47:36.712 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:47:36.712 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:47:36.713 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:47:36.713 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:47:36.714 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:47:36.714 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 10.164ms
2026-02-11 14:47:36.715 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:36.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20ver - 400 null text/plain; charset=utf-8 22.7303ms
2026-02-11 14:47:43.059 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20verg - null null
2026-02-11 14:47:43.060 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:47:43.061 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:47:43.062 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:43.062 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:43.063 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:43.063 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:43.064 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:47:43.065 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:47:43.065 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:47:43.066 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:47:43.068 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:47:43.068 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:47:43.069 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:43.070 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:43.071 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:47:43.071 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:47:43.072 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:43.073 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:43.074 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:47:43.074 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:47:43.075 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:47:43.076 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:47:43.077 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:47:43.077 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:47:43.078 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:47:43.078 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:47:43.079 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 9.9021ms
2026-02-11 14:47:43.080 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:43.080 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20verg - 400 null text/plain; charset=utf-8 21.9395ms
2026-02-11 14:47:48.449 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20vergi - null null
2026-02-11 14:47:48.450 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:47:48.451 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:47:48.453 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:48.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:48.454 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:48.455 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:48.456 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:47:48.457 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:47:48.458 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:47:48.458 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:47:48.459 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:47:48.460 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:47:48.461 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:48.462 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:48.463 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:47:48.464 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:47:48.465 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:48.465 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:48.466 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:47:48.467 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:47:48.468 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:47:48.469 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:47:48.470 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:47:48.470 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:47:48.471 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:47:48.471 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:47:48.472 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 10.6886ms
2026-02-11 14:47:48.473 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:48.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20vergi - 400 null text/plain; charset=utf-8 24.9154ms
2026-02-11 14:47:54.392 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%BC%D0%BE%D1%81 - null null
2026-02-11 14:47:54.393 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:47:54.394 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:47:54.395 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:54.396 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:54.396 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:47:54.396 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:54.397 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:47:54.398 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:47:54.398 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:47:54.399 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:47:54.400 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:47:54.401 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:47:54.401 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:54.402 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:47:54.403 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:47:54.404 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:47:54.405 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:54.405 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:47:54.406 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:47:54.407 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:47:54.408 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:47:54.409 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:47:54.409 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:47:54.410 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:47:54.410 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:47:54.411 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:47:54.412 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 10.6657ms
2026-02-11 14:47:54.413 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:47:54.413 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%BC%D0%BE%D1%81 - 400 null text/plain; charset=utf-8 21.7004ms
2026-02-11 14:48:45.396 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:48:45.465 +03:00 [DBG] Hosting starting
2026-02-11 14:48:45.620 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:48:45.621 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:48:45.621 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:48:45.622 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:48:45.622 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:48:45.623 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:48:45.649 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:48:45.650 +03:00 [INF] Hosting environment: Development
2026-02-11 14:48:45.651 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:48:45.651 +03:00 [DBG] Hosting started
2026-02-11 14:48:46.107 +03:00 [DBG] Connection id "0HNJ9CE1N1I7O" received FIN.
2026-02-11 14:48:46.107 +03:00 [DBG] Connection id "0HNJ9CE1N1I7P" received FIN.
2026-02-11 14:48:46.111 +03:00 [DBG] Connection id "0HNJ9CE1N1I7P" accepted.
2026-02-11 14:48:46.111 +03:00 [DBG] Connection id "0HNJ9CE1N1I7O" accepted.
2026-02-11 14:48:46.112 +03:00 [DBG] Connection id "0HNJ9CE1N1I7P" started.
2026-02-11 14:48:46.113 +03:00 [DBG] Connection id "0HNJ9CE1N1I7O" started.
2026-02-11 14:48:46.121 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:48:46.121 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:48:46.139 +03:00 [DBG] Connection id "0HNJ9CE1N1I7O" stopped.
2026-02-11 14:48:46.139 +03:00 [DBG] Connection id "0HNJ9CE1N1I7P" stopped.
2026-02-11 14:48:46.142 +03:00 [DBG] Connection id "0HNJ9CE1N1I7P" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:48:46.142 +03:00 [DBG] Connection id "0HNJ9CE1N1I7O" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:48:46.624 +03:00 [DBG] Connection id "0HNJ9CE1N1I7Q" accepted.
2026-02-11 14:48:46.626 +03:00 [DBG] Connection id "0HNJ9CE1N1I7Q" started.
2026-02-11 14:48:46.655 +03:00 [DBG] Connection 0HNJ9CE1N1I7Q established using the following protocol: "Tls13"
2026-02-11 14:48:46.684 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:48:46.739 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:48:46.749 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:48:46.749 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:48:46.752 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:48:46.778 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:48:46.779 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:48:46.788 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:48:46.789 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:48:46.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 108.9388ms
2026-02-11 14:48:46.815 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:48:46.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.1251ms
2026-02-11 14:48:46.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:48:46.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.1023ms
2026-02-11 14:48:46.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:48:46.920 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:48:46.921 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:48:46.922 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:48:46.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.8186ms
2026-02-11 14:48:52.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%BC%D1%83%D0%BA - null null
2026-02-11 14:48:52.187 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:48:52.189 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:48:52.191 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:48:52.193 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:48:52.194 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:48:52.196 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:48:52.212 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:48:52.215 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:48:52.216 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:48:52.217 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:48:52.218 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:48:52.219 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:48:52.221 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:48:52.224 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:48:52.233 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:48:52.235 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:48:52.237 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:48:52.238 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:48:52.239 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:48:52.242 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:48:52.251 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%BC%D1%83%D0%BA&count=10&language=ru
2026-02-11 14:48:52.257 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%BC%D1%83%D0%BA&count=10&language=ru
2026-02-11 14:48:52.554 +03:00 [INF] Received HTTP response headers after 295.6963ms - 200
2026-02-11 14:48:52.557 +03:00 [INF] End processing HTTP request after 306.0392ms - 200
2026-02-11 14:48:52.566 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:48:52.568 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:48:52.569 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:48:52.570 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:48:52.570 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:48:52.571 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:48:52.576 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 354.9966ms
2026-02-11 14:48:52.577 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:48:52.578 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%BC%D1%83%D0%BA - 200 null application/json; charset=utf-8 395.2788ms
2026-02-11 14:50:04.613 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:50:04.697 +03:00 [DBG] Hosting starting
2026-02-11 14:50:04.805 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:50:04.806 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:50:04.807 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:50:04.807 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:50:04.808 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:50:04.808 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:50:04.830 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:50:04.830 +03:00 [INF] Hosting environment: Development
2026-02-11 14:50:04.831 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:50:04.832 +03:00 [DBG] Hosting started
2026-02-11 14:50:04.856 +03:00 [DBG] Connection id "0HNJ9CEP61Q50" received FIN.
2026-02-11 14:50:04.856 +03:00 [DBG] Connection id "0HNJ9CEP61Q4V" received FIN.
2026-02-11 14:50:04.862 +03:00 [DBG] Connection id "0HNJ9CEP61Q4V" accepted.
2026-02-11 14:50:04.862 +03:00 [DBG] Connection id "0HNJ9CEP61Q50" accepted.
2026-02-11 14:50:04.864 +03:00 [DBG] Connection id "0HNJ9CEP61Q4V" started.
2026-02-11 14:50:04.864 +03:00 [DBG] Connection id "0HNJ9CEP61Q50" started.
2026-02-11 14:50:04.876 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:50:04.876 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:50:04.897 +03:00 [DBG] Connection id "0HNJ9CEP61Q4V" stopped.
2026-02-11 14:50:04.897 +03:00 [DBG] Connection id "0HNJ9CEP61Q50" stopped.
2026-02-11 14:50:04.900 +03:00 [DBG] Connection id "0HNJ9CEP61Q50" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:50:04.900 +03:00 [DBG] Connection id "0HNJ9CEP61Q4V" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:50:04.985 +03:00 [DBG] Connection id "0HNJ9CEP61Q51" accepted.
2026-02-11 14:50:04.988 +03:00 [DBG] Connection id "0HNJ9CEP61Q51" started.
2026-02-11 14:50:05.018 +03:00 [DBG] Connection 0HNJ9CEP61Q51 established using the following protocol: "Tls13"
2026-02-11 14:50:05.050 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:50:05.108 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:50:05.120 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:50:05.121 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:50:05.125 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:50:05.156 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:50:05.157 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:50:05.168 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:50:05.169 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:50:05.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 124.6712ms
2026-02-11 14:50:05.197 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:50:05.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.8016ms
2026-02-11 14:50:05.224 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:50:05.247 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8531ms
2026-02-11 14:50:05.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:50:05.303 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:50:05.304 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:50:05.305 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:50:05.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.8303ms
2026-02-11 14:50:11.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83%D0%BA - null null
2026-02-11 14:50:11.307 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:50:11.309 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:50:11.310 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:50:11.311 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:50:11.312 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:50:11.314 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:50:11.327 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:50:11.329 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:50:11.330 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:50:11.331 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:50:11.332 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:50:11.332 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:50:11.334 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:50:11.337 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:50:11.345 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:50:11.347 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:50:11.348 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:50:11.349 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:50:11.349 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:50:11.353 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:50:11.361 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BA&count=10&language=ru
2026-02-11 14:50:11.367 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BA&count=10&language=ru
2026-02-11 14:50:11.603 +03:00 [INF] Received HTTP response headers after 234.0496ms - 200
2026-02-11 14:50:11.605 +03:00 [INF] End processing HTTP request after 244.4143ms - 200
2026-02-11 14:50:11.615 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:50:11.617 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:50:11.618 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:50:11.618 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:50:11.619 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:50:11.620 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:50:11.625 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 290.6985ms
2026-02-11 14:50:11.626 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:50:11.628 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83%D0%BA - 200 null application/json; charset=utf-8 325.1581ms
2026-02-11 14:50:24.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83 - null null
2026-02-11 14:50:24.627 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:50:24.628 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:50:24.628 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:50:24.629 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:50:24.630 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:50:24.630 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:50:24.631 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:50:24.632 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:50:24.633 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:50:24.634 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:50:24.635 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:50:24.636 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:50:24.637 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:50:24.638 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:50:24.639 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:50:24.640 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:50:24.641 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:50:24.641 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:50:24.642 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:50:24.643 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:50:24.644 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83&count=10&language=ru
2026-02-11 14:50:24.644 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83&count=10&language=ru
2026-02-11 14:50:24.700 +03:00 [INF] Received HTTP response headers after 55.42ms - 200
2026-02-11 14:50:24.701 +03:00 [INF] End processing HTTP request after 57.6892ms - 200
2026-02-11 14:50:24.702 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:50:24.703 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:50:24.704 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:50:24.705 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:50:24.705 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:50:24.706 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:50:24.707 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 70.3494ms
2026-02-11 14:50:24.708 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:50:24.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83 - 200 null application/json; charset=utf-8 84.2735ms
2026-02-11 14:52:10.938 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:52:11.013 +03:00 [DBG] Hosting starting
2026-02-11 14:52:11.144 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:52:11.145 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:52:11.145 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:52:11.146 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:52:11.146 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:52:11.147 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:52:11.169 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:52:11.169 +03:00 [INF] Hosting environment: Development
2026-02-11 14:52:11.170 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:52:11.170 +03:00 [DBG] Hosting started
2026-02-11 14:52:11.521 +03:00 [DBG] Connection id "0HNJ9CFUU0SBA" accepted.
2026-02-11 14:52:11.521 +03:00 [DBG] Connection id "0HNJ9CFUU0SB9" accepted.
2026-02-11 14:52:11.523 +03:00 [DBG] Connection id "0HNJ9CFUU0SBA" started.
2026-02-11 14:52:11.523 +03:00 [DBG] Connection id "0HNJ9CFUU0SB9" started.
2026-02-11 14:52:11.529 +03:00 [DBG] Connection id "0HNJ9CFUU0SB9" received FIN.
2026-02-11 14:52:11.529 +03:00 [DBG] Connection id "0HNJ9CFUU0SBA" received FIN.
2026-02-11 14:52:11.540 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:52:11.540 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:52:11.558 +03:00 [DBG] Connection id "0HNJ9CFUU0SBA" stopped.
2026-02-11 14:52:11.558 +03:00 [DBG] Connection id "0HNJ9CFUU0SB9" stopped.
2026-02-11 14:52:11.561 +03:00 [DBG] Connection id "0HNJ9CFUU0SBA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:52:11.561 +03:00 [DBG] Connection id "0HNJ9CFUU0SB9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:52:11.855 +03:00 [DBG] Connection id "0HNJ9CFUU0SBB" accepted.
2026-02-11 14:52:11.856 +03:00 [DBG] Connection id "0HNJ9CFUU0SBB" started.
2026-02-11 14:52:11.881 +03:00 [DBG] Connection 0HNJ9CFUU0SBB established using the following protocol: "Tls13"
2026-02-11 14:52:11.913 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:52:11.968 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:52:11.978 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:52:11.978 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:52:11.981 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:52:12.005 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:52:12.006 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:52:12.015 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:52:12.016 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:52:12.017 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 107.4872ms
2026-02-11 14:52:12.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:52:12.046 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.2574ms
2026-02-11 14:52:12.067 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:52:12.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.9039ms
2026-02-11 14:52:12.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:52:12.140 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:52:12.141 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:52:12.142 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:52:12.147 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.8152ms
2026-02-11 14:52:20.351 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C - null null
2026-02-11 14:52:20.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:52:20.358 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:52:20.359 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:20.361 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:20.362 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:20.364 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:20.377 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:52:20.378 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:52:20.379 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:52:20.380 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:52:20.381 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:52:20.382 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:52:20.384 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:20.386 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:20.395 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:52:20.397 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:52:20.398 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:20.399 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:20.399 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:52:20.403 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:52:20.405 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:52:20.408 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:52:20.408 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:52:20.409 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:52:20.409 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:52:20.410 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:52:20.413 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 28.2757ms
2026-02-11 14:52:20.414 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:20.414 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C - 400 null text/plain; charset=utf-8 63.2876ms
2026-02-11 14:52:27.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83 - null null
2026-02-11 14:52:27.126 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:52:27.127 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:52:27.128 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:27.129 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:27.129 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:27.130 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:27.130 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:52:27.131 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:52:27.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:52:27.133 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:52:27.134 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:52:27.134 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:52:27.135 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:27.136 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:27.137 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:52:27.138 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:52:27.139 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:27.140 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:27.141 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:52:27.141 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:52:27.142 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:52:27.144 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:52:27.145 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:52:27.145 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:52:27.145 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 14:52:27.146 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 14:52:27.147 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 11.7828ms
2026-02-11 14:52:27.147 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:27.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83 - 400 null text/plain; charset=utf-8 24.0254ms
2026-02-11 14:52:32.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83%D0%BA - null null
2026-02-11 14:52:32.937 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:52:32.938 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:52:32.938 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:32.940 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:32.940 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:32.941 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:32.942 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:52:32.943 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:52:32.944 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:52:32.945 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:52:32.946 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:52:32.947 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:52:32.948 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:32.949 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:32.949 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:52:32.950 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:52:32.951 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:32.952 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:32.952 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:52:32.953 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:52:32.962 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BA&count=10&language=ru
2026-02-11 14:52:32.967 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D1%83%D0%BA&count=10&language=ru
2026-02-11 14:52:33.273 +03:00 [INF] Received HTTP response headers after 304.505ms - 200
2026-02-11 14:52:33.275 +03:00 [INF] End processing HTTP request after 314.6338ms - 200
2026-02-11 14:52:33.285 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:52:33.286 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:52:33.287 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:52:33.287 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:52:33.288 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:52:33.288 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:52:33.291 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 343.9388ms
2026-02-11 14:52:33.292 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:33.294 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%9C%D1%83%D0%BA - 200 null application/json; charset=utf-8 358.4261ms
2026-02-11 14:52:36.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20%20 - null null
2026-02-11 14:52:36.294 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:52:36.295 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:52:36.295 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:36.296 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:36.296 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:36.297 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:36.297 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:52:36.298 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:52:36.299 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:52:36.300 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:52:36.301 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:52:36.301 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:52:36.302 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:36.303 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:52:36.303 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:52:36.304 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:52:36.305 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:36.306 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:52:36.307 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:52:36.308 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:52:36.309 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 14:52:36.310 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 14:52:36.311 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:52:36.312 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:52:36.313 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 14:52:36.314 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 14:52:36.315 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 14:52:36.323 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 20.8978ms
2026-02-11 14:52:36.324 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:52:36.324 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20%20 - 400 null application/problem+json; charset=utf-8 32.3365ms
2026-02-11 14:52:47.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - null null
2026-02-11 14:52:47.874 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:52:47.875 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:52:47.876 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:52:47.876 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:47.877 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:52:47.881 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:52:47.884 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:52:47.885 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:52:47.886 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:52:47.887 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:52:47.888 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:52:47.888 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:52:47.889 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:52:47.943 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 14:52:47.948 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:52:47.949 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:52:47.950 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:52:47.951 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:52:47.951 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:52:47.952 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:52:47.953 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:52:47.954 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:52:47.955 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:52:47.955 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:52:47.956 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:52:47.957 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:52:47.958 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:52:47.958 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:52:47.959 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:52:48.196 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:52:48.221 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 14:52:48.346 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:52:48.363 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:52:48.368 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 14:52:48.370 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:52:48.376 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:52:48.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:52:48.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:52:48.384 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 14:52:48.388 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:52:48.400 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:52:48.403 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:52:48.407 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-11 14:52:48.409 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:52:48.411 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:52:48.412 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:52:48.413 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:52:48.413 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:52:48.414 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:52:48.414 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:52:48.415 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:52:48.416 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 526.6337ms
2026-02-11 14:52:48.417 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:52:48.418 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:52:48.420 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:52:48.422 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:52:48.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - 200 null application/json; charset=utf-8 551.4051ms
2026-02-11 14:53:01.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20%D0%B8%D0%B2%D1%87%D1%81%D0%BC&to=%20&limit=10 - null null
2026-02-11 14:53:01.490 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:53:01.491 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:53:01.493 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:53:01.494 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:53:01.494 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:53:01.495 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:53:01.496 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:53:01.497 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:53:01.497 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:53:01.498 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:53:01.500 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:53:01.500 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:53:01.501 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:53:01.502 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:53:01.503 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:53:01.537 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 35.8041ms
2026-02-11 14:53:01.538 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:53:01.549 +03:00 [ERR] HTTP 400 - Invalid date format: ' ивчсм'
WeatherInfo.API.Exceptions.InvalidDateFormatException: Invalid date format: ' ивчсм'
   at WeatherInfo.API.ModelBinders.DateOnlyModelBinder.BindModelAsync(ModelBindingContext bindingContext) in C:\Sergey\WeatherInfo\WeatherInfo.API\ModelBinders\DateOnlyModelBinder.cs:line 26
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:53:01.560 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20%D0%B8%D0%B2%D1%87%D1%81%D0%BC&to=%20&limit=10 - 400 null application/json; charset=utf-8 75.7699ms
2026-02-11 14:53:05.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20%D0%B8%D0%B2%D1%87%D1%81%D0%BC&to=%20%D1%81%D1%87%D0%B8%D1%81%D1%87%20&limit=10 - null null
2026-02-11 14:53:05.591 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:53:05.592 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:53:05.593 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:53:05.593 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:53:05.594 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:53:05.594 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:53:05.595 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:53:05.596 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:53:05.597 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:53:05.598 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:53:05.599 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:53:05.600 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:53:05.601 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:53:05.602 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:53:05.603 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:53:05.617 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 15.8724ms
2026-02-11 14:53:05.618 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:53:05.627 +03:00 [ERR] HTTP 400 - Invalid date format: ' ивчсм'
WeatherInfo.API.Exceptions.InvalidDateFormatException: Invalid date format: ' ивчсм'
   at WeatherInfo.API.ModelBinders.DateOnlyModelBinder.BindModelAsync(ModelBindingContext bindingContext) in C:\Sergey\WeatherInfo\WeatherInfo.API\ModelBinders\DateOnlyModelBinder.cs:line 26
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 14:53:05.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20%D0%B8%D0%B2%D1%87%D1%81%D0%BC&to=%20%D1%81%D1%87%D0%B8%D1%81%D1%87%20&limit=10 - 400 null application/json; charset=utf-8 41.8597ms
2026-02-11 14:54:32.970 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 14:54:42.977 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:54:42.979 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0342ms - processed: 0 items - remaining: 1 items
2026-02-11 14:54:52.981 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:54:52.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 14:55:02.988 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:55:02.988 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-11 14:55:04.709 +03:00 [DBG] Connection id "0HNJ9CFUU0SBB" received FIN.
2026-02-11 14:55:04.710 +03:00 [DBG] Connection id "0HNJ9CFUU0SBB" is closed. The last processed stream ID was 21.
2026-02-11 14:55:04.711 +03:00 [DBG] Connection id "0HNJ9CFUU0SBB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:55:04.715 +03:00 [DBG] The connection queue processing loop for 0HNJ9CFUU0SBB completed.
2026-02-11 14:55:04.716 +03:00 [DBG] Connection id "0HNJ9CFUU0SBB" stopped.
2026-02-11 14:55:13.001 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:55:13.002 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-11 14:55:23.014 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:55:23.015 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 14:55:33.026 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:55:33.027 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-11 14:55:43.034 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:55:43.035 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4483ms - processed: 0 items - remaining: 1 items
2026-02-11 14:55:53.037 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:55:53.038 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 14:56:03.047 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:56:03.048 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 14:56:13.055 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:56:13.056 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-11 14:56:23.064 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:56:23.065 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-11 14:56:33.067 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:56:33.068 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-11 14:56:43.078 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:56:43.079 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-11 14:56:53.088 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:56:53.088 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 14:57:03.098 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:57:03.099 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-11 14:57:13.102 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:57:13.103 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 14:57:23.108 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:57:23.109 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 14:57:33.119 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:57:33.120 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-11 14:57:43.132 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:57:43.133 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 14:57:53.139 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:57:53.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-11 14:58:03.149 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:58:03.152 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 14:58:13.163 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:58:13.164 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-11 14:58:23.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 14:58:23.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 14:58:35.705 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 14:58:35.780 +03:00 [DBG] Hosting starting
2026-02-11 14:58:35.886 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 14:58:35.886 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 14:58:35.887 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 14:58:35.887 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 14:58:35.888 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 14:58:35.888 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 14:58:35.909 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 14:58:35.909 +03:00 [INF] Hosting environment: Development
2026-02-11 14:58:35.910 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 14:58:35.910 +03:00 [DBG] Hosting started
2026-02-11 14:58:36.073 +03:00 [DBG] Connection id "0HNJ9CJHHCL76" accepted.
2026-02-11 14:58:36.073 +03:00 [DBG] Connection id "0HNJ9CJHHCL75" accepted.
2026-02-11 14:58:36.074 +03:00 [DBG] Connection id "0HNJ9CJHHCL76" started.
2026-02-11 14:58:36.075 +03:00 [DBG] Connection id "0HNJ9CJHHCL75" started.
2026-02-11 14:58:36.077 +03:00 [DBG] Connection id "0HNJ9CJHHCL76" received FIN.
2026-02-11 14:58:36.076 +03:00 [DBG] Connection id "0HNJ9CJHHCL75" received FIN.
2026-02-11 14:58:36.086 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:58:36.086 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 14:58:36.106 +03:00 [DBG] Connection id "0HNJ9CJHHCL76" stopped.
2026-02-11 14:58:36.106 +03:00 [DBG] Connection id "0HNJ9CJHHCL75" stopped.
2026-02-11 14:58:36.109 +03:00 [DBG] Connection id "0HNJ9CJHHCL75" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:58:36.109 +03:00 [DBG] Connection id "0HNJ9CJHHCL76" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 14:58:36.237 +03:00 [DBG] Connection id "0HNJ9CJHHCL77" accepted.
2026-02-11 14:58:36.238 +03:00 [DBG] Connection id "0HNJ9CJHHCL77" started.
2026-02-11 14:58:36.265 +03:00 [DBG] Connection 0HNJ9CJHHCL77 established using the following protocol: "Tls13"
2026-02-11 14:58:36.296 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 14:58:36.351 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 14:58:36.360 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 14:58:36.361 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:58:36.364 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:58:36.387 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 14:58:36.388 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 14:58:36.397 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 14:58:36.398 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 14:58:36.400 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 106.8194ms
2026-02-11 14:58:36.422 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 14:58:36.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.684ms
2026-02-11 14:58:36.449 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 14:58:36.473 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.7176ms
2026-02-11 14:58:36.522 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 14:58:36.524 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 14:58:36.525 +03:00 [DBG] Request did not match any endpoints
2026-02-11 14:58:36.525 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 14:58:36.531 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0608ms
2026-02-11 14:58:42.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%20 - null null
2026-02-11 14:58:42.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 14:58:42.500 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 14:58:42.501 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:58:42.503 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:58:42.504 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:58:42.506 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:58:42.519 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 14:58:42.521 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:58:42.522 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:58:42.522 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:58:42.523 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:58:42.524 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:58:42.526 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:58:42.529 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 14:58:42.537 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 14:58:42.539 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 14:58:42.540 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:58:42.541 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 14:58:42.542 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 14:58:42.545 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 14:58:42.547 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 14:58:42.548 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 14:58:42.550 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:58:42.551 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:58:42.552 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 14:58:42.554 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 14:58:42.554 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 14:58:42.566 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 38.5739ms
2026-02-11 14:58:42.567 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 14:58:42.568 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%20 - 400 null application/problem+json; charset=utf-8 73.2092ms
2026-02-11 14:58:50.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - null null
2026-02-11 14:58:50.475 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 14:58:50.476 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 14:58:50.477 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:58:50.478 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:58:50.478 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:58:50.482 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:58:50.486 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:58:50.486 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:58:50.487 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:58:50.488 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:58:50.490 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:58:50.490 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:58:50.491 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:58:50.544 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 14:58:50.549 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:58:50.550 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:58:50.552 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:58:50.552 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:58:50.553 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:58:50.554 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:58:50.555 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:58:50.555 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:58:50.556 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:58:50.557 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:58:50.557 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 14:58:50.558 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:58:50.559 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 14:58:50.559 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 14:58:50.560 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 14:58:50.797 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:58:50.818 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 14:58:50.936 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:58:50.953 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:58:50.958 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 14:58:50.960 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:58:50.967 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:58:50.969 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:58:50.973 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-11 14:58:50.975 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 14:58:50.979 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:58:50.991 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 14:58:50.995 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:58:50.998 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-11 14:58:51.001 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:58:51.003 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:58:51.004 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:58:51.005 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:58:51.005 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:58:51.006 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:58:51.006 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:58:51.007 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 14:58:51.008 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 517.0862ms
2026-02-11 14:58:51.009 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 14:58:51.011 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:58:51.013 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:58:51.014 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 14:58:51.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - 200 null application/json; charset=utf-8 542.8477ms
2026-02-11 14:59:00.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=%20&to=%20&page=1&pageSize=10 - null null
2026-02-11 14:59:00.769 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 14:59:00.770 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 14:59:00.771 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:59:00.771 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:59:00.772 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 14:59:00.772 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:59:00.775 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.DateOnly, System.DateOnly, Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 14:59:00.777 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 14:59:00.778 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 14:59:00.778 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 14:59:00.780 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 14:59:00.780 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 14:59:00.782 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:59:00.783 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 14:59:00.784 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:59:00.784 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:59:00.785 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 14:59:00.786 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 14:59:00.786 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:59:00.787 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:59:00.788 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 14:59:00.788 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 14:59:00.789 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 14:59:00.790 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 14:59:00.791 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:59:00.791 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 14:59:00.792 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 14:59:00.793 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 14:59:00.793 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:59:00.794 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 14:59:00.795 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:59:00.796 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:59:00.797 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 14:59:00.797 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 14:59:00.825 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 14:59:00.827 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 14:59:00.832 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 14:59:00.835 +03:00 [DBG] Creating DbConnection.
2026-02-11 14:59:00.835 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 14:59:00.836 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:59:00.836 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:59:00.837 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:59:00.838 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:59:00.838 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:59:00.839 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:59:00.840 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 14:59:00.843 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:59:00.843 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 14:59:00.844 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:59:00.845 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:59:00.846 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 14:59:00.850 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 14:59:00.851 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:59:00.851 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:59:00.852 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 14:59:00.853 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 14:59:00.853 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 14:59:00.854 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:59:00.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 14:59:00.856 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:59:00.857 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 14:59:00.857 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 14:59:00.858 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:59:00.859 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 14:59:00.860 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 14:59:00.861 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 14:59:00.861 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 14:59:00.862 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 14:59:00.862 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 14:59:00.868 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 86.6414ms
2026-02-11 14:59:00.869 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 14:59:00.870 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 14:59:00.870 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 14:59:00.871 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 14:59:00.872 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=%20&to=%20&page=1&pageSize=10 - 200 null application/json; charset=utf-8 104.6274ms
2026-02-11 15:00:57.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/  - null null
2026-02-11 15:00:57.724 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ '
2026-02-11 15:00:57.724 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ '
2026-02-11 15:00:57.725 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:00:57.725 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:00:57.726 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:00:57.726 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:00:57.729 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:00:57.730 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:00:57.731 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:00:57.732 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:00:57.733 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:00:57.733 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:00:57.734 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:00:57.736 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:00:57.737 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:00:57.737 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:00:57.738 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:00:57.739 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:00:57.739 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:00:57.740 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:00:57.741 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:00:57.742 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:00:57.742 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:00:57.743 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:00:57.743 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 15:00:57.744 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 15:00:57.744 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:00:57.746 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:00:57.746 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 15:00:57.747 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 15:00:57.748 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 15:00:57.749 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 14.4368ms
2026-02-11 15:00:57.749 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:00:57.750 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/  - 400 null application/problem+json; charset=utf-8 30.038ms
2026-02-11 15:01:06.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/ /week - null null
2026-02-11 15:01:06.564 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ /week'
2026-02-11 15:01:06.565 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/ /week'
2026-02-11 15:01:06.566 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:01:06.566 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:01:06.567 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:01:06.567 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:01:06.569 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:01:06.570 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:01:06.571 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:01:06.572 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:01:06.573 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:01:06.574 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:01:06.575 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:01:06.576 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:01:06.577 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:01:06.577 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:01:06.578 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:01:06.579 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:01:06.580 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:01:06.581 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:01:06.582 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 15:01:06.582 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 15:01:06.583 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:01:06.584 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:01:06.585 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 15:01:06.586 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 15:01:06.586 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 15:01:06.587 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 12.4659ms
2026-02-11 15:01:06.588 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:01:06.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/ /week - 400 null application/problem+json; charset=utf-8 26.1099ms
2026-02-11 15:02:28.602 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:02:28.679 +03:00 [DBG] Hosting starting
2026-02-11 15:02:28.813 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:02:28.814 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:02:28.815 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:02:28.816 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:02:28.816 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:02:28.817 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:02:28.842 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:02:28.843 +03:00 [INF] Hosting environment: Development
2026-02-11 15:02:28.844 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:02:28.844 +03:00 [DBG] Hosting started
2026-02-11 15:02:28.882 +03:00 [DBG] Connection id "0HNJ9CLMTKJCN" accepted.
2026-02-11 15:02:28.883 +03:00 [DBG] Connection id "0HNJ9CLMTKJCN" started.
2026-02-11 15:02:28.890 +03:00 [DBG] Connection id "0HNJ9CLMTKJCN" received FIN.
2026-02-11 15:02:28.898 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:02:28.918 +03:00 [DBG] Connection id "0HNJ9CLMTKJCN" stopped.
2026-02-11 15:02:28.921 +03:00 [DBG] Connection id "0HNJ9CLMTKJCN" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:02:29.119 +03:00 [DBG] Connection id "0HNJ9CLMTKJCO" accepted.
2026-02-11 15:02:29.120 +03:00 [DBG] Connection id "0HNJ9CLMTKJCO" started.
2026-02-11 15:02:29.146 +03:00 [DBG] Connection 0HNJ9CLMTKJCO established using the following protocol: "Tls13"
2026-02-11 15:02:29.178 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:02:29.237 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:02:29.246 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:02:29.247 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:02:29.249 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:02:29.272 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:02:29.273 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:02:29.282 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:02:29.282 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:02:29.285 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 109.6015ms
2026-02-11 15:02:29.307 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:02:29.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.7735ms
2026-02-11 15:02:29.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:02:29.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.26ms
2026-02-11 15:02:29.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:02:29.416 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:02:29.417 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:02:29.418 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:02:29.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.6756ms
2026-02-11 15:02:38.478 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - null null
2026-02-11 15:02:38.482 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:02:38.484 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:02:38.485 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:02:38.487 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:02:38.488 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:02:38.493 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:02:38.506 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.DateOnly, System.DateOnly, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:02:38.507 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:02:38.508 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:02:38.509 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:02:38.510 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:02:38.511 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:02:38.512 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:02:38.563 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:02:38.569 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:02:38.577 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.DateOnly' ...
2026-02-11 15:02:38.579 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.DateOnly'.
2026-02-11 15:02:38.580 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.DateOnly' ...
2026-02-11 15:02:38.582 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.DateOnly'.
2026-02-11 15:02:38.583 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.DateOnly' ...
2026-02-11 15:02:38.584 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.DateOnly'.
2026-02-11 15:02:38.584 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.DateOnly' ...
2026-02-11 15:02:38.585 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.DateOnly'.
2026-02-11 15:02:38.586 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:02:38.587 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:02:38.588 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:02:38.589 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:02:38.589 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:02:38.590 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:02:38.832 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:02:38.853 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:02:38.969 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:02:38.984 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:02:38.989 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:02:38.991 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:02:38.997 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:02:38.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:02:39.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:02:39.005 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:02:39.009 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:02:39.020 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:02:39.023 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:02:39.026 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 3ms reading results.
2026-02-11 15:02:39.028 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:02:39.030 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:02:39.033 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:02:39.035 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:02:39.035 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:02:39.036 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:02:39.037 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:02:39.037 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:02:39.042 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 528.7527ms
2026-02-11 15:02:39.043 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:02:39.044 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:02:39.047 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:02:39.048 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:02:39.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - 200 null application/json; charset=utf-8 571.3615ms
2026-02-11 15:11:26.503 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:11:26.571 +03:00 [DBG] Hosting starting
2026-02-11 15:11:26.678 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:11:26.679 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:11:26.680 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:11:26.680 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:11:26.681 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:11:26.681 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:11:26.704 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:11:26.705 +03:00 [INF] Hosting environment: Development
2026-02-11 15:11:26.705 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:11:26.706 +03:00 [DBG] Hosting started
2026-02-11 15:11:26.777 +03:00 [DBG] Connection id "0HNJ9CQN7D2EA" accepted.
2026-02-11 15:11:26.777 +03:00 [DBG] Connection id "0HNJ9CQN7D2EB" accepted.
2026-02-11 15:11:26.785 +03:00 [DBG] Connection id "0HNJ9CQN7D2EA" started.
2026-02-11 15:11:26.788 +03:00 [DBG] Connection id "0HNJ9CQN7D2EB" started.
2026-02-11 15:11:26.791 +03:00 [DBG] Connection id "0HNJ9CQN7D2EA" received FIN.
2026-02-11 15:11:26.791 +03:00 [DBG] Connection id "0HNJ9CQN7D2EB" received FIN.
2026-02-11 15:11:26.804 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:11:26.808 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:11:26.828 +03:00 [DBG] Connection id "0HNJ9CQN7D2EA" stopped.
2026-02-11 15:11:26.828 +03:00 [DBG] Connection id "0HNJ9CQN7D2EB" stopped.
2026-02-11 15:11:26.831 +03:00 [DBG] Connection id "0HNJ9CQN7D2EA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:11:26.831 +03:00 [DBG] Connection id "0HNJ9CQN7D2EB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:11:26.921 +03:00 [DBG] Connection id "0HNJ9CQN7D2EC" accepted.
2026-02-11 15:11:26.922 +03:00 [DBG] Connection id "0HNJ9CQN7D2EC" started.
2026-02-11 15:11:26.950 +03:00 [DBG] Connection 0HNJ9CQN7D2EC established using the following protocol: "Tls13"
2026-02-11 15:11:26.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:11:27.047 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:11:27.060 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:11:27.061 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:11:27.064 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:11:27.093 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:11:27.095 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:11:27.106 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:11:27.107 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:11:27.109 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 128.707ms
2026-02-11 15:11:27.136 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:11:27.144 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.9792ms
2026-02-11 15:11:27.166 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:11:27.193 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.1726ms
2026-02-11 15:11:27.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:11:27.249 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:11:27.250 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:11:27.251 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:11:27.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.1422ms
2026-02-11 15:11:33.031 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - null null
2026-02-11 15:11:33.035 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:11:33.037 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:11:33.038 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:33.039 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:11:33.040 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:11:33.046 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:33.060 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:11:33.062 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:11:33.063 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:11:33.063 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:11:33.065 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:11:33.065 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:11:33.067 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:11:33.121 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:11:33.126 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:11:33.134 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:33.137 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:33.138 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:33.139 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:33.140 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:33.141 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:33.142 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:33.143 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:33.143 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:11:33.144 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:11:33.146 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:11:33.146 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:11:33.147 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:11:33.148 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:11:33.155 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:11:33.157 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:11:33.158 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:11:33.158 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:11:33.159 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:11:33.160 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:11:33.163 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 94.8981ms
2026-02-11 15:11:33.164 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:33.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - 400 null text/plain; charset=utf-8 133.8266ms
2026-02-11 15:11:38.341 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?limit=10 - null null
2026-02-11 15:11:38.344 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:11:38.345 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:11:38.346 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:38.346 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:11:38.347 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:11:38.347 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:38.348 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:11:38.349 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:11:38.350 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:11:38.351 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:11:38.352 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:11:38.353 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:11:38.354 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:11:38.359 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:11:38.360 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:38.361 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:38.362 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:38.362 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:38.363 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:38.364 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:38.365 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:38.365 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:11:38.366 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:11:38.367 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:11:38.368 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:11:38.368 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:11:38.369 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:11:38.370 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:11:38.371 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:11:38.372 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:11:38.372 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:11:38.373 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:11:38.373 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:11:38.374 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:11:38.375 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 21.4525ms
2026-02-11 15:11:38.376 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:38.377 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?limit=10 - 400 null text/plain; charset=utf-8 35.5875ms
2026-02-11 15:11:46.437 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=dfvgsbd&limit=10 - null null
2026-02-11 15:11:46.438 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:11:46.439 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:11:46.440 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:46.441 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:11:46.441 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:11:46.442 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:46.442 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:11:46.444 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:11:46.444 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:11:46.445 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:11:46.446 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:11:46.447 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:11:46.448 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:11:46.450 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:11:46.451 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:11:46.483 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 35.3159ms
2026-02-11 15:11:46.484 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:11:46.495 +03:00 [ERR] HTTP 400 - Invalid date format: 'dfvgsbd'
WeatherInfo.API.Exceptions.InvalidDateFormatException: Invalid date format: 'dfvgsbd'
   at WeatherInfo.API.ModelBinders.DateOnlyModelBinder.BindModelAsync(ModelBindingContext bindingContext) in C:\Sergey\WeatherInfo\WeatherInfo.API\ModelBinders\DateOnlyModelBinder.cs:line 26
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-11 15:11:46.508 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=dfvgsbd&limit=10 - 400 null application/json; charset=utf-8 71.8475ms
2026-02-11 15:12:04.058 +03:00 [DBG] Connection id "0HNJ9CQN7D2ED" accepted.
2026-02-11 15:12:04.058 +03:00 [DBG] Connection id "0HNJ9CQN7D2ED" received FIN.
2026-02-11 15:12:04.059 +03:00 [DBG] Connection id "0HNJ9CQN7D2ED" started.
2026-02-11 15:12:04.060 +03:00 [DBG] Connection id "0HNJ9CQN7D2EE" accepted.
2026-02-11 15:12:04.064 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:12:04.065 +03:00 [DBG] Connection id "0HNJ9CQN7D2EE" started.
2026-02-11 15:12:04.066 +03:00 [DBG] Connection id "0HNJ9CQN7D2ED" stopped.
2026-02-11 15:12:04.067 +03:00 [DBG] Connection id "0HNJ9CQN7D2ED" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:12:04.069 +03:00 [DBG] Connection 0HNJ9CQN7D2EE established using the following protocol: "Tls13"
2026-02-11 15:12:04.072 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:12:04.074 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:12:04.075 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:12:04.076 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:12:04.077 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:04.078 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:04.078 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:12:04.082 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:12:04.083 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:12:04.084 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:12:04.085 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:12:04.087 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:12:04.087 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:12:04.088 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:04.089 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:04.090 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:04.091 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:04.092 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:04.093 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:04.094 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:04.094 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:04.095 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:04.096 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:04.096 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:12:04.097 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:12:04.098 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:12:04.099 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:12:04.099 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:12:04.100 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:12:04.101 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:12:04.101 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:12:04.102 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:12:04.103 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:12:04.103 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:12:04.104 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:12:04.355 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:12:04.382 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 15:12:04.480 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 15:12:04.495 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:12:04.500 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:12:04.502 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:04.508 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:04.511 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:12:04.514 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:12:04.516 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:12:04.520 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:12:04.531 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:12:04.535 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:04.539 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-11 15:12:04.541 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:04.543 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:12:04.547 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 15:12:04.553 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:12:04.556 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:04.557 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:04.558 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:12:04.558 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:12:04.559 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:12:04.560 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:12:04.561 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:12:04.564 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:04.564 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:12:04.565 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:04.566 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:12:04.567 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:12:04.568 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:12:04.569 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:12:04.569 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:12:04.570 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:12:04.570 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:12:04.577 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 488.9443ms
2026-02-11 15:12:04.578 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:12:04.579 +03:00 [DBG] Connection id "0HNJ9CQN7D2EE" completed keep alive response.
2026-02-11 15:12:04.580 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:12:04.582 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:04.583 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:12:04.584 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 511.879ms
2026-02-11 15:12:10.706 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:12:10.708 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:12:10.709 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:12:10.709 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:12:10.710 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:10.710 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:10.711 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:12:10.712 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:12:10.713 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:12:10.713 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:12:10.714 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:12:10.715 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:12:10.716 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:12:10.717 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:10.718 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:10.718 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:10.719 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:10.720 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:10.721 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:10.722 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:10.722 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:10.723 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:10.724 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:10.725 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:12:10.725 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:12:10.726 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:12:10.727 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:12:10.727 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:12:10.728 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:12:10.755 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:12:10.758 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:12:10.773 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:12:10.775 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:12:10.775 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:12:10.776 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:10.776 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:10.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:12:10.777 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:12:10.778 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:12:10.779 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:12:10.780 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:12:10.782 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:10.782 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:12:10.783 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:10.784 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:12:10.785 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:12:10.786 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:12:10.786 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:12:10.787 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:12:10.787 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:12:10.788 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:12:10.789 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 72.2643ms
2026-02-11 15:12:10.790 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:12:10.790 +03:00 [DBG] Connection id "0HNJ9CQN7D2EE" completed keep alive response.
2026-02-11 15:12:10.791 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:12:10.792 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:10.792 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:12:10.793 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 86.8081ms
2026-02-11 15:12:32.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/requests?from=%20&to=%20&page=1&pageSize=10 - null null
2026-02-11 15:12:32.435 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:12:32.435 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:12:32.436 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:12:32.437 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:32.437 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:32.438 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:12:32.438 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:12:32.439 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:12:32.440 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:12:32.441 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:12:32.442 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:12:32.443 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:12:32.444 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:32.444 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:32.445 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:32.446 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:32.446 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:32.447 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:32.448 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:32.448 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:32.449 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:32.450 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:32.450 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:12:32.451 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:12:32.452 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:12:32.453 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:12:32.454 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:12:32.454 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:12:32.455 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:12:32.456 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:12:32.456 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:12:32.457 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:12:32.458 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:12:32.458 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:12:32.459 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:12:32.460 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:12:32.461 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:12:32.461 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:12:32.461 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:12:32.462 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:12:32.463 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 19.2962ms
2026-02-11 15:12:32.464 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:12:32.464 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/requests?from=%20&to=%20&page=1&pageSize=10 - 400 null text/plain; charset=utf-8 33.8699ms
2026-02-11 15:12:54.914 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:12:54.916 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:12:54.916 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:12:54.917 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:12:54.918 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:54.918 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:12:54.919 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:12:54.919 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:12:54.921 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:12:54.922 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:12:54.923 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:12:54.924 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:12:54.925 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:12:54.926 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:54.927 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:12:54.928 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:54.929 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:54.929 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:54.930 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:54.931 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:54.931 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:54.932 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:12:54.932 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:12:54.933 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:12:54.934 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:12:54.934 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:12:54.935 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:12:54.936 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:12:54.936 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:12:54.943 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:12:54.947 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:12:54.947 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:12:54.948 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:54.949 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:54.949 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:12:54.950 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:12:54.950 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:12:54.951 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:12:54.952 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:12:54.954 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:54.954 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:12:54.955 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:12:54.956 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:12:54.957 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:12:54.958 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:12:54.958 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:12:54.959 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:12:54.959 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:12:54.960 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:12:54.961 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 34.5834ms
2026-02-11 15:12:54.962 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:12:54.962 +03:00 [DBG] Connection id "0HNJ9CQN7D2EE" completed keep alive response.
2026-02-11 15:12:54.963 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:12:54.963 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:12:54.964 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:12:54.965 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 50.8078ms
2026-02-11 15:13:11.619 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Флорида?date=2026-02-11 - null null
2026-02-11 15:13:11.623 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Флорида'
2026-02-11 15:13:11.624 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Флорида'
2026-02-11 15:13:11.625 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:13:11.625 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:13:11.626 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:13:11.626 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:13:11.629 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:13:11.630 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:13:11.631 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:13:11.632 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:13:11.633 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:13:11.634 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:13:11.635 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:13:11.639 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:13:11.640 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:13:11.641 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:13:11.642 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:13:11.642 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:13:11.643 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:13:11.646 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:13:11.647 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:13:11.647 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:13:11.648 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:13:11.649 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:13:11.662 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A4%D0%BB%D0%BE%D1%80%D0%B8%D0%B4%D0%B0&count=1&language=ru
2026-02-11 15:13:11.667 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A4%D0%BB%D0%BE%D1%80%D0%B8%D0%B4%D0%B0&count=1&language=ru
2026-02-11 15:13:12.024 +03:00 [INF] Received HTTP response headers after 354.2798ms - 200
2026-02-11 15:13:12.027 +03:00 [INF] End processing HTTP request after 365.8696ms - 200
2026-02-11 15:13:12.036 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=-34.09556&longitude=-56.21417&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:13:12.037 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=-34.09556&longitude=-56.21417&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:13:12.392 +03:00 [INF] Received HTTP response headers after 354.9949ms - 200
2026-02-11 15:13:12.394 +03:00 [INF] End processing HTTP request after 358.2693ms - 200
2026-02-11 15:13:12.401 +03:00 [INF] Endpoint = day, City = Флорида, Date = 2026-02-11, Latency = 748ms, CacheHit = FALSE
2026-02-11 15:13:12.403 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:13:12.417 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:13:12.443 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:13:12.445 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:13:12.447 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:13:12.455 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:13:12.481 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:13:12.481 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:13:12.482 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:13:12.483 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:12.484 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:13:12.485 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:13:12.485 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:13:12.486 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:13:12.488 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:13:12.495 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:13:12.499 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:12.500 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 10ms reading results.
2026-02-11 15:13:12.501 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:12.502 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:13:12.507 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:13:12.508 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:13:12.514 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:13:12.515 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:13:12.516 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:13:12.516 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:13:12.517 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:13:12.518 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:13:12.522 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 886.9439ms
2026-02-11 15:13:12.522 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:13:12.524 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:13:12.524 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:13:12.525 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:13:12.526 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Флорида?date=2026-02-11 - 200 null application/json; charset=utf-8 907.7568ms
2026-02-11 15:13:21.033 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:13:21.034 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:13:21.035 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:13:21.035 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:13:21.036 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:13:21.036 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:13:21.037 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:13:21.037 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:13:21.038 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:13:21.039 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:13:21.040 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:13:21.041 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:13:21.042 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:13:21.043 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:13:21.044 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:13:21.044 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:13:21.045 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:13:21.046 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:13:21.046 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:13:21.047 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:13:21.048 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:13:21.048 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:13:21.049 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:13:21.049 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:13:21.050 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:13:21.051 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:13:21.051 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:13:21.052 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:13:21.053 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:13:21.054 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:13:21.055 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:13:21.056 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:13:21.057 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:13:21.057 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:21.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:13:21.058 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:13:21.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:13:21.060 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:13:21.061 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:13:21.062 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:21.062 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:13:21.063 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:21.064 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:13:21.065 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:13:21.066 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:13:21.066 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:13:21.066 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:13:21.067 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:13:21.067 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:13:21.068 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 25.4383ms
2026-02-11 15:13:21.069 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:13:21.070 +03:00 [DBG] Connection id "0HNJ9CQN7D2EE" completed keep alive response.
2026-02-11 15:13:21.070 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:13:21.071 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:13:21.072 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:13:21.072 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 39.8671ms
2026-02-11 15:13:46.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майами/week - null null
2026-02-11 15:13:46.226 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майами/week'
2026-02-11 15:13:46.227 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Майами/week'
2026-02-11 15:13:46.228 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:13:46.228 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:13:46.229 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:13:46.229 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:13:46.232 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:13:46.233 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:13:46.234 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:13:46.235 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:13:46.236 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:13:46.237 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:13:46.237 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:13:46.239 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:13:46.240 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:13:46.240 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:13:46.241 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:13:46.242 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:13:46.243 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:13:46.244 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:13:46.246 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-11 15:13:46.247 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-11 15:13:46.344 +03:00 [INF] Received HTTP response headers after 96.2235ms - 200
2026-02-11 15:13:46.345 +03:00 [INF] End processing HTTP request after 98.5332ms - 200
2026-02-11 15:13:46.346 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:13:46.347 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:13:46.709 +03:00 [INF] Received HTTP response headers after 361.1713ms - 200
2026-02-11 15:13:46.710 +03:00 [INF] End processing HTTP request after 363.5499ms - 200
2026-02-11 15:13:46.711 +03:00 [INF] Endpoint = week, City = Майами, Date = -, Latency = 465ms, CacheHit = FALSE
2026-02-11 15:13:46.713 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:13:46.714 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:13:46.715 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:13:46.716 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:13:46.717 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:13:46.718 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:13:46.719 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:13:46.719 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:13:46.720 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:13:46.721 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:46.721 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:13:46.722 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:13:46.723 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:13:46.724 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:13:46.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:13:46.726 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:13:46.727 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:46.728 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:13:46.729 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:13:46.730 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:13:46.731 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:13:46.732 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:13:46.734 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:13:46.735 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:13:46.735 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:13:46.735 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:13:46.736 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:13:46.737 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:13:46.739 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 501.6398ms
2026-02-11 15:13:46.740 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:13:46.741 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:13:46.741 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:13:46.742 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:13:46.742 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майами/week - 200 null application/json; charset=utf-8 521.0519ms
2026-02-11 15:15:11.673 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 15:15:21.682 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:15:21.684 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0339ms - processed: 0 items - remaining: 1 items
2026-02-11 15:15:31.695 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:15:31.696 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-11 15:15:41.696 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:15:41.697 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-11 15:15:46.872 +03:00 [DBG] Connection id "0HNJ9CQN7D2EF" received FIN.
2026-02-11 15:15:46.873 +03:00 [DBG] Connection id "0HNJ9CQN7D2EF" accepted.
2026-02-11 15:15:46.874 +03:00 [DBG] Connection id "0HNJ9CQN7D2EF" started.
2026-02-11 15:15:46.874 +03:00 [DBG] Connection id "0HNJ9CQN7D2EG" accepted.
2026-02-11 15:15:46.878 +03:00 [DBG] Connection id "0HNJ9CQN7D2EG" started.
2026-02-11 15:15:46.878 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:15:46.880 +03:00 [DBG] Connection id "0HNJ9CQN7D2EF" stopped.
2026-02-11 15:15:46.881 +03:00 [DBG] Connection 0HNJ9CQN7D2EG established using the following protocol: "Tls13"
2026-02-11 15:15:46.881 +03:00 [DBG] Connection id "0HNJ9CQN7D2EF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:15:46.882 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:15:46.884 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:15:46.884 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:15:46.885 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:15:46.886 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:15:46.886 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:15:46.887 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:15:46.887 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:15:46.888 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:15:46.889 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:15:46.890 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:15:46.891 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:15:46.892 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:15:46.893 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:15:46.894 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:15:46.894 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:46.895 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:46.896 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:46.896 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:46.897 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:46.898 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:46.898 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:46.899 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:46.900 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:15:46.901 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:15:46.901 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:15:46.902 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:15:46.903 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:15:46.903 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:15:46.904 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:15:46.906 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:15:46.906 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:15:46.907 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:15:46.908 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:15:46.908 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:15:46.909 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:15:46.910 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:15:46.911 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:15:46.912 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:15:46.913 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:15:46.913 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:15:46.914 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:15:46.915 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:15:46.916 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:15:46.917 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:15:46.917 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:15:46.917 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:15:46.918 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:15:46.918 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:15:46.919 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 26.5583ms
2026-02-11 15:15:46.920 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:15:46.921 +03:00 [DBG] Connection id "0HNJ9CQN7D2EG" completed keep alive response.
2026-02-11 15:15:46.921 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:15:46.922 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:15:46.923 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:15:46.924 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 41.748ms
2026-02-11 15:15:49.595 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:15:49.596 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:15:49.597 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:15:49.598 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:15:49.598 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:15:49.599 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:15:49.599 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:15:49.600 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:15:49.601 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:15:49.601 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:15:49.602 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:15:49.603 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:15:49.604 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:15:49.605 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:15:49.606 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:15:49.607 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:49.608 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:49.609 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:49.609 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:49.610 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:49.611 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:49.611 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:15:49.612 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:15:49.613 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:15:49.613 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:15:49.614 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:15:49.615 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:15:49.616 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:15:49.616 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:15:49.617 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:15:49.619 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:15:49.619 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:15:49.620 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:15:49.620 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:15:49.621 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:15:49.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:15:49.623 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:15:49.623 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:15:49.624 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:15:49.626 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:15:49.626 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:15:49.627 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:15:49.628 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:15:49.629 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:15:49.630 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:15:49.630 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:15:49.631 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:15:49.631 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:15:49.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:15:49.633 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 27.5883ms
2026-02-11 15:15:49.634 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:15:49.635 +03:00 [DBG] Connection id "0HNJ9CQN7D2EG" completed keep alive response.
2026-02-11 15:15:49.636 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:15:49.636 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:15:49.637 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:15:49.638 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 43.3383ms
2026-02-11 15:15:51.702 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:15:51.703 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-11 15:16:01.709 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:16:01.710 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-11 15:16:11.713 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:16:11.713 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-11 15:16:18.247 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:16:18.248 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:16:18.249 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:16:18.250 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:16:18.250 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:16:18.251 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:16:18.251 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:16:18.252 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:16:18.253 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:16:18.253 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:16:18.254 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:16:18.255 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:16:18.256 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:16:18.257 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:16:18.257 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:16:18.258 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:16:18.259 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:16:18.260 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:16:18.260 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:16:18.261 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:16:18.262 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:16:18.262 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:16:18.263 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:16:18.263 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:16:18.264 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:16:18.265 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:16:18.265 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:16:18.266 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:16:18.266 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:16:18.267 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:16:18.269 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:16:18.269 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:16:18.270 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:16:18.270 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:16:18.271 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:16:18.272 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:16:18.272 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:16:18.273 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:16:18.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:16:18.275 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:16:18.276 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:16:18.276 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:16:18.277 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:16:18.278 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:16:18.279 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:16:18.279 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:16:18.280 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:16:18.280 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:16:18.281 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:16:18.281 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 24.5555ms
2026-02-11 15:16:18.282 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:16:18.283 +03:00 [DBG] Connection id "0HNJ9CQN7D2EG" completed keep alive response.
2026-02-11 15:16:18.283 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:16:18.284 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:16:18.285 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:16:18.285 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 38.5304ms
2026-02-11 15:16:20.916 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:16:20.924 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:16:20.924 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:16:20.925 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:16:20.926 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:16:20.926 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:16:20.929 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:16:20.930 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:16:20.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 14.6946ms
2026-02-11 15:16:20.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:16:20.974 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.1734ms
2026-02-11 15:16:20.991 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:16:21.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.4402ms
2026-02-11 15:16:21.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:16:21.050 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:16:21.051 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:16:21.051 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:16:21.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.1804ms
2026-02-11 15:16:21.727 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:16:21.728 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 15:16:31.734 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:16:31.735 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0182ms - processed: 0 items - remaining: 1 items
2026-02-11 15:16:41.741 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:16:41.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 15:16:51.744 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:16:51.745 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 15:17:01.756 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:17:01.758 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:17:11.764 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:17:11.765 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-11 15:17:21.780 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:17:21.780 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 15:17:26.634 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:17:26.710 +03:00 [DBG] Hosting starting
2026-02-11 15:17:26.818 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:17:26.818 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:17:26.819 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:17:26.819 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:17:26.820 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:17:26.821 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:17:26.845 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:17:26.846 +03:00 [INF] Hosting environment: Development
2026-02-11 15:17:26.847 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:17:26.848 +03:00 [DBG] Hosting started
2026-02-11 15:17:27.261 +03:00 [DBG] Connection id "0HNJ9CU2L83EA" received FIN.
2026-02-11 15:17:27.261 +03:00 [DBG] Connection id "0HNJ9CU2L83E9" received FIN.
2026-02-11 15:17:27.265 +03:00 [DBG] Connection id "0HNJ9CU2L83E9" accepted.
2026-02-11 15:17:27.265 +03:00 [DBG] Connection id "0HNJ9CU2L83EA" accepted.
2026-02-11 15:17:27.267 +03:00 [DBG] Connection id "0HNJ9CU2L83E9" started.
2026-02-11 15:17:27.267 +03:00 [DBG] Connection id "0HNJ9CU2L83EA" started.
2026-02-11 15:17:27.276 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:17:27.276 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:17:27.294 +03:00 [DBG] Connection id "0HNJ9CU2L83E9" stopped.
2026-02-11 15:17:27.294 +03:00 [DBG] Connection id "0HNJ9CU2L83EA" stopped.
2026-02-11 15:17:27.297 +03:00 [DBG] Connection id "0HNJ9CU2L83E9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:17:27.297 +03:00 [DBG] Connection id "0HNJ9CU2L83EA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:17:27.596 +03:00 [DBG] Connection id "0HNJ9CU2L83EB" accepted.
2026-02-11 15:17:27.598 +03:00 [DBG] Connection id "0HNJ9CU2L83EB" started.
2026-02-11 15:17:27.623 +03:00 [DBG] Connection 0HNJ9CU2L83EB established using the following protocol: "Tls13"
2026-02-11 15:17:27.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:17:27.716 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:17:27.726 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:17:27.727 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:17:27.730 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:17:27.753 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:17:27.754 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:17:27.763 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:17:27.764 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:17:27.766 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 116.1352ms
2026-02-11 15:17:27.788 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:17:27.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.7573ms
2026-02-11 15:17:27.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:17:27.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.6726ms
2026-02-11 15:17:27.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:17:27.898 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:17:27.899 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:17:27.900 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:17:27.906 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.5336ms
2026-02-11 15:17:41.764 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майами?date=2026-02-11 - null null
2026-02-11 15:17:41.768 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майами'
2026-02-11 15:17:41.770 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Майами'
2026-02-11 15:17:41.771 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:17:41.773 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:17:41.774 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:17:41.779 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:17:41.791 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:17:41.793 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:17:41.794 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:17:41.795 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:17:41.796 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:17:41.797 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:17:41.798 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:17:41.853 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:17:41.858 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:17:41.866 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:17:41.868 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:17:41.869 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:17:41.870 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:17:41.870 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:17:41.874 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:17:41.876 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:17:41.880 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:17:41.881 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:17:41.882 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:17:41.893 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-11 15:17:41.899 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-11 15:17:42.251 +03:00 [INF] Received HTTP response headers after 350.6014ms - 200
2026-02-11 15:17:42.254 +03:00 [INF] End processing HTTP request after 361.1054ms - 200
2026-02-11 15:17:42.264 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:17:42.265 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:17:42.560 +03:00 [INF] Received HTTP response headers after 294.0378ms - 200
2026-02-11 15:17:42.561 +03:00 [INF] End processing HTTP request after 296.7593ms - 200
2026-02-11 15:17:42.567 +03:00 [INF] Endpoint = day, City = Майами, Date = 2026-02-11, Latency = 682ms, CacheHit = FALSE
2026-02-11 15:17:42.791 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:17:42.808 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:17:42.839 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:17:42.841 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:17:42.843 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:17:42.851 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:17:42.884 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:17:42.890 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:17:42.892 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:17:42.898 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:17:42.902 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:17:42.905 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:17:42.907 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:17:42.911 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:17:42.923 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:17:42.932 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:17:42.937 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:17:42.940 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-11 15:17:42.943 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:17:42.945 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:17:42.952 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:17:42.954 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:17:42.962 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:17:42.964 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:17:42.965 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:17:42.965 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:17:42.966 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:17:42.967 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:17:42.975 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1176.2093ms
2026-02-11 15:17:42.976 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:17:42.978 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:17:42.981 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:17:42.982 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:17:42.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майами?date=2026-02-11 - 200 null application/json; charset=utf-8 1219.7906ms
2026-02-11 15:18:30.257 +03:00 [DBG] Connection id "0HNJ9CU2L83EC" accepted.
2026-02-11 15:18:30.257 +03:00 [DBG] Connection id "0HNJ9CU2L83EC" received FIN.
2026-02-11 15:18:30.258 +03:00 [DBG] Connection id "0HNJ9CU2L83EC" started.
2026-02-11 15:18:30.258 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" accepted.
2026-02-11 15:18:30.262 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" started.
2026-02-11 15:18:30.262 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:18:30.264 +03:00 [DBG] Connection id "0HNJ9CU2L83EC" stopped.
2026-02-11 15:18:30.265 +03:00 [DBG] Connection 0HNJ9CU2L83ED established using the following protocol: "Tls13"
2026-02-11 15:18:30.265 +03:00 [DBG] Connection id "0HNJ9CU2L83EC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:18:30.268 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:18:30.270 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:18:30.271 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:18:30.272 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:30.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:18:30.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:18:30.274 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:30.277 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:18:30.278 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:18:30.279 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:18:30.280 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:18:30.281 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:18:30.282 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:18:30.283 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:18:30.284 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:18:30.285 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:30.285 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:30.286 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:30.287 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:30.288 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:30.288 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:30.289 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:30.290 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:30.290 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:18:30.291 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:18:30.292 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:30.293 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:30.294 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:18:30.295 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:30.327 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:18:30.347 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:18:30.455 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:18:30.467 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:18:30.468 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:18:30.469 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:18:30.470 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:30.471 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:18:30.471 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:18:30.472 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:18:30.473 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:18:30.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:18:30.476 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:30.477 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:18:30.478 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:30.479 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:18:30.480 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:18:30.481 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:18:30.481 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:18:30.482 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:18:30.482 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:18:30.483 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:18:30.485 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 202.6136ms
2026-02-11 15:18:30.486 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:30.487 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" completed keep alive response.
2026-02-11 15:18:30.487 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:18:30.488 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:18:30.489 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:18:30.490 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 221.0916ms
2026-02-11 15:18:42.336 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:18:42.338 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:18:42.339 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:18:42.340 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:42.340 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:18:42.341 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:18:42.341 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:42.342 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:18:42.343 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:18:42.344 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:18:42.345 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:18:42.346 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:18:42.346 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:18:42.347 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:18:42.348 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:18:42.349 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:42.349 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:42.350 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:42.351 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:42.351 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:42.352 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:42.353 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:42.353 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:42.354 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:18:42.355 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:18:42.355 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:42.356 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:42.356 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:18:42.357 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:42.365 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:18:42.369 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:18:42.369 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:18:42.370 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:18:42.371 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:42.371 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:18:42.372 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:18:42.372 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:18:42.373 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:18:42.374 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:18:42.376 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:42.377 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:18:42.378 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:42.378 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:18:42.379 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:18:42.380 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:18:42.381 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:18:42.381 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:18:42.381 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:18:42.382 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:18:42.383 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 35.5864ms
2026-02-11 15:18:42.384 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:42.384 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" completed keep alive response.
2026-02-11 15:18:42.385 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:18:42.386 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:18:42.386 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:18:42.387 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 50.8009ms
2026-02-11 15:18:47.082 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:18:47.084 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:18:47.084 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:18:47.085 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:47.086 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:18:47.086 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:18:47.087 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:47.087 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:18:47.088 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:18:47.089 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:18:47.090 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:18:47.091 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:18:47.092 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:18:47.093 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:18:47.095 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:18:47.096 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:47.097 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:47.097 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:47.098 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:47.099 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:47.100 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:47.100 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:18:47.101 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:18:47.102 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:18:47.102 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:18:47.103 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:47.104 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:47.105 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:18:47.105 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:18:47.107 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:18:47.109 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:18:47.109 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:18:47.110 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:18:47.111 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:47.112 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:18:47.112 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:18:47.113 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:18:47.114 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:18:47.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:18:47.116 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:47.117 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:18:47.117 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:18:47.118 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:18:47.119 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:18:47.120 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:18:47.120 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:18:47.121 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:18:47.121 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:18:47.122 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:18:47.123 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 30.3433ms
2026-02-11 15:18:47.124 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:18:47.125 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" completed keep alive response.
2026-02-11 15:18:47.126 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:18:47.126 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:18:47.127 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:18:47.128 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 45.9149ms
2026-02-11 15:18:49.038 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" received FIN.
2026-02-11 15:18:49.039 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:18:49.040 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" disconnecting.
2026-02-11 15:18:49.042 +03:00 [DBG] Connection id "0HNJ9CU2L83ED" stopped.
2026-02-11 15:19:03.882 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:19:04.066 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:19:04.068 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:04.072 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 15:19:04.074 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:19:04.076 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:04.078 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:19:06.523 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:19:06.725 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:19:06.728 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:06.732 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 15:19:06.735 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:06.736 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:19:06.737 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:06.741 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:06.743 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:06.745 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:06.745 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:06.746 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:06.746 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:06.747 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:06.749 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:19:06.750 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:06.750 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.212 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:19:14.411 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:19:14.419 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:14.423 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 15:19:14.425 +03:00 [DBG] Migrating using database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.426 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:14.427 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:19:14.428 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.431 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.432 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.434 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.434 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:14.434 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:19:14.434 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.434 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.434 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.434 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.434 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.437 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.440 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:19:14.442 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-11 15:19:14.443 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2026-02-11 15:19:14.445 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-11 15:19:14.454 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-11 15:19:14.455 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.456 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.488 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:19:14.488 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:19:14.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:19:14.488 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.489 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.489 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-11 15:19:14.491 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-11 15:19:14.491 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.491 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.492 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:14.492 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:19:14.492 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.492 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.493 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.493 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.494 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-11 15:19:14.494 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-11 15:19:14.494 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-11 15:19:14.494 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.494 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.494 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-11 15:19:14.496 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-11 15:19:14.496 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.496 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.496 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.496 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.496 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:19:14.496 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:19:14.496 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:19:14.497 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-11 15:19:14.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-11 15:19:14.498 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.498 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:19:14.498 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.976 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (478ms).
2026-02-11 15:19:14.981 +03:00 [INF] Applying migration '20260202104928_InitialStatistic'.
2026-02-11 15:19:14.988 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.988 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.989 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-11 15:19:14.990 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2026-02-11 15:19:14.990 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:19:14.990 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:19:14.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:19:14.991 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-11 15:19:14.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-11 15:19:14.991 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:19:14.991 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:19:14.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:19:14.991 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-11 15:19:14.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-11 15:19:14.991 +03:00 [DBG] Committing transaction.
2026-02-11 15:19:14.992 +03:00 [DBG] Committed transaction.
2026-02-11 15:19:14.993 +03:00 [DBG] Disposing transaction.
2026-02-11 15:19:14.993 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:14.993 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:14.994 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:19:14.994 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:14.994 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:27.009 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:19:27.073 +03:00 [DBG] Hosting starting
2026-02-11 15:19:27.170 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:19:27.170 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:19:27.171 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:19:27.171 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:19:27.172 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:19:27.172 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:19:27.193 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:19:27.194 +03:00 [INF] Hosting environment: Development
2026-02-11 15:19:27.195 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:19:27.195 +03:00 [DBG] Hosting started
2026-02-11 15:19:27.581 +03:00 [DBG] Connection id "0HNJ9CV6GMOPD" accepted.
2026-02-11 15:19:27.581 +03:00 [DBG] Connection id "0HNJ9CV6GMOPC" accepted.
2026-02-11 15:19:27.582 +03:00 [DBG] Connection id "0HNJ9CV6GMOPD" started.
2026-02-11 15:19:27.583 +03:00 [DBG] Connection id "0HNJ9CV6GMOPC" started.
2026-02-11 15:19:27.584 +03:00 [DBG] Connection id "0HNJ9CV6GMOPD" received FIN.
2026-02-11 15:19:27.584 +03:00 [DBG] Connection id "0HNJ9CV6GMOPC" received FIN.
2026-02-11 15:19:27.597 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:19:27.597 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:19:27.616 +03:00 [DBG] Connection id "0HNJ9CV6GMOPD" stopped.
2026-02-11 15:19:27.616 +03:00 [DBG] Connection id "0HNJ9CV6GMOPC" stopped.
2026-02-11 15:19:27.619 +03:00 [DBG] Connection id "0HNJ9CV6GMOPC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:19:27.619 +03:00 [DBG] Connection id "0HNJ9CV6GMOPD" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:19:27.784 +03:00 [DBG] Connection id "0HNJ9CV6GMOPE" accepted.
2026-02-11 15:19:27.786 +03:00 [DBG] Connection id "0HNJ9CV6GMOPE" started.
2026-02-11 15:19:27.813 +03:00 [DBG] Connection 0HNJ9CV6GMOPE established using the following protocol: "Tls13"
2026-02-11 15:19:27.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:19:27.934 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:19:27.947 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:19:27.948 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:19:27.951 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:19:27.986 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:19:27.987 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:19:27.998 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:19:27.999 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:19:28.001 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 150.6905ms
2026-02-11 15:19:28.022 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:19:28.029 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.4722ms
2026-02-11 15:19:28.051 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:19:28.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.7313ms
2026-02-11 15:19:28.134 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:19:28.136 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:19:28.137 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:19:28.138 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:19:28.144 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.1827ms
2026-02-11 15:19:41.996 +03:00 [DBG] Connection id "0HNJ9CV6GMOPF" accepted.
2026-02-11 15:19:41.996 +03:00 [DBG] Connection id "0HNJ9CV6GMOPF" received FIN.
2026-02-11 15:19:41.997 +03:00 [DBG] Connection id "0HNJ9CV6GMOPF" started.
2026-02-11 15:19:41.997 +03:00 [DBG] Connection id "0HNJ9CV6GMOPG" accepted.
2026-02-11 15:19:41.999 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:19:41.999 +03:00 [DBG] Connection id "0HNJ9CV6GMOPG" started.
2026-02-11 15:19:42.001 +03:00 [DBG] Connection id "0HNJ9CV6GMOPF" stopped.
2026-02-11 15:19:42.001 +03:00 [DBG] Connection id "0HNJ9CV6GMOPF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:19:42.003 +03:00 [DBG] Connection 0HNJ9CV6GMOPG established using the following protocol: "Tls13"
2026-02-11 15:19:42.006 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 15:19:42.010 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 15:19:42.012 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 15:19:42.013 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:19:42.015 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:19:42.015 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:19:42.021 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:19:42.035 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:19:42.036 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:19:42.037 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:19:42.038 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:19:42.039 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:19:42.040 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:19:42.042 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:19:42.099 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:19:42.104 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:19:42.113 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:19:42.115 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:19:42.116 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:19:42.117 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:19:42.117 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:19:42.121 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:19:42.122 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:19:42.126 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:19:42.127 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:19:42.128 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:19:42.140 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 15:19:42.145 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 15:19:42.680 +03:00 [INF] Received HTTP response headers after 532.4417ms - 200
2026-02-11 15:19:42.682 +03:00 [INF] End processing HTTP request after 543.2264ms - 200
2026-02-11 15:19:42.692 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 15:19:42.693 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 15:19:43.318 +03:00 [INF] Received HTTP response headers after 624.0259ms - 200
2026-02-11 15:19:43.319 +03:00 [INF] End processing HTTP request after 627.0227ms - 200
2026-02-11 15:19:43.325 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 1194ms, CacheHit = FALSE
2026-02-11 15:19:43.542 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:19:43.559 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:19:43.589 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:19:43.592 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:19:43.594 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:19:43.602 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:19:43.633 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:43.638 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:19:43.640 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:43.646 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:43.650 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:19:43.653 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:19:43.655 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:19:43.659 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:19:43.670 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:19:43.678 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:19:43.683 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:43.687 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-11 15:19:43.689 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:43.691 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:19:43.697 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:19:43.699 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:19:43.705 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:19:43.707 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:19:43.708 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:19:43.708 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:19:43.709 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:19:43.710 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:19:43.719 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1676.5841ms
2026-02-11 15:19:43.720 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:19:43.721 +03:00 [DBG] Connection id "0HNJ9CV6GMOPG" completed keep alive response.
2026-02-11 15:19:43.723 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:19:43.725 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:43.727 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:19:43.728 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 1721.4209ms
2026-02-11 15:19:56.178 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 15:19:56.181 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:19:56.181 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:19:56.182 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:19:56.183 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:19:56.183 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:19:56.184 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:19:56.187 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:19:56.188 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:19:56.189 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:19:56.190 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:19:56.191 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:19:56.192 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:19:56.193 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:19:56.194 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:19:56.195 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:19:56.196 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:19:56.197 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:19:56.198 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:19:56.198 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:19:56.199 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:19:56.202 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 15:19:56.203 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 15:19:56.312 +03:00 [INF] Received HTTP response headers after 108.4324ms - 200
2026-02-11 15:19:56.313 +03:00 [INF] End processing HTTP request after 110.8451ms - 200
2026-02-11 15:19:56.314 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:19:56.315 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:19:56.428 +03:00 [INF] Received HTTP response headers after 112.2546ms - 200
2026-02-11 15:19:56.428 +03:00 [INF] End processing HTTP request after 114.2876ms - 200
2026-02-11 15:19:56.430 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 228ms, CacheHit = FALSE
2026-02-11 15:19:56.460 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:19:56.462 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:19:56.463 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:19:56.464 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:19:56.465 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:19:56.465 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:19:56.466 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:19:56.467 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:19:56.468 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:56.468 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:56.469 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:19:56.470 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:19:56.470 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:19:56.471 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:19:56.472 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:19:56.474 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:19:56.475 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:56.476 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:19:56.477 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:19:56.478 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:56.479 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:19:56.480 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:19:56.482 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:19:56.483 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:19:56.483 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:19:56.484 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:19:56.484 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:19:56.485 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:19:56.487 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 294.0014ms
2026-02-11 15:19:56.488 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:19:56.488 +03:00 [DBG] Connection id "0HNJ9CV6GMOPG" completed keep alive response.
2026-02-11 15:19:56.489 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:19:56.490 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:19:56.490 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:19:56.491 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 312.7846ms
2026-02-11 15:20:18.668 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:20:18.670 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:20:18.670 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:20:18.671 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:20:18.672 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:20:18.672 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:20:18.673 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:20:18.676 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:20:18.677 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:20:18.678 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:20:18.679 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:20:18.680 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:20:18.680 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:20:18.681 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:20:18.682 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:20:18.683 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:20:18.684 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:20:18.685 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:20:18.685 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:20:18.686 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:20:18.687 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:20:18.687 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:20:18.688 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:20:18.688 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:20:18.689 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:20:18.690 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:20:18.691 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:20:18.691 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:20:18.692 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:20:18.704 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:20:18.722 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:20:18.827 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:20:18.840 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:20:18.841 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:20:18.841 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:20:18.842 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:20:18.843 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:20:18.844 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:20:18.844 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:20:18.845 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:20:18.846 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:20:18.849 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:20:18.850 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:20:18.850 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:20:18.851 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:20:18.852 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:20:18.853 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:20:18.853 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:20:18.854 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:20:18.854 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:20:18.855 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:20:18.856 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 175.0359ms
2026-02-11 15:20:18.857 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:20:18.857 +03:00 [DBG] Connection id "0HNJ9CV6GMOPG" completed keep alive response.
2026-02-11 15:20:18.858 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:20:18.859 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:20:18.859 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:20:18.860 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 192.5713ms
2026-02-11 15:20:32.304 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 15:20:32.306 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:20:32.306 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:20:32.307 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:20:32.308 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:20:32.308 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:20:32.309 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:20:32.310 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:20:32.311 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:20:32.312 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:20:32.313 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:20:32.314 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:20:32.315 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:20:32.315 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:20:32.319 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:20:32.320 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:20:32.321 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:20:32.321 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:20:32.322 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:20:32.323 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:20:32.323 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:20:32.324 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-11 15:20:32.326 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:20:32.327 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:20:32.328 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:20:32.329 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:20:32.330 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:20:32.330 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:20:32.331 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:20:32.332 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:20:32.332 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:20:32.333 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:20:32.333 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:20:32.334 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:20:32.335 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:20:32.335 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:20:32.336 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:20:32.337 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:20:32.339 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:20:32.340 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:20:32.340 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:20:32.341 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:20:32.342 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:20:32.343 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:20:32.344 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:20:32.346 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:20:32.346 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:20:32.347 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:20:32.347 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:20:32.348 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:20:32.349 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 33.3249ms
2026-02-11 15:20:32.349 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:20:32.350 +03:00 [DBG] Connection id "0HNJ9CV6GMOPG" completed keep alive response.
2026-02-11 15:20:32.351 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:20:32.351 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:20:32.352 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:20:32.353 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 48.4992ms
2026-02-11 15:21:40.404 +03:00 [DBG] Connection id "0HNJ9CV6GMOPH" received FIN.
2026-02-11 15:21:40.405 +03:00 [DBG] Connection id "0HNJ9CV6GMOPH" accepted.
2026-02-11 15:21:40.406 +03:00 [DBG] Connection id "0HNJ9CV6GMOPH" started.
2026-02-11 15:21:40.406 +03:00 [DBG] Connection id "0HNJ9CV6GMOPI" accepted.
2026-02-11 15:21:40.411 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:21:40.411 +03:00 [DBG] Connection id "0HNJ9CV6GMOPI" started.
2026-02-11 15:21:40.413 +03:00 [DBG] Connection id "0HNJ9CV6GMOPH" stopped.
2026-02-11 15:21:40.414 +03:00 [DBG] Connection id "0HNJ9CV6GMOPH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:21:40.416 +03:00 [DBG] Connection 0HNJ9CV6GMOPI established using the following protocol: "Tls13"
2026-02-11 15:21:40.417 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:21:40.419 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:21:40.419 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:21:40.420 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:21:40.421 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:21:40.421 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:21:40.422 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:21:40.423 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:21:40.424 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:21:40.425 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:21:40.426 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:21:40.427 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:21:40.428 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:21:40.429 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:21:40.430 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:21:40.431 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:21:40.432 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:21:40.433 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:21:40.434 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:21:40.435 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:21:40.435 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:21:40.436 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:21:40.437 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:21:40.438 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:21:40.438 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:21:40.439 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:21:40.440 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:21:40.441 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:21:40.442 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:21:40.443 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:21:40.448 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:21:40.448 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:21:40.449 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:21:40.450 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:21:40.450 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:21:40.451 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:21:40.452 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:21:40.453 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:21:40.454 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:21:40.455 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:21:40.456 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:21:40.457 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:21:40.458 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:21:40.459 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:21:40.460 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:21:40.461 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:21:40.462 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:21:40.462 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:21:40.463 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:21:40.464 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 35.2451ms
2026-02-11 15:21:40.466 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:21:40.467 +03:00 [DBG] Connection id "0HNJ9CV6GMOPI" completed keep alive response.
2026-02-11 15:21:40.467 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:21:40.468 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:21:40.469 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:21:40.471 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 53.7246ms
2026-02-11 15:21:42.147 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 15:22:35.206 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:22:35.272 +03:00 [DBG] Hosting starting
2026-02-11 15:22:35.377 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:22:35.377 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:22:35.378 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:22:35.379 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:22:35.379 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:22:35.380 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:22:35.406 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:22:35.407 +03:00 [INF] Hosting environment: Development
2026-02-11 15:22:35.408 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:22:35.409 +03:00 [DBG] Hosting started
2026-02-11 15:22:35.724 +03:00 [DBG] Connection id "0HNJ9D0UIV9F5" accepted.
2026-02-11 15:22:35.724 +03:00 [DBG] Connection id "0HNJ9D0UIV9F4" accepted.
2026-02-11 15:22:35.725 +03:00 [DBG] Connection id "0HNJ9D0UIV9F5" started.
2026-02-11 15:22:35.725 +03:00 [DBG] Connection id "0HNJ9D0UIV9F4" started.
2026-02-11 15:22:35.730 +03:00 [DBG] Connection id "0HNJ9D0UIV9F5" received FIN.
2026-02-11 15:22:35.730 +03:00 [DBG] Connection id "0HNJ9D0UIV9F4" received FIN.
2026-02-11 15:22:35.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:22:35.738 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:22:35.755 +03:00 [DBG] Connection id "0HNJ9D0UIV9F5" stopped.
2026-02-11 15:22:35.755 +03:00 [DBG] Connection id "0HNJ9D0UIV9F4" stopped.
2026-02-11 15:22:35.758 +03:00 [DBG] Connection id "0HNJ9D0UIV9F4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:22:35.758 +03:00 [DBG] Connection id "0HNJ9D0UIV9F5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:22:35.921 +03:00 [DBG] Connection id "0HNJ9D0UIV9F6" accepted.
2026-02-11 15:22:35.922 +03:00 [DBG] Connection id "0HNJ9D0UIV9F6" started.
2026-02-11 15:22:35.950 +03:00 [DBG] Connection 0HNJ9D0UIV9F6 established using the following protocol: "Tls13"
2026-02-11 15:22:35.982 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:22:36.048 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:22:36.061 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:22:36.062 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:22:36.066 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:22:36.102 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:22:36.104 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:22:36.116 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:22:36.117 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:22:36.119 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 139.2786ms
2026-02-11 15:22:36.140 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:22:36.147 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.3015ms
2026-02-11 15:22:36.170 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:22:36.195 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.2467ms
2026-02-11 15:22:36.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:22:36.250 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:22:36.251 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:22:36.252 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:22:36.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.0284ms
2026-02-11 15:22:40.506 +03:00 [DBG] Connection id "0HNJ9D0UIV9F7" received FIN.
2026-02-11 15:22:40.506 +03:00 [DBG] Connection id "0HNJ9D0UIV9F7" accepted.
2026-02-11 15:22:40.508 +03:00 [DBG] Connection id "0HNJ9D0UIV9F7" started.
2026-02-11 15:22:40.508 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" accepted.
2026-02-11 15:22:40.509 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:22:40.509 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" started.
2026-02-11 15:22:40.511 +03:00 [DBG] Connection id "0HNJ9D0UIV9F7" stopped.
2026-02-11 15:22:40.512 +03:00 [DBG] Connection id "0HNJ9D0UIV9F7" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:22:40.514 +03:00 [DBG] Connection 0HNJ9D0UIV9F8 established using the following protocol: "Tls13"
2026-02-11 15:22:40.517 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:22:40.520 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:22:40.522 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:22:40.523 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:22:40.525 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:22:40.526 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:22:40.532 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:22:40.545 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:22:40.547 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:22:40.548 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:22:40.549 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:22:40.550 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:22:40.551 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:22:40.553 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:22:40.608 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:22:40.614 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:22:40.622 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:40.627 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:40.628 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:40.630 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:40.632 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:40.633 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:40.634 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:40.635 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:40.636 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:22:40.638 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:22:40.639 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:22:40.640 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:22:40.641 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:22:40.642 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:22:40.869 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:22:40.890 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:22:40.996 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:22:41.014 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:22:41.019 +03:00 [DBG] Created DbConnection. (5ms).
2026-02-11 15:22:41.022 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:22:41.029 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:41.032 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:22:41.035 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:22:41.038 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-11 15:22:41.043 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:22:41.054 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:22:41.061 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:41.065 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 6ms reading results.
2026-02-11 15:22:41.068 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:41.071 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:22:41.074 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:22:41.077 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:22:41.078 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:22:41.079 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:22:41.080 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:22:41.082 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:22:41.090 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 535.9495ms
2026-02-11 15:22:41.091 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:22:41.092 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:22:41.094 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:22:41.097 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:22:41.099 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:22:41.101 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 583.6038ms
2026-02-11 15:22:53.589 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 15:22:53.591 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 15:22:53.592 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 15:22:53.593 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:22:53.594 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:22:53.594 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:22:53.595 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:22:53.598 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:22:53.600 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:22:53.601 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:22:53.603 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:22:53.604 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:22:53.606 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:22:53.607 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:22:53.610 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:22:53.611 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:22:53.613 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:22:53.614 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:22:53.615 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:22:53.616 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:22:53.620 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:22:53.621 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:53.622 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:53.622 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:53.624 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:53.637 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 15:22:53.642 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 15:22:53.944 +03:00 [INF] Received HTTP response headers after 299.5866ms - 200
2026-02-11 15:22:53.947 +03:00 [INF] End processing HTTP request after 310.5558ms - 200
2026-02-11 15:22:53.955 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 15:22:53.956 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-05&end_date=2026-02-05
2026-02-11 15:22:54.265 +03:00 [INF] Received HTTP response headers after 307.49ms - 200
2026-02-11 15:22:54.266 +03:00 [INF] End processing HTTP request after 311.0328ms - 200
2026-02-11 15:22:54.274 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 647ms, CacheHit = FALSE
2026-02-11 15:22:54.302 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:22:54.319 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:22:54.345 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:22:54.347 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:22:54.349 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:22:54.357 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:22:54.383 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:22:54.383 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:22:54.384 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:22:54.385 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:54.387 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:22:54.387 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:22:54.389 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:22:54.390 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:22:54.391 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:22:54.398 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:22:54.402 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:54.403 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 10ms reading results.
2026-02-11 15:22:54.405 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:54.406 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:22:54.412 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:22:54.414 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:22:54.420 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:22:54.422 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:22:54.423 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:22:54.423 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:22:54.424 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:22:54.425 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:22:54.433 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 826.1678ms
2026-02-11 15:22:54.434 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:22:54.437 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:22:54.437 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:22:54.438 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:22:54.439 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:22:54.441 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 852.0571ms
2026-02-11 15:22:57.800 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:22:57.802 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:22:57.803 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:22:57.804 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:22:57.805 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:22:57.806 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:22:57.806 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:22:57.808 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:22:57.809 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:22:57.810 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:22:57.811 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:22:57.812 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:22:57.814 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:22:57.815 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:22:57.816 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:22:57.817 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:57.818 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:57.819 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:57.820 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:57.821 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:57.822 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:57.822 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:22:57.823 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:22:57.824 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:22:57.825 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:22:57.826 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:22:57.827 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:22:57.828 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:22:57.829 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:22:57.837 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:22:57.841 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:22:57.842 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:22:57.842 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:22:57.843 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:57.844 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:22:57.845 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:22:57.846 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-11 15:22:57.847 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:22:57.849 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:22:57.850 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:57.851 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:22:57.852 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:22:57.853 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:22:57.854 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:22:57.855 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:22:57.855 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:22:57.856 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:22:57.856 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:22:57.857 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:22:57.858 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 43.1859ms
2026-02-11 15:22:57.859 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:22:57.859 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:22:57.860 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:22:57.861 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:22:57.862 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:22:57.862 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 62.7891ms
2026-02-11 15:23:01.731 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - null null
2026-02-11 15:23:01.733 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 15:23:01.734 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 15:23:01.734 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:23:01.735 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:01.735 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:01.736 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:23:01.737 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:23:01.737 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:01.738 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:01.739 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:23:01.740 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:01.741 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:01.742 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:01.743 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:01.744 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:23:01.745 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:23:01.746 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:01.746 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:01.747 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:23:01.748 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:23:01.749 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:01.749 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:01.750 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:01.751 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:01.752 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-05, Latency = 0ms, CacheHit = TRUE
2026-02-11 15:23:01.753 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:23:01.755 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:01.756 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:01.757 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:23:01.758 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:23:01.758 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:23:01.759 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:23:01.760 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:23:01.760 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:01.761 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:01.762 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:01.762 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:01.763 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:01.764 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:23:01.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:23:01.766 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:23:01.767 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:01.768 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:23:01.769 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:01.770 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:23:01.772 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:01.773 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:23:01.774 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:01.776 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:01.776 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:01.776 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:01.777 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:23:01.778 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:23:01.779 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 36.8971ms
2026-02-11 15:23:01.779 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:23:01.780 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:23:01.781 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:23:01.781 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:01.782 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:01.783 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Москва?date=2026-02-05 - 200 null application/json; charset=utf-8 52.0148ms
2026-02-11 15:23:06.481 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:23:06.483 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:23:06.484 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:23:06.485 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:23:06.486 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:06.486 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:06.487 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:23:06.488 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:23:06.489 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:06.490 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:06.491 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:23:06.492 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:06.493 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:06.494 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:06.496 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:06.497 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:06.498 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:06.499 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:06.500 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:06.501 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:06.502 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:06.502 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:06.503 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:06.504 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:23:06.505 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:23:06.506 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:23:06.507 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:23:06.508 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:23:06.509 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:23:06.510 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:23:06.511 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:23:06.512 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:23:06.513 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:06.513 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:06.514 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:06.515 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:06.515 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:06.516 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:23:06.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:23:06.518 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:06.519 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:23:06.520 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:06.521 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:06.522 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:06.523 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:06.523 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:06.524 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:06.524 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:23:06.525 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:23:06.526 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 31.5889ms
2026-02-11 15:23:06.526 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:23:06.527 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:23:06.528 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:23:06.529 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:06.529 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:06.530 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 49.2808ms
2026-02-11 15:23:09.366 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:23:09.368 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:23:09.368 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:23:09.369 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:23:09.370 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:09.370 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:09.371 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:23:09.375 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:23:09.376 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:09.377 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:09.378 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:23:09.379 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:09.380 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:09.381 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:09.382 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:09.382 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:09.383 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:09.384 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:09.385 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:09.386 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:09.386 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:09.387 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:09.389 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:09.389 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:23:09.390 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:23:09.391 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:23:09.392 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:23:09.392 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:23:09.393 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:23:09.394 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:23:09.395 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:23:09.396 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:23:09.396 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:23:09.397 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:23:09.398 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:23:09.400 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:23:09.402 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 15:23:09.406 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 15:23:09.409 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:23:09.410 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:23:09.411 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:09.412 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:09.412 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:09.413 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:09.414 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:09.414 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:23:09.416 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:23:09.417 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:09.418 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:23:09.418 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:09.419 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:09.421 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 15:23:09.424 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:23:09.426 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:09.426 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:09.427 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:09.428 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:09.428 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:09.429 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:23:09.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:23:09.432 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:09.433 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:23:09.434 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:09.435 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:09.436 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:09.437 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:09.437 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:09.438 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:09.438 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:23:09.439 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:23:09.444 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 63.855ms
2026-02-11 15:23:09.445 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:23:09.446 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:23:09.447 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:23:09.448 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:09.448 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:09.449 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 82.835ms
2026-02-11 15:23:16.815 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 15:23:16.817 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:23:16.817 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:23:16.818 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:16.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:16.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:16.820 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:16.822 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:23:16.823 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:16.824 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:16.825 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:23:16.826 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:16.827 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:16.828 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:16.831 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:16.832 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:23:16.833 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:23:16.834 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:16.834 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:16.835 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:23:16.836 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:23:16.839 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 15:23:16.840 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 15:23:16.901 +03:00 [INF] Received HTTP response headers after 60.8629ms - 200
2026-02-11 15:23:16.902 +03:00 [INF] End processing HTTP request after 63.1908ms - 200
2026-02-11 15:23:16.904 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:23:16.904 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:23:16.966 +03:00 [INF] Received HTTP response headers after 61.2817ms - 200
2026-02-11 15:23:16.967 +03:00 [INF] End processing HTTP request after 63.4101ms - 200
2026-02-11 15:23:16.968 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 130ms, CacheHit = FALSE
2026-02-11 15:23:16.970 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:23:16.971 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:16.972 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:16.973 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:23:16.973 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:23:16.974 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:23:16.974 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:23:16.975 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:23:16.975 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:16.976 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:16.977 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:16.978 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:16.979 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:16.979 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:23:16.981 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:23:16.982 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:23:16.983 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:16.984 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:23:16.985 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:16.986 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:16.986 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:16.987 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:23:16.989 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:16.990 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:16.991 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:16.991 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:16.992 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:23:16.992 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:23:16.994 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 166.3161ms
2026-02-11 15:23:16.995 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:16.996 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:23:16.997 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:23:16.997 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:16.998 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:16.999 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 184.4686ms
2026-02-11 15:23:19.982 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 15:23:19.984 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:23:19.985 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:23:19.986 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:19.986 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:19.987 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:19.987 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:19.988 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:23:19.989 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:19.990 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:19.991 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:23:19.992 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:19.993 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:19.994 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:19.994 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:19.995 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:23:19.996 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:23:19.997 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:19.998 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:19.999 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:23:20.000 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:23:20.001 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-11 15:23:20.002 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:23:20.003 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:20.004 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:20.005 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:23:20.006 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:23:20.007 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:23:20.008 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:23:20.008 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:23:20.009 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:20.010 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:20.011 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:20.012 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:20.013 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:20.014 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:23:20.015 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:23:20.016 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:23:20.018 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:20.018 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:23:20.019 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:20.020 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:20.021 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:23:20.022 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:23:20.023 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:20.024 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:20.025 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:20.025 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:20.026 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:23:20.026 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:23:20.027 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 33.8793ms
2026-02-11 15:23:20.028 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:20.029 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:23:20.030 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:23:20.031 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:20.031 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:20.032 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 50.2757ms
2026-02-11 15:23:23.132 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:23:23.133 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:23:23.134 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:23:23.135 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:23:23.135 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:23.136 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:23.136 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:23:23.137 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:23:23.138 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:23.139 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:23.140 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:23:23.141 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:23.141 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:23.142 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:23.143 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:23.144 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:23.145 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:23.145 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:23.146 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:23.147 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:23.148 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:23.148 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:23.149 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:23.150 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:23:23.151 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:23:23.151 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:23:23.152 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:23:23.153 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:23:23.154 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:23:23.154 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:23:23.155 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:23:23.156 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:23:23.157 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:23:23.157 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:23:23.158 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:23:23.159 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:23:23.160 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:23:23.161 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:23:23.161 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:23.162 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:23.163 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:23.164 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:23.164 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:23.165 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:23:23.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:23:23.167 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:23.168 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:23:23.169 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:23.170 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:23.171 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:23.172 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:23.172 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:23:23.173 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:23:23.174 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:23:23.174 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:23:23.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:23:23.177 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:23.177 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:23:23.179 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:23:23.179 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:23.180 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:23.182 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:23.182 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:23.182 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:23.183 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:23:23.184 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:23:23.185 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 42.6589ms
2026-02-11 15:23:23.186 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:23:23.186 +03:00 [DBG] Connection id "0HNJ9D0UIV9F8" completed keep alive response.
2026-02-11 15:23:23.187 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:23:23.188 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:23:23.188 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:23:23.189 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 57.6761ms
2026-02-11 15:23:40.456 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - null null
2026-02-11 15:23:40.461 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:23:40.461 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:23:40.462 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:23:40.463 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:40.463 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:40.464 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:23:40.464 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:23:40.465 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:40.466 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:40.467 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:23:40.468 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:40.469 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:40.469 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:40.470 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:23:40.471 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:40.472 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:40.473 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:40.474 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:40.475 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:40.475 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:40.476 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:40.477 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:40.477 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:23:40.478 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:23:40.479 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:23:40.480 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:23:40.480 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:23:40.481 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:23:40.482 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:40.483 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:40.484 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:23:40.484 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:23:40.484 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:23:40.485 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:23:40.486 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 16.4274ms
2026-02-11 15:23:40.487 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:23:40.487 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=%20&to=%20&limit=10 - 400 null text/plain; charset=utf-8 31.5952ms
2026-02-11 15:23:47.256 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/ ?date=%20 - null null
2026-02-11 15:23:47.257 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ '
2026-02-11 15:23:47.258 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/ '
2026-02-11 15:23:47.259 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:23:47.259 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:47.260 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:47.260 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:23:47.261 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:23:47.263 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:47.264 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:47.265 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:23:47.266 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:47.267 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:47.268 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:47.269 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:47.269 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:23:47.270 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:23:47.271 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:47.272 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:47.272 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:23:47.274 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:23:47.275 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:47.276 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:47.276 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:23:47.277 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:23:47.279 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 15:23:47.280 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 15:23:47.281 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:47.283 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:47.284 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 15:23:47.285 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 15:23:47.286 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 15:23:47.294 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 26.1493ms
2026-02-11 15:23:47.295 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:23:47.296 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/ ?date=%20 - 400 null application/problem+json; charset=utf-8 40.3943ms
2026-02-11 15:23:52.410 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/ /week - null null
2026-02-11 15:23:52.412 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ /week'
2026-02-11 15:23:52.413 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/ /week'
2026-02-11 15:23:52.413 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:52.414 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:52.415 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:23:52.415 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:52.416 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:23:52.417 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:23:52.417 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:23:52.418 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:23:52.420 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:23:52.421 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:23:52.422 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:52.422 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:23:52.423 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:23:52.424 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:23:52.425 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:52.426 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:23:52.426 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:23:52.427 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:23:52.428 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 15:23:52.428 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 15:23:52.429 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:23:52.430 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:23:52.431 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 15:23:52.432 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 15:23:52.433 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 15:23:52.433 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 11.8587ms
2026-02-11 15:23:52.435 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:23:52.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/ /week - 400 null application/problem+json; charset=utf-8 25.63ms
2026-02-11 15:24:53.652 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 15:25:03.667 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:25:03.669 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0355ms - processed: 0 items - remaining: 1 items
2026-02-11 15:25:04.684 +03:00 [DBG] Connection id "0HNJ9D0UIV9F6" received FIN.
2026-02-11 15:25:04.686 +03:00 [DBG] Connection id "0HNJ9D0UIV9F6" is closed. The last processed stream ID was 13.
2026-02-11 15:25:04.686 +03:00 [DBG] Connection id "0HNJ9D0UIV9F6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:25:04.690 +03:00 [DBG] The connection queue processing loop for 0HNJ9D0UIV9F6 completed.
2026-02-11 15:25:04.692 +03:00 [DBG] Connection id "0HNJ9D0UIV9F6" stopped.
2026-02-11 15:25:13.682 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:25:13.683 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:25:23.688 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:25:23.690 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 15:25:33.702 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:25:33.702 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 15:25:34.345 +03:00 [DBG] Connection id "0HNJ9D0UIV9F9" accepted.
2026-02-11 15:25:34.346 +03:00 [DBG] Connection id "0HNJ9D0UIV9F9" received FIN.
2026-02-11 15:25:34.347 +03:00 [DBG] Connection id "0HNJ9D0UIV9F9" started.
2026-02-11 15:25:34.347 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" accepted.
2026-02-11 15:25:34.351 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:25:34.351 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" started.
2026-02-11 15:25:34.353 +03:00 [DBG] Connection id "0HNJ9D0UIV9F9" stopped.
2026-02-11 15:25:34.354 +03:00 [DBG] Connection id "0HNJ9D0UIV9F9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:25:34.356 +03:00 [DBG] Connection 0HNJ9D0UIV9FA established using the following protocol: "Tls13"
2026-02-11 15:25:34.357 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:25:34.358 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:25:34.359 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:25:34.360 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:25:34.361 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:25:34.361 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:25:34.361 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:25:34.362 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:25:34.363 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:25:34.365 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:25:34.366 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:25:34.367 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:25:34.368 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:25:34.369 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:25:34.370 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:25:34.371 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:34.372 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:34.372 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:34.373 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:34.374 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:34.375 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:34.376 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:34.376 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:34.377 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:25:34.378 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:25:34.379 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:25:34.380 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:25:34.381 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:25:34.381 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:25:34.382 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:25:34.383 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:25:34.384 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:25:34.385 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:25:34.386 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:25:34.387 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:25:34.388 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:25:34.390 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:25:34.391 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:25:34.391 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:34.392 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:34.393 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:25:34.393 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:25:34.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:25:34.395 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:25:34.397 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:25:34.399 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:34.400 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:25:34.401 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:34.402 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:25:34.403 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:34.404 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:34.405 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:25:34.406 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:25:34.407 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:25:34.407 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:25:34.409 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:25:34.410 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:34.411 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:25:34.412 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:34.413 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:25:34.414 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:25:34.416 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:25:34.417 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:25:34.417 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:25:34.418 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:25:34.419 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:25:34.420 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 51.6034ms
2026-02-11 15:25:34.421 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:25:34.422 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" completed keep alive response.
2026-02-11 15:25:34.423 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:25:34.424 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:34.425 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:25:34.426 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 69.3725ms
2026-02-11 15:25:39.257 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:25:39.258 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:25:39.259 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:25:39.260 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:25:39.260 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:25:39.261 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:25:39.262 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:25:39.262 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:25:39.263 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:25:39.264 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:25:39.265 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:25:39.266 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:25:39.267 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:25:39.268 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:25:39.269 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:25:39.270 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:39.271 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:39.271 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:39.272 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:39.273 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:39.273 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:39.274 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:39.275 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:39.275 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:25:39.276 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:25:39.277 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:25:39.278 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:25:39.278 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:25:39.279 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:25:39.280 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:25:39.281 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:25:39.282 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:25:39.283 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:25:39.284 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:25:39.284 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:25:39.285 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:25:39.287 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:25:39.287 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:25:39.288 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:39.288 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:39.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:25:39.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:25:39.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:25:39.291 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:25:39.292 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:25:39.293 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:39.294 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:25:39.295 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:39.296 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:25:39.297 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:39.298 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:39.299 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:25:39.300 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:25:39.301 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:25:39.302 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:25:39.304 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:25:39.305 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:39.306 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:25:39.307 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:39.308 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:25:39.309 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:25:39.310 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:25:39.310 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:25:39.311 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:25:39.311 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:25:39.312 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:25:39.313 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 45.0299ms
2026-02-11 15:25:39.314 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:25:39.315 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" completed keep alive response.
2026-02-11 15:25:39.316 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:25:39.317 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:39.318 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:25:39.319 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 62.2988ms
2026-02-11 15:25:43.716 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:25:43.716 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 15:25:49.462 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:25:49.464 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:25:49.465 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:25:49.465 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:25:49.466 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:25:49.467 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:25:49.467 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:25:49.468 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:25:49.469 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:25:49.470 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:25:49.471 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:25:49.472 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:25:49.473 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:25:49.473 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:25:49.474 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:25:49.475 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:49.476 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:49.476 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:49.477 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:49.478 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:49.478 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:49.479 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:25:49.480 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:25:49.481 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:25:49.482 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:25:49.482 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:25:49.483 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:25:49.484 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:25:49.485 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:25:49.486 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:25:49.487 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:25:49.488 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:25:49.488 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:49.489 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:49.490 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:25:49.490 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:25:49.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:25:49.492 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:25:49.493 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:25:49.494 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:49.495 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:25:49.496 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:25:49.496 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:25:49.497 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:25:49.499 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:25:49.499 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:25:49.500 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:25:49.500 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:25:49.501 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:25:49.501 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 28.1629ms
2026-02-11 15:25:49.503 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:25:49.504 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" completed keep alive response.
2026-02-11 15:25:49.506 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:25:49.506 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:25:49.507 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:25:49.508 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 45.8059ms
2026-02-11 15:25:53.717 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:25:53.718 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 15:26:03.729 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:26:03.731 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:26:10.778 +03:00 [DBG] Connection id "0HNJ9D0UIV9FB" accepted.
2026-02-11 15:26:10.779 +03:00 [DBG] Connection id "0HNJ9D0UIV9FB" started.
2026-02-11 15:26:10.786 +03:00 [DBG] Connection 0HNJ9D0UIV9FB established using the following protocol: "Tls13"
2026-02-11 15:26:10.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Чикаго/week - null null
2026-02-11 15:26:10.790 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Чикаго/week'
2026-02-11 15:26:10.791 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Чикаго/week'
2026-02-11 15:26:10.791 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:26:10.792 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:10.792 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:10.793 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:26:10.794 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:26:10.794 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:26:10.795 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:26:10.796 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:26:10.797 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:26:10.798 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:26:10.799 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:26:10.799 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:26:10.800 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:26:10.801 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:26:10.802 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:26:10.803 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:26:10.803 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:26:10.804 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:26:10.805 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A7%D0%B8%D0%BA%D0%B0%D0%B3%D0%BE&count=1&language=ru
2026-02-11 15:26:10.806 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A7%D0%B8%D0%BA%D0%B0%D0%B3%D0%BE&count=1&language=ru
2026-02-11 15:26:11.064 +03:00 [INF] Received HTTP response headers after 257.5386ms - 200
2026-02-11 15:26:11.065 +03:00 [INF] End processing HTTP request after 260.0777ms - 200
2026-02-11 15:26:11.066 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.85003&longitude=-87.65005&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:26:11.067 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.85003&longitude=-87.65005&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:26:11.356 +03:00 [INF] Received HTTP response headers after 288.9655ms - 200
2026-02-11 15:26:11.357 +03:00 [INF] End processing HTTP request after 291.3214ms - 200
2026-02-11 15:26:11.358 +03:00 [INF] Endpoint = week, City = Чикаго, Date = -, Latency = 553ms, CacheHit = FALSE
2026-02-11 15:26:11.360 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:26:11.361 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:26:11.362 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:26:11.363 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:26:11.364 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:26:11.364 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:26:11.365 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:26:11.366 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:26:11.367 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:11.368 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:11.368 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:26:11.369 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:26:11.370 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:26:11.370 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:26:11.371 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:26:11.373 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:26:11.374 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:11.375 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:26:11.376 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:11.376 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:11.377 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:26:11.378 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:26:11.379 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:26:11.381 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:26:11.381 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:26:11.381 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:26:11.382 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:26:11.383 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:26:11.384 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 584.8645ms
2026-02-11 15:26:11.384 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:26:11.385 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:26:11.386 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:11.386 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:11.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Чикаго/week - 200 null application/json; charset=utf-8 598.9044ms
2026-02-11 15:26:13.732 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:26:13.733 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:26:17.429 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:26:17.431 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:26:17.431 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:26:17.432 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:17.433 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:17.433 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:17.434 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:17.435 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:26:17.436 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:26:17.436 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:26:17.437 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:26:17.438 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:26:17.439 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:26:17.440 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:26:17.441 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:26:17.442 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:17.442 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:17.443 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:17.444 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:17.444 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:17.445 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:17.446 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:17.446 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:17.447 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:26:17.448 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:26:17.449 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:17.449 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:17.450 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:26:17.451 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:17.452 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:26:17.453 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:26:17.454 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:26:17.454 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:17.455 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:17.456 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:26:17.457 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:26:17.458 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:26:17.458 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:26:17.459 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:26:17.461 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:17.461 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:26:17.462 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:17.463 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:17.464 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:26:17.466 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:26:17.466 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:26:17.467 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:26:17.467 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:26:17.468 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:26:17.469 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 28.7217ms
2026-02-11 15:26:17.470 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:17.470 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" completed keep alive response.
2026-02-11 15:26:17.471 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:26:17.472 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:17.472 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:17.473 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 44.2489ms
2026-02-11 15:26:23.743 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:26:23.744 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:26:29.318 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:26:29.319 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:26:29.320 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:26:29.321 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:29.321 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:29.322 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:29.322 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:29.323 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:26:29.324 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:26:29.325 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:26:29.326 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:26:29.327 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:26:29.327 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:26:29.328 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:26:29.329 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:26:29.330 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:29.331 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:29.331 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:29.332 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:29.333 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:29.334 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:29.334 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:29.335 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:29.336 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:26:29.336 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:26:29.337 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:29.338 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:29.339 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:26:29.339 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:29.340 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:26:29.342 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:26:29.342 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:26:29.343 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:29.343 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:29.344 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:26:29.345 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:26:29.345 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:26:29.346 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:26:29.347 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:26:29.348 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:29.349 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:26:29.350 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:29.351 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:29.352 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:26:29.353 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:26:29.353 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:26:29.354 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:26:29.354 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:26:29.355 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:26:29.356 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 27.8095ms
2026-02-11 15:26:29.357 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:29.357 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" completed keep alive response.
2026-02-11 15:26:29.358 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:26:29.359 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:29.359 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:29.360 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 42.7681ms
2026-02-11 15:26:31.517 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:26:31.518 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:26:31.519 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:26:31.520 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:31.520 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:31.521 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:26:31.521 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:31.522 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:26:31.523 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:26:31.523 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:26:31.524 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:26:31.525 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:26:31.526 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:26:31.527 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:26:31.527 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:26:31.528 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:31.529 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:31.529 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:31.530 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:31.531 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:31.531 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:31.532 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:26:31.533 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:26:31.533 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:26:31.534 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:26:31.535 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:31.535 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:31.536 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:26:31.536 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:26:31.537 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:26:31.538 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:26:31.539 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:26:31.539 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:31.540 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:31.541 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:26:31.541 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:26:31.542 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:26:31.543 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:26:31.544 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:26:31.545 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:31.546 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:26:31.547 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:26:31.548 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:31.549 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:26:31.550 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:26:31.550 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:26:31.551 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:26:31.551 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:26:31.552 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:26:31.552 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 25.7151ms
2026-02-11 15:26:31.553 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:26:31.553 +03:00 [DBG] Connection id "0HNJ9D0UIV9FA" completed keep alive response.
2026-02-11 15:26:31.554 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:26:31.555 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:31.555 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:26:31.556 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 39.5426ms
2026-02-11 15:26:33.749 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:26:33.749 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:26:35.587 +03:00 [DBG] Connection id "0HNJ9D0UIV9FB" received FIN.
2026-02-11 15:26:35.588 +03:00 [DBG] Connection id "0HNJ9D0UIV9FB" is closed. The last processed stream ID was 1.
2026-02-11 15:26:35.588 +03:00 [DBG] The connection queue processing loop for 0HNJ9D0UIV9FB completed.
2026-02-11 15:26:35.589 +03:00 [DBG] Connection id "0HNJ9D0UIV9FB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:26:35.598 +03:00 [DBG] Connection id "0HNJ9D0UIV9FB" stopped.
2026-02-11 15:26:43.760 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:26:43.761 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-11 15:26:56.840 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:26:57.055 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:26:57.057 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:26:57.061 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 15:26:57.064 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:26:57.066 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:26:57.068 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:27:04.446 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:27:04.663 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:04.667 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:04.672 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:27:04.674 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:04.675 +03:00 [DBG] Created DbConnection. (1ms).
2026-02-11 15:27:04.676 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:04.680 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:04.682 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:04.684 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:04.684 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:04.685 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:04.686 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:04.687 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:04.689 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:04.689 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:04.689 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:07.764 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:27:07.968 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:07.976 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:07.980 +03:00 [DBG] Created DbConnection. (2ms).
2026-02-11 15:27:07.982 +03:00 [DBG] Migrating using database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.983 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:07.984 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:07.985 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.988 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.989 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.991 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:07.991 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:07.991 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:07.991 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.991 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.991 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.991 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:07.991 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:07.994 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:07.997 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:27:07.999 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-11 15:27:07.999 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2026-02-11 15:27:08.002 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-11 15:27:08.012 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-11 15:27:08.013 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.014 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:08.045 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:27:08.045 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:27:08.045 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:27:08.046 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.046 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.046 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-11 15:27:08.049 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-11 15:27:08.049 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.049 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:08.049 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:08.049 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:08.049 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.050 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.050 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.050 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:08.051 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-11 15:27:08.051 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-11 15:27:08.051 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-11 15:27:08.051 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.051 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.052 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-11 15:27:08.053 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-11 15:27:08.053 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.053 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:08.053 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.053 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.053 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:08.053 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:08.053 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:08.054 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-11 15:27:08.054 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-11 15:27:08.055 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.055 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:27:08.055 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.055 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:08.059 +03:00 [INF] Applying migration '20260202104928_InitialStatistic'.
2026-02-11 15:27:08.066 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.066 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.067 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-11 15:27:08.816 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2026-02-11 15:27:08.817 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:27:08.817 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:27:08.817 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:27:08.817 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-11 15:27:08.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-11 15:27:08.817 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 15:27:08.817 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:27:08.817 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 15:27:08.817 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-11 15:27:08.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-11 15:27:08.818 +03:00 [DBG] Committing transaction.
2026-02-11 15:27:08.819 +03:00 [DBG] Committed transaction.
2026-02-11 15:27:08.819 +03:00 [DBG] Disposing transaction.
2026-02-11 15:27:08.819 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:08.819 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:08.820 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:08.820 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:08.820 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:17.570 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:27:17.647 +03:00 [DBG] Hosting starting
2026-02-11 15:27:17.746 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:27:17.747 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:27:17.748 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:27:17.748 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:27:17.749 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:27:17.749 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:27:17.769 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:27:17.770 +03:00 [INF] Hosting environment: Development
2026-02-11 15:27:17.770 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:27:17.771 +03:00 [DBG] Hosting started
2026-02-11 15:27:17.954 +03:00 [DBG] Connection id "0HNJ9D3IMH7LT" accepted.
2026-02-11 15:27:17.955 +03:00 [DBG] Connection id "0HNJ9D3IMH7LT" started.
2026-02-11 15:27:17.965 +03:00 [DBG] Connection id "0HNJ9D3IMH7LU" received FIN.
2026-02-11 15:27:17.965 +03:00 [DBG] Connection id "0HNJ9D3IMH7LT" received FIN.
2026-02-11 15:27:17.966 +03:00 [DBG] Connection id "0HNJ9D3IMH7LU" accepted.
2026-02-11 15:27:17.967 +03:00 [DBG] Connection id "0HNJ9D3IMH7LU" started.
2026-02-11 15:27:17.970 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:27:17.970 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:27:17.989 +03:00 [DBG] Connection id "0HNJ9D3IMH7LU" stopped.
2026-02-11 15:27:17.990 +03:00 [DBG] Connection id "0HNJ9D3IMH7LT" stopped.
2026-02-11 15:27:17.992 +03:00 [DBG] Connection id "0HNJ9D3IMH7LU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:27:17.992 +03:00 [DBG] Connection id "0HNJ9D3IMH7LT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:27:18.162 +03:00 [DBG] Connection id "0HNJ9D3IMH7LV" accepted.
2026-02-11 15:27:18.165 +03:00 [DBG] Connection id "0HNJ9D3IMH7LV" started.
2026-02-11 15:27:18.189 +03:00 [DBG] Connection 0HNJ9D3IMH7LV established using the following protocol: "Tls13"
2026-02-11 15:27:18.221 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:27:18.280 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:27:18.292 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:27:18.293 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:27:18.296 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:27:18.326 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:27:18.327 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:27:18.336 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:27:18.336 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:27:18.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 119.6503ms
2026-02-11 15:27:18.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:27:18.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.8314ms
2026-02-11 15:27:18.388 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:27:18.409 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.6916ms
2026-02-11 15:27:18.468 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:27:18.471 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:27:18.471 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:27:18.472 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:27:18.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.5148ms
2026-02-11 15:27:24.418 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/ /week - null null
2026-02-11 15:27:24.421 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/ /week'
2026-02-11 15:27:24.423 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/ /week'
2026-02-11 15:27:24.424 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:24.426 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:24.426 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:24.433 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:24.447 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:27:24.449 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:27:24.449 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:27:24.450 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:27:24.452 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:27:24.452 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:27:24.454 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:27:24.509 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:27:24.515 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:27:24.521 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:27:24.523 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:27:24.525 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:27:24.525 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:27:24.526 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:27:24.529 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:27:24.531 +03:00 [DBG] The request has model state errors, returning an error response.
2026-02-11 15:27:24.532 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-11 15:27:24.534 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:27:24.536 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:27:24.536 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-11 15:27:24.538 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-11 15:27:24.539 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-11 15:27:24.553 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 98.5399ms
2026-02-11 15:27:24.555 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:24.556 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/ /week - 400 null application/problem+json; charset=utf-8 138.8591ms
2026-02-11 15:27:36.847 +03:00 [DBG] Connection id "0HNJ9D3IMH7M0" accepted.
2026-02-11 15:27:36.847 +03:00 [DBG] Connection id "0HNJ9D3IMH7M0" received FIN.
2026-02-11 15:27:36.848 +03:00 [DBG] Connection id "0HNJ9D3IMH7M0" started.
2026-02-11 15:27:36.848 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" accepted.
2026-02-11 15:27:36.853 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" started.
2026-02-11 15:27:36.853 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:27:36.855 +03:00 [DBG] Connection id "0HNJ9D3IMH7M0" stopped.
2026-02-11 15:27:36.856 +03:00 [DBG] Connection id "0HNJ9D3IMH7M0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:27:36.856 +03:00 [DBG] Connection 0HNJ9D3IMH7M1 established using the following protocol: "Tls13"
2026-02-11 15:27:36.859 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 15:27:36.861 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:27:36.862 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:27:36.863 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:36.863 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:36.864 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:36.865 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:36.866 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:27:36.866 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:27:36.867 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:27:36.868 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:27:36.869 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:27:36.870 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:27:36.871 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:27:36.876 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:27:36.876 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:27:36.877 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:27:36.878 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:27:36.879 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:27:36.879 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:27:36.880 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:27:36.895 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 15:27:36.901 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-11 15:27:37.121 +03:00 [INF] Received HTTP response headers after 218.0451ms - 200
2026-02-11 15:27:37.123 +03:00 [INF] End processing HTTP request after 228.9465ms - 200
2026-02-11 15:27:37.131 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:27:37.132 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 15:27:37.383 +03:00 [INF] Received HTTP response headers after 249.8559ms - 200
2026-02-11 15:27:37.384 +03:00 [INF] End processing HTTP request after 252.3115ms - 200
2026-02-11 15:27:37.390 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 506ms, CacheHit = FALSE
2026-02-11 15:27:37.616 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:37.632 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:27:37.665 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:27:37.668 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:27:37.670 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:27:37.677 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:27:37.705 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:37.710 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:27:37.712 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:37.718 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:37.722 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:37.725 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:37.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:27:37.731 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:27:37.744 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:27:37.751 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:27:37.756 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:37.760 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 12ms reading results.
2026-02-11 15:27:37.762 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:37.764 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:27:37.770 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:27:37.771 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:27:37.778 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:27:37.779 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:27:37.779 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:27:37.780 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:27:37.780 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:27:37.781 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:27:37.788 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 917.3288ms
2026-02-11 15:27:37.789 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:37.791 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:27:37.792 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:37.794 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:37.795 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:27:37.796 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 936.484ms
2026-02-11 15:27:41.436 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:27:41.438 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:27:41.439 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:27:41.439 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:27:41.440 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:41.441 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:41.441 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:27:41.445 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:27:41.446 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:27:41.447 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:27:41.448 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:27:41.449 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:27:41.450 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:27:41.451 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:27:41.452 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:27:41.454 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:41.457 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:41.458 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:41.459 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:41.460 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:41.460 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:41.461 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:41.462 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:41.462 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:27:41.463 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:27:41.464 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:27:41.465 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:27:41.466 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:27:41.466 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:27:41.467 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:27:41.468 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:27:41.469 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:27:41.469 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:27:41.470 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:27:41.471 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:27:41.504 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:41.529 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 15:27:41.614 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 15:27:41.628 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:41.628 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:41.629 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:41.630 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:41.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:41.632 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:41.632 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:41.633 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:27:41.634 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:27:41.636 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:41.637 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:27:41.638 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:41.638 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:41.642 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 15:27:41.650 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:27:41.653 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:41.653 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:41.654 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:41.655 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:41.655 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:41.656 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:27:41.657 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:27:41.659 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:41.660 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:27:41.661 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:41.662 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:41.663 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:27:41.664 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:27:41.665 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:27:41.665 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:27:41.666 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:27:41.666 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:27:41.672 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 221.1635ms
2026-02-11 15:27:41.673 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:27:41.673 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:27:41.674 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:41.675 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:41.675 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:41.676 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 240.0972ms
2026-02-11 15:27:45.321 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-11 15:27:45.322 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:27:45.323 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-11 15:27:45.324 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:45.324 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:45.325 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:45.325 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:45.326 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:27:45.327 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:27:45.327 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:27:45.328 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:27:45.329 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:27:45.330 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:27:45.331 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:27:45.334 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:27:45.335 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:27:45.336 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:27:45.337 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:27:45.337 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:27:45.338 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:27:45.339 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:27:45.340 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = 0ms, CacheHit = TRUE
2026-02-11 15:27:45.347 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:45.349 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:27:45.350 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:27:45.351 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:27:45.352 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:27:45.352 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:27:45.353 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:45.354 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:45.354 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:45.355 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:45.356 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:45.356 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:45.357 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:45.358 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:27:45.359 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 16), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:27:45.360 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:27:45.361 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:45.362 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:27:45.363 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:45.364 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:45.365 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:27:45.366 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:27:45.367 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:27:45.368 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:27:45.368 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:27:45.369 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:27:45.369 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:27:45.370 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 15:27:45.371 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 39.7342ms
2026-02-11 15:27:45.371 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 15:27:45.372 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:27:45.373 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:45.373 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:45.374 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:45.375 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 54.2251ms
2026-02-11 15:27:48.994 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:27:48.996 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:27:48.996 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:27:48.997 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:27:48.998 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:48.998 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:48.999 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:27:48.999 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:27:49.000 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:27:49.001 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:27:49.002 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:27:49.003 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:27:49.004 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:27:49.005 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:27:49.006 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:27:49.006 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:49.007 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:49.008 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:49.008 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:49.009 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:49.010 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:49.010 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:49.011 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:49.012 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:27:49.013 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:27:49.013 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:27:49.014 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:27:49.015 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:27:49.016 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:27:49.017 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:27:49.017 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:27:49.018 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:27:49.019 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:27:49.020 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:27:49.020 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:27:49.022 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:49.025 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:49.025 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:49.026 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:49.026 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:49.027 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:49.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:49.028 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:49.029 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:27:49.030 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:27:49.032 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:49.032 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:27:49.033 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:49.034 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:49.036 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:49.037 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:49.038 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:49.038 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:49.039 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:49.040 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:27:49.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:27:49.042 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:49.043 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:27:49.044 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:49.044 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:49.045 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:27:49.046 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:27:49.047 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:27:49.047 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:27:49.048 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:27:49.049 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:27:49.050 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 44.9203ms
2026-02-11 15:27:49.051 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:27:49.051 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:27:49.052 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:49.052 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:49.053 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:49.054 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 60.5716ms
2026-02-11 15:27:58.398 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:27:58.400 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:27:58.400 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:27:58.401 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:27:58.402 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:58.403 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:27:58.403 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:27:58.406 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:27:58.407 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:27:58.408 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:27:58.409 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:27:58.410 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:27:58.410 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:27:58.411 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:27:58.412 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:27:58.413 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:58.413 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:58.414 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:58.415 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:58.415 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:58.416 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:58.417 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:27:58.417 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:27:58.418 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:27:58.419 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:27:58.419 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:27:58.420 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:27:58.421 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:27:58.421 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:27:58.423 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:27:58.425 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:27:58.441 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:27:58.442 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:27:58.443 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:27:58.443 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:58.444 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:58.445 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:27:58.445 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:27:58.446 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:27:58.447 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:27:58.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:27:58.449 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:58.450 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:27:58.451 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:27:58.452 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:58.453 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:27:58.454 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:27:58.454 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:27:58.455 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:27:58.455 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:27:58.456 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:27:58.457 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 46.172ms
2026-02-11 15:27:58.458 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:27:58.459 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:27:58.459 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:27:58.460 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:27:58.461 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:27:58.461 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 63.4133ms
2026-02-11 15:28:20.792 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=%20 - null null
2026-02-11 15:28:20.797 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 15:28:20.797 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 15:28:20.798 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:28:20.799 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:20.799 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:20.800 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:28:20.803 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:28:20.804 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:20.805 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:20.806 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:28:20.807 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:20.807 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:20.808 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:28:20.809 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:28:20.810 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:28:20.811 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:28:20.811 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:28:20.812 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:28:20.812 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:28:20.813 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:28:20.814 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:20.815 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:20.815 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:20.816 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:20.818 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:20.819 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:20.819 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:20.820 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:20.820 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:28:20.821 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:28:20.821 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 13.3555ms
2026-02-11 15:28:20.822 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:28:20.823 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=%20 - 400 null text/plain; charset=utf-8 30.4564ms
2026-02-11 15:28:29.703 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:28:29.705 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:28:29.705 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:28:29.706 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:29.707 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:29.707 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:29.707 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:29.708 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:28:29.709 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:29.710 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:29.710 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:28:29.711 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:29.712 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:29.713 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:29.714 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:29.714 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:29.715 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:29.716 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:29.717 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:29.717 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:29.718 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:29.719 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:29.719 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:29.720 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:29.721 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:28:29.721 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:29.722 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:29.723 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:29.723 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:29.724 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:28:29.725 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:28:29.726 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:28:29.726 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:29.727 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:29.728 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:28:29.728 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:28:29.729 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:28:29.730 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:29.731 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:29.732 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:29.733 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:28:29.733 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:29.734 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:29.735 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:29.736 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:29.736 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:29.737 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:29.737 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:28:29.738 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:28:29.739 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 25.7317ms
2026-02-11 15:28:29.739 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:29.740 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:28:29.740 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:28:29.741 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:29.742 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:29.742 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 39.2508ms
2026-02-11 15:28:39.978 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Москва?date=%202026-02-11 - null null
2026-02-11 15:28:39.980 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Москва'
2026-02-11 15:28:39.980 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Москва'
2026-02-11 15:28:39.981 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:28:39.982 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:39.983 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:39.984 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:28:39.984 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:28:39.985 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:39.986 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:39.987 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:28:39.988 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:39.989 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:39.989 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:28:39.990 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:28:39.991 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:28:39.992 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:28:39.993 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:28:39.993 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:28:39.994 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:28:39.994 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:28:39.995 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:39.996 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:39.997 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:39.997 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:40.000 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 15:28:40.001 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-11 15:28:40.056 +03:00 [INF] Received HTTP response headers after 54.3891ms - 200
2026-02-11 15:28:40.056 +03:00 [INF] End processing HTTP request after 56.4757ms - 200
2026-02-11 15:28:40.058 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:28:40.059 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:28:40.306 +03:00 [INF] Received HTTP response headers after 247.0064ms - 200
2026-02-11 15:28:40.307 +03:00 [INF] End processing HTTP request after 249.4424ms - 200
2026-02-11 15:28:40.309 +03:00 [INF] Endpoint = day, City = Москва, Date = 2026-02-11, Latency = 309ms, CacheHit = FALSE
2026-02-11 15:28:40.310 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:28:40.311 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:28:40.312 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:28:40.313 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:28:40.313 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:28:40.314 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:28:40.314 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:28:40.315 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:28:40.315 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:40.316 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:40.317 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:28:40.317 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:28:40.318 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:28:40.319 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:28:40.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:28:40.321 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:28:40.322 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:40.323 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:28:40.324 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:40.324 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:40.325 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:28:40.326 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:28:40.327 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:40.328 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:40.329 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:40.329 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:40.330 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:28:40.330 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:28:40.332 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 342.6432ms
2026-02-11 15:28:40.333 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:28:40.334 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:28:40.334 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:40.335 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:40.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Москва?date=%202026-02-11 - 200 null application/json; charset=utf-8 358.1721ms
2026-02-11 15:28:45.106 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:28:45.107 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:28:45.108 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:28:45.109 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:45.110 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:45.110 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:45.111 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:45.111 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:28:45.112 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:45.113 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:45.114 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:28:45.115 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:45.116 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:45.117 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:45.117 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:45.118 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:45.119 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:45.120 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:45.120 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:45.121 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:45.122 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:45.122 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:45.123 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:45.124 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:45.124 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:28:45.125 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:45.126 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:45.127 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:45.127 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:45.128 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:28:45.130 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:28:45.130 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:28:45.131 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:45.131 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:45.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:28:45.133 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:28:45.133 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:28:45.134 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:45.135 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:45.136 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:45.137 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:28:45.138 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:45.139 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:45.139 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:45.141 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:45.141 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:45.142 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:45.142 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:28:45.143 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:28:45.144 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 26.9982ms
2026-02-11 15:28:45.144 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:45.145 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:28:45.146 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:28:45.146 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:45.147 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:45.148 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 41.7489ms
2026-02-11 15:28:50.360 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:28:50.361 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:28:50.362 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:28:50.363 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:50.363 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:50.364 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:50.364 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:50.365 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:28:50.366 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:50.367 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:50.367 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:28:50.368 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:50.369 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:50.370 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:50.371 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:50.371 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:50.372 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:50.373 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:50.373 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:50.374 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:50.375 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:50.375 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:50.376 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:50.376 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:50.377 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:28:50.378 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:50.378 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:50.379 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:50.380 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:50.380 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:28:50.382 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:28:50.382 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:28:50.383 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:50.383 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:50.384 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:28:50.385 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:28:50.386 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:28:50.386 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:50.387 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:50.388 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:50.389 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:28:50.390 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:50.390 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:50.391 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:50.392 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:50.393 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:50.393 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:50.394 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:28:50.394 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:28:50.395 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 25.0255ms
2026-02-11 15:28:50.396 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:50.396 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:28:50.397 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:28:50.397 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:50.398 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:50.399 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 38.9815ms
2026-02-11 15:28:52.464 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:28:52.465 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:28:52.466 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:28:52.467 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:52.467 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:52.468 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:52.468 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:52.469 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:28:52.470 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:52.471 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:52.471 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:28:52.472 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:52.473 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:52.474 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:52.475 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:52.476 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:52.476 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:52.477 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:52.478 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:52.478 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:52.479 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:52.479 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:52.480 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:52.481 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:52.482 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:28:52.482 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:52.483 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:52.484 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:52.485 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:52.486 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:28:52.487 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:28:52.487 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:28:52.488 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:52.489 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:52.489 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:28:52.490 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:28:52.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:28:52.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:52.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:52.494 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:52.494 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:28:52.495 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:52.496 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:52.497 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:52.498 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:52.498 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:52.499 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:52.499 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:28:52.500 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:28:52.501 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 26.6353ms
2026-02-11 15:28:52.501 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:52.502 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:28:52.503 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:28:52.503 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:52.504 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:52.505 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 41.278ms
2026-02-11 15:28:53.557 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:28:53.559 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:28:53.560 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:28:53.560 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:53.561 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:53.561 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:28:53.562 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:53.562 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:28:53.564 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:28:53.564 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:28:53.565 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:28:53.566 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:28:53.567 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:28:53.568 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:53.569 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:28:53.569 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:53.570 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:53.571 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:53.571 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:53.572 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:53.573 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:53.573 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:28:53.574 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:28:53.575 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:53.575 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:28:53.576 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:53.577 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:53.578 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:28:53.579 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:28:53.580 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:28:53.581 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:28:53.581 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:28:53.582 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:53.583 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:53.583 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:28:53.584 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:28:53.585 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:28:53.585 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:53.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:28:53.588 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:53.588 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:28:53.589 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:28:53.590 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:53.591 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:28:53.592 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:28:53.592 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:28:53.593 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:28:53.593 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:28:53.594 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:28:53.595 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 27.2506ms
2026-02-11 15:28:53.596 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:28:53.596 +03:00 [DBG] Connection id "0HNJ9D3IMH7M1" completed keep alive response.
2026-02-11 15:28:53.597 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:28:53.598 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:28:53.598 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:28:53.599 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 42.0425ms
2026-02-11 15:33:56.960 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:33:57.048 +03:00 [DBG] Hosting starting
2026-02-11 15:33:57.160 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:33:57.161 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:33:57.161 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:33:57.162 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:33:57.162 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:33:57.163 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:33:57.184 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:33:57.185 +03:00 [INF] Hosting environment: Development
2026-02-11 15:33:57.185 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:33:57.186 +03:00 [DBG] Hosting started
2026-02-11 15:33:57.291 +03:00 [DBG] Connection id "0HNJ9D79MT5GO" accepted.
2026-02-11 15:33:57.291 +03:00 [DBG] Connection id "0HNJ9D79MT5GP" accepted.
2026-02-11 15:33:57.296 +03:00 [DBG] Connection id "0HNJ9D79MT5GP" received FIN.
2026-02-11 15:33:57.296 +03:00 [DBG] Connection id "0HNJ9D79MT5GO" received FIN.
2026-02-11 15:33:57.296 +03:00 [DBG] Connection id "0HNJ9D79MT5GO" started.
2026-02-11 15:33:57.297 +03:00 [DBG] Connection id "0HNJ9D79MT5GP" started.
2026-02-11 15:33:57.322 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:33:57.322 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:33:57.341 +03:00 [DBG] Connection id "0HNJ9D79MT5GP" stopped.
2026-02-11 15:33:57.341 +03:00 [DBG] Connection id "0HNJ9D79MT5GO" stopped.
2026-02-11 15:33:57.344 +03:00 [DBG] Connection id "0HNJ9D79MT5GO" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:33:57.344 +03:00 [DBG] Connection id "0HNJ9D79MT5GP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:33:57.522 +03:00 [DBG] Connection id "0HNJ9D79MT5GQ" accepted.
2026-02-11 15:33:57.524 +03:00 [DBG] Connection id "0HNJ9D79MT5GQ" started.
2026-02-11 15:33:57.553 +03:00 [DBG] Connection 0HNJ9D79MT5GQ established using the following protocol: "Tls13"
2026-02-11 15:33:57.592 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:33:57.654 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:33:57.667 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:33:57.668 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:33:57.672 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:33:57.706 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:33:57.707 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:33:57.718 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:33:57.719 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:33:57.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 133.4092ms
2026-02-11 15:33:57.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:33:57.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.9283ms
2026-02-11 15:33:57.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:33:57.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.7345ms
2026-02-11 15:33:57.858 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:33:57.860 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:33:57.860 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:33:57.861 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:33:57.867 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4721ms
2026-02-11 15:34:14.721 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майами?date=%20 - null null
2026-02-11 15:34:14.724 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майами'
2026-02-11 15:34:14.726 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Майами'
2026-02-11 15:34:14.727 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:34:14.729 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:14.729 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:14.735 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:34:14.749 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:34:14.751 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:34:14.751 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:34:14.753 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:34:14.754 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:34:14.755 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:34:14.756 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:34:14.813 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:34:14.818 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:34:14.826 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:34:14.828 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:34:14.829 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:34:14.830 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:34:14.831 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:34:14.836 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:34:14.837 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:14.838 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:14.839 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:14.840 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:14.843 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:34:14.845 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:34:14.845 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:34:14.846 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:34:14.847 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:34:14.847 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:34:14.850 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 92.8813ms
2026-02-11 15:34:14.851 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:34:14.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майами?date=%20 - 400 null text/plain; charset=utf-8 132.4828ms
2026-02-11 15:34:23.861 +03:00 [DBG] Connection id "0HNJ9D79MT5GR" accepted.
2026-02-11 15:34:23.861 +03:00 [DBG] Connection id "0HNJ9D79MT5GR" received FIN.
2026-02-11 15:34:23.862 +03:00 [DBG] Connection id "0HNJ9D79MT5GR" started.
2026-02-11 15:34:23.862 +03:00 [DBG] Connection id "0HNJ9D79MT5GS" accepted.
2026-02-11 15:34:23.866 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:34:23.866 +03:00 [DBG] Connection id "0HNJ9D79MT5GS" started.
2026-02-11 15:34:23.868 +03:00 [DBG] Connection id "0HNJ9D79MT5GR" stopped.
2026-02-11 15:34:23.868 +03:00 [DBG] Connection id "0HNJ9D79MT5GR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:34:23.871 +03:00 [DBG] Connection 0HNJ9D79MT5GS established using the following protocol: "Tls13"
2026-02-11 15:34:23.873 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:34:23.875 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:34:23.876 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:34:23.877 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:23.877 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:23.878 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:23.878 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:23.882 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:34:23.883 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:34:23.884 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:34:23.885 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:34:23.886 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:34:23.887 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:34:23.888 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:23.892 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:23.893 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:23.896 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:23.897 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:23.898 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:23.899 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:23.899 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:23.900 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:23.901 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:23.902 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:23.903 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:34:23.904 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:23.904 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:23.905 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:23.906 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:23.907 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:23.907 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:34:23.908 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:23.909 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:23.909 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:23.910 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:24.142 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:34:24.168 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 15:34:24.257 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 15:34:24.272 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:34:24.278 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:34:24.280 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:24.286 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:24.288 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:24.291 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:24.294 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:34:24.298 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:24.309 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:24.314 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:24.317 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 4ms reading results.
2026-02-11 15:34:24.319 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:24.321 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:34:24.325 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 15:34:24.331 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:34:24.334 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:24.335 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:24.335 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:24.336 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:24.337 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:24.338 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:24.339 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:24.342 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:24.342 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:34:24.343 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:24.344 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:24.345 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:34:24.346 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:34:24.346 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:34:24.347 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:34:24.347 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:34:24.348 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:34:24.357 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 469.543ms
2026-02-11 15:34:24.358 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:24.359 +03:00 [DBG] Connection id "0HNJ9D79MT5GS" completed keep alive response.
2026-02-11 15:34:24.360 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:34:24.362 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:24.363 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:34:24.364 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 490.7569ms
2026-02-11 15:34:35.845 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Майами?date=%202026-02-11 - null null
2026-02-11 15:34:35.847 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Майами'
2026-02-11 15:34:35.847 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Майами'
2026-02-11 15:34:35.848 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:34:35.849 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:35.849 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:35.850 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:34:35.851 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:34:35.852 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:34:35.853 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:34:35.853 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:34:35.855 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:34:35.856 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:34:35.857 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:34:35.858 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:34:35.859 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:34:35.859 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:34:35.860 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:34:35.861 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:34:35.861 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:34:35.862 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:34:35.863 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:35.864 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:35.864 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:35.865 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:35.877 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-11 15:34:35.883 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B0%D0%B9%D0%B0%D0%BC%D0%B8&count=1&language=ru
2026-02-11 15:34:36.151 +03:00 [INF] Received HTTP response headers after 265.9687ms - 200
2026-02-11 15:34:36.154 +03:00 [INF] End processing HTTP request after 277.8865ms - 200
2026-02-11 15:34:36.164 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:34:36.164 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=25.77427&longitude=-80.19366&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:34:36.442 +03:00 [INF] Received HTTP response headers after 277.3888ms - 200
2026-02-11 15:34:36.443 +03:00 [INF] End processing HTTP request after 279.6523ms - 200
2026-02-11 15:34:36.450 +03:00 [INF] Endpoint = day, City = Майами, Date = 2026-02-11, Latency = 583ms, CacheHit = FALSE
2026-02-11 15:34:36.479 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:34:36.495 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:34:36.520 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:34:36.523 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:34:36.524 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:34:36.532 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:34:36.562 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:34:36.563 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:34:36.563 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:36.564 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:36.566 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:36.566 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:36.567 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:36.568 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:34:36.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:34:36.575 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:34:36.578 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:36.579 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 8ms reading results.
2026-02-11 15:34:36.580 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:36.581 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:36.587 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:34:36.588 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:34:36.594 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:34:36.595 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:34:36.596 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:34:36.596 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:34:36.597 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:34:36.597 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:34:36.601 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 744.758ms
2026-02-11 15:34:36.603 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:34:36.604 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:34:36.605 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:36.605 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:36.606 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Майами?date=%202026-02-11 - 200 null application/json; charset=utf-8 761.3639ms
2026-02-11 15:34:38.945 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:34:38.947 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:34:38.949 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:34:38.950 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:38.951 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:38.951 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:38.952 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:38.953 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:34:38.954 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:34:38.955 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:34:38.956 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:34:38.957 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:34:38.958 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:34:38.959 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:38.960 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:38.961 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:38.962 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:38.963 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:38.964 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:38.964 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:38.965 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:38.966 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:38.967 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:38.968 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:38.968 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:34:38.969 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:38.970 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:38.971 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:38.972 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:38.972 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:38.973 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:34:38.974 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:38.975 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:38.975 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:38.976 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:38.984 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:34:38.987 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:34:38.988 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:34:38.989 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:38.989 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:38.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:38.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:38.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:38.992 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:38.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:38.995 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:38.995 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:34:38.996 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:38.997 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:38.999 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:38.999 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:39.000 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:39.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:39.001 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:39.002 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:39.003 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:39.005 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:39.006 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:34:39.007 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:39.008 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:39.009 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:34:39.010 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:34:39.010 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:34:39.011 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:34:39.011 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:34:39.012 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:34:39.014 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 54.7915ms
2026-02-11 15:34:39.015 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:39.015 +03:00 [DBG] Connection id "0HNJ9D79MT5GS" completed keep alive response.
2026-02-11 15:34:39.016 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:34:39.016 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:39.017 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:39.018 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 72.8923ms
2026-02-11 15:34:42.765 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:34:42.767 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:34:42.767 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:34:42.768 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:42.769 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:42.769 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:42.770 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:42.770 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:34:42.771 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:34:42.772 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:34:42.773 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:34:42.774 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:34:42.775 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:34:42.776 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:42.778 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:42.779 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:42.780 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:42.781 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:42.781 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:42.782 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:42.783 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:42.783 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:42.784 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:42.785 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:42.786 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:34:42.787 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:42.787 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:42.788 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:42.789 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:42.790 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:42.790 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:34:42.791 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:42.792 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:42.793 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:42.793 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:42.795 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:34:42.796 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:34:42.796 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:34:42.797 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:42.798 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:42.798 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:42.799 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:42.800 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:42.800 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:42.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:42.803 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:42.803 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:34:42.805 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:42.805 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:42.806 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:42.807 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:42.808 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:42.808 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:42.809 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:42.810 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:42.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:42.812 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:42.813 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:34:42.814 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:42.814 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:42.815 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:34:42.816 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:34:42.817 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:34:42.817 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:34:42.818 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:34:42.818 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:34:42.819 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 43.3279ms
2026-02-11 15:34:42.820 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:42.821 +03:00 [DBG] Connection id "0HNJ9D79MT5GS" completed keep alive response.
2026-02-11 15:34:42.822 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:34:42.823 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:42.823 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:42.824 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 59.2024ms
2026-02-11 15:34:50.974 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:34:50.976 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:34:50.976 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:34:50.977 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:50.978 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:50.978 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:34:50.979 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:50.979 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:34:50.980 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:34:50.981 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:34:50.982 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:34:50.983 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:34:50.984 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:34:50.985 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:50.986 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:34:50.987 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:50.987 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:50.988 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:50.989 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:50.990 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:50.990 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:50.991 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:34:50.992 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:34:50.992 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:50.993 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:34:50.994 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:50.994 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:50.995 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:34:50.996 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:34:50.996 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:50.997 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:34:50.998 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:50.998 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:50.999 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:34:51.000 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:34:51.001 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:34:51.002 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:34:51.003 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:34:51.003 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:51.004 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:51.005 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:51.005 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:51.006 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:51.007 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:51.008 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:34:51.009 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:51.009 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:34:51.010 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:51.011 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:51.012 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:51.013 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:51.013 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:34:51.014 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:34:51.015 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:34:51.016 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:51.017 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:34:51.018 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:51.018 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:34:51.019 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:34:51.020 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:51.021 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:34:51.022 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:34:51.023 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:34:51.023 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:34:51.024 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:34:51.024 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:34:51.025 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 40.3545ms
2026-02-11 15:34:51.026 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:34:51.026 +03:00 [DBG] Connection id "0HNJ9D79MT5GS" completed keep alive response.
2026-02-11 15:34:51.027 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:34:51.028 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:34:51.028 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:34:51.029 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 55.0499ms
2026-02-11 15:36:35.880 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 15:36:45.895 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:36:45.898 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0348ms - processed: 0 items - remaining: 1 items
2026-02-11 15:36:55.911 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:36:55.911 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-11 15:37:05.918 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:37:05.919 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:37:15.935 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:37:15.936 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:37:25.948 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:37:25.949 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:37:35.961 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:37:35.961 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:37:45.968 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:37:45.969 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-11 15:37:55.982 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:37:55.982 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:38:05.999 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:38:06.000 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4914ms - processed: 0 items - remaining: 1 items
2026-02-11 15:49:56.985 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 15:49:57.055 +03:00 [DBG] Hosting starting
2026-02-11 15:49:57.215 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 15:49:57.216 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 15:49:57.216 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 15:49:57.217 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 15:49:57.217 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 15:49:57.218 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 15:49:57.240 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 15:49:57.241 +03:00 [INF] Hosting environment: Development
2026-02-11 15:49:57.241 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 15:49:57.242 +03:00 [DBG] Hosting started
2026-02-11 15:49:57.375 +03:00 [DBG] Connection id "0HNJ9DG7QVDIA" accepted.
2026-02-11 15:49:57.375 +03:00 [DBG] Connection id "0HNJ9DG7QVDIB" accepted.
2026-02-11 15:49:57.376 +03:00 [DBG] Connection id "0HNJ9DG7QVDIA" started.
2026-02-11 15:49:57.376 +03:00 [DBG] Connection id "0HNJ9DG7QVDIB" started.
2026-02-11 15:49:57.387 +03:00 [DBG] Connection id "0HNJ9DG7QVDIA" received FIN.
2026-02-11 15:49:57.388 +03:00 [DBG] Connection id "0HNJ9DG7QVDIB" received FIN.
2026-02-11 15:49:57.394 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:49:57.394 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:49:57.413 +03:00 [DBG] Connection id "0HNJ9DG7QVDIA" stopped.
2026-02-11 15:49:57.413 +03:00 [DBG] Connection id "0HNJ9DG7QVDIB" stopped.
2026-02-11 15:49:57.417 +03:00 [DBG] Connection id "0HNJ9DG7QVDIA" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:49:57.417 +03:00 [DBG] Connection id "0HNJ9DG7QVDIB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:49:57.663 +03:00 [DBG] Connection id "0HNJ9DG7QVDIC" accepted.
2026-02-11 15:49:57.665 +03:00 [DBG] Connection id "0HNJ9DG7QVDIC" started.
2026-02-11 15:49:57.700 +03:00 [DBG] Connection 0HNJ9DG7QVDIC established using the following protocol: "Tls13"
2026-02-11 15:49:57.737 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 15:49:57.796 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 15:49:57.809 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 15:49:57.810 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:49:57.812 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:49:57.844 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 15:49:57.845 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 15:49:57.856 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 15:49:57.857 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 15:49:57.858 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 124.5567ms
2026-02-11 15:49:57.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 15:49:57.890 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.6726ms
2026-02-11 15:49:57.911 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 15:49:57.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.3217ms
2026-02-11 15:49:57.986 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 15:49:57.988 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 15:49:57.989 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:49:57.990 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:49:57.995 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0853ms
2026-02-11 15:50:18.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Астана?date=%20 - null null
2026-02-11 15:50:18.103 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:50:18.105 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:50:18.106 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:50:18.107 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:18.108 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:18.115 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:50:18.127 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:50:18.129 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:50:18.129 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:50:18.131 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:50:18.132 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:50:18.133 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:50:18.135 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:50:18.189 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 15:50:18.194 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:50:18.202 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:50:18.204 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:50:18.205 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:50:18.206 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:50:18.206 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:50:18.210 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:50:18.211 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:18.212 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:18.213 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:18.214 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:18.217 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:50:18.219 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:50:18.219 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:50:18.220 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:50:18.220 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:50:18.221 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:50:18.224 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 88.3882ms
2026-02-11 15:50:18.225 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:50:18.226 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Астана?date=%20 - 400 null text/plain; charset=utf-8 130.6341ms
2026-02-11 15:50:26.630 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Астана?date=%202026-02-11 - null null
2026-02-11 15:50:26.632 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:50:26.633 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:50:26.634 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:50:26.635 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:26.635 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:26.636 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:50:26.637 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:50:26.638 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:50:26.639 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:50:26.639 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:50:26.641 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:50:26.641 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:50:26.642 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:50:26.647 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:50:26.648 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:50:26.649 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:50:26.649 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:50:26.650 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:50:26.651 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:50:26.652 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:50:26.652 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:26.657 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:26.657 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:26.658 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:26.671 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D1%81%D1%82%D0%B0%D0%BD%D0%B0&count=1&language=ru
2026-02-11 15:50:26.677 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D1%81%D1%82%D0%B0%D0%BD%D0%B0&count=1&language=ru
2026-02-11 15:50:27.019 +03:00 [INF] Received HTTP response headers after 340.6366ms - 200
2026-02-11 15:50:27.022 +03:00 [INF] End processing HTTP request after 351.3973ms - 200
2026-02-11 15:50:27.031 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.1801&longitude=71.44598&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:50:27.032 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.1801&longitude=71.44598&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:50:27.328 +03:00 [INF] Received HTTP response headers after 294.8346ms - 200
2026-02-11 15:50:27.329 +03:00 [INF] End processing HTTP request after 297.4895ms - 200
2026-02-11 15:50:27.336 +03:00 [INF] Endpoint = day, City = Астана, Date = 2026-02-11, Latency = FALSEms, CacheHit = 675, StatusCode = 200
2026-02-11 15:50:27.573 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:50:27.592 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:50:27.623 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:50:27.626 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:50:27.628 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:50:27.637 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:50:27.670 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:50:27.676 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 15:50:27.678 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:27.684 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:27.689 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:27.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:27.694 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 15:50:27.698 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:50:27.712 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:50:27.721 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:50:27.725 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:27.729 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-11 15:50:27.731 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:27.733 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (2ms).
2026-02-11 15:50:27.739 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:50:27.741 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:50:27.747 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:50:27.748 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:50:27.748 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:50:27.749 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:50:27.750 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:50:27.750 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:50:27.757 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1114.6702ms
2026-02-11 15:50:27.758 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:50:27.759 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:50:27.762 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:27.763 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:50:27.764 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Астана?date=%202026-02-11 - 200 null application/json; charset=utf-8 1134.8113ms
2026-02-11 15:50:32.511 +03:00 [DBG] Connection id "0HNJ9DG7QVDID" received FIN.
2026-02-11 15:50:32.511 +03:00 [DBG] Connection id "0HNJ9DG7QVDID" accepted.
2026-02-11 15:50:32.512 +03:00 [DBG] Connection id "0HNJ9DG7QVDID" started.
2026-02-11 15:50:32.512 +03:00 [DBG] Connection id "0HNJ9DG7QVDIE" accepted.
2026-02-11 15:50:32.514 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:50:32.514 +03:00 [DBG] Connection id "0HNJ9DG7QVDIE" started.
2026-02-11 15:50:32.515 +03:00 [DBG] Connection id "0HNJ9DG7QVDID" stopped.
2026-02-11 15:50:32.516 +03:00 [DBG] Connection id "0HNJ9DG7QVDID" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:50:32.518 +03:00 [DBG] Connection 0HNJ9DG7QVDIE established using the following protocol: "Tls13"
2026-02-11 15:50:32.521 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:50:32.522 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:50:32.523 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:50:32.524 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:32.524 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:32.525 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:32.525 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:32.529 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:50:32.530 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:50:32.531 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:50:32.532 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:50:32.533 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:50:32.534 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:50:32.534 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:50:32.535 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:50:32.536 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:32.537 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:32.538 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:32.539 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:32.539 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:32.540 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:32.541 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:32.541 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:32.542 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:50:32.543 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:50:32.544 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:32.544 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:32.545 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:50:32.546 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:32.546 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:50:32.547 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:50:32.548 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:32.549 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:32.550 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:50:32.550 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:32.583 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:50:32.608 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 15:50:32.692 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 15:50:32.705 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:50:32.706 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:50:32.706 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:32.707 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:32.708 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:32.708 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:50:32.709 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:32.710 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:50:32.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:50:32.713 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:32.714 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:50:32.715 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:32.715 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:32.720 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 15:50:32.727 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:50:32.730 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:32.731 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:32.731 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:32.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:50:32.733 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:32.734 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:50:32.735 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:50:32.738 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:32.739 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:50:32.740 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:32.740 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:32.741 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:50:32.742 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:50:32.743 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:50:32.743 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:50:32.744 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:50:32.744 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:50:32.751 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 216.8866ms
2026-02-11 15:50:32.752 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:32.753 +03:00 [DBG] Connection id "0HNJ9DG7QVDIE" completed keep alive response.
2026-02-11 15:50:32.754 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:50:32.754 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:32.755 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:32.756 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 235.2549ms
2026-02-11 15:50:36.608 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:50:36.610 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:50:36.611 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:50:36.612 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:36.612 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:36.613 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:36.613 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:36.614 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:50:36.615 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:50:36.616 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:50:36.617 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:50:36.618 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:50:36.619 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:50:36.620 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:50:36.620 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:50:36.621 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:36.622 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:36.623 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:36.623 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:36.624 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:36.625 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:36.625 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:36.626 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:36.627 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:50:36.627 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:50:36.628 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:36.629 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:36.630 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:50:36.630 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:36.631 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:50:36.632 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:50:36.633 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:36.634 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:36.634 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:50:36.635 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:36.641 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:50:36.645 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:50:36.645 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:50:36.646 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:36.646 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:36.647 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:36.648 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:50:36.649 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:36.650 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:50:36.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:50:36.652 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:36.653 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:50:36.653 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:36.654 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:36.656 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:36.657 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:36.657 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:36.658 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:50:36.658 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:36.659 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:50:36.660 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:50:36.661 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:36.662 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:50:36.663 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:36.664 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 15:50:36.665 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:50:36.666 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:50:36.667 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:50:36.667 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:50:36.668 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:50:36.669 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:50:36.669 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 49.8305ms
2026-02-11 15:50:36.670 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:36.671 +03:00 [DBG] Connection id "0HNJ9DG7QVDIE" completed keep alive response.
2026-02-11 15:50:36.671 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:50:36.672 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:36.673 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:36.674 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 65.6537ms
2026-02-11 15:50:43.700 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:50:43.702 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:50:43.702 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:50:43.703 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:43.704 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:43.705 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:50:43.705 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:43.706 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:50:43.707 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:50:43.708 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:50:43.708 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:50:43.709 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:50:43.710 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:50:43.711 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:50:43.713 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:50:43.714 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:43.715 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:43.715 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:43.716 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:43.717 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:43.718 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:43.718 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:50:43.719 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:50:43.720 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:50:43.720 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:50:43.721 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:43.722 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:43.723 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:50:43.724 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:50:43.725 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:50:43.725 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:50:43.726 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:43.727 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:43.728 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:50:43.728 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:50:43.729 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:50:43.731 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:50:43.731 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:50:43.732 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:43.733 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:43.733 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:43.734 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:50:43.735 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:43.735 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:50:43.736 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:50:43.738 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:43.739 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:50:43.740 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:43.741 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:43.742 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:43.743 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:43.744 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:50:43.744 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:50:43.745 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:50:43.746 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:50:43.747 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:50:43.748 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:43.749 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:50:43.750 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:50:43.750 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:43.751 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:50:43.752 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:50:43.753 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:50:43.753 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:50:43.754 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:50:43.754 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:50:43.755 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 44.1842ms
2026-02-11 15:50:43.756 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:50:43.757 +03:00 [DBG] Connection id "0HNJ9DG7QVDIE" completed keep alive response.
2026-02-11 15:50:43.757 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:50:43.758 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:50:43.758 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:50:43.759 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 59.0123ms
2026-02-11 15:52:26.676 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 15:52:36.691 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:52:36.693 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0358ms - processed: 0 items - remaining: 1 items
2026-02-11 15:52:46.694 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:52:46.695 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2026-02-11 15:52:56.702 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:52:56.703 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-11 15:53:06.712 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:53:06.713 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 15:53:16.717 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:53:16.718 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2026-02-11 15:53:26.727 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:53:26.728 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-11 15:53:35.592 +03:00 [DBG] Connection id "0HNJ9DG7QVDIF" received FIN.
2026-02-11 15:53:35.593 +03:00 [DBG] Connection id "0HNJ9DG7QVDIF" accepted.
2026-02-11 15:53:35.593 +03:00 [DBG] Connection id "0HNJ9DG7QVDIF" started.
2026-02-11 15:53:35.594 +03:00 [DBG] Connection id "0HNJ9DG7QVDIG" accepted.
2026-02-11 15:53:35.597 +03:00 [DBG] Connection id "0HNJ9DG7QVDIG" started.
2026-02-11 15:53:35.598 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:53:35.599 +03:00 [DBG] Connection id "0HNJ9DG7QVDIF" stopped.
2026-02-11 15:53:35.600 +03:00 [DBG] Connection id "0HNJ9DG7QVDIF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:53:35.601 +03:00 [DBG] Connection 0HNJ9DG7QVDIG established using the following protocol: "Tls13"
2026-02-11 15:53:35.604 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:53:35.606 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:53:35.606 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:53:35.607 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:53:35.608 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:53:35.608 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:53:35.609 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:53:35.612 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:53:35.612 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:53:35.613 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:53:35.614 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:53:35.615 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:53:35.616 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:53:35.617 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:53:35.618 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:53:35.619 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:53:35.620 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:53:35.620 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:53:35.621 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:53:35.622 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:53:35.623 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:53:35.623 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:53:35.624 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:53:35.625 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:53:35.625 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:53:35.626 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:53:35.627 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:53:35.627 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:53:35.628 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:53:35.630 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:53:35.632 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-11 15:53:35.647 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, COUNT(*) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY COUNT(*) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 15:53:35.649 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:53:35.649 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:53:35.650 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:53:35.651 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:53:35.651 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:53:35.652 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:53:35.653 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:53:35.653 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:53:35.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:53:35.656 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:53:35.656 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:53:35.657 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:53:35.658 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:53:35.659 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:53:35.660 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:53:35.661 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:53:35.661 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:53:35.661 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:53:35.662 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:53:35.664 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 46.4054ms
2026-02-11 15:53:35.664 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:53:35.665 +03:00 [DBG] Connection id "0HNJ9DG7QVDIG" completed keep alive response.
2026-02-11 15:53:35.666 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:53:35.666 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:53:35.667 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:53:35.668 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 63.6179ms
2026-02-11 15:53:36.741 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:53:36.742 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:53:46.757 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:53:46.758 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-11 15:53:56.767 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:53:56.768 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 15:54:06.776 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:54:06.777 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-11 15:54:16.789 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:54:16.790 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 15:54:26.802 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:54:26.803 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-11 15:54:36.814 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:54:36.815 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-11 15:54:46.829 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:54:46.830 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 15:54:56.840 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:54:56.841 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:04.719 +03:00 [DBG] Connection id "0HNJ9DG7QVDIC" received FIN.
2026-02-11 15:55:04.720 +03:00 [DBG] Connection id "0HNJ9DG7QVDIC" is closed. The last processed stream ID was 11.
2026-02-11 15:55:04.721 +03:00 [DBG] Connection id "0HNJ9DG7QVDIC" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:55:04.722 +03:00 [DBG] The connection queue processing loop for 0HNJ9DG7QVDIC completed.
2026-02-11 15:55:04.726 +03:00 [DBG] Connection id "0HNJ9DG7QVDIC" stopped.
2026-02-11 15:55:06.847 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:55:06.848 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:16.862 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:55:16.863 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:26.869 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:55:26.870 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:36.886 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:55:36.887 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:46.902 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:55:46.903 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:55.606 +03:00 [DBG] Connection id "0HNJ9DG7QVDIH" received FIN.
2026-02-11 15:55:55.607 +03:00 [DBG] Connection id "0HNJ9DG7QVDIH" accepted.
2026-02-11 15:55:55.608 +03:00 [DBG] Connection id "0HNJ9DG7QVDIH" started.
2026-02-11 15:55:55.608 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" accepted.
2026-02-11 15:55:55.611 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" started.
2026-02-11 15:55:55.612 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:55:55.614 +03:00 [DBG] Connection id "0HNJ9DG7QVDIH" stopped.
2026-02-11 15:55:55.615 +03:00 [DBG] Connection 0HNJ9DG7QVDII established using the following protocol: "Tls13"
2026-02-11 15:55:55.615 +03:00 [DBG] Connection id "0HNJ9DG7QVDIH" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:55:55.616 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - null null
2026-02-11 15:55:55.618 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:55:55.619 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:55:55.620 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:55:55.620 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:55:55.621 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:55:55.621 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:55:55.622 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:55:55.623 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:55:55.624 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:55:55.624 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:55:55.625 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:55:55.626 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:55:55.627 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:55:55.630 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:55:55.631 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:55:55.632 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:55:55.632 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:55:55.633 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:55:55.634 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:55:55.634 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:55:55.635 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:55:55.636 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:55:55.636 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:55:55.637 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:55:59.074 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:55:59.074 +03:00 [INF] Endpoint = day, City = Астана, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 15:55:59.075 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:55:59.079 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:55:59.081 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:55:59.082 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:55:59.082 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:55:59.083 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:55:59.083 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:55:59.084 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:55:59.085 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:55:59.085 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:55:59.086 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:55:59.087 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:55:59.087 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:55:59.088 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:55:59.089 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:55:59.090 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:55:59.091 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:55:59.093 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:55:59.093 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:55:59.094 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:55:59.095 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:55:59.096 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:55:59.097 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:55:59.097 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:55:59.099 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:55:59.099 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:55:59.099 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:55:59.100 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:55:59.100 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:55:59.101 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 3474.4115ms
2026-02-11 15:55:59.102 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:55:59.103 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:55:59.104 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:55:59.104 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:55:59.105 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:55:59.106 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - 200 null application/json; charset=utf-8 3489.5163ms
2026-02-11 15:56:06.062 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:56:06.063 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:56:06.064 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:56:06.065 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:56:06.065 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:06.066 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:06.066 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:56:06.067 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:56:06.068 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:56:06.069 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:56:06.069 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:56:06.071 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:56:06.072 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:56:06.073 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:56:06.073 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:56:06.074 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:06.075 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:06.075 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:06.076 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:06.076 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:06.077 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:06.078 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:06.078 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:06.079 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:56:06.079 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:56:06.080 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:56:06.081 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:56:06.081 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:56:06.082 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:56:06.083 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:56:06.084 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:56:06.085 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:56:06.085 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:06.086 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:06.087 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:56:06.087 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:56:06.088 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:56:06.088 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:56:06.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:56:06.090 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:06.091 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:56:06.092 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:06.092 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:06.093 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:56:06.094 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:56:06.094 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:56:06.095 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:56:06.095 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:56:06.096 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:56:06.096 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 23.9994ms
2026-02-11 15:56:06.097 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:56:06.098 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:56:06.098 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:56:06.099 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:06.100 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:06.100 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 38.4394ms
2026-02-11 15:56:09.092 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:56:09.092 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:56:10.268 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - null null
2026-02-11 15:56:10.270 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:56:10.271 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:56:10.272 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:10.272 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:10.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:10.273 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:10.274 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:56:10.275 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:56:10.276 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:56:10.276 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:56:10.278 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:56:10.278 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:56:10.279 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:10.280 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:10.281 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:56:10.281 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:56:10.282 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:10.283 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:10.283 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:56:10.284 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:56:10.285 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:10.286 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:10.286 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:10.287 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:11.989 +03:00 [INF] Endpoint = day, City = Астана, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 15:56:11.991 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:56:11.992 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:11.993 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:11.994 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:56:11.994 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:56:11.995 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:56:11.996 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:56:11.996 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:56:11.997 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:11.997 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:11.998 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:56:11.998 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:56:11.999 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:56:12.001 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:56:12.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:56:12.003 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:56:12.004 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:12.005 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:56:12.006 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:12.006 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:12.007 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:12.008 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:56:12.009 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:56:12.010 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:56:12.010 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:56:12.010 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:56:12.011 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:56:12.011 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:56:12.012 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1732.7917ms
2026-02-11 15:56:12.013 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:12.013 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:56:12.014 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:56:12.015 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:12.015 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:12.016 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - 200 null application/json; charset=utf-8 1747.9436ms
2026-02-11 15:56:19.097 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:56:19.097 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:56:23.961 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=%20 - null null
2026-02-11 15:56:23.962 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:56:23.963 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:56:23.964 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:23.964 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:23.965 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:23.966 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:23.966 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:56:23.967 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:56:23.968 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:56:23.969 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:56:23.970 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:56:23.971 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:56:23.972 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:23.973 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:23.974 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:56:23.974 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:56:23.975 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:23.976 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:23.976 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:56:23.977 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:56:23.978 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:23.979 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:23.979 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:23.980 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:23.981 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:56:23.982 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:56:23.982 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:56:23.983 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:56:23.983 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:56:23.984 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:56:23.985 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 13.0951ms
2026-02-11 15:56:23.986 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:23.987 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:56:23.987 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=%20 - 400 null text/plain; charset=utf-8 26.6611ms
2026-02-11 15:56:28.576 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - null null
2026-02-11 15:56:28.577 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:56:28.578 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:56:28.579 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:28.579 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:28.580 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:28.580 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:28.581 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:56:28.582 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:56:28.583 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:56:28.583 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:56:28.585 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:56:28.586 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:56:28.587 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:28.588 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:28.588 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:56:28.589 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:56:28.590 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:28.590 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:28.591 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:56:28.591 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:56:28.592 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:28.592 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:28.593 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:28.594 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:30.195 +03:00 [INF] Endpoint = day, City = Астана, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 15:56:30.195 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:56:30.197 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:56:30.197 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-11 15:56:30.198 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:30.200 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:30.200 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:56:30.201 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:56:30.201 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:56:30.202 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:56:30.203 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:56:30.203 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:30.204 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:30.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:56:30.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:56:30.206 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:56:30.207 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:56:30.208 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:56:30.209 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:56:30.210 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:30.211 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:56:30.212 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:30.212 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:30.213 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:30.214 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:56:30.215 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:56:30.216 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:56:30.217 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:56:30.217 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:56:30.218 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:56:30.218 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:56:30.219 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1632.6187ms
2026-02-11 15:56:30.220 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:30.221 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:56:30.221 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:56:30.222 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:30.223 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:30.224 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - 200 null application/json; charset=utf-8 1647.7947ms
2026-02-11 15:56:33.589 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - null null
2026-02-11 15:56:33.592 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Астана'
2026-02-11 15:56:33.592 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Астана'
2026-02-11 15:56:33.595 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:33.595 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:33.596 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:33.597 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:33.597 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:56:33.598 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:56:33.599 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:56:33.600 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:56:33.601 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:56:33.602 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:56:33.603 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:33.604 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:56:33.605 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:56:33.606 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:56:33.607 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:33.608 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:56:33.609 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:56:33.610 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:56:33.610 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:33.611 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:33.612 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:33.613 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:36.369 +03:00 [INF] Endpoint = day, City = Астана, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 15:56:36.371 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:56:36.372 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:36.373 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:36.374 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:56:36.374 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:56:36.375 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:56:36.376 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:56:36.376 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:56:36.377 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:36.377 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:36.378 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:56:36.379 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:56:36.379 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:56:36.380 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:56:36.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:56:36.382 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:56:36.383 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:36.384 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:56:36.385 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:36.386 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:36.387 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:56:36.388 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:56:36.389 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:56:36.390 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:56:36.391 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:56:36.391 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:56:36.391 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:56:36.392 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:56:36.393 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 2790.2812ms
2026-02-11 15:56:36.394 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:56:36.395 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:56:36.396 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:56:36.396 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:36.397 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:36.398 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Астана?date=2026-02-11 - 200 null application/json; charset=utf-8 2808.8004ms
2026-02-11 15:56:40.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:56:40.209 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 15:56:41.941 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:56:41.943 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:56:41.943 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:56:41.944 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:56:41.945 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:41.945 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:56:41.946 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:56:41.946 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:56:41.947 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:56:41.948 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:56:41.948 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:56:41.949 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:56:41.950 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:56:41.951 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:56:41.952 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:56:41.953 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:41.953 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:41.954 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:41.955 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:41.955 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:41.956 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:41.957 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:56:41.957 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:56:41.958 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:56:41.958 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:56:41.959 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:56:41.960 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:56:41.960 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:56:41.961 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:56:41.961 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:56:41.962 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:56:41.962 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:56:41.963 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:56:41.964 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:56:41.964 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:56:41.965 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:56:41.967 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:56:41.967 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:56:41.967 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:41.968 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:41.969 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:56:41.970 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:56:41.970 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:56:41.971 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:56:41.972 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:56:41.973 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:41.974 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:56:41.974 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:41.975 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:41.976 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:41.977 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:41.977 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:56:41.978 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:56:41.979 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:56:41.979 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:56:41.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:56:41.982 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:41.983 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:56:41.983 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:56:41.984 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:41.985 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:56:41.986 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:56:41.986 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:56:41.987 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:56:41.987 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:56:41.988 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:56:41.989 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 37.7036ms
2026-02-11 15:56:41.989 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:56:41.990 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:56:41.991 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:56:41.991 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:56:41.992 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:56:41.992 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 51.0465ms
2026-02-11 15:56:50.217 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:56:50.217 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:57:00.221 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:57:00.222 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 15:57:10.229 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:57:10.230 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4756ms - processed: 0 items - remaining: 1 items
2026-02-11 15:57:17.301 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Воронеж?date=%20 - null null
2026-02-11 15:57:17.303 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Воронеж'
2026-02-11 15:57:17.304 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Воронеж'
2026-02-11 15:57:17.305 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:17.305 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:17.306 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:17.306 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:17.307 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:57:17.308 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:57:17.309 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:57:17.309 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:57:17.311 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:57:17.311 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:57:17.312 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:57:17.313 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:57:17.314 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:57:17.314 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:57:17.315 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:57:17.316 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:57:17.316 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:57:17.317 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:57:17.318 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:17.319 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:17.319 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:17.320 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:17.321 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:57:17.322 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:57:17.322 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:57:17.323 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:57:17.323 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:57:17.324 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:57:17.325 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 12.8233ms
2026-02-11 15:57:17.326 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:17.326 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:57:17.327 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Воронеж?date=%20 - 400 null text/plain; charset=utf-8 25.488ms
2026-02-11 15:57:20.246 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:57:20.246 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-11 15:57:22.530 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Воронеж?date=2026-02-11 - null null
2026-02-11 15:57:22.532 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Воронеж'
2026-02-11 15:57:22.532 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Воронеж'
2026-02-11 15:57:22.533 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:22.534 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:22.534 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:22.535 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:22.535 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:57:22.536 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:57:22.537 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:57:22.538 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:57:22.539 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:57:22.540 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:57:22.541 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:57:22.541 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:57:22.542 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:57:22.543 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:57:22.544 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:57:22.545 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:57:22.545 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:57:22.546 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:57:22.547 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:22.547 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:22.548 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:22.549 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:22.550 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%B5%D0%B6&count=1&language=ru
2026-02-11 15:57:22.551 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%B5%D0%B6&count=1&language=ru
2026-02-11 15:57:22.820 +03:00 [INF] Received HTTP response headers after 268.2198ms - 200
2026-02-11 15:57:22.820 +03:00 [INF] End processing HTTP request after 270.2993ms - 200
2026-02-11 15:57:22.821 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.67204&longitude=39.1843&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:57:22.822 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.67204&longitude=39.1843&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:57:23.098 +03:00 [INF] Received HTTP response headers after 274.8554ms - 200
2026-02-11 15:57:23.099 +03:00 [INF] End processing HTTP request after 277.1849ms - 200
2026-02-11 15:57:25.274 +03:00 [INF] Endpoint = day, City = Воронеж, Date = 2026-02-11, Latency = FALSEms, CacheHit = 549, StatusCode = 200
2026-02-11 15:57:25.276 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:57:25.277 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:57:25.278 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:57:25.279 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:57:25.279 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:57:25.280 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:57:25.280 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:57:25.281 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:57:25.281 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:25.282 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:25.283 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:57:25.283 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:57:25.284 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:57:25.285 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:57:25.286 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:57:25.287 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:57:25.288 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:25.289 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:57:25.290 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:25.290 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:25.291 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:57:25.292 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:57:25.293 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:57:25.294 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:57:25.294 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:57:25.295 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:57:25.295 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:57:25.296 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:57:25.297 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 2755.9878ms
2026-02-11 15:57:25.297 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:25.298 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:57:25.299 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:57:25.300 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:25.300 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:25.302 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Воронеж?date=2026-02-11 - 200 null application/json; charset=utf-8 2771.1373ms
2026-02-11 15:57:30.256 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:57:30.257 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-11 15:57:38.456 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Воронеж?date=2026-02-11 - null null
2026-02-11 15:57:38.457 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Воронеж'
2026-02-11 15:57:38.458 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Воронеж'
2026-02-11 15:57:38.458 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:38.459 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:38.459 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:38.460 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:38.460 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:57:38.461 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:57:38.462 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:57:38.463 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:57:38.464 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:57:38.465 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:57:38.466 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:57:38.467 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:57:38.467 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:57:38.468 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:57:38.469 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:57:38.470 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:57:38.471 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:57:38.471 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:57:38.472 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:38.473 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:38.473 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:38.474 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:38.475 +03:00 [INF] Endpoint = day, City = Воронеж, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 15:57:38.476 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:57:38.478 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:57:38.478 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:57:38.479 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:57:38.480 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:57:38.480 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:57:38.481 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:57:38.481 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:57:38.482 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:38.483 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:38.483 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:57:38.484 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:57:38.484 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:57:38.485 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:57:38.486 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 7), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:57:38.488 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:57:38.489 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:38.490 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:57:38.491 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:38.491 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:38.492 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:57:38.494 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:57:38.494 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:57:38.495 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:57:38.496 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:57:38.496 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:57:38.497 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:57:38.497 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:57:38.498 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 32.3887ms
2026-02-11 15:57:38.499 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:57:38.500 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:57:38.500 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:57:38.501 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:38.501 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:38.502 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Воронеж?date=2026-02-11 - 200 null application/json; charset=utf-8 46.9375ms
2026-02-11 15:57:40.264 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:57:40.265 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2026-02-11 15:57:42.511 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-11 15:57:42.512 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-11 15:57:42.513 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-11 15:57:42.513 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:57:42.514 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:42.514 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:42.515 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:57:42.515 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:57:42.516 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:57:42.517 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:57:42.518 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:57:42.519 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:57:42.520 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:57:42.520 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:57:42.521 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:57:42.522 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:42.523 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:42.523 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:42.524 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:42.525 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:42.525 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:42.526 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:42.526 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:42.527 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:57:42.528 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-11 15:57:42.528 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:57:42.529 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-11 15:57:42.530 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-11 15:57:42.530 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-11 15:57:42.531 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:57:42.532 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:57:42.533 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:57:42.533 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:42.534 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:42.535 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:57:42.535 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:57:42.536 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:57:42.537 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:57:42.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."City", COUNT(*) AS "RequestsCount"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
GROUP BY "w"."City"
ORDER BY COUNT(*) DESC
LIMIT @__p_2
2026-02-11 15:57:42.539 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:42.540 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:57:42.540 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:42.541 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:42.542 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:57:42.543 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:57:42.543 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:57:42.544 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:57:42.544 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:57:42.545 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 15:57:42.545 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 24.9935ms
2026-02-11 15:57:42.546 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-11 15:57:42.547 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:57:42.547 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:57:42.548 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:42.549 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:42.549 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 38.9143ms
2026-02-11 15:57:47.490 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:57:47.491 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:57:47.492 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:57:47.493 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:57:47.493 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:47.494 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:57:47.494 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:57:47.495 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:57:47.496 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:57:47.497 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:57:47.497 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:57:47.498 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:57:47.499 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:57:47.500 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:57:47.501 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:57:47.502 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:47.503 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:47.503 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:47.504 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:47.505 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:47.506 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:47.506 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:57:47.507 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:57:47.508 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:57:47.508 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:57:47.509 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:57:47.510 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:57:47.510 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:57:47.511 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:57:47.512 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:57:47.512 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:57:47.513 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:57:47.514 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:57:47.515 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:57:47.516 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:57:47.517 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:57:47.518 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:57:47.518 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:57:47.519 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:47.520 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:47.520 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:57:47.521 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:57:47.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:57:47.522 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:57:47.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:57:47.525 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:47.525 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:57:47.526 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:47.527 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:47.528 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:47.529 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:47.530 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:57:47.530 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:57:47.531 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:57:47.532 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:57:47.533 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:57:47.534 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:47.535 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:57:47.536 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:57:47.536 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:47.537 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:57:47.539 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:57:47.539 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:57:47.539 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:57:47.540 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:57:47.541 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:57:47.541 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 40.9341ms
2026-02-11 15:57:47.542 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:57:47.543 +03:00 [DBG] Connection id "0HNJ9DG7QVDII" completed keep alive response.
2026-02-11 15:57:47.543 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:57:47.544 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:57:47.545 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:57:47.546 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 55.9027ms
2026-02-11 15:57:50.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:57:50.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:00.288 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:58:00.289 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:10.292 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:58:10.293 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:20.300 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:58:20.301 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:30.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:58:30.315 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:40.322 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:58:40.323 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:41.043 +03:00 [DBG] Connection id "0HNJ9DG7QVDIJ" accepted.
2026-02-11 15:58:41.043 +03:00 [DBG] Connection id "0HNJ9DG7QVDIJ" started.
2026-02-11 15:58:41.050 +03:00 [DBG] Connection 0HNJ9DG7QVDIJ established using the following protocol: "Tls13"
2026-02-11 15:58:41.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Порту?date=%20 - null null
2026-02-11 15:58:41.056 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порту'
2026-02-11 15:58:41.057 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Порту'
2026-02-11 15:58:41.059 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:58:41.059 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:58:41.060 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:58:41.060 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:58:41.061 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:58:41.062 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:58:41.063 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:58:41.063 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:58:41.065 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:58:41.065 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:58:41.066 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:58:41.067 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:58:41.068 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:58:41.068 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:58:41.069 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:58:41.070 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:58:41.071 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:58:41.072 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:58:41.072 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:58:41.073 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:58:41.074 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:58:41.074 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:58:41.075 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:58:41.076 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:58:41.077 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:58:41.077 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:58:41.077 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 15:58:41.078 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 15:58:41.079 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 12.6479ms
2026-02-11 15:58:41.080 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:58:41.080 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Порту?date=%20 - 400 null text/plain; charset=utf-8 28.3063ms
2026-02-11 15:58:50.328 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:58:50.329 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2026-02-11 15:58:54.811 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Порту?date=2026-02-11 - null null
2026-02-11 15:58:54.812 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Порту'
2026-02-11 15:58:54.813 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Порту'
2026-02-11 15:58:54.814 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:58:54.815 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:58:54.815 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:58:54.816 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:58:54.816 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 15:58:54.817 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:58:54.818 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:58:54.819 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2026-02-11 15:58:54.820 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:58:54.821 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:58:54.821 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:58:54.822 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 15:58:54.823 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 15:58:54.824 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 15:58:54.824 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:58:54.825 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 15:58:54.826 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 15:58:54.826 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 15:58:54.827 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:58:54.827 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:58:54.828 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:58:54.829 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:58:54.830 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-11 15:58:54.830 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-11 15:58:55.062 +03:00 [INF] Received HTTP response headers after 231.2274ms - 200
2026-02-11 15:58:55.063 +03:00 [INF] End processing HTTP request after 233.3176ms - 200
2026-02-11 15:58:55.064 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:58:55.065 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 15:58:55.335 +03:00 [INF] Received HTTP response headers after 269.8612ms - 200
2026-02-11 15:58:55.336 +03:00 [INF] End processing HTTP request after 271.8466ms - 200
2026-02-11 15:58:55.337 +03:00 [INF] Endpoint = day, City = Порту, Date = 2026-02-11, Latency = FALSEms, CacheHit = 507, StatusCode = 200
2026-02-11 15:58:55.339 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:58:55.340 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:58:55.340 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:58:55.341 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 15:58:55.342 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 15:58:55.342 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 15:58:55.343 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:58:55.344 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:58:55.344 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:58:55.345 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:58:55.346 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:58:55.346 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:58:55.347 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:58:55.348 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:58:55.349 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 15:58:55.350 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 15:58:55.351 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:58:55.352 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 15:58:55.353 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:58:55.354 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:58:55.354 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 15:58:55.355 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 15:58:55.356 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:58:55.357 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:58:55.358 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:58:55.358 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:58:55.359 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:58:55.359 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 15:58:55.360 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 538.8486ms
2026-02-11 15:58:55.361 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 15:58:55.362 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:58:55.362 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:58:55.363 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:58:55.364 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Порту?date=2026-02-11 - 200 null application/json; charset=utf-8 553.4034ms
2026-02-11 15:59:00.333 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:59:00.334 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2026-02-11 15:59:01.133 +03:00 [DBG] Connection id "0HNJ9DG7QVDIK" accepted.
2026-02-11 15:59:01.133 +03:00 [DBG] Connection id "0HNJ9DG7QVDIK" received FIN.
2026-02-11 15:59:01.134 +03:00 [DBG] Connection id "0HNJ9DG7QVDIK" started.
2026-02-11 15:59:01.134 +03:00 [DBG] Connection id "0HNJ9DG7QVDIL" accepted.
2026-02-11 15:59:01.139 +03:00 [DBG] Connection id "0HNJ9DG7QVDIL" started.
2026-02-11 15:59:01.139 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 15:59:01.141 +03:00 [DBG] Connection id "0HNJ9DG7QVDIK" stopped.
2026-02-11 15:59:01.142 +03:00 [DBG] Connection 0HNJ9DG7QVDIL established using the following protocol: "Tls13"
2026-02-11 15:59:01.142 +03:00 [DBG] Connection id "0HNJ9DG7QVDIK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 15:59:01.143 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:59:01.145 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:59:01.145 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:59:01.146 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:01.147 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:59:01.147 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:59:01.148 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:01.148 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:59:01.149 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:59:01.150 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:59:01.151 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:59:01.152 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:59:01.152 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:59:01.153 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:59:01.154 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:59:01.155 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:01.156 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:01.157 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:01.157 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:01.158 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:01.159 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:01.160 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:01.160 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:01.161 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:59:01.162 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:59:01.162 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:01.163 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:01.164 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:59:01.165 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:01.165 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:59:01.166 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:59:01.167 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:01.167 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:01.168 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:59:01.169 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:01.170 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:59:01.171 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:59:01.172 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:59:01.172 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:01.173 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:01.174 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:59:01.174 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:59:01.175 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:59:01.176 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:59:01.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:59:01.178 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:01.179 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:59:01.179 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:01.180 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:01.181 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:01.182 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:01.183 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:59:01.183 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:59:01.184 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:59:01.184 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:59:01.185 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:59:01.187 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:01.188 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 15:59:01.189 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:01.189 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:01.190 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:59:01.191 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:59:01.192 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:59:01.192 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:59:01.193 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:59:01.193 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:59:01.194 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 40.9953ms
2026-02-11 15:59:01.195 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:01.196 +03:00 [DBG] Connection id "0HNJ9DG7QVDIL" completed keep alive response.
2026-02-11 15:59:01.196 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:59:01.197 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:01.197 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:01.198 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 55.3757ms
2026-02-11 15:59:09.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:59:09.328 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:59:09.329 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:59:09.330 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:09.330 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:59:09.331 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:59:09.331 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:09.332 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:59:09.332 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:59:09.333 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:59:09.334 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:59:09.335 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:59:09.336 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:59:09.337 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:59:09.337 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:59:09.338 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:09.339 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:09.340 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:09.341 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:09.341 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:09.342 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:09.343 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:09.343 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:09.344 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:59:09.345 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:59:09.346 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:09.346 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:09.347 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:59:09.348 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:09.348 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:59:09.349 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:59:09.350 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:09.350 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:09.351 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:59:09.352 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:09.353 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:59:09.354 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:59:09.355 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:59:09.355 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:09.356 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:09.357 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:59:09.357 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:59:09.358 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:59:09.359 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:59:09.360 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:59:09.361 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:09.362 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:59:09.363 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:09.363 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:09.364 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:09.365 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:09.366 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:59:09.366 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:59:09.367 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:59:09.368 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:59:09.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:59:09.370 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:09.371 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:59:09.372 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:09.372 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:09.373 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:59:09.375 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:59:09.375 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:59:09.375 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:59:09.376 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:59:09.376 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:59:09.377 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 40.8215ms
2026-02-11 15:59:09.378 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:09.379 +03:00 [DBG] Connection id "0HNJ9DG7QVDIL" completed keep alive response.
2026-02-11 15:59:09.379 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:59:09.380 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:09.381 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:09.381 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 54.7377ms
2026-02-11 15:59:10.337 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:59:10.337 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2026-02-11 15:59:13.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/.well-known/appspecific/com.chrome.devtools.json - null null
2026-02-11 15:59:13.938 +03:00 [DBG] No candidates found for the request path '/.well-known/appspecific/com.chrome.devtools.json'
2026-02-11 15:59:13.939 +03:00 [DBG] Request did not match any endpoints
2026-02-11 15:59:13.940 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:59:13.940 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 15:59:13.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 4.8774ms
2026-02-11 15:59:13.943 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7198/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2026-02-11 15:59:20.350 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 15:59:20.350 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2026-02-11 15:59:22.565 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 15:59:30.361 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 15:59:30.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2026-02-11 15:59:36.049 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 15:59:36.050 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 15:59:36.051 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 15:59:36.051 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:36.052 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:59:36.053 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 15:59:36.053 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:36.054 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 15:59:36.055 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 15:59:36.056 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 15:59:36.056 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 15:59:36.058 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 15:59:36.059 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 15:59:36.059 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:59:36.060 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 15:59:36.061 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:36.062 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:36.062 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:36.063 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:36.064 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:36.064 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:36.065 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 15:59:36.066 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 15:59:36.066 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 15:59:36.067 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 15:59:36.068 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:36.068 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:36.069 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 15:59:36.070 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 15:59:36.070 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:59:36.071 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 15:59:36.072 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:36.073 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:36.074 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 15:59:36.074 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 15:59:36.075 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 15:59:36.076 +03:00 [DBG] Creating DbConnection.
2026-02-11 15:59:36.077 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 15:59:36.078 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:36.078 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:36.079 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:59:36.079 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:59:36.080 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:59:36.081 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:59:36.082 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 15:59:36.083 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:36.083 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:59:36.084 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:36.085 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:36.086 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:36.087 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:36.087 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 15:59:36.088 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 15:59:36.088 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 15:59:36.089 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:59:36.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 15:59:36.092 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:36.092 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 15:59:36.093 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 15:59:36.094 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:36.095 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 15:59:36.096 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 15:59:36.096 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 15:59:36.096 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 15:59:36.097 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 15:59:36.097 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 15:59:36.098 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 38.7978ms
2026-02-11 15:59:36.099 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 15:59:36.100 +03:00 [DBG] Connection id "0HNJ9DG7QVDIL" completed keep alive response.
2026-02-11 15:59:36.100 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 15:59:36.101 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 15:59:36.101 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 15:59:36.102 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 54.3019ms
2026-02-11 15:59:40.367 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 15:59:40.368 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-11 15:59:50.370 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 15:59:50.371 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2026-02-11 16:00:00.373 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:00:00.374 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 2 items
2026-02-11 16:00:10.378 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:00:10.379 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-11 16:00:20.390 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:00:20.391 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 2 items
2026-02-11 16:00:30.392 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:00:30.393 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2026-02-11 16:00:40.402 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:00:40.402 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2026-02-11 16:00:50.416 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:00:50.418 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4537ms - processed: 0 items - remaining: 2 items
2026-02-11 16:01:00.421 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:01:00.422 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4469ms - processed: 0 items - remaining: 2 items
2026-02-11 16:01:10.429 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:01:10.430 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-11 16:01:20.437 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:01:20.437 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-11 16:01:30.445 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:01:30.445 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-11 16:01:40.452 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:01:40.453 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-11 16:01:50.465 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:01:50.466 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-11 16:02:00.480 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:02:00.481 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 2 items
2026-02-11 16:02:10.492 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:02:10.493 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2026-02-11 16:02:20.508 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:02:20.509 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-11 16:02:30.519 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:02:30.520 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-11 16:02:40.534 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:02:40.535 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-11 16:02:50.545 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:02:50.546 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-11 16:03:00.557 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:03:00.557 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2026-02-11 16:03:10.570 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:03:10.571 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2026-02-11 16:03:20.580 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:03:20.581 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-11 16:03:30.585 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:03:30.586 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2026-02-11 16:03:40.597 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:03:40.598 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2026-02-11 16:03:50.611 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-11 16:03:50.612 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2026-02-11 16:04:37.686 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:04:37.879 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:04:37.882 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:04:37.886 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:04:37.889 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:04:37.891 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:37.893 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:04:44.472 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:04:44.674 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:04:44.677 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:04:44.681 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:04:44.683 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:04:44.684 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:04:44.685 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:44.689 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:04:44.691 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:44.693 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:04:44.693 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:44.694 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:04:44.694 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:04:44.695 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:04:44.697 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:04:44.697 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:44.697 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:04:53.172 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:04:53.360 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:04:53.362 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:04:53.366 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:04:53.368 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:04:53.370 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:53.372 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:04:56.149 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:04:56.349 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:04:56.352 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:04:56.356 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:04:56.358 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:04:56.359 +03:00 [DBG] Created DbConnection. (1ms).
2026-02-11 16:04:56.361 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:56.365 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:04:56.366 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:56.368 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:04:56.368 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:56.369 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:04:56.370 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:04:56.370 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:04:56.373 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:04:56.373 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:04:56.373 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:08.041 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:05:08.242 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:05:08.245 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:08.249 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:05:08.252 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:05:08.254 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:08.256 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:05:10.445 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:05:10.645 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:05:10.647 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:10.651 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:05:10.653 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:10.654 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:05:10.656 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:10.659 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:10.661 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:10.663 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:10.663 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:10.664 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:10.664 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:10.665 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:10.667 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:05:10.667 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:10.667 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:39.890 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:05:40.090 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:05:40.093 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:40.097 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:05:40.099 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:05:40.101 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:40.103 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:05:42.353 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:05:42.553 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:05:42.556 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:42.560 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-11 16:05:42.562 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:42.563 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:05:42.564 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:42.568 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:42.570 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:42.572 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:42.572 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:42.573 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:42.573 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:42.574 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:42.576 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:05:42.576 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:42.576 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.446 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:05:47.642 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:05:47.651 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:47.655 +03:00 [DBG] Created DbConnection. (2ms).
2026-02-11 16:05:47.657 +03:00 [DBG] Migrating using database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.658 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:47.659 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:05:47.660 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.664 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.664 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.666 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.666 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:47.666 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:05:47.666 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.666 +03:00 [DBG] An error occurred using the connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.666 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.666 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.666 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.670 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.672 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 16:05:47.674 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-11 16:05:47.675 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2026-02-11 16:05:47.677 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-11 16:05:47.687 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-02-11 16:05:47.688 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.689 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:05:47.722 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 16:05:47.722 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 16:05:47.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 16:05:47.722 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.722 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.722 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-11 16:05:47.725 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-02-11 16:05:47.725 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.725 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.726 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:05:47.726 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:05:47.726 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.726 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.727 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.727 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.728 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-11 16:05:47.728 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-11 16:05:47.728 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-11 16:05:47.728 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.728 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.728 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-11 16:05:47.729 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-02-11 16:05:47.730 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.730 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.730 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.730 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.730 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:05:47.730 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:05:47.730 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:05:47.730 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-11 16:05:47.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-11 16:05:47.731 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.732 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:05:47.732 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.732 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:47.736 +03:00 [INF] Applying migration '20260202104928_InitialStatistic'.
2026-02-11 16:05:47.744 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:47.744 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:47.745 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-11 16:05:48.328 +03:00 [DBG] Began transaction with isolation level 'Serializable'.
2026-02-11 16:05:48.328 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 16:05:48.328 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 16:05:48.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 16:05:48.328 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-11 16:05:48.328 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_WeatherRequests" PRIMARY KEY AUTOINCREMENT,
    "TimestampUtc" TEXT NOT NULL,
    "Endpoint" TEXT NOT NULL,
    "City" TEXT NOT NULL,
    "Date" TEXT NULL,
    "CacheHit" INTEGER NOT NULL,
    "StatusCode" INTEGER NOT NULL,
    "LatencyMs" INTEGER NOT NULL
);
2026-02-11 16:05:48.328 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-11 16:05:48.328 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 16:05:48.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-11 16:05:48.328 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-11 16:05:48.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260202104928_InitialStatistic', '8.0.0');
2026-02-11 16:05:48.329 +03:00 [DBG] Committing transaction.
2026-02-11 16:05:48.330 +03:00 [DBG] Committed transaction.
2026-02-11 16:05:48.331 +03:00 [DBG] Disposing transaction.
2026-02-11 16:05:48.331 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:05:48.331 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:48.331 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:05:48.332 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:05:48.332 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:05:57.476 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-11 16:05:57.548 +03:00 [DBG] Hosting starting
2026-02-11 16:05:57.662 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-11 16:05:57.663 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-11 16:05:57.664 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-11 16:05:57.665 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-11 16:05:57.665 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-11 16:05:57.665 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-11 16:05:57.689 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-11 16:05:57.689 +03:00 [INF] Hosting environment: Development
2026-02-11 16:05:57.690 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-11 16:05:57.691 +03:00 [DBG] Hosting started
2026-02-11 16:05:57.982 +03:00 [DBG] Connection id "0HNJ9DP641COT" accepted.
2026-02-11 16:05:57.982 +03:00 [DBG] Connection id "0HNJ9DP641COU" accepted.
2026-02-11 16:05:57.983 +03:00 [DBG] Connection id "0HNJ9DP641COT" started.
2026-02-11 16:05:57.983 +03:00 [DBG] Connection id "0HNJ9DP641COU" started.
2026-02-11 16:05:57.998 +03:00 [DBG] Connection id "0HNJ9DP641COT" received FIN.
2026-02-11 16:05:57.998 +03:00 [DBG] Connection id "0HNJ9DP641COU" received FIN.
2026-02-11 16:05:58.003 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 16:05:58.003 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 16:05:58.023 +03:00 [DBG] Connection id "0HNJ9DP641COT" stopped.
2026-02-11 16:05:58.023 +03:00 [DBG] Connection id "0HNJ9DP641COU" stopped.
2026-02-11 16:05:58.026 +03:00 [DBG] Connection id "0HNJ9DP641COU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 16:05:58.026 +03:00 [DBG] Connection id "0HNJ9DP641COT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 16:05:58.512 +03:00 [DBG] Connection id "0HNJ9DP641COV" accepted.
2026-02-11 16:05:58.514 +03:00 [DBG] Connection id "0HNJ9DP641COV" started.
2026-02-11 16:05:58.551 +03:00 [DBG] Connection 0HNJ9DP641COV established using the following protocol: "Tls13"
2026-02-11 16:05:58.593 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-11 16:05:58.659 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-11 16:05:58.673 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-11 16:05:58.674 +03:00 [DBG] Request did not match any endpoints
2026-02-11 16:05:58.676 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 16:05:58.708 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-11 16:05:58.709 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-11 16:05:58.721 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-11 16:05:58.722 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-11 16:05:58.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 134.7564ms
2026-02-11 16:05:58.755 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-11 16:05:58.765 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.4168ms
2026-02-11 16:05:58.792 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-11 16:05:58.822 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.6347ms
2026-02-11 16:05:58.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-11 16:05:58.893 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-11 16:05:58.894 +03:00 [DBG] Request did not match any endpoints
2026-02-11 16:05:58.895 +03:00 [DBG] The request path  does not match the path filter
2026-02-11 16:05:58.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.7627ms
2026-02-11 16:06:14.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минск?date=%20 - null null
2026-02-11 16:06:14.541 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минск'
2026-02-11 16:06:14.543 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минск'
2026-02-11 16:06:14.544 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:14.546 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:14.546 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:14.553 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:14.565 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:06:14.567 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:14.568 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:14.569 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:14.570 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:14.570 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:14.572 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:14.629 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-11 16:06:14.634 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:14.642 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:06:14.644 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:06:14.645 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:14.645 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:14.646 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:06:14.649 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:06:14.650 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:14.652 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:14.652 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:14.653 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:14.656 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:06:14.658 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:06:14.658 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:06:14.659 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:06:14.660 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 16:06:14.660 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 16:06:14.663 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 90.2906ms
2026-02-11 16:06:14.664 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:14.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минск?date=%20 - 400 null text/plain; charset=utf-8 128.524ms
2026-02-11 16:06:29.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минск?date=2026-02-11 - null null
2026-02-11 16:06:29.119 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минск'
2026-02-11 16:06:29.119 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минск'
2026-02-11 16:06:29.121 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:29.122 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:29.122 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:29.123 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:29.123 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:06:29.124 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:29.125 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:29.126 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:29.127 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:29.128 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:29.129 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:29.133 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:29.134 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:06:29.135 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:06:29.136 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:29.137 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:29.137 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:06:29.138 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:06:29.139 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:29.144 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:29.144 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:29.145 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:29.156 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B8%D0%BD%D1%81%D0%BA&count=1&language=ru
2026-02-11 16:06:29.162 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B8%D0%BD%D1%81%D0%BA&count=1&language=ru
2026-02-11 16:06:29.448 +03:00 [INF] Received HTTP response headers after 284.1354ms - 200
2026-02-11 16:06:29.451 +03:00 [INF] End processing HTTP request after 294.8903ms - 200
2026-02-11 16:06:29.460 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.9&longitude=27.56667&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 16:06:29.461 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.9&longitude=27.56667&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 16:06:29.724 +03:00 [INF] Received HTTP response headers after 261.7363ms - 200
2026-02-11 16:06:29.725 +03:00 [INF] End processing HTTP request after 264.922ms - 200
2026-02-11 16:06:29.731 +03:00 [INF] Endpoint = day, City = Минск, Date = 2026-02-11, Latency = FALSEms, CacheHit = 583, StatusCode = 200
2026-02-11 16:06:29.950 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:06:29.967 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:29.999 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:30.002 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:06:30.004 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:06:30.017 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:06:30.046 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:06:30.051 +03:00 [DBG] Created DbConnection. (4ms).
2026-02-11 16:06:30.053 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:30.059 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:30.063 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:06:30.066 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:06:30.069 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-11 16:06:30.073 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:06:30.084 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:06:30.092 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:06:30.097 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:30.101 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 13ms reading results.
2026-02-11 16:06:30.104 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:30.106 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:06:30.112 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:30.113 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:06:30.120 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:06:30.121 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:06:30.121 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:06:30.122 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:06:30.122 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:06:30.123 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 16:06:30.129 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1000.8611ms
2026-02-11 16:06:30.130 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:30.132 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:06:30.134 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:30.135 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (1ms).
2026-02-11 16:06:30.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минск?date=2026-02-11 - 200 null application/json; charset=utf-8 1020.7392ms
2026-02-11 16:06:32.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минск?date=2026-02-11 - null null
2026-02-11 16:06:32.162 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минск'
2026-02-11 16:06:32.163 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минск'
2026-02-11 16:06:32.164 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:32.165 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:32.166 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:32.166 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:32.167 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:06:32.168 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:32.169 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:32.170 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:32.171 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:32.171 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:32.172 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:32.176 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:32.177 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:06:32.177 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:06:32.178 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:32.179 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:32.180 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:06:32.180 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:06:32.181 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:32.182 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:32.182 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:32.183 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:32.184 +03:00 [INF] Endpoint = day, City = Минск, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 16:06:32.212 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:06:32.214 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:32.215 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:32.216 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:06:32.216 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:06:32.217 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:06:32.218 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:06:32.218 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:06:32.219 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:32.220 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:32.220 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:06:32.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:06:32.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:06:32.222 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:06:32.223 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:06:32.225 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:06:32.226 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:32.227 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:06:32.228 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:32.229 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:32.230 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:32.231 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:06:32.232 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-11 16:06:32.232 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 60.2643ms
2026-02-11 16:06:32.233 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:32.234 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:06:32.234 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:32.235 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:32.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минск?date=2026-02-11 - 304 null null 75.1868ms
2026-02-11 16:06:33.806 +03:00 [DBG] Connection id "0HNJ9DP641CP0" received FIN.
2026-02-11 16:06:33.806 +03:00 [DBG] Connection id "0HNJ9DP641CP0" accepted.
2026-02-11 16:06:33.808 +03:00 [DBG] Connection id "0HNJ9DP641CP0" started.
2026-02-11 16:06:33.808 +03:00 [DBG] Connection id "0HNJ9DP641CP1" accepted.
2026-02-11 16:06:33.809 +03:00 [DBG] Connection id "0HNJ9DP641CP1" started.
2026-02-11 16:06:33.809 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-11 16:06:33.811 +03:00 [DBG] Connection id "0HNJ9DP641CP0" stopped.
2026-02-11 16:06:33.812 +03:00 [DBG] Connection 0HNJ9DP641CP1 established using the following protocol: "Tls13"
2026-02-11 16:06:33.812 +03:00 [DBG] Connection id "0HNJ9DP641CP0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-11 16:06:33.815 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 16:06:33.817 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 16:06:33.817 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 16:06:33.818 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:06:33.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:33.819 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:33.820 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:06:33.823 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 16:06:33.824 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:33.825 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:33.826 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:33.827 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:33.828 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:33.829 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:06:33.830 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:06:33.831 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:33.832 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:33.833 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:33.833 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:33.834 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:33.835 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:33.835 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:33.836 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:33.837 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 16:06:33.837 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 16:06:33.838 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:06:33.839 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:06:33.840 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 16:06:33.840 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 16:06:33.841 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:06:33.842 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 16:06:33.843 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:06:33.844 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:06:33.845 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:06:33.845 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:06:33.858 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:06:33.883 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-11 16:06:33.964 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-11 16:06:33.977 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:06:33.977 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:06:33.978 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:33.979 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:33.979 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:06:33.980 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:06:33.981 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:06:33.981 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:06:33.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:06:33.984 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:33.985 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 16:06:33.986 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:33.987 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:33.991 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-11 16:06:33.998 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-11 16:06:34.001 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:34.002 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:34.002 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:06:34.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:06:34.003 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:06:34.004 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:06:34.005 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:06:34.008 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:34.009 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:06:34.010 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:34.010 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:34.011 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:06:34.013 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:06:34.013 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:06:34.014 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:06:34.014 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:06:34.015 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 16:06:34.023 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 193.9586ms
2026-02-11 16:06:34.024 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:06:34.024 +03:00 [DBG] Connection id "0HNJ9DP641CP1" completed keep alive response.
2026-02-11 16:06:34.025 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:06:34.026 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:34.026 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:34.027 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 211.8095ms
2026-02-11 16:06:36.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минск?date=2026-02-11 - null null
2026-02-11 16:06:36.844 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минск'
2026-02-11 16:06:36.845 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минск'
2026-02-11 16:06:36.846 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:36.847 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:36.847 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:36.848 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:36.849 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:06:36.850 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:36.850 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:36.851 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:36.852 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:36.853 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:36.854 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:36.855 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:36.855 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:06:36.856 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:06:36.857 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:36.858 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:36.859 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:06:36.860 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:06:36.861 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:36.862 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:36.862 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:36.863 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:36.864 +03:00 [INF] Endpoint = day, City = Минск, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 16:06:36.865 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:06:36.866 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:36.867 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:36.868 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:06:36.869 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:06:36.869 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:06:36.870 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:06:36.870 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:06:36.871 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:36.872 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:36.872 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:06:36.873 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:06:36.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:06:36.874 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:06:36.876 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 5), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:06:36.877 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:06:36.879 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:36.879 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:06:36.880 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:06:36.881 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:36.882 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:06:36.883 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:06:36.884 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-11 16:06:36.885 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 30.7998ms
2026-02-11 16:06:36.885 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:36.886 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:06:36.887 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:06:36.887 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:06:36.888 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минск?date=2026-02-11 - 304 null null 46.4626ms
2026-02-11 16:06:55.616 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минусинск?date=%20 - null null
2026-02-11 16:06:55.618 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минусинск'
2026-02-11 16:06:55.619 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минусинск'
2026-02-11 16:06:55.620 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:55.621 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:55.621 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:55.621 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:55.622 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:06:55.623 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:55.624 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:55.625 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:55.626 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:55.627 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:55.627 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:55.628 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:55.629 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:06:55.630 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:06:55.631 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:55.632 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:55.633 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:06:55.634 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:06:55.634 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:55.635 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:55.636 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:55.636 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:55.637 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:06:55.638 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:06:55.639 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:06:55.639 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:06:55.640 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 16:06:55.640 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 16:06:55.641 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 13.6771ms
2026-02-11 16:06:55.642 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:55.643 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минусинск?date=%20 - 400 null text/plain; charset=utf-8 27.8079ms
2026-02-11 16:06:59.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минусинск?date=2026-02-11 - null null
2026-02-11 16:06:59.839 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минусинск'
2026-02-11 16:06:59.840 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минусинск'
2026-02-11 16:06:59.841 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:59.842 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:59.842 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:06:59.843 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:06:59.843 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:06:59.844 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:06:59.845 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:06:59.846 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:06:59.847 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:06:59.848 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:06:59.848 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:59.849 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:06:59.850 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:06:59.851 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:06:59.852 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:59.852 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:06:59.853 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:06:59.854 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:06:59.854 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:59.855 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:59.856 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:06:59.856 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:06:59.857 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B8%D0%BD%D1%83%D1%81%D0%B8%D0%BD%D1%81%D0%BA&count=1&language=ru
2026-02-11 16:06:59.858 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%B8%D0%BD%D1%83%D1%81%D0%B8%D0%BD%D1%81%D0%BA&count=1&language=ru
2026-02-11 16:06:59.936 +03:00 [INF] Received HTTP response headers after 77.9797ms - 200
2026-02-11 16:06:59.937 +03:00 [INF] End processing HTTP request after 79.994ms - 200
2026-02-11 16:06:59.938 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.70117&longitude=91.70797&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 16:06:59.939 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.70117&longitude=91.70797&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 16:07:00.006 +03:00 [INF] Received HTTP response headers after 66.5734ms - 200
2026-02-11 16:07:00.007 +03:00 [INF] End processing HTTP request after 68.635ms - 200
2026-02-11 16:07:00.008 +03:00 [INF] Endpoint = day, City = Минусинск, Date = 2026-02-11, Latency = FALSEms, CacheHit = 150, StatusCode = 200
2026-02-11 16:07:00.009 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:07:00.010 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:00.011 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:00.012 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:07:00.013 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:07:00.013 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:07:00.014 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:07:00.014 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:07:00.015 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:00.016 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:00.016 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:00.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:00.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:00.018 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:07:00.020 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:07:00.021 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:07:00.022 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:00.023 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:07:00.023 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:00.024 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:00.025 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:00.026 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:07:00.027 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:07:00.028 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:07:00.028 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:07:00.028 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:07:00.029 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:07:00.030 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 16:07:00.030 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 181.9383ms
2026-02-11 16:07:00.031 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:00.032 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:07:00.032 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:00.033 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:00.034 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минусинск?date=2026-02-11 - 200 null application/json; charset=utf-8 195.837ms
2026-02-11 16:07:02.767 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 16:07:02.769 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 16:07:02.770 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 16:07:02.770 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:07:02.771 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:02.771 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:02.772 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:07:02.772 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 16:07:02.773 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:07:02.774 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:07:02.775 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:07:02.776 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:07:02.777 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:07:02.777 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:07:02.778 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:07:02.779 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:02.780 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:02.780 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:02.781 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:02.781 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:02.782 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:02.783 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:02.783 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:02.784 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 16:07:02.784 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 16:07:02.785 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:07:02.786 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:07:02.786 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 16:07:02.787 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 16:07:02.787 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:07:02.788 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 16:07:02.789 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:07:02.789 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:07:02.790 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:07:02.791 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:07:02.792 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:07:02.794 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:07:02.795 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:07:02.795 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:02.796 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:02.796 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:02.797 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:02.798 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:02.798 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:07:02.799 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:07:02.800 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:02.801 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:07:02.801 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:02.802 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:02.803 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:02.804 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:02.805 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:02.805 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:02.806 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:02.807 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:07:02.808 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:07:02.809 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:02.810 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:07:02.810 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:02.811 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:02.812 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:07:02.813 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:07:02.813 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:07:02.814 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:07:02.814 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:07:02.814 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 16:07:02.815 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 37.9516ms
2026-02-11 16:07:02.816 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:07:02.816 +03:00 [DBG] Connection id "0HNJ9DP641CP1" completed keep alive response.
2026-02-11 16:07:02.817 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:07:02.817 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:02.818 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:02.819 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 51.7413ms
2026-02-11 16:07:04.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Минусинск?date=2026-02-11 - null null
2026-02-11 16:07:04.731 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Минусинск'
2026-02-11 16:07:04.732 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Минусинск'
2026-02-11 16:07:04.733 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:04.733 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:04.734 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:04.734 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:04.735 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:07:04.736 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:07:04.736 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:07:04.737 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:07:04.739 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:07:04.739 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:07:04.740 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:07:04.741 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:07:04.742 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:07:04.743 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:07:04.744 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:07:04.744 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:07:04.745 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:07:04.746 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:07:04.747 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:04.747 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:04.748 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:04.749 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:04.749 +03:00 [INF] Endpoint = day, City = Минусинск, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 16:07:04.751 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:07:04.752 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:04.753 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:04.753 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:07:04.754 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:07:04.755 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:07:04.755 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:07:04.756 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:07:04.756 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:04.757 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:04.758 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:04.758 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:04.759 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:04.760 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:07:04.761 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 9), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:07:04.763 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:07:04.764 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:04.765 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:07:04.765 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:04.766 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:04.767 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:04.768 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:07:04.769 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-11 16:07:04.769 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.9264ms
2026-02-11 16:07:04.770 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:04.771 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:07:04.771 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:04.772 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:04.773 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Минусинск?date=2026-02-11 - 304 null null 43.6212ms
2026-02-11 16:07:06.334 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 16:07:06.335 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 16:07:06.336 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 16:07:06.336 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:07:06.337 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:06.337 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:06.338 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:07:06.338 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 16:07:06.339 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:07:06.340 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:07:06.341 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:07:06.342 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:07:06.343 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:07:06.344 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:07:06.345 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:07:06.345 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:06.346 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:06.347 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:06.347 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:06.348 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:06.349 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:06.350 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:06.350 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:06.351 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 16:07:06.352 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 16:07:06.352 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:07:06.353 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:07:06.354 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 16:07:06.354 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 16:07:06.355 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:07:06.356 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 16:07:06.357 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:07:06.358 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:07:06.359 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:07:06.360 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:07:06.361 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:07:06.362 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:07:06.363 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:07:06.363 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:06.364 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:06.365 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:06.365 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:06.366 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:06.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:07:06.367 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:07:06.369 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:06.369 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:07:06.370 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:06.371 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:06.372 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:06.373 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:06.373 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:06.374 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:06.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:06.375 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:07:06.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:07:06.378 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:06.378 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:07:06.379 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:06.380 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:06.381 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:07:06.382 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:07:06.382 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:07:06.383 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:07:06.383 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:07:06.384 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 16:07:06.384 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 40.731ms
2026-02-11 16:07:06.385 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:07:06.386 +03:00 [DBG] Connection id "0HNJ9DP641CP1" completed keep alive response.
2026-02-11 16:07:06.386 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:07:06.387 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:06.388 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:06.389 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 54.8835ms
2026-02-11 16:07:53.315 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=%20 - null null
2026-02-11 16:07:53.319 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Абакан'
2026-02-11 16:07:53.320 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Абакан'
2026-02-11 16:07:53.321 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:53.321 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:53.322 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:53.323 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:53.323 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:07:53.324 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:07:53.325 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:07:53.326 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:07:53.327 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:07:53.328 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:07:53.328 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:07:53.329 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:07:53.330 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:07:53.331 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:07:53.331 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:07:53.332 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:07:53.333 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:07:53.333 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:07:53.334 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:53.335 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:53.335 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:53.336 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:53.337 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:07:53.338 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:07:53.339 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:07:53.339 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:07:53.339 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-11 16:07:53.340 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-11 16:07:53.341 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 12.3755ms
2026-02-11 16:07:53.341 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:53.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=%20 - 400 null text/plain; charset=utf-8 27.3727ms
2026-02-11 16:07:58.293 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=2026-02-11 - null null
2026-02-11 16:07:58.295 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Абакан'
2026-02-11 16:07:58.295 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Абакан'
2026-02-11 16:07:58.296 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:58.297 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:58.297 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:07:58.298 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:58.298 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:07:58.300 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:07:58.301 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:07:58.302 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:07:58.302 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:07:58.303 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:07:58.304 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:07:58.305 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:07:58.306 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:07:58.306 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:07:58.307 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:07:58.308 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:07:58.308 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:07:58.309 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:07:58.310 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:58.311 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:58.311 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:07:58.312 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:07:58.313 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0%D0%BA%D0%B0%D0%BD&count=1&language=ru
2026-02-11 16:07:58.314 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0%D0%BA%D0%B0%D0%BD&count=1&language=ru
2026-02-11 16:07:58.372 +03:00 [INF] Received HTTP response headers after 57.6324ms - 200
2026-02-11 16:07:58.373 +03:00 [INF] End processing HTTP request after 59.9001ms - 200
2026-02-11 16:07:58.374 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.71556&longitude=91.42917&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 16:07:58.374 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.71556&longitude=91.42917&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-11 16:07:58.591 +03:00 [INF] Received HTTP response headers after 216.4197ms - 200
2026-02-11 16:07:58.592 +03:00 [INF] End processing HTTP request after 218.6952ms - 200
2026-02-11 16:07:58.593 +03:00 [INF] Endpoint = day, City = Абакан, Date = 2026-02-11, Latency = FALSEms, CacheHit = 280, StatusCode = 200
2026-02-11 16:07:58.595 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:07:58.596 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:58.597 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:58.597 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:07:58.598 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:07:58.599 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:07:58.599 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:07:58.600 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:07:58.600 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:58.601 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:58.601 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:07:58.602 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:07:58.603 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:07:58.603 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:07:58.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:07:58.605 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:07:58.606 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:58.607 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:07:58.608 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:07:58.609 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:58.611 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:07:58.612 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:07:58.613 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:07:58.614 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:07:58.615 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:07:58.615 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:07:58.616 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:07:58.616 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-11 16:07:58.617 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 312.964ms
2026-02-11 16:07:58.618 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:07:58.618 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:07:58.619 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:07:58.620 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:07:58.620 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=2026-02-11 - 200 null application/json; charset=utf-8 328.2617ms
2026-02-11 16:08:00.053 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 16:08:00.055 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 16:08:00.055 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 16:08:00.056 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:00.057 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:00.057 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:00.058 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:00.058 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 16:08:00.059 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:08:00.060 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:08:00.061 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:08:00.062 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:08:00.063 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:08:00.064 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:08:00.065 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:08:00.065 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:00.066 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:00.067 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:00.068 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:00.068 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:00.069 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:00.070 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:00.070 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:00.071 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 16:08:00.072 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 16:08:00.072 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:00.073 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:00.074 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 16:08:00.074 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:00.075 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:08:00.076 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 16:08:00.077 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:00.077 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:00.078 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:08:00.079 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:00.080 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:08:00.081 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:08:00.081 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:08:00.082 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:00.083 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:00.083 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:00.084 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:00.084 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:00.085 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:08:00.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:08:00.087 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:00.088 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:08:00.089 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:00.089 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:00.090 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:00.091 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:00.091 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:00.092 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:00.093 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:00.093 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:08:00.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:08:00.096 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:00.096 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:08:00.097 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:00.098 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:00.098 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:08:00.099 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:08:00.100 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:08:00.100 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:08:00.100 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:08:00.101 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 16:08:00.102 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 37.8783ms
2026-02-11 16:08:00.102 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:00.103 +03:00 [DBG] Connection id "0HNJ9DP641CP1" completed keep alive response.
2026-02-11 16:08:00.104 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:08:00.104 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:00.105 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:00.106 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 52.9104ms
2026-02-11 16:08:02.099 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=2026-02-11 - null null
2026-02-11 16:08:02.100 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Абакан'
2026-02-11 16:08:02.101 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/Абакан'
2026-02-11 16:08:02.102 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:08:02.102 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:02.103 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:02.103 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:08:02.104 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:08:02.104 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:08:02.105 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:08:02.106 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:08:02.107 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:08:02.108 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:08:02.108 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:08:02.109 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:08:02.110 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:08:02.111 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:08:02.112 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:08:02.113 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:08:02.114 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:08:02.115 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:08:02.115 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:02.116 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:02.116 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:02.117 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:02.118 +03:00 [INF] Endpoint = day, City = Абакан, Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 16:08:02.119 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:08:02.120 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:02.121 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:02.122 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:08:02.122 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:08:02.123 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:08:02.124 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:08:02.124 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:08:02.125 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:02.125 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:02.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:02.127 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:02.128 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:02.128 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:08:02.130 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 3), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:08:02.131 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:08:02.132 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:02.133 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:08:02.133 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:02.134 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:02.135 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:02.136 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:08:02.137 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-11 16:08:02.137 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 28.6186ms
2026-02-11 16:08:02.138 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-11 16:08:02.138 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:08:02.139 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:02.140 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:02.141 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Абакан?date=2026-02-11 - 304 null null 42.0829ms
2026-02-11 16:08:03.830 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 16:08:03.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 16:08:03.832 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 16:08:03.833 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:03.834 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:03.834 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:03.835 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:03.835 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 16:08:03.836 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:08:03.837 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:08:03.838 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:08:03.839 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:08:03.840 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:08:03.840 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:08:03.841 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:08:03.842 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:03.843 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:03.844 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:03.844 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:03.845 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:03.846 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:03.847 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:03.847 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:03.848 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 16:08:03.849 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 16:08:03.849 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:03.850 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:03.851 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 16:08:03.852 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:03.852 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:08:03.853 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 16:08:03.854 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:03.854 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:03.855 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:08:03.856 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:03.857 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:08:03.858 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:08:03.859 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:08:03.859 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:03.860 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:03.861 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:03.861 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:03.862 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:03.863 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:08:03.864 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:08:03.865 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:03.866 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:08:03.866 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:03.867 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:03.868 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:03.869 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:03.870 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:03.870 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:03.871 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:03.871 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:08:03.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:08:03.874 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:03.874 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:08:03.875 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:03.876 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:03.877 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:08:03.878 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:08:03.878 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:08:03.879 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:08:03.879 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:08:03.880 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 16:08:03.881 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 40.3927ms
2026-02-11 16:08:03.881 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:03.882 +03:00 [DBG] Connection id "0HNJ9DP641CP1" completed keep alive response.
2026-02-11 16:08:03.883 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:08:03.883 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:03.884 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:03.885 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 54.7571ms
2026-02-11 16:08:10.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Абакан/week - null null
2026-02-11 16:08:10.723 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Абакан/week'
2026-02-11 16:08:10.724 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Абакан/week'
2026-02-11 16:08:10.725 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 16:08:10.725 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:10.726 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:10.726 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 16:08:10.729 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:08:10.730 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:08:10.731 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:08:10.732 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:08:10.733 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:08:10.734 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:08:10.735 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:08:10.735 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:08:10.736 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:08:10.737 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:08:10.738 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:08:10.738 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:08:10.739 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:08:10.740 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:08:10.742 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0%D0%BA%D0%B0%D0%BD&count=1&language=ru
2026-02-11 16:08:10.743 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0%D0%BA%D0%B0%D0%BD&count=1&language=ru
2026-02-11 16:08:10.802 +03:00 [INF] Received HTTP response headers after 57.9049ms - 200
2026-02-11 16:08:10.803 +03:00 [INF] End processing HTTP request after 60.2578ms - 200
2026-02-11 16:08:10.804 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.71556&longitude=91.42917&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 16:08:10.805 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=53.71556&longitude=91.42917&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-11 16:08:11.040 +03:00 [INF] Received HTTP response headers after 234.1421ms - 200
2026-02-11 16:08:11.041 +03:00 [INF] End processing HTTP request after 236.5515ms - 200
2026-02-11 16:08:11.042 +03:00 [INF] Endpoint = week, City = Абакан, Date = -, Latency = FALSEms, CacheHit = 300, StatusCode = 200
2026-02-11 16:08:11.044 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:08:11.045 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:11.045 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:11.046 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:08:11.047 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:08:11.047 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:08:11.048 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:08:11.048 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:08:11.049 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:11.050 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:11.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:11.051 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:11.051 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:11.052 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:08:11.053 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:08:11.054 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:08:11.056 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:11.056 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:08:11.057 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:11.058 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:11.059 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:11.060 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:08:11.061 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:08:11.062 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:08:11.063 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:08:11.063 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:08:11.063 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:08:11.064 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-11 16:08:11.066 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 331.3624ms
2026-02-11 16:08:11.067 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 16:08:11.067 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:08:11.068 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:11.068 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:11.069 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Абакан/week - 200 null application/json; charset=utf-8 347.8292ms
2026-02-11 16:08:23.375 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather/Абакан/week - null null
2026-02-11 16:08:23.377 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Абакан/week'
2026-02-11 16:08:23.378 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Абакан/week'
2026-02-11 16:08:23.379 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 16:08:23.379 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:23.380 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:23.381 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 16:08:23.381 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-11 16:08:23.382 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:08:23.383 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:08:23.384 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:08:23.385 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:08:23.386 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:08:23.387 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:08:23.387 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-11 16:08:23.388 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:08:23.389 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:08:23.390 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:08:23.390 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:08:23.391 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:08:23.392 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:08:23.393 +03:00 [INF] Endpoint = week, City = Абакан, Date = -, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-11 16:08:23.394 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:08:23.395 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:23.396 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:23.397 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-11 16:08:23.397 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-11 16:08:23.398 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-11 16:08:23.398 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:08:23.399 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:08:23.399 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:23.400 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:23.401 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:23.401 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:23.402 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:23.403 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:08:23.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 6), @p2='?' (DbType = Date), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-11 16:08:23.405 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-11 16:08:23.406 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:23.407 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 2ms reading results.
2026-02-11 16:08:23.408 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:23.408 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:23.409 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-11 16:08:23.410 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-11 16:08:23.411 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 304
2026-02-11 16:08:23.412 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 24.8827ms
2026-02-11 16:08:23.412 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-11 16:08:23.413 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:08:23.413 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:23.414 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:23.415 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather/Абакан/week - 304 null null 39.7344ms
2026-02-11 16:08:24.786 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-11 16:08:24.788 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-11 16:08:24.788 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-11 16:08:24.789 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:24.789 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:24.790 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:08:24.790 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:24.791 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-11 16:08:24.792 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:08:24.793 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:08:24.794 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:08:24.795 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:08:24.796 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:08:24.796 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:08:24.797 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-11 16:08:24.798 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:24.799 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:24.800 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:24.800 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:24.801 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:24.802 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:24.802 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-11 16:08:24.803 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-11 16:08:24.804 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-11 16:08:24.804 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-11 16:08:24.805 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:24.806 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:24.806 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-11 16:08:24.807 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-11 16:08:24.808 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:08:24.809 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-11 16:08:24.809 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:24.810 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:24.811 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-11 16:08:24.812 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-11 16:08:24.813 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2026-02-11 16:08:24.814 +03:00 [DBG] Creating DbConnection.
2026-02-11 16:08:24.815 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-11 16:08:24.815 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:24.816 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:24.817 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:24.817 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:24.818 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:24.819 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:08:24.820 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
2026-02-11 16:08:24.821 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:24.822 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 0ms reading results.
2026-02-11 16:08:24.822 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:24.823 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:24.824 +03:00 [DBG] Opening connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:24.825 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:24.826 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-11 16:08:24.827 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-11 16:08:24.827 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-11 16:08:24.828 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:08:24.830 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "w"."TimestampUtc", "w"."Endpoint", "w"."City", "w"."Date", "w"."CacheHit", "w"."StatusCode", "w"."LatencyMs"
FROM "WeatherRequests" AS "w"
WHERE "w"."TimestampUtc" >= @__fromUtc_0 AND "w"."TimestampUtc" <= @__toUtc_1
ORDER BY "w"."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-11 16:08:24.832 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:24.832 +03:00 [DBG] A data reader for 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db' is being disposed after spending 1ms reading results.
2026-02-11 16:08:24.833 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Sergey\WeatherInfo\WeatherInfo.API\WeatherInfo.db'.
2026-02-11 16:08:24.834 +03:00 [DBG] Closed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:24.835 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:08:24.836 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:08:24.837 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:08:24.837 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:08:24.837 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:08:24.838 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-11 16:08:24.839 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 42.6038ms
2026-02-11 16:08:24.840 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-11 16:08:24.840 +03:00 [DBG] Connection id "0HNJ9DP641CP1" completed keep alive response.
2026-02-11 16:08:24.841 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-11 16:08:24.842 +03:00 [DBG] Disposing connection to database 'main' on server 'WeatherInfo.db'.
2026-02-11 16:08:24.842 +03:00 [DBG] Disposed connection to database 'main' on server 'WeatherInfo.db' (0ms).
2026-02-11 16:08:24.843 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 57.2153ms
2026-02-11 16:08:29.159 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-11 16:08:39.168 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:08:39.171 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0473ms - processed: 0 items - remaining: 1 items
2026-02-11 16:08:49.181 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:08:49.182 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 16:08:59.196 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:08:59.197 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 16:09:09.200 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:09:09.200 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2026-02-11 16:09:19.203 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:09:19.204 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 16:09:29.220 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:09:29.221 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-11 16:09:39.227 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:09:39.228 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-11 16:09:49.230 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:09:49.231 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-11 16:09:53.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%90%D0%B1%D0%B0 - null null
2026-02-11 16:09:53.660 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 16:09:53.660 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 16:09:53.661 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 16:09:53.662 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:09:53.662 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:09:53.663 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 16:09:53.665 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 16:09:53.667 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:09:53.667 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:09:53.668 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:09:53.669 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:09:53.670 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:09:53.671 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 16:09:53.671 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 16:09:53.672 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:09:53.673 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:09:53.674 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:09:53.674 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:09:53.675 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:09:53.676 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:09:53.678 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0&count=10&language=ru
2026-02-11 16:09:53.679 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%B0&count=10&language=ru
2026-02-11 16:09:53.930 +03:00 [INF] Received HTTP response headers after 251.1722ms - 200
2026-02-11 16:09:53.931 +03:00 [INF] End processing HTTP request after 253.6405ms - 200
2026-02-11 16:09:53.933 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:09:53.934 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:09:53.934 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:09:53.935 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:09:53.935 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:09:53.936 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 16:09:53.938 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 267.5672ms
2026-02-11 16:09:53.939 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 16:09:53.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%90%D0%B1%D0%B0 - 200 null application/json; charset=utf-8 284.9709ms
2026-02-11 16:09:59.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:09:59.240 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-11 16:10:09.244 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:10:09.245 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 16:10:19.261 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:10:19.262 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-11 16:10:20.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%90%D0%B1%D0%BE - null null
2026-02-11 16:10:20.954 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-11 16:10:20.955 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-11 16:10:20.956 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 16:10:20.956 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:10:20.957 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-11 16:10:20.957 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 16:10:20.957 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-11 16:10:20.958 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-11 16:10:20.959 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-11 16:10:20.960 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-11 16:10:20.961 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-11 16:10:20.963 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-11 16:10:20.964 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 16:10:20.965 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-11 16:10:20.966 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-11 16:10:20.967 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-11 16:10:20.969 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:10:20.970 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-11 16:10:20.971 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-11 16:10:20.972 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-11 16:10:20.972 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%BE&count=10&language=ru
2026-02-11 16:10:20.973 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%90%D0%B1%D0%BE&count=10&language=ru
2026-02-11 16:10:21.046 +03:00 [INF] Received HTTP response headers after 72.2382ms - 200
2026-02-11 16:10:21.048 +03:00 [INF] End processing HTTP request after 75.0591ms - 200
2026-02-11 16:10:21.049 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-11 16:10:21.050 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-11 16:10:21.051 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-11 16:10:21.051 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-11 16:10:21.052 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-11 16:10:21.053 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-11 16:10:21.054 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 89.744ms
2026-02-11 16:10:21.055 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-11 16:10:21.055 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%90%D0%B1%D0%BE - 200 null application/json; charset=utf-8 105.9097ms
2026-02-11 16:10:29.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:10:29.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4678ms - processed: 0 items - remaining: 1 items
2026-02-11 16:10:39.278 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-11 16:10:39.279 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
