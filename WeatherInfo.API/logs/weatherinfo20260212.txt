2026-02-12 20:17:34.244 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:17:34.469 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:17:34.673 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:17:34.677 +03:00 [DBG] Created DbConnection. (3ms).
2026-02-12 20:17:34.682 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:17:34.685 +03:00 [DBG] Disposing connection to database '' on server ''.
2026-02-12 20:17:34.688 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2026-02-12 20:18:18.289 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:18:18.509 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:18:18.512 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:18:18.514 +03:00 [DBG] Created DbConnection. (1ms).
2026-02-12 20:18:18.516 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:18:18.518 +03:00 [DBG] Disposing connection to database '' on server ''.
2026-02-12 20:18:18.519 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2026-02-12 20:18:21.271 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:18:21.484 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:18:21.487 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:18:21.490 +03:00 [DBG] Created DbConnection. (2ms).
2026-02-12 20:18:21.497 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:18:21.498 +03:00 [DBG] Disposing connection to database '' on server ''.
2026-02-12 20:18:21.500 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2026-02-12 20:20:36.584 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:20:36.814 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:20:36.817 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:20:36.833 +03:00 [DBG] Created DbConnection. (15ms).
2026-02-12 20:20:36.836 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:20:36.838 +03:00 [DBG] Disposing connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:20:36.840 +03:00 [DBG] Disposed connection to database 'weatherdb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 20:20:39.271 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:20:39.495 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:20:39.498 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:20:39.510 +03:00 [DBG] Created DbConnection. (11ms).
2026-02-12 20:20:39.515 +03:00 [DBG] Opening connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:20:39.598 +03:00 [DBG] An error occurred using the connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:20:39.600 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:20:39.601 +03:00 [DBG] Disposing connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:20:39.603 +03:00 [DBG] Disposed connection to database 'weatherdb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 20:58:42.487 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:58:42.718 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:58:42.721 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:58:42.733 +03:00 [DBG] Created DbConnection. (11ms).
2026-02-12 20:58:42.735 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:58:42.737 +03:00 [DBG] Disposing connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:58:42.738 +03:00 [DBG] Disposed connection to database 'weatherdb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 20:58:45.161 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 20:58:45.397 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 20:58:45.400 +03:00 [DBG] Creating DbConnection.
2026-02-12 20:58:45.414 +03:00 [DBG] Created DbConnection. (13ms).
2026-02-12 20:58:45.419 +03:00 [DBG] Opening connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:58:45.467 +03:00 [DBG] An error occurred using the connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:58:45.469 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 20:58:45.470 +03:00 [DBG] Disposing connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 20:58:45.472 +03:00 [DBG] Disposed connection to database 'weatherdb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:00:01.737 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:00:01.947 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:00:02.138 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:00:02.149 +03:00 [DBG] Created DbConnection. (10ms).
2026-02-12 21:00:02.154 +03:00 [DBG] Opening connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 21:00:02.203 +03:00 [DBG] An error occurred using the connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 21:00:02.212 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:00:02.213 +03:00 [DBG] Disposing connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 21:00:02.216 +03:00 [DBG] Disposed connection to database 'weatherdb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:00:43.620 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:00:43.832 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:00:43.837 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:00:43.850 +03:00 [DBG] Created DbConnection. (12ms).
2026-02-12 21:00:43.853 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:00:43.856 +03:00 [DBG] Disposing connection to database 'weatherdb' on server 'tcp://localhost:5432'.
2026-02-12 21:00:43.859 +03:00 [DBG] Disposed connection to database 'weatherdb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:02:50.750 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:02:50.964 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:02:51.172 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:03:34.040 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:03:34.248 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:03:34.257 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:03:34.267 +03:00 [DBG] Created DbConnection. (9ms).
2026-02-12 21:03:34.270 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.334 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.335 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.340 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:03:34.342 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:03:34.345 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2026-02-12 21:03:34.346 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2026-02-12 21:03:34.346 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.384 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.387 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:03:34.415 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:03:34.416 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.416 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.417 +03:00 [DBG] Migrating using database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.417 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.445 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.445 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.445 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.446 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:03:34.446 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:03:34.446 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:03:34.446 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.446 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.446 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:03:34.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:03:34.447 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.447 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.447 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.474 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.475 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.475 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.506 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:03:34.506 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:03:34.506 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:03:34.506 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.506 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.506 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-12 21:03:34.513 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-12 21:03:34.514 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.514 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.614 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.642 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.642 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.642 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.642 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:03:34.642 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:03:34.642 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:03:34.642 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.642 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.642 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:03:34.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:03:34.643 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.643 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.644 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.644 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.644 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:03:34.644 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:03:34.644 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:03:34.644 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:03:34.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:03:34.645 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.646 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:03:34.646 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.646 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:34.650 +03:00 [INF] Applying migration '20260212180251_Initial'.
2026-02-12 21:03:34.656 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.656 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:34.656 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-12 21:03:34.658 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-12 21:03:34.658 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:03:34.658 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:03:34.658 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:03:34.658 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimestampUtc" timestamp with time zone NOT NULL,
    "Endpoint" text NOT NULL,
    "City" character varying(100) NOT NULL,
    "Date" date,
    "CacheHit" boolean NOT NULL,
    "StatusCode" integer NOT NULL,
    "LatencyMs" integer NOT NULL,
    CONSTRAINT "PK_WeatherRequests" PRIMARY KEY ("Id")
);
2026-02-12 21:03:34.662 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimestampUtc" timestamp with time zone NOT NULL,
    "Endpoint" text NOT NULL,
    "City" character varying(100) NOT NULL,
    "Date" date,
    "CacheHit" boolean NOT NULL,
    "StatusCode" integer NOT NULL,
    "LatencyMs" integer NOT NULL,
    CONSTRAINT "PK_WeatherRequests" PRIMARY KEY ("Id")
);
2026-02-12 21:03:36.671 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:03:36.671 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:03:36.671 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:03:36.671 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260212180251_Initial', '8.0.0');
2026-02-12 21:03:36.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260212180251_Initial', '8.0.0');
2026-02-12 21:03:36.673 +03:00 [DBG] Committing transaction.
2026-02-12 21:03:36.674 +03:00 [DBG] Committed transaction.
2026-02-12 21:03:36.675 +03:00 [DBG] Disposing transaction.
2026-02-12 21:03:36.675 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:36.675 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:03:36.676 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:03:36.677 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:03:36.677 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:06:34.669 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:06:34.888 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:06:35.068 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:06:35.079 +03:00 [DBG] Created DbConnection. (10ms).
2026-02-12 21:06:35.084 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.145 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.147 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.152 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (3ms).
2026-02-12 21:06:35.156 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:06:35.160 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2026-02-12 21:06:35.161 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2026-02-12 21:06:35.162 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.199 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.203 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:06:35.230 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:06:35.232 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.234 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:06:35.241 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.242 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.243 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:06:35.244 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:06:35.245 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:06:35.246 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:06:35.249 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:06:35.253 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.255 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 21:06:35.256 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.257 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:06:35.259 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:06:35.261 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:35.262 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:06:51.078 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:06:51.289 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:06:51.467 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:06:51.479 +03:00 [DBG] Created DbConnection. (10ms).
2026-02-12 21:06:51.483 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.543 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.546 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.551 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (3ms).
2026-02-12 21:06:51.555 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:06:51.558 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2026-02-12 21:06:51.560 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2026-02-12 21:06:51.561 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.597 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.602 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:06:51.630 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:06:51.632 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.634 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:06:51.642 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.644 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.645 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:06:51.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:06:51.647 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:06:51.648 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:06:51.651 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:06:51.655 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.657 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 21:06:51.658 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.659 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:06:51.661 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:06:51.663 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:06:51.664 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:07:11.755 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:07:11.969 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:07:12.147 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:07:12.158 +03:00 [DBG] Created DbConnection. (10ms).
2026-02-12 21:07:12.163 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.223 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.225 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.230 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (3ms).
2026-02-12 21:07:12.234 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:07:12.238 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2026-02-12 21:07:12.239 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2026-02-12 21:07:12.240 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.277 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.281 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:07:12.309 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:07:12.311 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.313 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:07:12.319 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.321 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.322 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:07:12.323 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:07:12.324 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:07:12.325 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:07:12.327 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:07:12.331 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.333 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-02-12 21:07:12.334 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.335 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:07:12.337 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:07:12.338 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:07:12.340 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:07:28.110 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:07:28.321 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:07:28.482 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:08:48.517 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:08:48.725 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:08:48.934 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:09:06.539 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:09:06.746 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:09:06.756 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:09:06.766 +03:00 [DBG] Created DbConnection. (9ms).
2026-02-12 21:09:06.770 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.829 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.830 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.835 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:09:06.837 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:09:06.840 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2026-02-12 21:09:06.840 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2026-02-12 21:09:06.840 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.875 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.878 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:09:06.904 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:09:06.905 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.905 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:06.913 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.913 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.913 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:09:06.913 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:09:06.913 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:09:06.914 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:09:06.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:09:06.917 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.918 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-12 21:09:06.918 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.918 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:06.918 +03:00 [DBG] Migrating using database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.918 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.947 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.947 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.948 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:06.948 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:09:06.948 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:09:06.948 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:09:06.948 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.948 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.948 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:09:06.948 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:09:06.948 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.948 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:06.949 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.976 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.976 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.976 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:06.976 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:09:06.976 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:09:06.976 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:09:06.976 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.976 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.976 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:09:06.977 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:09:06.977 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.977 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:06.977 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.977 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.977 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:09:06.977 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:09:06.977 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:09:06.977 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:09:06.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:09:06.978 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.978 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:09:06.978 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:06.978 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:08.225 +03:00 [INF] Applying migration '20260212180848_Initial'.
2026-02-12 21:09:08.236 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:08.236 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:08.237 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-12 21:09:08.238 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-12 21:09:08.238 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:09:08.238 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:09:08.239 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:09:08.239 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimestampUtc" timestamp with time zone NOT NULL,
    "Endpoint" text NOT NULL,
    "City" character varying(100) NOT NULL,
    "Date" date,
    "CacheHit" boolean NOT NULL,
    "StatusCode" integer NOT NULL,
    "LatencyMs" integer NOT NULL,
    CONSTRAINT "PK_WeatherRequests" PRIMARY KEY ("Id")
);
2026-02-12 21:09:08.244 +03:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimestampUtc" timestamp with time zone NOT NULL,
    "Endpoint" text NOT NULL,
    "City" character varying(100) NOT NULL,
    "Date" date,
    "CacheHit" boolean NOT NULL,
    "StatusCode" integer NOT NULL,
    "LatencyMs" integer NOT NULL,
    CONSTRAINT "PK_WeatherRequests" PRIMARY KEY ("Id")
);
2026-02-12 21:09:08.245 +03:00 [DBG] Disposing transaction.
2026-02-12 21:09:08.246 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:08.246 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:08.246 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:09:08.247 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:08.247 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:09:56.994 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:09:57.221 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:09:57.224 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:09:57.237 +03:00 [DBG] Created DbConnection. (12ms).
2026-02-12 21:09:57.239 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:09:57.241 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:09:57.243 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:10:03.866 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:10:04.100 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:10:04.103 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:10:04.115 +03:00 [DBG] Created DbConnection. (12ms).
2026-02-12 21:10:04.120 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.184 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.185 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.189 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:10:04.192 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:10:04.193 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:10:04.193 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.249 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.252 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:10:04.255 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2026-02-12 21:10:04.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2026-02-12 21:10:04.258 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "WeatherInfoDb" WITH (FORCE);
2026-02-12 21:10:04.310 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "WeatherInfoDb" WITH (FORCE);
2026-02-12 21:10:04.310 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.310 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:10:04.311 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.311 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:10:04.312 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:10:04.312 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:04.312 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:10:37.946 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:10:38.167 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:10:38.353 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:10:38.364 +03:00 [DBG] Created DbConnection. (10ms).
2026-02-12 21:10:38.369 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:38.416 +03:00 [DBG] An error occurred using the connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:38.425 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:10:38.426 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:10:38.429 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:12:09.229 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:12:09.446 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:12:09.652 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:12:16.575 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:12:16.790 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:12:16.800 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:12:16.810 +03:00 [DBG] Created DbConnection. (9ms).
2026-02-12 21:12:16.814 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.873 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.874 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.878 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:12:16.881 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:12:16.883 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2026-02-12 21:12:16.883 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2026-02-12 21:12:16.883 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.919 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.922 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:12:16.947 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:12:16.947 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.948 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:16.949 +03:00 [DBG] Migrating using database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.949 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.976 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.976 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.977 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:16.977 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:12:16.977 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:12:16.977 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:12:16.977 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.977 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.977 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:12:16.978 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:12:16.978 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:16.978 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:16.979 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.006 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.006 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.006 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:17.036 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:12:17.037 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:12:17.037 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:12:17.037 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.037 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.037 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-12 21:12:17.043 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-12 21:12:17.043 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.043 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:17.043 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.073 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.073 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.073 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:17.073 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2026-02-12 21:12:17.073 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:12:17.073 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2026-02-12 21:12:17.073 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.073 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.074 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:12:17.074 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2026-02-12 21:12:17.074 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.074 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:17.075 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.075 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.075 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:12:17.075 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:12:17.075 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:12:17.075 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:12:17.076 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-12 21:12:17.077 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.077 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:12:17.077 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:17.077 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:17.082 +03:00 [INF] Applying migration '20260212181209_Initial'.
2026-02-12 21:12:17.087 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:18.664 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:18.665 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-12 21:12:18.666 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-12 21:12:18.666 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:12:18.666 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:12:18.666 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:12:18.666 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimestampUtc" timestamp with time zone NOT NULL,
    "Endpoint" text NOT NULL,
    "City" character varying(100) NOT NULL,
    "Date" date,
    "CacheHit" boolean NOT NULL,
    "StatusCode" integer NOT NULL,
    "LatencyMs" integer NOT NULL,
    CONSTRAINT "PK_WeatherRequests" PRIMARY KEY ("Id")
);
2026-02-12 21:12:18.670 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WeatherRequests" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "TimestampUtc" timestamp with time zone NOT NULL,
    "Endpoint" text NOT NULL,
    "City" character varying(100) NOT NULL,
    "Date" date,
    "CacheHit" boolean NOT NULL,
    "StatusCode" integer NOT NULL,
    "LatencyMs" integer NOT NULL,
    CONSTRAINT "PK_WeatherRequests" PRIMARY KEY ("Id")
);
2026-02-12 21:12:18.670 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-12 21:12:18.670 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:12:18.670 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-12 21:12:18.670 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260212181209_Initial', '8.0.0');
2026-02-12 21:12:18.670 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260212181209_Initial', '8.0.0');
2026-02-12 21:12:18.671 +03:00 [DBG] Committing transaction.
2026-02-12 21:12:18.672 +03:00 [DBG] Committed transaction.
2026-02-12 21:12:18.673 +03:00 [DBG] Disposing transaction.
2026-02-12 21:12:18.673 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:18.673 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:12:18.674 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:12:18.675 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:12:18.675 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:10.554 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 21:15:10.645 +03:00 [DBG] Hosting starting
2026-02-12 21:15:10.802 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 21:15:10.803 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 21:15:10.803 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 21:15:10.804 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 21:15:10.805 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 21:15:10.805 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 21:15:10.832 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 21:15:10.832 +03:00 [INF] Hosting environment: Development
2026-02-12 21:15:10.833 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 21:15:10.834 +03:00 [DBG] Hosting started
2026-02-12 21:15:11.001 +03:00 [DBG] Connection id "0HNJACAKI1803" received FIN.
2026-02-12 21:15:11.005 +03:00 [DBG] Connection id "0HNJACAKI1803" accepted.
2026-02-12 21:15:11.006 +03:00 [DBG] Connection id "0HNJACAKI1803" started.
2026-02-12 21:15:11.015 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:15:11.042 +03:00 [DBG] Connection id "0HNJACAKI1803" stopped.
2026-02-12 21:15:11.045 +03:00 [DBG] Connection id "0HNJACAKI1803" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:15:11.550 +03:00 [DBG] Connection id "0HNJACAKI1804" accepted.
2026-02-12 21:15:11.557 +03:00 [DBG] Connection id "0HNJACAKI1804" started.
2026-02-12 21:15:11.601 +03:00 [DBG] Connection 0HNJACAKI1804 established using the following protocol: "Tls13"
2026-02-12 21:15:11.643 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 21:15:11.738 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 21:15:11.751 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 21:15:11.752 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:15:11.755 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:15:11.786 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 21:15:11.787 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 21:15:11.797 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 21:15:11.797 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 21:15:11.799 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 158.7157ms
2026-02-12 21:15:11.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 21:15:11.836 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.2485ms
2026-02-12 21:15:11.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 21:15:11.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.4722ms
2026-02-12 21:15:11.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 21:15:11.984 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 21:15:11.985 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:15:11.987 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:15:11.993 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.6411ms
2026-02-12 21:15:16.940 +03:00 [DBG] Connection id "0HNJACAKI1805" accepted.
2026-02-12 21:15:16.941 +03:00 [DBG] Connection id "0HNJACAKI1805" started.
2026-02-12 21:15:16.942 +03:00 [DBG] Connection id "0HNJACAKI1805" received FIN.
2026-02-12 21:15:16.942 +03:00 [DBG] Connection id "0HNJACAKI1806" accepted.
2026-02-12 21:15:16.944 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:15:16.947 +03:00 [DBG] Connection id "0HNJACAKI1806" started.
2026-02-12 21:15:16.949 +03:00 [DBG] Connection id "0HNJACAKI1805" stopped.
2026-02-12 21:15:16.950 +03:00 [DBG] Connection id "0HNJACAKI1805" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:15:16.953 +03:00 [DBG] Connection 0HNJACAKI1806 established using the following protocol: "Tls13"
2026-02-12 21:15:16.956 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - null null
2026-02-12 21:15:16.960 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/'
2026-02-12 21:15:16.962 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/'
2026-02-12 21:15:16.963 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:16.965 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:16.966 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:16.972 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:16.985 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:15:16.987 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:15:16.988 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:15:16.989 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:15:16.991 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:15:16.992 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:15:16.994 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:17.063 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:15:17.068 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:17.086 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:15:17.088 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:15:17.089 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:17.090 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:17.091 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:15:17.095 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:15:17.097 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:17.100 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:17.101 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:17.102 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:17.118 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%B5%D0%B6&count=1&language=ru
2026-02-12 21:15:17.124 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%92%D0%BE%D1%80%D0%BE%D0%BD%D0%B5%D0%B6&count=1&language=ru
2026-02-12 21:15:17.794 +03:00 [INF] Received HTTP response headers after 668.5277ms - 200
2026-02-12 21:15:17.797 +03:00 [INF] End processing HTTP request after 679.8236ms - 200
2026-02-12 21:15:17.806 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.67204&longitude=39.1843&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-12 21:15:17.808 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.67204&longitude=39.1843&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-12 21:15:18.242 +03:00 [INF] Received HTTP response headers after 433.1438ms - 200
2026-02-12 21:15:18.243 +03:00 [INF] End processing HTTP request after 436.5128ms - 200
2026-02-12 21:15:18.250 +03:00 [INF] Endpoint = day, City = , Date = 2026-02-11, Latency = FALSEms, CacheHit = 1144, StatusCode = 200
2026-02-12 21:15:18.498 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:15:18.518 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:18.544 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:18.547 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:18.549 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:18.557 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:15:18.589 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:15:18.601 +03:00 [DBG] Created DbConnection. (11ms).
2026-02-12 21:15:18.604 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:18.686 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:18.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:15:18.694 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:15:18.698 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2026-02-12 21:15:18.703 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:18.741 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:18.751 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:15:18.755 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:18.760 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 15ms reading results.
2026-02-12 21:15:18.763 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:18.766 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:15:18.772 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:18.774 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:15:18.782 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:15:18.785 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:15:18.786 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:15:18.786 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:15:18.787 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:15:18.788 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-12 21:15:18.798 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1804.0632ms
2026-02-12 21:15:18.800 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:18.801 +03:00 [DBG] Connection id "0HNJACAKI1806" completed keep alive response.
2026-02-12 21:15:18.803 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:15:18.805 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:18.807 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:15:18.809 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - 200 null application/json; charset=utf-8 1853.0351ms
2026-02-12 21:15:26.678 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-12 21:15:26.681 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:15:26.682 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:15:26.682 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:15:26.683 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:26.684 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:26.685 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:15:26.688 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:15:26.689 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:15:26.690 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:15:26.691 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:15:26.693 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:15:26.694 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:15:26.695 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:26.697 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:26.698 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:15:26.699 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:15:26.700 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:26.701 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:26.701 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:15:26.702 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:15:26.705 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-12 21:15:26.706 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-12 21:15:26.898 +03:00 [INF] Received HTTP response headers after 191.0884ms - 200
2026-02-12 21:15:26.899 +03:00 [INF] End processing HTTP request after 194.0408ms - 200
2026-02-12 21:15:26.901 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:15:26.901 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:15:26.964 +03:00 [INF] Received HTTP response headers after 61.7309ms - 200
2026-02-12 21:15:26.965 +03:00 [INF] End processing HTTP request after 64.2097ms - 200
2026-02-12 21:15:26.966 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = FALSEms, CacheHit = 262, StatusCode = 200
2026-02-12 21:15:26.997 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:15:26.999 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:27.000 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:27.001 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:27.001 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:27.002 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:15:27.003 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:15:27.004 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:15:27.005 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:27.006 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:27.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:15:27.008 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:15:27.009 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:15:27.010 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:27.016 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:27.018 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:15:27.019 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:27.019 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-12 21:15:27.020 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:27.021 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:27.022 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:27.024 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:15:27.026 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:15:27.027 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:15:27.028 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:15:27.028 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:15:27.029 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:15:27.030 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 21:15:27.032 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 337.5455ms
2026-02-12 21:15:27.033 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:15:27.034 +03:00 [DBG] Connection id "0HNJACAKI1806" completed keep alive response.
2026-02-12 21:15:27.035 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:15:27.036 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:27.037 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:27.038 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 359.3861ms
2026-02-12 21:15:29.798 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-12 21:15:29.799 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:15:29.800 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:15:29.801 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:15:29.802 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:29.803 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:29.803 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:15:29.804 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:15:29.805 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:15:29.806 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:15:29.807 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:15:29.809 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:15:29.810 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:15:29.811 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:29.815 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:29.816 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:15:29.817 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:15:29.818 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:29.819 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:29.820 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:15:29.821 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:15:29.822 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-12 21:15:29.829 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:15:29.831 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:29.832 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:29.833 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:29.834 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:29.835 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:15:29.836 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:15:29.836 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:15:29.837 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:29.838 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:29.839 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:15:29.840 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:15:29.841 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:15:29.842 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:29.845 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:29.847 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:15:29.848 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:29.849 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:15:29.850 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:29.851 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:29.852 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:29.853 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:15:29.854 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:15:29.856 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:15:29.856 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:15:29.857 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:15:29.857 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:15:29.858 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 21:15:29.860 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 48.6367ms
2026-02-12 21:15:29.861 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:15:29.862 +03:00 [DBG] Connection id "0HNJACAKI1806" completed keep alive response.
2026-02-12 21:15:29.863 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:15:29.863 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:29.864 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:29.866 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 68.2704ms
2026-02-12 21:15:32.016 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - null null
2026-02-12 21:15:32.017 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/'
2026-02-12 21:15:32.018 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/'
2026-02-12 21:15:32.019 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:32.020 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:32.020 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:32.021 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:32.021 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:15:32.023 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:15:32.023 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:15:32.024 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:15:32.026 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:15:32.027 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:15:32.028 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:32.029 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:32.030 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:15:32.031 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:15:32.032 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:32.033 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:32.034 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:15:32.035 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:15:32.036 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:32.037 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:32.037 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:32.038 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:32.039 +03:00 [INF] Endpoint = day, City = , Date = 2026-02-11, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-12 21:15:32.041 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:15:32.043 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:32.044 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:32.045 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:32.046 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:32.047 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:15:32.048 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:15:32.048 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:15:32.049 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:32.050 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:32.051 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:15:32.051 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:15:32.052 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:15:32.053 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:32.055 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:32.058 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:15:32.060 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:32.060 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-12 21:15:32.062 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:32.063 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:32.064 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:32.066 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:15:32.067 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:15:32.068 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:15:32.068 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:15:32.069 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:15:32.069 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:15:32.070 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-12 21:15:32.072 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 43.3174ms
2026-02-12 21:15:32.073 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:32.074 +03:00 [DBG] Connection id "0HNJACAKI1806" completed keep alive response.
2026-02-12 21:15:32.074 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:15:32.075 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:32.076 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:32.077 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - 200 null application/json; charset=utf-8 61.2088ms
2026-02-12 21:15:43.470 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - null null
2026-02-12 21:15:43.472 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/'
2026-02-12 21:15:43.473 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/'
2026-02-12 21:15:43.473 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:43.474 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:43.474 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:43.475 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:43.476 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:15:43.477 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:15:43.477 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:15:43.478 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:15:43.479 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:15:43.480 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:15:43.481 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:43.482 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:15:43.482 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:15:43.483 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:15:43.484 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:43.484 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:15:43.485 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:15:43.486 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:15:43.486 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:43.487 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:43.488 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:43.488 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:43.489 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-12 21:15:43.490 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-12 21:15:43.676 +03:00 [INF] Received HTTP response headers after 184.9881ms - 200
2026-02-12 21:15:43.676 +03:00 [INF] End processing HTTP request after 187.2451ms - 200
2026-02-12 21:15:43.677 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-12 21:15:43.678 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-12 21:15:43.741 +03:00 [INF] Received HTTP response headers after 62.8333ms - 200
2026-02-12 21:15:43.742 +03:00 [INF] End processing HTTP request after 65.0767ms - 200
2026-02-12 21:15:43.743 +03:00 [INF] Endpoint = day, City = , Date = 2026-02-11, Latency = FALSEms, CacheHit = 254, StatusCode = 200
2026-02-12 21:15:43.745 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:15:43.746 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:43.747 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:43.748 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:43.748 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:15:43.749 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:15:43.749 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:15:43.750 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:15:43.750 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:43.751 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:43.752 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:15:43.752 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:15:43.753 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:15:43.753 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:43.755 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:15:43.757 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:15:43.758 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:43.758 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:15:43.759 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:43.760 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:43.762 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:15:43.763 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:15:43.764 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:15:43.765 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:15:43.765 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:15:43.766 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:15:43.766 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:15:43.767 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-12 21:15:43.768 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 286.9395ms
2026-02-12 21:15:43.768 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:15:43.769 +03:00 [DBG] Connection id "0HNJACAKI1806" completed keep alive response.
2026-02-12 21:15:43.770 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:15:43.770 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:43.771 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:43.772 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - 200 null application/json; charset=utf-8 301.2549ms
2026-02-12 21:15:50.203 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:15:50.205 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:15:50.206 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:15:50.207 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:15:50.208 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:50.209 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:15:50.209 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:15:50.212 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:15:50.213 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:15:50.214 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:15:50.215 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:15:50.216 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:15:50.217 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:15:50.217 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:15:50.218 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:15:50.219 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:50.220 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:50.220 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:50.221 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:50.222 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:50.223 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:50.223 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:15:50.224 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:15:50.225 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:15:50.225 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:15:50.227 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:15:50.227 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:15:50.228 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:15:50.229 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:15:50.237 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:15:50.257 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-12 21:15:50.379 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, CAST(count(*) AS integer) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY CAST(count(*) AS integer) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:15:50.395 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:15:50.395 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:15:50.396 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:50.397 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:50.397 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:15:50.398 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:15:50.398 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:15:50.399 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:15:50.403 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:15:50.404 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:50.405 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:50.408 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WeatherInfo.API.DbContexts.WeatherInfoContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-12 21:15:50.465 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 247.6447ms
2026-02-12 21:15:50.466 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:15:50.478 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WeatherInfo.API.Controllers.StatsController.GetTopCities(Nullable`1 from, Nullable`1 to, Int32 limit) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\StatsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-12 21:15:50.491 +03:00 [DBG] Connection id "0HNJACAKI1806" completed keep alive response.
2026-02-12 21:15:50.492 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:15:50.493 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:15:50.494 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:15:50.495 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 500 null application/json; charset=utf-8 291.591ms
2026-02-12 21:16:59.210 +03:00 [DBG] Connection id "0HNJACAKI1807" received FIN.
2026-02-12 21:16:59.211 +03:00 [DBG] Connection id "0HNJACAKI1807" accepted.
2026-02-12 21:16:59.212 +03:00 [DBG] Connection id "0HNJACAKI1807" started.
2026-02-12 21:16:59.213 +03:00 [DBG] Connection id "0HNJACAKI1808" accepted.
2026-02-12 21:16:59.216 +03:00 [DBG] Connection id "0HNJACAKI1808" started.
2026-02-12 21:16:59.217 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:16:59.218 +03:00 [DBG] Connection id "0HNJACAKI1807" stopped.
2026-02-12 21:16:59.219 +03:00 [DBG] Connection 0HNJACAKI1808 established using the following protocol: "Tls13"
2026-02-12 21:16:59.220 +03:00 [DBG] Connection id "0HNJACAKI1807" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:16:59.220 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:16:59.223 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:16:59.223 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:16:59.224 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:16:59.225 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:16:59.225 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:16:59.226 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:16:59.229 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:16:59.230 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:16:59.231 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:16:59.231 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:16:59.232 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:16:59.233 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:16:59.234 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:16:59.235 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:16:59.236 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:16:59.236 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:16:59.237 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:16:59.238 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:16:59.239 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:16:59.239 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:16:59.240 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:16:59.241 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:16:59.241 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:16:59.242 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:16:59.243 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:16:59.244 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:16:59.244 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:16:59.245 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:16:59.246 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:16:59.246 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:16:59.247 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:16:59.248 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:16:59.249 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:16:59.249 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:16:59.252 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:16:59.254 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 21:16:59.258 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 21:16:59.261 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:16:59.261 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:16:59.262 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:16:59.263 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:16:59.263 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:16:59.264 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:16:59.264 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:16:59.265 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:16:59.267 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:16:59.268 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:16:59.269 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:16:59.270 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WeatherInfo.API.DbContexts.WeatherInfoContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-12 21:16:59.304 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 70.0665ms
2026-02-12 21:16:59.305 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:16:59.319 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WeatherInfo.API.Controllers.StatsController.GetResult(Nullable`1 from, Nullable`1 to, Int32 page, Int32 pageSize) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\StatsController.cs:line 84
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-12 21:16:59.325 +03:00 [DBG] Connection id "0HNJACAKI1808" completed keep alive response.
2026-02-12 21:16:59.325 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:16:59.326 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:16:59.327 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:16:59.328 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 500 null application/json; charset=utf-8 107.6021ms
2026-02-12 21:17:17.128 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-12 21:17:27.129 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:17:27.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0381ms - processed: 0 items - remaining: 1 items
2026-02-12 21:17:27.987 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%B0%D0%B1%D0%B0 - null null
2026-02-12 21:17:27.991 +03:00 [DBG] 1 candidate(s) found for the request path '/api/cities/search'
2026-02-12 21:17:27.992 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)' with route pattern 'api/cities/search' is valid for the request path '/api/cities/search'
2026-02-12 21:17:27.993 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-12 21:17:27.994 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:17:27.994 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:17:27.995 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-12 21:17:27.997 +03:00 [INF] Route matched with {action = "Search", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API).
2026-02-12 21:17:27.998 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:17:27.999 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:17:28.000 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:17:28.001 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:17:28.001 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:17:28.002 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-12 21:17:28.003 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.CitiesController (WeatherInfo.API)
2026-02-12 21:17:28.004 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:17:28.005 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:17:28.006 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:17:28.006 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:17:28.007 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:17:28.008 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:17:28.010 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%B0%D0%B1%D0%B0&count=10&language=ru
2026-02-12 21:17:28.011 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%B0%D0%B1%D0%B0&count=10&language=ru
2026-02-12 21:17:28.282 +03:00 [INF] Received HTTP response headers after 270.1784ms - 200
2026-02-12 21:17:28.283 +03:00 [INF] End processing HTTP request after 272.8443ms - 200
2026-02-12 21:17:28.284 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:17:28.286 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:17:28.287 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:17:28.287 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:17:28.288 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:17:28.288 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListPartitionIterator`2[[WeatherInfo.API.Models.OpenMeteo.GeoResult, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[WeatherInfo.API.Dtos.SearchingCitiesDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:17:28.291 +03:00 [INF] Executed action WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API) in 289.2863ms
2026-02-12 21:17:28.292 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.CitiesController.Search (WeatherInfo.API)'
2026-02-12 21:17:28.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/cities/search?city=%D0%B0%D0%B1%D0%B0 - 200 null application/json; charset=utf-8 306.525ms
2026-02-12 21:17:37.143 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:17:37.144 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-12 21:17:47.144 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:17:47.145 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-12 21:17:57.160 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:17:57.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-12 21:18:07.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:18:07.162 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-12 21:18:17.166 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:18:17.167 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2026-02-12 21:18:27.176 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:18:27.177 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-12 21:18:37.183 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:18:37.184 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-12 21:18:47.199 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:18:47.199 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-12 21:18:57.207 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:18:57.207 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2026-02-12 21:19:07.219 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:19:07.220 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-12 21:19:17.232 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:19:17.234 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-12 21:19:27.248 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:19:27.249 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-12 21:19:28.026 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-12 21:19:37.260 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:19:37.261 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2026-02-12 21:19:47.275 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:19:47.276 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-12 21:19:57.291 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:19:57.292 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2026-02-12 21:20:07.300 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:20:07.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 2 items
2026-02-12 21:20:17.314 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:20:17.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.471ms - processed: 0 items - remaining: 2 items
2026-02-12 21:20:27.319 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:20:27.320 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2026-02-12 21:20:37.336 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:20:37.337 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2026-02-12 21:20:47.340 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:20:47.341 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2026-02-12 21:20:57.345 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:20:57.346 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3998ms - processed: 0 items - remaining: 2 items
2026-02-12 21:21:07.353 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:21:07.354 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2026-02-12 21:21:17.363 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:21:17.364 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2026-02-12 21:21:27.366 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:21:27.367 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2026-02-12 21:21:37.371 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:21:37.372 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-12 21:21:47.374 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:21:47.374 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2026-02-12 21:21:57.386 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:21:57.387 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2026-02-12 21:22:07.391 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:22:07.392 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2026-02-12 21:22:17.397 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:22:17.398 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2026-02-12 21:22:27.401 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:22:27.401 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-12 21:22:51.110 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 21:22:51.184 +03:00 [DBG] Hosting starting
2026-02-12 21:22:51.307 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 21:22:51.311 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 21:22:51.312 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 21:22:51.312 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 21:22:51.313 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 21:22:51.314 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 21:22:51.340 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 21:22:51.341 +03:00 [INF] Hosting environment: Development
2026-02-12 21:22:51.341 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 21:22:51.342 +03:00 [DBG] Hosting started
2026-02-12 21:22:51.447 +03:00 [DBG] Connection id "0HNJACETP662F" accepted.
2026-02-12 21:22:51.448 +03:00 [DBG] Connection id "0HNJACETP662F" started.
2026-02-12 21:22:51.458 +03:00 [DBG] Connection id "0HNJACETP662G" accepted.
2026-02-12 21:22:51.459 +03:00 [DBG] Connection id "0HNJACETP662G" started.
2026-02-12 21:22:51.490 +03:00 [DBG] Connection id "0HNJACETP662G" received FIN.
2026-02-12 21:22:51.490 +03:00 [DBG] Connection id "0HNJACETP662F" received FIN.
2026-02-12 21:22:51.496 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:22:51.496 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:22:51.516 +03:00 [DBG] Connection id "0HNJACETP662F" stopped.
2026-02-12 21:22:51.516 +03:00 [DBG] Connection id "0HNJACETP662G" stopped.
2026-02-12 21:22:51.522 +03:00 [DBG] Connection id "0HNJACETP662G" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:22:51.522 +03:00 [DBG] Connection id "0HNJACETP662F" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:22:51.682 +03:00 [DBG] Connection id "0HNJACETP662H" accepted.
2026-02-12 21:22:51.684 +03:00 [DBG] Connection id "0HNJACETP662H" started.
2026-02-12 21:22:51.715 +03:00 [DBG] Connection 0HNJACETP662H established using the following protocol: "Tls13"
2026-02-12 21:22:51.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 21:22:51.806 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 21:22:51.815 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 21:22:51.815 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:22:51.817 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:22:51.842 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 21:22:51.843 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 21:22:51.852 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 21:22:51.853 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 21:22:51.855 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 110.2044ms
2026-02-12 21:22:51.873 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 21:22:51.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.0036ms
2026-02-12 21:22:51.908 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 21:22:51.935 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.0101ms
2026-02-12 21:22:51.996 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 21:22:51.999 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 21:22:52.000 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:22:52.001 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:22:52.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.344ms
2026-02-12 21:22:57.364 +03:00 [DBG] Connection id "0HNJACETP662I" accepted.
2026-02-12 21:22:57.364 +03:00 [DBG] Connection id "0HNJACETP662I" received FIN.
2026-02-12 21:22:57.364 +03:00 [DBG] Connection id "0HNJACETP662I" started.
2026-02-12 21:22:57.365 +03:00 [DBG] Connection id "0HNJACETP662J" accepted.
2026-02-12 21:22:57.366 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:22:57.366 +03:00 [DBG] Connection id "0HNJACETP662J" started.
2026-02-12 21:22:57.368 +03:00 [DBG] Connection id "0HNJACETP662I" stopped.
2026-02-12 21:22:57.369 +03:00 [DBG] Connection id "0HNJACETP662I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:22:57.370 +03:00 [DBG] Connection 0HNJACETP662J established using the following protocol: "Tls13"
2026-02-12 21:22:57.373 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:22:57.377 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:22:57.378 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:22:57.379 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:22:57.381 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:22:57.382 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:22:57.386 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:22:57.399 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:22:57.400 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:22:57.402 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:22:57.403 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:22:57.404 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:22:57.405 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:22:57.406 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:22:57.463 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:22:57.468 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:22:57.476 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:22:57.481 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:22:57.482 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:22:57.484 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:22:57.485 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:22:57.486 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:22:57.487 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:22:57.488 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:22:57.489 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:22:57.491 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:22:57.492 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:22:57.493 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:22:57.494 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:22:57.495 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:22:57.495 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:22:57.496 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:22:57.497 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:22:57.498 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:22:57.499 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:22:57.500 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:22:57.743 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:22:57.777 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 21:22:57.878 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 21:22:57.899 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:22:57.918 +03:00 [DBG] Created DbConnection. (17ms).
2026-02-12 21:22:57.920 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:57.998 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.000 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:22:58.004 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:22:58.007 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-12 21:22:58.012 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:22:58.047 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:22:58.056 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.060 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 9ms reading results.
2026-02-12 21:22:58.063 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.065 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:22:58.069 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 21:22:58.080 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:22:58.085 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.086 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.087 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:22:58.088 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:22:58.089 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:22:58.090 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:22:58.095 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:22:58.098 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.099 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:22:58.100 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.100 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:22:58.104 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:22:58.106 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:22:58.106 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:22:58.107 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:22:58.108 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:22:58.109 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:22:58.120 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 713.5265ms
2026-02-12 21:22:58.122 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:22:58.123 +03:00 [DBG] Connection id "0HNJACETP662J" completed keep alive response.
2026-02-12 21:22:58.125 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:22:58.127 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:22:58.128 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:22:58.129 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 756.1971ms
2026-02-12 21:23:10.253 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:23:10.256 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:23:10.257 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:23:10.258 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:23:10.258 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:23:10.259 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:23:10.259 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:23:10.263 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:23:10.264 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:23:10.265 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:23:10.266 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:23:10.267 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:23:10.268 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:23:10.269 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:23:10.270 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:23:10.271 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:23:10.272 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:23:10.273 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:23:10.274 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:23:10.274 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:23:10.275 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:23:10.276 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:23:10.277 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:23:10.277 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:23:10.278 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:23:10.279 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:23:10.279 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:23:10.280 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:23:10.281 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:23:10.309 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:23:10.312 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-12 21:23:10.327 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, CAST(count(*) AS integer) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY CAST(count(*) AS integer) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:23:10.329 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:23:10.329 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:23:10.330 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:23:10.330 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:23:10.331 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:23:10.332 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:23:10.332 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:23:10.333 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:23:10.335 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:23:10.338 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:23:10.338 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:23:10.340 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:23:10.340 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:23:10.341 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:23:10.342 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:23:10.343 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:23:10.343 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:23:10.344 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:23:10.345 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:23:10.346 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 77.2679ms
2026-02-12 21:23:10.347 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:23:10.347 +03:00 [DBG] Connection id "0HNJACETP662J" completed keep alive response.
2026-02-12 21:23:10.348 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:23:10.349 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:23:10.349 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:23:10.350 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 97.0155ms
2026-02-12 21:24:25.715 +03:00 [DBG] Connection id "0HNJACETP662K" accepted.
2026-02-12 21:24:25.715 +03:00 [DBG] Connection id "0HNJACETP662K" received FIN.
2026-02-12 21:24:25.718 +03:00 [DBG] Connection id "0HNJACETP662L" accepted.
2026-02-12 21:24:25.716 +03:00 [DBG] Connection id "0HNJACETP662K" started.
2026-02-12 21:24:25.719 +03:00 [DBG] Connection id "0HNJACETP662L" started.
2026-02-12 21:24:25.723 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:24:25.725 +03:00 [DBG] Connection id "0HNJACETP662K" stopped.
2026-02-12 21:24:25.726 +03:00 [DBG] Connection 0HNJACETP662L established using the following protocol: "Tls13"
2026-02-12 21:24:25.726 +03:00 [DBG] Connection id "0HNJACETP662K" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:24:25.727 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:24:25.728 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:24:25.729 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:24:25.730 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:24:25.730 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:24:25.731 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:24:25.731 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:24:25.732 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:24:25.733 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:24:25.733 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:24:25.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:24:25.735 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:24:25.736 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:24:25.736 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:24:25.738 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:24:25.739 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:25.740 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:25.740 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:25.741 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:25.742 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:25.742 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:25.743 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:25.743 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:25.744 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:24:25.745 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:24:25.745 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:24:25.746 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:24:25.747 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:24:25.747 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:24:25.753 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:24:25.758 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:24:25.758 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:24:25.759 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:25.760 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:25.760 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:24:25.761 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:24:25.762 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:24:25.762 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:24:25.765 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:24:25.767 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:25.767 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:24:25.768 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:25.769 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:24:25.770 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:24:25.771 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:24:25.772 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:24:25.772 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:24:25.773 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:24:25.774 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:24:25.775 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 38.5731ms
2026-02-12 21:24:25.776 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:24:25.777 +03:00 [DBG] Connection id "0HNJACETP662L" completed keep alive response.
2026-02-12 21:24:25.777 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:24:25.778 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:25.779 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:24:25.780 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 53.2135ms
2026-02-12 21:24:29.066 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:24:29.068 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:24:29.068 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:24:29.069 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:24:29.070 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:24:29.070 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:24:29.071 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:24:29.072 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:24:29.073 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:24:29.073 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:24:29.074 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:24:29.076 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:24:29.076 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:24:29.077 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:24:29.078 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:24:29.079 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:29.080 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:29.080 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:29.081 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:29.082 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:29.082 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:29.083 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:24:29.084 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:24:29.084 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:24:29.085 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:24:29.086 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:24:29.087 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:24:29.087 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:24:29.088 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:24:29.089 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:24:29.090 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:24:29.091 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:24:29.092 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:24:29.093 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:24:29.093 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:24:29.095 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:24:29.097 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:24:29.097 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:24:29.098 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.099 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.100 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:24:29.100 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:24:29.101 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:24:29.102 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:24:29.104 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:24:29.106 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.107 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:24:29.108 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.109 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:24:29.110 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.111 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.111 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:24:29.112 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:24:29.112 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:24:29.113 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:24:29.116 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:24:29.119 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.120 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:24:29.121 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.122 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:24:29.123 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:24:29.125 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:24:29.125 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:24:29.125 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:24:29.126 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:24:29.127 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:24:29.127 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 50.3535ms
2026-02-12 21:24:29.128 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:24:29.129 +03:00 [DBG] Connection id "0HNJACETP662L" completed keep alive response.
2026-02-12 21:24:29.130 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:24:29.130 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:24:29.131 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:24:29.132 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 65.6384ms
2026-02-12 21:31:15.873 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 21:31:15.946 +03:00 [DBG] Hosting starting
2026-02-12 21:31:16.053 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 21:31:16.053 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 21:31:16.054 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 21:31:16.057 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 21:31:16.058 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 21:31:16.058 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 21:31:16.080 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 21:31:16.081 +03:00 [INF] Hosting environment: Development
2026-02-12 21:31:16.082 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 21:31:16.082 +03:00 [DBG] Hosting started
2026-02-12 21:31:16.517 +03:00 [DBG] Connection id "0HNJACJK9T8S3" received FIN.
2026-02-12 21:31:16.517 +03:00 [DBG] Connection id "0HNJACJK9T8S4" received FIN.
2026-02-12 21:31:16.522 +03:00 [DBG] Connection id "0HNJACJK9T8S3" accepted.
2026-02-12 21:31:16.522 +03:00 [DBG] Connection id "0HNJACJK9T8S4" accepted.
2026-02-12 21:31:16.530 +03:00 [DBG] Connection id "0HNJACJK9T8S3" started.
2026-02-12 21:31:16.531 +03:00 [DBG] Connection id "0HNJACJK9T8S4" started.
2026-02-12 21:31:16.543 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:31:16.543 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:31:16.570 +03:00 [DBG] Connection id "0HNJACJK9T8S4" stopped.
2026-02-12 21:31:16.570 +03:00 [DBG] Connection id "0HNJACJK9T8S3" stopped.
2026-02-12 21:31:16.573 +03:00 [DBG] Connection id "0HNJACJK9T8S4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:31:16.573 +03:00 [DBG] Connection id "0HNJACJK9T8S3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:31:16.670 +03:00 [DBG] Connection id "0HNJACJK9T8S5" accepted.
2026-02-12 21:31:16.673 +03:00 [DBG] Connection id "0HNJACJK9T8S5" started.
2026-02-12 21:31:16.701 +03:00 [DBG] Connection 0HNJACJK9T8S5 established using the following protocol: "Tls13"
2026-02-12 21:31:16.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 21:31:16.789 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 21:31:16.799 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 21:31:16.800 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:31:16.802 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:31:16.827 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 21:31:16.829 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 21:31:16.839 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 21:31:16.840 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 21:31:16.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 112.8245ms
2026-02-12 21:31:16.862 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 21:31:16.867 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.5646ms
2026-02-12 21:31:16.895 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 21:31:16.922 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.3444ms
2026-02-12 21:31:16.995 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 21:31:16.998 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 21:31:16.999 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:31:17.000 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:31:17.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.1256ms
2026-02-12 21:31:38.521 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:31:38.529 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:31:38.531 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:31:38.533 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:31:38.534 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:31:38.535 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:31:38.541 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:31:38.554 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:31:38.555 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:31:38.556 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:31:38.557 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:31:38.558 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:31:38.559 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:31:38.560 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:31:38.623 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:31:38.628 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:31:38.637 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:31:38.641 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:31:38.642 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:31:38.643 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:31:38.645 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:31:38.645 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:31:38.646 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:31:38.647 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:31:38.648 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:31:38.649 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:31:38.650 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:31:38.651 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:31:38.652 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:31:38.652 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:31:38.903 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:31:38.924 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-12 21:31:39.040 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, CAST(count(*) AS integer) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY CAST(count(*) AS integer) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:31:39.067 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:31:39.084 +03:00 [DBG] Created DbConnection. (16ms).
2026-02-12 21:31:39.087 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:31:39.165 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:31:39.167 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:31:39.171 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:31:39.174 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-12 21:31:39.178 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:31:39.204 +03:00 [ERR] Failed executing DbCommand (26ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:31:39.207 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:31:39.211 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:31:39.216 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WeatherInfo.API.DbContexts.WeatherInfoContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-12 21:31:39.263 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 701.7249ms
2026-02-12 21:31:39.265 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:31:39.299 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WeatherInfo.API.Controllers.StatsController.GetTopCities(Nullable`1 from, Nullable`1 to, Int32 limit) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\StatsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-12 21:31:39.318 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:31:39.320 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:31:39.321 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:31:39.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 500 null application/json; charset=utf-8 802.3226ms
2026-02-12 21:34:38.748 +03:00 [DBG] Connection id "0HNJACJK9T8S6" received FIN.
2026-02-12 21:34:38.749 +03:00 [DBG] Connection id "0HNJACJK9T8S6" accepted.
2026-02-12 21:34:38.750 +03:00 [DBG] Connection id "0HNJACJK9T8S6" started.
2026-02-12 21:34:38.750 +03:00 [DBG] Connection id "0HNJACJK9T8S7" accepted.
2026-02-12 21:34:38.756 +03:00 [DBG] Connection id "0HNJACJK9T8S7" started.
2026-02-12 21:34:38.756 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:34:38.758 +03:00 [DBG] Connection id "0HNJACJK9T8S6" stopped.
2026-02-12 21:34:38.759 +03:00 [DBG] Connection id "0HNJACJK9T8S6" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:34:38.759 +03:00 [DBG] Connection 0HNJACJK9T8S7 established using the following protocol: "Tls13"
2026-02-12 21:34:38.766 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:34:38.768 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:34:38.768 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:34:38.770 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:34:38.770 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:34:38.771 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:34:38.771 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:34:38.775 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:34:38.776 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:34:38.777 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:34:38.778 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:34:38.779 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:34:38.780 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:34:38.780 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:34:38.781 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:34:38.782 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:34:38.783 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:34:38.784 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:34:38.785 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:34:38.785 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:34:38.786 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:34:38.787 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:34:38.788 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:34:38.788 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:34:38.789 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:34:38.790 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:34:38.791 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:34:38.791 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:34:38.792 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:34:38.792 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:34:38.793 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:34:38.794 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:34:38.794 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:34:38.795 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:34:38.796 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:34:38.826 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:34:38.829 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 21:34:38.833 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 21:34:38.836 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:34:38.837 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:34:38.837 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:34:38.838 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:34:38.839 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:34:38.840 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:34:38.840 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:34:38.841 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:34:38.843 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:34:38.844 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:34:38.845 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:34:38.846 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WeatherInfo.API.DbContexts.WeatherInfoContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-12 21:34:38.891 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 110.7524ms
2026-02-12 21:34:38.892 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:34:38.907 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WeatherInfo.API.Controllers.StatsController.GetResult(Nullable`1 from, Nullable`1 to, Int32 page, Int32 pageSize) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\StatsController.cs:line 84
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-12 21:34:38.914 +03:00 [DBG] Connection id "0HNJACJK9T8S7" completed keep alive response.
2026-02-12 21:34:38.914 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:34:38.915 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:34:38.916 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:34:38.917 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 500 null application/json; charset=utf-8 150.9921ms
2026-02-12 21:35:43.888 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 21:35:43.968 +03:00 [DBG] Hosting starting
2026-02-12 21:35:44.128 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 21:35:44.131 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 21:35:44.132 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 21:35:44.132 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 21:35:44.133 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 21:35:44.133 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 21:35:44.156 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 21:35:44.157 +03:00 [INF] Hosting environment: Development
2026-02-12 21:35:44.157 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 21:35:44.158 +03:00 [DBG] Hosting started
2026-02-12 21:35:44.491 +03:00 [DBG] Connection id "0HNJACM45GATM" accepted.
2026-02-12 21:35:44.492 +03:00 [DBG] Connection id "0HNJACM45GATM" started.
2026-02-12 21:35:44.502 +03:00 [DBG] Connection id "0HNJACM45GATN" accepted.
2026-02-12 21:35:44.503 +03:00 [DBG] Connection id "0HNJACM45GATM" received FIN.
2026-02-12 21:35:44.503 +03:00 [DBG] Connection id "0HNJACM45GATN" received FIN.
2026-02-12 21:35:44.505 +03:00 [DBG] Connection id "0HNJACM45GATN" started.
2026-02-12 21:35:44.509 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:35:44.509 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:35:44.533 +03:00 [DBG] Connection id "0HNJACM45GATN" stopped.
2026-02-12 21:35:44.533 +03:00 [DBG] Connection id "0HNJACM45GATM" stopped.
2026-02-12 21:35:44.536 +03:00 [DBG] Connection id "0HNJACM45GATM" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:35:44.536 +03:00 [DBG] Connection id "0HNJACM45GATN" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:35:44.621 +03:00 [DBG] Connection id "0HNJACM45GATO" accepted.
2026-02-12 21:35:44.623 +03:00 [DBG] Connection id "0HNJACM45GATO" started.
2026-02-12 21:35:44.648 +03:00 [DBG] Connection 0HNJACM45GATO established using the following protocol: "Tls13"
2026-02-12 21:35:44.677 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 21:35:44.745 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 21:35:44.755 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 21:35:44.756 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:35:44.758 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:35:44.782 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 21:35:44.783 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 21:35:44.792 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 21:35:44.792 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 21:35:44.794 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 120.3165ms
2026-02-12 21:35:44.816 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 21:35:44.822 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.604ms
2026-02-12 21:35:44.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 21:35:44.867 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.6687ms
2026-02-12 21:35:44.926 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 21:35:44.928 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 21:35:44.928 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:35:44.929 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:35:44.934 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.3113ms
2026-02-12 21:35:47.643 +03:00 [DBG] Connection id "0HNJACM45GATP" received FIN.
2026-02-12 21:35:47.645 +03:00 [DBG] Connection id "0HNJACM45GATP" accepted.
2026-02-12 21:35:47.645 +03:00 [DBG] Connection id "0HNJACM45GATP" started.
2026-02-12 21:35:47.646 +03:00 [DBG] Connection id "0HNJACM45GATQ" accepted.
2026-02-12 21:35:47.647 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:35:47.647 +03:00 [DBG] Connection id "0HNJACM45GATQ" started.
2026-02-12 21:35:47.649 +03:00 [DBG] Connection id "0HNJACM45GATP" stopped.
2026-02-12 21:35:47.651 +03:00 [DBG] Connection id "0HNJACM45GATP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:35:47.652 +03:00 [DBG] Connection 0HNJACM45GATQ established using the following protocol: "Tls13"
2026-02-12 21:35:47.655 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:35:47.659 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:35:47.661 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:35:47.662 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:35:47.663 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:47.664 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:47.670 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:35:47.682 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:35:47.685 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:35:47.686 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:35:47.687 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:35:47.688 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:35:47.689 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:35:47.691 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:35:47.765 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:35:47.770 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:35:47.780 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:47.784 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:47.785 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:47.787 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:47.788 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:47.789 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:47.790 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:47.791 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:47.792 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:35:47.793 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:35:47.794 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:35:47.795 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:35:47.795 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:35:47.796 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:35:47.797 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:35:47.797 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:35:47.798 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:35:47.799 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:35:47.799 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:35:47.800 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:35:48.050 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:35:48.076 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 21:35:48.171 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 21:35:48.190 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:35:48.205 +03:00 [DBG] Created DbConnection. (13ms).
2026-02-12 21:35:48.207 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.325 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.327 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:35:48.331 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:35:48.334 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-12 21:35:48.338 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:35:48.379 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:35:48.387 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.392 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 10ms reading results.
2026-02-12 21:35:48.396 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.398 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:35:48.403 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 21:35:48.410 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:35:48.413 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.414 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.415 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:35:48.415 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:35:48.416 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:35:48.417 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:35:48.420 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:35:48.423 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.424 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:35:48.425 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.426 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:48.429 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:35:48.432 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:35:48.433 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:35:48.433 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:35:48.434 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:35:48.435 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:35:48.446 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 754.8981ms
2026-02-12 21:35:48.448 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:35:48.450 +03:00 [DBG] Connection id "0HNJACM45GATQ" completed keep alive response.
2026-02-12 21:35:48.452 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:35:48.454 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:48.456 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:35:48.457 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 802.1275ms
2026-02-12 21:35:53.667 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:35:53.669 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:35:53.670 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:35:53.671 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:35:53.671 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:53.672 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:53.673 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:35:53.676 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:35:53.677 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:35:53.678 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:35:53.678 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:35:53.679 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:35:53.680 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:35:53.681 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:35:53.682 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:35:53.683 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:53.683 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:53.684 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:53.685 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:53.685 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:53.686 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:53.687 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:53.688 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:53.688 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:35:53.689 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:35:53.690 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:35:53.691 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:35:53.691 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:35:53.692 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:35:53.718 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:35:53.721 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-12 21:35:53.735 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, CAST(count(*) AS integer) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY CAST(count(*) AS integer) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:35:53.736 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:35:53.737 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:35:53.738 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:53.738 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:53.739 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:35:53.740 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:35:53.741 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:35:53.741 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:35:53.743 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:35:53.745 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:53.746 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:35:53.747 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:53.747 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:53.748 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:35:53.749 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:35:53.750 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:35:53.750 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:35:53.750 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:35:53.751 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:35:53.752 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 71.1499ms
2026-02-12 21:35:53.753 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:35:53.754 +03:00 [DBG] Connection id "0HNJACM45GATQ" completed keep alive response.
2026-02-12 21:35:53.755 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:35:53.756 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:53.756 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:53.757 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 90.6216ms
2026-02-12 21:35:56.475 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-12 21:35:56.477 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:35:56.478 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:35:56.479 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:35:56.479 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:56.480 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:56.480 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:35:56.483 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:35:56.484 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:35:56.485 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:35:56.486 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:35:56.487 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:35:56.488 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:35:56.489 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:35:56.492 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:35:56.493 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:35:56.494 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:35:56.495 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:35:56.495 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:35:56.496 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:35:56.499 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:35:56.516 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-12 21:35:56.526 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-12 21:35:56.813 +03:00 [INF] Received HTTP response headers after 284.7594ms - 200
2026-02-12 21:35:56.815 +03:00 [INF] End processing HTTP request after 300.3659ms - 200
2026-02-12 21:35:56.823 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:35:56.824 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:35:57.446 +03:00 [INF] Received HTTP response headers after 620.8158ms - 200
2026-02-12 21:35:57.447 +03:00 [INF] End processing HTTP request after 623.3296ms - 200
2026-02-12 21:35:57.453 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = FALSEms, CacheHit = 951, StatusCode = 200
2026-02-12 21:35:57.461 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:35:57.475 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:35:57.500 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:35:57.503 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:35:57.506 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:35:57.515 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:35:57.545 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:35:57.545 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:35:57.546 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:57.547 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:57.548 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:35:57.549 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:35:57.549 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:35:57.550 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:35:57.554 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:35:57.560 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:35:57.563 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:57.564 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 7ms reading results.
2026-02-12 21:35:57.565 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:57.566 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:57.572 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:35:57.574 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:35:57.581 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:35:57.582 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:35:57.583 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:35:57.583 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:35:57.583 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:35:57.584 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 21:35:57.589 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 1100.5942ms
2026-02-12 21:35:57.590 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:35:57.591 +03:00 [DBG] Connection id "0HNJACM45GATQ" completed keep alive response.
2026-02-12 21:35:57.591 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:35:57.592 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:57.593 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:57.594 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 1118.6835ms
2026-02-12 21:35:59.624 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:35:59.625 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:35:59.626 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:35:59.627 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:35:59.627 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:59.628 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:35:59.628 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:35:59.629 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:35:59.630 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:35:59.630 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:35:59.631 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:35:59.632 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:35:59.633 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:35:59.633 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:35:59.635 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:35:59.635 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:59.636 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:59.637 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:59.637 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:59.638 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:59.639 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:59.639 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:35:59.640 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:35:59.641 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:35:59.641 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:35:59.642 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:35:59.643 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:35:59.643 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:35:59.644 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:35:59.645 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:35:59.648 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:35:59.649 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:35:59.649 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:59.650 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:59.650 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:35:59.651 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:35:59.652 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:35:59.652 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:35:59.655 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:35:59.657 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:59.658 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:35:59.658 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:59.659 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:59.660 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:35:59.661 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:35:59.661 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:35:59.662 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:35:59.662 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:35:59.663 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:35:59.663 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 29.8154ms
2026-02-12 21:35:59.664 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:35:59.665 +03:00 [DBG] Connection id "0HNJACM45GATQ" completed keep alive response.
2026-02-12 21:35:59.666 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:35:59.666 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:35:59.667 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:35:59.667 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 43.8418ms
2026-02-12 21:37:34.948 +03:00 [DBG] Connection id "0HNJACM45GATR" received FIN.
2026-02-12 21:37:34.949 +03:00 [DBG] Connection id "0HNJACM45GATR" accepted.
2026-02-12 21:37:34.950 +03:00 [DBG] Connection id "0HNJACM45GATR" started.
2026-02-12 21:37:34.950 +03:00 [DBG] Connection id "0HNJACM45GATS" accepted.
2026-02-12 21:37:34.955 +03:00 [DBG] Connection id "0HNJACM45GATS" started.
2026-02-12 21:37:34.955 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:37:34.957 +03:00 [DBG] Connection id "0HNJACM45GATR" stopped.
2026-02-12 21:37:34.958 +03:00 [DBG] Connection id "0HNJACM45GATR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:37:34.959 +03:00 [DBG] Connection 0HNJACM45GATS established using the following protocol: "Tls13"
2026-02-12 21:37:34.960 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - null null
2026-02-12 21:37:34.961 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:37:34.962 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:37:34.963 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:37:34.963 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:37:34.964 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:37:34.964 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:37:34.965 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:37:34.966 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:37:34.967 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:37:34.967 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:37:34.968 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:37:34.969 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:37:34.970 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:37:34.971 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:37:34.971 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:37:34.972 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:37:34.973 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:37:34.974 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:37:34.974 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:37:34.975 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:37:34.976 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:37:34.976 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:37:34.977 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:37:34.978 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:37:34.978 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:37:34.979 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:37:34.980 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:37:34.980 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:37:34.981 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:37:34.983 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:37:34.983 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:37:34.983 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:37:34.984 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:37:34.985 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:37:34.985 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:37:34.986 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:37:34.987 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:37:34.990 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:37:34.991 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:37:34.992 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:37:34.992 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:37:34.993 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:37:34.994 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:37:34.995 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:37:34.995 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:37:34.996 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:37:34.996 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:37:34.997 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:37:34.997 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 27.7179ms
2026-02-12 21:37:34.998 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:37:34.999 +03:00 [DBG] Connection id "0HNJACM45GATS" completed keep alive response.
2026-02-12 21:37:34.999 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:37:35.000 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:37:35.001 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:37:35.001 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-11&to=2026-02-11&limit=10 - 200 null application/json; charset=utf-8 41.4124ms
2026-02-12 21:41:14.179 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 21:41:14.244 +03:00 [DBG] Hosting starting
2026-02-12 21:41:14.351 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 21:41:14.352 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 21:41:14.352 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 21:41:14.353 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 21:41:14.353 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 21:41:14.354 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 21:41:14.378 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 21:41:14.378 +03:00 [INF] Hosting environment: Development
2026-02-12 21:41:14.379 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 21:41:14.380 +03:00 [DBG] Hosting started
2026-02-12 21:41:14.600 +03:00 [DBG] Connection id "0HNJACP6HLK1Q" accepted.
2026-02-12 21:41:14.601 +03:00 [DBG] Connection id "0HNJACP6HLK1Q" started.
2026-02-12 21:41:14.609 +03:00 [DBG] Connection id "0HNJACP6HLK1R" accepted.
2026-02-12 21:41:14.610 +03:00 [DBG] Connection id "0HNJACP6HLK1R" started.
2026-02-12 21:41:14.620 +03:00 [DBG] Connection id "0HNJACP6HLK1R" received FIN.
2026-02-12 21:41:14.620 +03:00 [DBG] Connection id "0HNJACP6HLK1Q" received FIN.
2026-02-12 21:41:14.625 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:41:14.625 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:41:14.644 +03:00 [DBG] Connection id "0HNJACP6HLK1Q" stopped.
2026-02-12 21:41:14.644 +03:00 [DBG] Connection id "0HNJACP6HLK1R" stopped.
2026-02-12 21:41:14.647 +03:00 [DBG] Connection id "0HNJACP6HLK1Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:41:14.647 +03:00 [DBG] Connection id "0HNJACP6HLK1R" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:41:14.843 +03:00 [DBG] Connection id "0HNJACP6HLK1S" accepted.
2026-02-12 21:41:14.849 +03:00 [DBG] Connection id "0HNJACP6HLK1S" started.
2026-02-12 21:41:14.875 +03:00 [DBG] Connection 0HNJACP6HLK1S established using the following protocol: "Tls13"
2026-02-12 21:41:14.904 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 21:41:14.959 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 21:41:14.970 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 21:41:14.971 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:41:14.973 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:41:15.000 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 21:41:15.001 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 21:41:15.011 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 21:41:15.012 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 21:41:15.014 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 112.8575ms
2026-02-12 21:41:15.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 21:41:15.070 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 21:41:15.077 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.7135ms
2026-02-12 21:41:15.097 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.6227ms
2026-02-12 21:41:15.152 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 21:41:15.154 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 21:41:15.155 +03:00 [DBG] Request did not match any endpoints
2026-02-12 21:41:15.156 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 21:41:15.160 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.6461ms
2026-02-12 21:41:18.627 +03:00 [DBG] Connection id "0HNJACP6HLK1T" accepted.
2026-02-12 21:41:18.627 +03:00 [DBG] Connection id "0HNJACP6HLK1T" received FIN.
2026-02-12 21:41:18.628 +03:00 [DBG] Connection id "0HNJACP6HLK1T" started.
2026-02-12 21:41:18.629 +03:00 [DBG] Connection id "0HNJACP6HLK1U" accepted.
2026-02-12 21:41:18.630 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:41:18.630 +03:00 [DBG] Connection id "0HNJACP6HLK1U" started.
2026-02-12 21:41:18.632 +03:00 [DBG] Connection id "0HNJACP6HLK1T" stopped.
2026-02-12 21:41:18.633 +03:00 [DBG] Connection id "0HNJACP6HLK1T" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:41:18.635 +03:00 [DBG] Connection 0HNJACP6HLK1U established using the following protocol: "Tls13"
2026-02-12 21:41:18.638 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - null null
2026-02-12 21:41:18.641 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:41:18.643 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:41:18.644 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:41:18.646 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:18.646 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:18.653 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:41:18.666 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:41:18.667 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:41:18.668 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:41:18.669 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:41:18.670 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:41:18.671 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:41:18.673 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:18.732 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 21:41:18.737 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:18.745 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:18.750 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:18.751 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:18.752 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:18.754 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:18.754 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:18.755 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:18.756 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:18.756 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:41:18.757 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:41:18.758 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:41:18.759 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:41:18.760 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:41:18.760 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:41:19.000 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:41:19.019 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-12 21:41:19.127 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, CAST(count(*) AS integer) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY CAST(count(*) AS integer) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:41:19.144 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:41:19.156 +03:00 [DBG] Created DbConnection. (11ms).
2026-02-12 21:41:19.158 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:19.341 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:19.343 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:19.347 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 21:41:19.350 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-12 21:41:19.355 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:41:19.392 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:41:19.404 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:19.409 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 13ms reading results.
2026-02-12 21:41:19.412 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:19.414 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 21:41:19.417 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:41:19.419 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:41:19.420 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:41:19.420 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:41:19.421 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:41:19.422 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:41:19.427 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 753.1898ms
2026-02-12 21:41:19.428 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:41:19.429 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:41:19.431 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:41:19.433 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:19.434 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:41:19.435 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - 200 null application/json; charset=utf-8 797.5675ms
2026-02-12 21:41:25.986 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:41:25.988 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:41:25.989 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:41:25.990 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:25.990 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:25.991 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:25.992 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:25.995 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:41:25.997 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:41:25.998 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:41:25.999 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:41:26.000 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:41:26.001 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:41:26.002 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:26.003 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:26.004 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:26.005 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:26.005 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:26.006 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:26.007 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:26.007 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:26.008 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:26.009 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:26.010 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:26.011 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:41:26.012 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:26.013 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:26.014 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:26.014 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:26.015 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:26.016 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:41:26.017 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:26.017 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:26.018 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:26.019 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:26.049 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:41:26.051 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 21:41:26.055 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 21:41:26.058 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:41:26.059 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:41:26.059 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.060 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.061 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:26.062 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:26.063 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:26.063 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:26.067 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:26.070 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.071 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-12 21:41:26.072 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.073 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:26.075 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 21:41:26.078 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 21:41:26.080 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.080 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.081 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:26.082 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:26.083 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:26.083 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:26.086 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:26.087 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.088 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:26.089 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.089 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:26.091 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:41:26.092 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:41:26.092 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:41:26.093 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:41:26.093 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:41:26.094 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:41:26.101 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 99.1449ms
2026-02-12 21:41:26.102 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:26.102 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:41:26.103 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:41:26.104 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:26.104 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:26.106 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 119.7029ms
2026-02-12 21:41:28.124 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:41:28.125 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:41:28.126 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:41:28.127 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:28.127 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:28.128 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:28.128 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:28.129 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:41:28.130 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:41:28.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:41:28.132 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:41:28.133 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:41:28.134 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:41:28.135 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:28.137 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:28.138 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:28.138 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:28.139 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:28.140 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:28.140 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:28.141 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:28.142 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:28.143 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:28.143 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:28.144 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:41:28.145 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:28.145 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:28.146 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:28.147 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:28.148 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:28.149 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:41:28.149 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:28.150 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:28.151 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:28.151 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:28.158 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:41:28.161 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:41:28.161 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:41:28.162 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.163 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.164 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:28.164 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:28.165 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:28.166 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:28.168 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:28.170 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.170 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:28.171 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.172 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:28.174 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.174 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.175 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:28.176 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:28.176 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:28.177 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:28.179 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:28.180 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.181 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:28.182 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.183 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:28.184 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:41:28.185 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:41:28.185 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:41:28.186 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:41:28.186 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:41:28.187 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:41:28.188 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 52.7713ms
2026-02-12 21:41:28.189 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:28.189 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:41:28.190 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:41:28.190 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:28.191 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:28.192 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 68.3527ms
2026-02-12 21:41:30.474 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - null null
2026-02-12 21:41:30.475 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:41:30.476 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:41:30.477 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:30.478 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:30.478 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:30.479 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:30.480 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:41:30.481 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:41:30.482 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:41:30.482 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:41:30.484 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:41:30.485 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:41:30.485 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:30.486 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:30.487 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:30.488 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:30.489 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:30.489 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:30.490 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:30.491 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:30.492 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:30.492 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:30.493 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:30.494 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:41:30.495 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:30.496 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:30.496 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:30.497 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:30.498 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:30.499 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:41:30.500 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:30.500 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:30.501 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:30.502 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:30.503 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:41:30.504 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:41:30.505 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:41:30.505 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.506 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.507 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:30.507 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:30.508 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:30.509 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:30.511 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:30.513 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.514 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:30.515 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.515 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:30.517 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.517 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.518 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:30.519 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:30.519 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:30.520 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:30.522 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:30.523 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.524 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:30.525 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.526 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:30.527 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:41:30.528 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:41:30.528 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:41:30.529 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:41:30.529 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:41:30.530 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:41:30.531 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 45.9299ms
2026-02-12 21:41:30.532 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:30.533 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:41:30.533 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:41:30.534 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:30.535 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:30.536 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-11&to=2026-02-11&page=1&pageSize=10 - 200 null application/json; charset=utf-8 61.9384ms
2026-02-12 21:41:33.116 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - null null
2026-02-12 21:41:33.117 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:41:33.118 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:41:33.119 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:41:33.120 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:33.120 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:33.120 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:41:33.121 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:41:33.122 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:41:33.123 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:41:33.124 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:41:33.125 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:41:33.126 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:41:33.126 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:33.127 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:33.128 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:33.129 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:33.129 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:33.130 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:33.131 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:33.132 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:33.132 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:33.133 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:33.134 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:41:33.134 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:41:33.135 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:41:33.136 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:41:33.136 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:41:33.137 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:41:33.138 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:41:33.139 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:41:33.140 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:41:33.140 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:33.141 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:33.142 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:33.142 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:33.143 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:33.143 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:41:33.145 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:41:33.148 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:33.149 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:33.149 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:33.150 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:33.151 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:41:33.152 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:41:33.152 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:41:33.153 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:41:33.153 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:41:33.154 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:41:33.155 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 28.2209ms
2026-02-12 21:41:33.155 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:41:33.156 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:41:33.156 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:41:33.157 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:33.158 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:33.158 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - 200 null application/json; charset=utf-8 42.7144ms
2026-02-12 21:41:43.973 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 21:41:43.975 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:41:43.976 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:41:43.977 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:43.977 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:43.978 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:41:43.978 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:43.979 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:41:43.980 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:41:43.981 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:41:43.982 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:41:43.983 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:41:43.984 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:41:43.985 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:43.985 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:41:43.986 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:43.987 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:43.988 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:43.988 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:43.989 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:43.989 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:43.990 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:41:43.991 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:41:43.991 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:43.992 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:41:43.993 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:43.993 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:43.994 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:41:43.994 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:41:43.995 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:43.996 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:41:43.997 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:43.998 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:43.998 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:41:43.999 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:41:44.000 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:41:44.001 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:41:44.002 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:41:44.002 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.003 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.003 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:44.004 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:44.005 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:44.005 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:44.007 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:41:44.009 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.010 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:41:44.010 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.011 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:44.012 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.013 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.014 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:41:44.015 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:41:44.015 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:41:44.016 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:44.018 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:41:44.021 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.022 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-02-12 21:41:44.023 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.023 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:44.024 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:41:44.025 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:41:44.026 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:41:44.026 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:41:44.026 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:41:44.027 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:41:44.031 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 46.3875ms
2026-02-12 21:41:44.032 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:41:44.033 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:41:44.033 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:41:44.034 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:41:44.035 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:41:44.035 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 62.051ms
2026-02-12 21:42:08.253 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - null null
2026-02-12 21:42:08.254 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/'
2026-02-12 21:42:08.255 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)' with route pattern 'api/weather/{city}' is valid for the request path '/api/weather/'
2026-02-12 21:42:08.256 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:42:08.256 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:42:08.257 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:42:08.257 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:42:08.261 +03:00 [INF] Route matched with {action = "GetWeatherByDate", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByDate(System.String, System.Nullable`1[System.DateOnly]) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:42:08.262 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:42:08.263 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:42:08.264 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:42:08.265 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:42:08.266 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:42:08.267 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:42:08.270 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:42:08.271 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:42:08.272 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:42:08.273 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:42:08.273 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:42:08.274 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:42:08.277 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:42:08.278 +03:00 [DBG] Attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:42:08.278 +03:00 [DBG] Done attempting to bind parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:42:08.279 +03:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:42:08.280 +03:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:42:08.293 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-12 21:42:08.299 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&count=1&language=ru
2026-02-12 21:42:08.603 +03:00 [INF] Received HTTP response headers after 301.7031ms - 200
2026-02-12 21:42:08.606 +03:00 [INF] End processing HTTP request after 313.2064ms - 200
2026-02-12 21:42:08.615 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-12 21:42:08.616 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.75222&longitude=37.61556&daily=temperature_2m_max,weathercode&timezone=Europe/London&start_date=2026-02-11&end_date=2026-02-11
2026-02-12 21:42:09.287 +03:00 [INF] Received HTTP response headers after 670.4333ms - 200
2026-02-12 21:42:09.288 +03:00 [INF] End processing HTTP request after 672.8643ms - 200
2026-02-12 21:42:09.295 +03:00 [INF] Endpoint = day, City = , Date = 2026-02-11, Latency = FALSEms, CacheHit = 1012, StatusCode = 200
2026-02-12 21:42:09.299 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:42:09.313 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:42:09.339 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:42:09.342 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:42:09.344 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:42:09.353 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:42:09.382 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:42:09.383 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:42:09.384 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:09.384 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:09.386 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:42:09.386 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:42:09.387 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:42:09.388 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:42:09.391 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:42:09.398 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:42:09.401 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:09.402 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-02-12 21:42:09.403 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:09.404 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:42:09.411 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:42:09.413 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:42:09.420 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:42:09.421 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:42:09.421 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:42:09.422 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:42:09.422 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:42:09.423 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherDayDto'.
2026-02-12 21:42:09.426 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API) in 1159.7417ms
2026-02-12 21:42:09.427 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByDate (WeatherInfo.API)'
2026-02-12 21:42:09.428 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:42:09.429 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:42:09.429 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:09.430 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:42:09.431 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/?date=2026-02-11 - 200 null application/json; charset=utf-8 1178.8306ms
2026-02-12 21:42:15.322 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 21:42:15.324 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:42:15.324 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:42:15.325 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:42:15.326 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:42:15.326 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:42:15.327 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:42:15.327 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:42:15.328 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:42:15.329 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:42:15.330 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:42:15.331 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:42:15.331 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:42:15.332 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:42:15.333 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:42:15.334 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:42:15.335 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:42:15.335 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:42:15.336 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:42:15.337 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:42:15.338 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:42:15.338 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:42:15.339 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:42:15.340 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:42:15.340 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:42:15.341 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:42:15.342 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:42:15.343 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:42:15.343 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:42:15.344 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:42:15.345 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:42:15.346 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:42:15.346 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:42:15.347 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:42:15.348 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:42:15.349 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:42:15.350 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:42:15.351 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:42:15.351 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.352 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.353 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:42:15.353 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:42:15.354 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:42:15.355 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:42:15.357 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:42:15.358 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.359 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:42:15.360 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.361 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:42:15.362 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.362 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.364 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:42:15.364 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:42:15.365 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:42:15.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:42:15.368 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:42:15.369 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.370 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:42:15.371 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.372 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:42:15.373 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:42:15.374 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:42:15.374 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:42:15.375 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:42:15.375 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:42:15.376 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:42:15.377 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 44.8271ms
2026-02-12 21:42:15.378 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:42:15.379 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:42:15.380 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:42:15.380 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:42:15.381 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:42:15.382 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 59.7617ms
2026-02-12 21:43:03.895 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - null null
2026-02-12 21:43:03.897 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:43:03.898 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather/Saint Petersburg/week'
2026-02-12 21:43:03.899 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:43:03.900 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:43:03.900 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:43:03.901 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:43:03.904 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:43:03.905 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:43:03.906 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:43:03.908 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:43:03.909 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:43:03.910 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:43:03.911 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:43:03.913 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:43:03.913 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:43:03.914 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:43:03.915 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:43:03.916 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:43:03.917 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:43:03.918 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:43:03.921 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-12 21:43:03.922 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=Saint%20Petersburg&count=1&language=ru
2026-02-12 21:43:03.997 +03:00 [INF] Received HTTP response headers after 74.3911ms - 200
2026-02-12 21:43:03.998 +03:00 [INF] End processing HTTP request after 76.671ms - 200
2026-02-12 21:43:03.999 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:43:04.000 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=59.93863&longitude=30.31413&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:43:04.246 +03:00 [INF] Received HTTP response headers after 245.6069ms - 200
2026-02-12 21:43:04.247 +03:00 [INF] End processing HTTP request after 248.0942ms - 200
2026-02-12 21:43:04.249 +03:00 [INF] Endpoint = week, City = Saint Petersburg, Date = -, Latency = FALSEms, CacheHit = 329, StatusCode = 200
2026-02-12 21:43:04.251 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:43:04.253 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:04.254 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:04.255 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:04.256 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:04.257 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:43:04.258 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:43:04.258 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:43:04.259 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:04.260 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:04.261 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:43:04.261 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:43:04.262 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:43:04.263 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:04.267 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:04.272 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:43:04.273 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:04.274 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:43:04.275 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:04.276 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:43:04.277 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:04.278 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:43:04.280 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:43:04.282 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:43:04.282 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:43:04.283 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:43:04.284 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:43:04.284 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 21:43:04.287 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 375.4582ms
2026-02-12 21:43:04.288 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 21:43:04.288 +03:00 [DBG] Connection id "0HNJACP6HLK1U" completed keep alive response.
2026-02-12 21:43:04.289 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:43:04.290 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:04.291 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:43:04.292 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/weather/Saint Petersburg/week - 200 null application/json; charset=utf-8 397.2385ms
2026-02-12 21:43:08.999 +03:00 [DBG] Connection id "0HNJACP6HLK1S" received FIN.
2026-02-12 21:43:09.000 +03:00 [DBG] Connection id "0HNJACP6HLK1S" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:43:09.001 +03:00 [DBG] Connection id "0HNJACP6HLK1S" is closed. The last processed stream ID was 7.
2026-02-12 21:43:09.002 +03:00 [DBG] The connection queue processing loop for 0HNJACP6HLK1S completed.
2026-02-12 21:43:09.004 +03:00 [DBG] Connection id "0HNJACP6HLK1S" stopped.
2026-02-12 21:43:46.712 +03:00 [DBG] Connection id "0HNJACP6HLK1V" accepted.
2026-02-12 21:43:46.712 +03:00 [DBG] Connection id "0HNJACP6HLK1V" started.
2026-02-12 21:43:46.720 +03:00 [DBG] Connection 0HNJACP6HLK1V established using the following protocol: "Tls13"
2026-02-12 21:43:46.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 21:43:46.724 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 21:43:46.724 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 21:43:46.725 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:43:46.726 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:43:46.726 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:43:46.727 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:43:46.729 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:43:46.730 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:43:46.731 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:43:46.732 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:43:46.733 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:43:46.734 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:43:46.735 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:43:46.738 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:43:46.739 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:43:46.740 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:43:46.740 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:43:46.741 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:43:46.742 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:43:46.743 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:43:46.745 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%80%D0%B0%D1%81%D0%BD%D0%BE%D1%8F%D1%80%D1%81%D0%BA&count=1&language=ru
2026-02-12 21:43:46.745 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%80%D0%B0%D1%81%D0%BD%D0%BE%D1%8F%D1%80%D1%81%D0%BA&count=1&language=ru
2026-02-12 21:43:46.809 +03:00 [INF] Received HTTP response headers after 62.7087ms - 200
2026-02-12 21:43:46.810 +03:00 [INF] End processing HTTP request after 65.0871ms - 200
2026-02-12 21:43:46.811 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.02668&longitude=92.90765&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:43:46.811 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=56.02668&longitude=92.90765&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:43:47.342 +03:00 [INF] Received HTTP response headers after 530.5221ms - 200
2026-02-12 21:43:47.343 +03:00 [INF] End processing HTTP request after 532.838ms - 200
2026-02-12 21:43:47.344 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = FALSEms, CacheHit = 599, StatusCode = 200
2026-02-12 21:43:47.346 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:43:47.347 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:47.348 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:47.349 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:47.350 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:47.350 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:43:47.351 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:43:47.351 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:43:47.352 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.353 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.354 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:43:47.354 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:43:47.355 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:43:47.356 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:47.358 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:47.362 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:43:47.363 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.364 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:43:47.365 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.366 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 21:43:47.367 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:47.368 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:43:47.370 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 625, StatusCode = 200
2026-02-12 21:43:47.371 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:47.372 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:47.373 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:47.373 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:47.375 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:43:47.376 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.377 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.377 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:43:47.378 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:43:47.379 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:43:47.379 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:47.382 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:47.383 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:43:47.384 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.385 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:43:47.385 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.386 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:43:47.387 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:47.388 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:43:47.389 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:43:47.390 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:43:47.391 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:43:47.391 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:43:47.391 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:43:47.392 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 21:43:47.394 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 659.2694ms
2026-02-12 21:43:47.395 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:43:47.396 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:43:47.396 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:47.397 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:43:47.398 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 676.4992ms
2026-02-12 21:43:59.836 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 21:43:59.838 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 21:43:59.839 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 21:43:59.840 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:43:59.840 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:43:59.841 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:43:59.842 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:43:59.842 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:43:59.843 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:43:59.844 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:43:59.845 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:43:59.846 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:43:59.847 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:43:59.848 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:43:59.849 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:43:59.850 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:43:59.850 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:43:59.851 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:43:59.852 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:43:59.852 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:43:59.853 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:43:59.854 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-12 21:43:59.856 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:43:59.857 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:59.858 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:59.859 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:59.859 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:43:59.860 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:43:59.860 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:43:59.861 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:43:59.861 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:59.862 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:59.863 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:43:59.863 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:43:59.864 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:43:59.865 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:59.867 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:43:59.870 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:43:59.870 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:59.871 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:43:59.872 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:59.873 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:43:59.874 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:43:59.875 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:43:59.875 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:43:59.876 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:43:59.877 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:43:59.877 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:43:59.878 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:43:59.878 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 21:43:59.879 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 31.4965ms
2026-02-12 21:43:59.880 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:43:59.881 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:43:59.881 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:43:59.882 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:43:59.884 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 47.9817ms
2026-02-12 21:44:08.057 +03:00 [DBG] Connection id "0HNJACP6HLK20" received FIN.
2026-02-12 21:44:08.058 +03:00 [DBG] Connection id "0HNJACP6HLK20" accepted.
2026-02-12 21:44:08.059 +03:00 [DBG] Connection id "0HNJACP6HLK20" started.
2026-02-12 21:44:08.059 +03:00 [DBG] Connection id "0HNJACP6HLK21" accepted.
2026-02-12 21:44:08.060 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 21:44:08.060 +03:00 [DBG] Connection id "0HNJACP6HLK21" started.
2026-02-12 21:44:08.061 +03:00 [DBG] Connection id "0HNJACP6HLK20" stopped.
2026-02-12 21:44:08.062 +03:00 [DBG] Connection id "0HNJACP6HLK20" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:44:08.063 +03:00 [DBG] Connection 0HNJACP6HLK21 established using the following protocol: "Tls13"
2026-02-12 21:44:08.064 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - null null
2026-02-12 21:44:08.066 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 21:44:08.067 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 21:44:08.068 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:44:08.069 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:08.069 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:08.070 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:44:08.070 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:44:08.071 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:44:08.072 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:44:08.072 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:44:08.073 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:44:08.074 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:44:08.075 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:44:08.076 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:44:08.076 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:08.077 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:08.078 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:08.079 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:08.079 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:08.080 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:08.081 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:08.081 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:08.082 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:44:08.083 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 21:44:08.084 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:44:08.084 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 21:44:08.085 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 21:44:08.086 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 21:44:08.087 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:44:08.088 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:44:08.088 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:44:08.089 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:08.090 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:08.090 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:08.091 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:08.092 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:08.092 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:44:08.094 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 21:44:08.097 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:08.097 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:44:08.098 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:08.099 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:08.100 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:44:08.101 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:44:08.102 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:44:08.102 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:44:08.103 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:44:08.103 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 21:44:08.104 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 29.1443ms
2026-02-12 21:44:08.105 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 21:44:08.105 +03:00 [DBG] Connection id "0HNJACP6HLK21" completed keep alive response.
2026-02-12 21:44:08.106 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:44:08.106 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:08.107 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:08.108 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - 200 null application/json; charset=utf-8 43.2816ms
2026-02-12 21:44:08.298 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-12 21:44:12.269 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 21:44:12.271 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:44:12.271 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:44:12.272 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:44:12.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:12.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:12.274 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:44:12.274 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:44:12.275 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:44:12.276 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:44:12.277 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:44:12.278 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:44:12.278 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:44:12.279 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:44:12.280 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:44:12.281 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:12.282 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:12.282 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:12.283 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:12.284 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:12.284 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:12.285 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:12.285 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:12.286 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:44:12.287 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:44:12.287 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:44:12.288 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:44:12.288 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:44:12.289 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:44:12.290 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:44:12.290 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:44:12.291 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:44:12.291 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:44:12.292 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:44:12.292 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:44:12.294 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:44:12.295 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:44:12.295 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:44:12.296 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.296 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.297 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:12.298 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:12.299 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:12.300 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:44:12.302 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:44:12.304 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.304 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:44:12.305 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.306 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:12.307 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.308 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.308 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:12.309 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:12.310 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:12.310 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:44:12.312 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:44:12.313 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.314 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:44:12.315 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.315 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:12.316 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:44:12.317 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:44:12.318 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:44:12.318 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:44:12.319 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:44:12.319 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:44:12.320 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 41.03ms
2026-02-12 21:44:12.321 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:44:12.322 +03:00 [DBG] Connection id "0HNJACP6HLK21" completed keep alive response.
2026-02-12 21:44:12.322 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:44:12.323 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:12.323 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:12.324 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 55.1613ms
2026-02-12 21:44:18.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:44:18.313 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0353ms - processed: 0 items - remaining: 1 items
2026-02-12 21:44:28.318 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:44:28.318 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-12 21:44:37.927 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 21:44:37.929 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 21:44:37.930 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 21:44:37.931 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:44:37.932 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:37.932 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:37.933 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:44:37.934 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 21:44:37.935 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:44:37.936 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:44:37.937 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:44:37.938 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:44:37.938 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:44:37.939 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:44:37.940 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 21:44:37.941 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 21:44:37.942 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 21:44:37.942 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:44:37.943 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 21:44:37.944 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 21:44:37.945 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 21:44:37.946 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%BE%D1%80%D0%B8%D0%BB%D1%8C%D1%81%D0%BA&count=1&language=ru
2026-02-12 21:44:37.947 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9D%D0%BE%D1%80%D0%B8%D0%BB%D1%8C%D1%81%D0%BA&count=1&language=ru
2026-02-12 21:44:38.187 +03:00 [INF] Received HTTP response headers after 239.3115ms - 200
2026-02-12 21:44:38.188 +03:00 [INF] End processing HTTP request after 241.524ms - 200
2026-02-12 21:44:38.188 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=69.3535&longitude=88.2027&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:44:38.189 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=69.3535&longitude=88.2027&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 21:44:38.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:44:38.326 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2026-02-12 21:44:38.837 +03:00 [INF] Received HTTP response headers after 647.3106ms - 200
2026-02-12 21:44:38.838 +03:00 [INF] End processing HTTP request after 649.5469ms - 200
2026-02-12 21:44:38.839 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = FALSEms, CacheHit = 893, StatusCode = 200
2026-02-12 21:44:38.840 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:44:38.841 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:44:38.842 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:44:38.843 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:44:38.843 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:44:38.844 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:44:38.845 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:44:38.845 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:44:38.846 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.846 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.847 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:38.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:38.848 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:38.849 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:44:38.852 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:44:38.853 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:44:38.854 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.854 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:44:38.855 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.856 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:38.857 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:44:38.858 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:44:38.859 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 913, StatusCode = 200
2026-02-12 21:44:38.860 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:44:38.861 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:44:38.861 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 21:44:38.862 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 21:44:38.862 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 21:44:38.863 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.864 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:38.865 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:38.866 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:38.867 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:44:38.869 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 21:44:38.870 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 21:44:38.871 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.872 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 21:44:38.872 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.873 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:38.874 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 21:44:38.875 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 21:44:38.876 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:44:38.877 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:44:38.877 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:44:38.878 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:44:38.878 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:44:38.879 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 21:44:38.880 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 940.5227ms
2026-02-12 21:44:38.880 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 21:44:38.881 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:44:38.882 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:38.882 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:38.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 956.8603ms
2026-02-12 21:44:44.123 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 21:44:44.125 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 21:44:44.125 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 21:44:44.126 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:44:44.127 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:44.127 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 21:44:44.128 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:44:44.128 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 21:44:44.129 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 21:44:44.130 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 21:44:44.131 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 21:44:44.131 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 21:44:44.132 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 21:44:44.133 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:44:44.134 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 21:44:44.135 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:44.136 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:44.137 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:44.137 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:44.138 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:44.139 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:44.139 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 21:44:44.140 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 21:44:44.141 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 21:44:44.141 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 21:44:44.142 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:44:44.143 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 21:44:44.144 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 21:44:44.144 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 21:44:44.145 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:44:44.146 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 21:44:44.147 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:44:44.147 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:44:44.148 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 21:44:44.149 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 21:44:44.150 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 21:44:44.151 +03:00 [DBG] Creating DbConnection.
2026-02-12 21:44:44.152 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 21:44:44.152 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.153 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:44.154 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:44.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:44.156 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:44:44.158 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 21:44:44.160 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.160 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:44:44.161 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.162 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:44.163 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.163 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.164 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 21:44:44.165 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 21:44:44.165 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 21:44:44.166 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:44:44.168 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 21:44:44.170 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.170 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 21:44:44.171 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.172 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:44.173 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 21:44:44.174 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 21:44:44.174 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 21:44:44.175 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 21:44:44.175 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 21:44:44.176 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 21:44:44.177 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 43.1461ms
2026-02-12 21:44:44.177 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 21:44:44.178 +03:00 [DBG] Connection id "0HNJACP6HLK21" completed keep alive response.
2026-02-12 21:44:44.179 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 21:44:44.179 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 21:44:44.180 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 21:44:44.181 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 57.9238ms
2026-02-12 21:44:48.329 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:44:48.330 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-12 21:44:58.339 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:44:58.340 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-12 21:45:08.342 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:45:08.343 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-12 21:45:18.344 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:45:18.345 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-12 21:45:28.356 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:45:28.357 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2026-02-12 21:45:38.368 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:45:38.370 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-12 21:45:48.384 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:45:48.385 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2026-02-12 21:45:58.388 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:45:58.389 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-12 21:46:08.395 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:46:08.396 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-12 21:46:18.404 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:46:18.405 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2026-02-12 21:46:28.415 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 21:46:28.417 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-12 21:46:34.300 +03:00 [DBG] Connection id "0HNJACP6HLK1U" received FIN.
2026-02-12 21:46:34.300 +03:00 [DBG] Connection id "0HNJACP6HLK21" received FIN.
2026-02-12 21:46:34.303 +03:00 [DBG] Connection id "0HNJACP6HLK21" disconnecting.
2026-02-12 21:46:34.303 +03:00 [DBG] Connection id "0HNJACP6HLK1U" disconnecting.
2026-02-12 21:46:34.308 +03:00 [DBG] Connection id "0HNJACP6HLK21" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:46:34.308 +03:00 [DBG] Connection id "0HNJACP6HLK1U" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 21:46:34.311 +03:00 [DBG] Connection id "0HNJACP6HLK1U" stopped.
2026-02-12 21:46:34.311 +03:00 [DBG] Connection id "0HNJACP6HLK21" stopped.
2026-02-12 21:46:37.949 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-12 21:46:38.426 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:46:38.427 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 2 items
2026-02-12 21:46:48.434 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:46:48.435 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 2 items
2026-02-12 21:46:58.448 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:46:58.449 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2026-02-12 21:47:08.456 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:47:08.457 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2026-02-12 21:47:18.468 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:47:18.469 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-12 21:47:28.484 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:47:28.485 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 2 items
2026-02-12 21:47:38.495 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:47:38.496 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2026-02-12 21:47:48.511 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:47:48.512 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2026-02-12 21:47:58.520 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:47:58.522 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5613ms - processed: 0 items - remaining: 2 items
2026-02-12 21:48:08.533 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2026-02-12 21:48:08.534 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2026-02-12 22:01:46.653 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 22:01:46.734 +03:00 [DBG] Hosting starting
2026-02-12 22:01:46.843 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 22:01:46.844 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 22:01:46.844 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 22:01:46.845 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 22:01:46.845 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 22:01:46.846 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 22:01:46.867 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 22:01:46.868 +03:00 [INF] Hosting environment: Development
2026-02-12 22:01:46.868 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 22:01:46.869 +03:00 [DBG] Hosting started
2026-02-12 22:01:47.227 +03:00 [DBG] Connection id "0HNJAD4LSTJAS" received FIN.
2026-02-12 22:01:47.231 +03:00 [DBG] Connection id "0HNJAD4LSTJAS" accepted.
2026-02-12 22:01:47.231 +03:00 [DBG] Connection id "0HNJAD4LSTJAS" started.
2026-02-12 22:01:47.239 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:01:47.259 +03:00 [DBG] Connection id "0HNJAD4LSTJAS" stopped.
2026-02-12 22:01:47.262 +03:00 [DBG] Connection id "0HNJAD4LSTJAS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:01:47.537 +03:00 [DBG] Connection id "0HNJAD4LSTJAT" accepted.
2026-02-12 22:01:47.539 +03:00 [DBG] Connection id "0HNJAD4LSTJAT" started.
2026-02-12 22:01:47.567 +03:00 [DBG] Connection 0HNJAD4LSTJAT established using the following protocol: "Tls13"
2026-02-12 22:01:47.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 22:01:47.709 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 22:01:47.724 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 22:01:47.727 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:01:47.731 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:01:47.764 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 22:01:47.765 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 22:01:47.776 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 22:01:47.777 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 22:01:47.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 186.9378ms
2026-02-12 22:01:47.802 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 22:01:47.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.6152ms
2026-02-12 22:01:47.835 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 22:01:47.915 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.6694ms
2026-02-12 22:01:47.945 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 22:01:47.948 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 22:01:47.949 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:01:47.950 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:01:47.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.7545ms
2026-02-12 22:01:59.726 +03:00 [DBG] Connection id "0HNJAD4LSTJAU" accepted.
2026-02-12 22:01:59.727 +03:00 [DBG] Connection id "0HNJAD4LSTJAU" started.
2026-02-12 22:01:59.727 +03:00 [DBG] Connection id "0HNJAD4LSTJAU" received FIN.
2026-02-12 22:01:59.727 +03:00 [DBG] Connection id "0HNJAD4LSTJAV" accepted.
2026-02-12 22:01:59.729 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:01:59.730 +03:00 [DBG] Connection id "0HNJAD4LSTJAV" started.
2026-02-12 22:01:59.731 +03:00 [DBG] Connection id "0HNJAD4LSTJAU" stopped.
2026-02-12 22:01:59.732 +03:00 [DBG] Connection id "0HNJAD4LSTJAU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:01:59.734 +03:00 [DBG] Connection 0HNJAD4LSTJAV established using the following protocol: "Tls13"
2026-02-12 22:01:59.737 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:01:59.740 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:01:59.742 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:01:59.743 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:01:59.745 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:01:59.746 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:01:59.752 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:01:59.764 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:01:59.766 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:01:59.767 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:01:59.768 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:01:59.769 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:01:59.770 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:01:59.772 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:01:59.836 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 22:01:59.843 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:01:59.852 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:01:59.857 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:01:59.858 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:01:59.860 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:01:59.861 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:01:59.862 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:01:59.862 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:01:59.863 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:01:59.864 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:01:59.865 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:01:59.866 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:01:59.867 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:01:59.867 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:01:59.868 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:01:59.869 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:01:59.870 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:01:59.871 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:01:59.872 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:01:59.873 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:01:59.873 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:02:00.127 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:02:00.156 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 22:02:00.246 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 22:02:00.265 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:02:00.279 +03:00 [DBG] Created DbConnection. (12ms).
2026-02-12 22:02:00.281 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:02:00.369 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:02:00.372 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:02:00.376 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:02:00.380 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-12 22:02:00.384 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:02:00.413 +03:00 [ERR] Failed executing DbCommand (30ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:02:00.416 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:02:00.421 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (3ms).
2026-02-12 22:02:00.426 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WeatherInfo.API.DbContexts.WeatherInfoContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2026-02-12 22:02:00.473 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 699.7363ms
2026-02-12 22:02:00.474 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:02:00.507 +03:00 [ERR] HTTP 500 - An unexpected error occurred
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WeatherInfo.API.Controllers.StatsController.GetResult(Nullable`1 from, Nullable`1 to, Int32 page, Int32 pageSize) in C:\Sergey\WeatherInfo\WeatherInfo.API\Controllers\StatsController.cs:line 84
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WeatherInfo.API.Middleware.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Sergey\WeatherInfo\WeatherInfo.API\Middleware\ErrorHandlingMiddleware.cs:line 23
2026-02-12 22:02:00.524 +03:00 [DBG] Connection id "0HNJAD4LSTJAV" completed keep alive response.
2026-02-12 22:02:00.526 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:02:00.528 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:02:00.530 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:02:00.531 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 500 null application/json; charset=utf-8 793.934ms
2026-02-12 22:06:12.517 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 22:06:12.634 +03:00 [DBG] Hosting starting
2026-02-12 22:06:12.768 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 22:06:12.770 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 22:06:12.772 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 22:06:12.772 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 22:06:12.773 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 22:06:12.774 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 22:06:12.805 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 22:06:12.806 +03:00 [INF] Hosting environment: Development
2026-02-12 22:06:12.807 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 22:06:12.808 +03:00 [DBG] Hosting started
2026-02-12 22:06:12.819 +03:00 [DBG] Connection id "0HNJAD751PU8A" received FIN.
2026-02-12 22:06:12.819 +03:00 [DBG] Connection id "0HNJAD751PU89" reset.
2026-02-12 22:06:12.827 +03:00 [DBG] Connection id "0HNJAD751PU89" accepted.
2026-02-12 22:06:12.827 +03:00 [DBG] Connection id "0HNJAD751PU8A" accepted.
2026-02-12 22:06:12.828 +03:00 [DBG] Connection id "0HNJAD751PU89" started.
2026-02-12 22:06:12.829 +03:00 [DBG] Connection id "0HNJAD751PU8A" started.
2026-02-12 22:06:12.839 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:06:12.839 +03:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException:      .
 ---> System.Net.Sockets.SocketException (10054):      .
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:06:12.860 +03:00 [DBG] Connection id "0HNJAD751PU89" stopped.
2026-02-12 22:06:12.860 +03:00 [DBG] Connection id "0HNJAD751PU8A" stopped.
2026-02-12 22:06:12.864 +03:00 [DBG] Connection id "0HNJAD751PU89" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:06:12.864 +03:00 [DBG] Connection id "0HNJAD751PU8A" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:06:13.038 +03:00 [DBG] Connection id "0HNJAD751PU8B" accepted.
2026-02-12 22:06:13.039 +03:00 [DBG] Connection id "0HNJAD751PU8B" started.
2026-02-12 22:06:13.065 +03:00 [DBG] Connection 0HNJAD751PU8B established using the following protocol: "Tls13"
2026-02-12 22:06:13.094 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 22:06:13.148 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 22:06:13.157 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 22:06:13.157 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:06:13.160 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:06:13.185 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 22:06:13.187 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 22:06:13.198 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 22:06:13.199 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 22:06:13.200 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 109.5461ms
2026-02-12 22:06:13.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 22:06:13.228 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.2141ms
2026-02-12 22:06:13.255 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 22:06:13.274 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.9549ms
2026-02-12 22:06:13.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 22:06:13.332 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 22:06:13.333 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:06:13.333 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:06:13.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.1536ms
2026-02-12 22:06:16.797 +03:00 [DBG] Connection id "0HNJAD751PU8C" accepted.
2026-02-12 22:06:16.797 +03:00 [DBG] Connection id "0HNJAD751PU8C" received FIN.
2026-02-12 22:06:16.798 +03:00 [DBG] Connection id "0HNJAD751PU8C" started.
2026-02-12 22:06:16.799 +03:00 [DBG] Connection id "0HNJAD751PU8D" accepted.
2026-02-12 22:06:16.800 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:06:16.800 +03:00 [DBG] Connection id "0HNJAD751PU8D" started.
2026-02-12 22:06:16.802 +03:00 [DBG] Connection id "0HNJAD751PU8C" stopped.
2026-02-12 22:06:16.803 +03:00 [DBG] Connection id "0HNJAD751PU8C" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:06:16.804 +03:00 [DBG] Connection 0HNJAD751PU8D established using the following protocol: "Tls13"
2026-02-12 22:06:16.807 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:06:16.810 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:06:16.812 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:06:16.813 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:06:16.814 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:06:16.815 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:06:16.820 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:06:16.833 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:06:16.835 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:06:16.836 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:06:16.837 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:06:16.838 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:06:16.838 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:06:16.840 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:06:16.899 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 22:06:16.904 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:06:16.912 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:06:16.916 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:06:16.917 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:06:16.919 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:06:16.920 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:06:16.921 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:06:16.922 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:06:16.923 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:06:16.923 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:06:16.924 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:06:16.926 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:06:16.926 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:06:16.927 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:06:16.928 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:06:16.929 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:06:16.929 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:06:16.930 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:06:16.931 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:06:16.932 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:06:16.932 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:06:17.160 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:06:17.185 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 22:06:17.273 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 22:06:17.291 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:06:17.303 +03:00 [DBG] Created DbConnection. (10ms).
2026-02-12 22:06:17.305 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.376 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:06:17.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:06:17.385 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-12 22:06:17.389 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:06:17.422 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:06:17.431 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.435 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 9ms reading results.
2026-02-12 22:06:17.437 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.440 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 22:06:17.444 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = (DateOnly?)DateOnly.FromDateTime(x.TimestampUtc), 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 22:06:17.455 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, CAST(w.TimestampUtc AT TIME ZONE 'UTC' AS date) AS Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 22:06:17.458 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.459 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.460 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:06:17.461 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:06:17.462 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:06:17.462 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", CAST(w."TimestampUtc" AT TIME ZONE 'UTC' AS date) AS "Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:06:17.467 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", CAST(w."TimestampUtc" AT TIME ZONE 'UTC' AS date) AS "Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:06:17.472 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.473 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 22:06:17.474 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.475 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:06:17.478 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:06:17.480 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:06:17.480 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:06:17.481 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:06:17.482 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:06:17.482 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:06:17.496 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 654.3951ms
2026-02-12 22:06:17.497 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:06:17.500 +03:00 [DBG] Connection id "0HNJAD751PU8D" completed keep alive response.
2026-02-12 22:06:17.502 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:06:17.505 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:06:17.506 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:06:17.508 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 700.9281ms
2026-02-12 22:07:38.908 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 22:07:38.975 +03:00 [DBG] Hosting starting
2026-02-12 22:07:39.123 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 22:07:39.124 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 22:07:39.124 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 22:07:39.125 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 22:07:39.125 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 22:07:39.126 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 22:07:39.153 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 22:07:39.154 +03:00 [INF] Hosting environment: Development
2026-02-12 22:07:39.154 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 22:07:39.155 +03:00 [DBG] Hosting started
2026-02-12 22:07:39.232 +03:00 [DBG] Connection id "0HNJAD7UPT2FN" accepted.
2026-02-12 22:07:39.233 +03:00 [DBG] Connection id "0HNJAD7UPT2FN" started.
2026-02-12 22:07:39.243 +03:00 [DBG] Connection id "0HNJAD7UPT2FO" accepted.
2026-02-12 22:07:39.244 +03:00 [DBG] Connection id "0HNJAD7UPT2FO" started.
2026-02-12 22:07:39.275 +03:00 [DBG] Connection id "0HNJAD7UPT2FO" received FIN.
2026-02-12 22:07:39.275 +03:00 [DBG] Connection id "0HNJAD7UPT2FN" received FIN.
2026-02-12 22:07:39.280 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:07:39.280 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:07:39.298 +03:00 [DBG] Connection id "0HNJAD7UPT2FN" stopped.
2026-02-12 22:07:39.298 +03:00 [DBG] Connection id "0HNJAD7UPT2FO" stopped.
2026-02-12 22:07:39.300 +03:00 [DBG] Connection id "0HNJAD7UPT2FN" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:07:39.300 +03:00 [DBG] Connection id "0HNJAD7UPT2FO" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:07:39.410 +03:00 [DBG] Connection id "0HNJAD7UPT2FP" accepted.
2026-02-12 22:07:39.412 +03:00 [DBG] Connection id "0HNJAD7UPT2FP" started.
2026-02-12 22:07:39.438 +03:00 [DBG] Connection 0HNJAD7UPT2FP established using the following protocol: "Tls13"
2026-02-12 22:07:39.467 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 22:07:39.521 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 22:07:39.533 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 22:07:39.534 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:07:39.537 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:07:39.567 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 22:07:39.569 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 22:07:39.578 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 22:07:39.579 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 22:07:39.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 116.2799ms
2026-02-12 22:07:39.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 22:07:39.611 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.3325ms
2026-02-12 22:07:39.632 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 22:07:39.656 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.5017ms
2026-02-12 22:07:39.714 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 22:07:39.717 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 22:07:39.717 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:07:39.718 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:07:39.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.7076ms
2026-02-12 22:07:42.287 +03:00 [DBG] Connection id "0HNJAD7UPT2FQ" received FIN.
2026-02-12 22:07:42.287 +03:00 [DBG] Connection id "0HNJAD7UPT2FQ" accepted.
2026-02-12 22:07:42.289 +03:00 [DBG] Connection id "0HNJAD7UPT2FQ" started.
2026-02-12 22:07:42.289 +03:00 [DBG] Connection id "0HNJAD7UPT2FR" accepted.
2026-02-12 22:07:42.290 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:07:42.290 +03:00 [DBG] Connection id "0HNJAD7UPT2FR" started.
2026-02-12 22:07:42.292 +03:00 [DBG] Connection id "0HNJAD7UPT2FQ" stopped.
2026-02-12 22:07:42.293 +03:00 [DBG] Connection id "0HNJAD7UPT2FQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:07:42.295 +03:00 [DBG] Connection 0HNJAD7UPT2FR established using the following protocol: "Tls13"
2026-02-12 22:07:42.298 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:07:42.301 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:07:42.303 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:07:42.305 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:07:42.306 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:07:42.307 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:07:42.312 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:07:42.325 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:07:42.327 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:07:42.328 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:07:42.329 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:07:42.330 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:07:42.331 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:07:42.333 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:07:42.395 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 22:07:42.400 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:07:42.408 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:07:42.413 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:07:42.414 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:07:42.415 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:07:42.416 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:07:42.417 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:07:42.418 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:07:42.419 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:07:42.420 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:07:42.421 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:07:42.422 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:07:42.423 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:07:42.423 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:07:42.424 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:07:42.425 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:07:42.425 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:07:42.426 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:07:42.427 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:07:42.428 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:07:42.429 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:07:42.688 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:07:42.713 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 22:07:42.802 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 22:07:42.820 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:07:42.833 +03:00 [DBG] Created DbConnection. (12ms).
2026-02-12 22:07:42.835 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:42.909 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:42.912 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:07:42.916 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:07:42.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-12 22:07:42.924 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:07:42.958 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:07:42.967 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:42.972 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 10ms reading results.
2026-02-12 22:07:42.975 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:42.978 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (3ms).
2026-02-12 22:07:42.982 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 22:07:42.989 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 22:07:42.993 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:42.994 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:42.995 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:07:42.996 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:07:42.997 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:07:42.998 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:07:43.002 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:07:43.008 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:43.009 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 22:07:43.010 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:43.011 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:07:43.014 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:07:43.016 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:07:43.016 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:07:43.017 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:07:43.018 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:07:43.019 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:07:43.034 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 700.8797ms
2026-02-12 22:07:43.035 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:07:43.037 +03:00 [DBG] Connection id "0HNJAD7UPT2FR" completed keep alive response.
2026-02-12 22:07:43.039 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:07:43.041 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:07:43.043 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:07:43.044 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 746.3053ms
2026-02-12 22:13:09.311 +03:00 [DBG] Connection id "0HNJAD7UPT2FP" received FIN.
2026-02-12 22:13:09.313 +03:00 [DBG] Connection id "0HNJAD7UPT2FP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:13:09.315 +03:00 [DBG] Connection id "0HNJAD7UPT2FP" is closed. The last processed stream ID was 7.
2026-02-12 22:13:09.318 +03:00 [DBG] The connection queue processing loop for 0HNJAD7UPT2FP completed.
2026-02-12 22:13:09.319 +03:00 [DBG] Connection id "0HNJAD7UPT2FP" stopped.
2026-02-12 22:17:30.818 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 22:17:30.890 +03:00 [DBG] Hosting starting
2026-02-12 22:17:31.019 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 22:17:31.020 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 22:17:31.021 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 22:17:31.022 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 22:17:31.022 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 22:17:31.023 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 22:17:31.047 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 22:17:31.048 +03:00 [INF] Hosting environment: Development
2026-02-12 22:17:31.048 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 22:17:31.049 +03:00 [DBG] Hosting started
2026-02-12 22:17:31.168 +03:00 [DBG] Connection id "0HNJADDF71GV0" accepted.
2026-02-12 22:17:31.169 +03:00 [DBG] Connection id "0HNJADDF71GV0" started.
2026-02-12 22:17:31.179 +03:00 [DBG] Connection id "0HNJADDF71GV1" accepted.
2026-02-12 22:17:31.180 +03:00 [DBG] Connection id "0HNJADDF71GV1" started.
2026-02-12 22:17:31.212 +03:00 [DBG] Connection id "0HNJADDF71GV0" received FIN.
2026-02-12 22:17:31.212 +03:00 [DBG] Connection id "0HNJADDF71GV1" received FIN.
2026-02-12 22:17:31.218 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:17:31.218 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:17:31.239 +03:00 [DBG] Connection id "0HNJADDF71GV1" stopped.
2026-02-12 22:17:31.240 +03:00 [DBG] Connection id "0HNJADDF71GV0" stopped.
2026-02-12 22:17:31.243 +03:00 [DBG] Connection id "0HNJADDF71GV0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:17:31.243 +03:00 [DBG] Connection id "0HNJADDF71GV1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:17:31.515 +03:00 [DBG] Connection id "0HNJADDF71GV2" accepted.
2026-02-12 22:17:31.517 +03:00 [DBG] Connection id "0HNJADDF71GV2" started.
2026-02-12 22:17:31.541 +03:00 [DBG] Connection 0HNJADDF71GV2 established using the following protocol: "Tls13"
2026-02-12 22:17:31.568 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 22:17:31.626 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 22:17:31.635 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 22:17:31.636 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:17:31.638 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:17:31.664 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 22:17:31.665 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 22:17:31.673 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 22:17:31.673 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 22:17:31.675 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 109.3148ms
2026-02-12 22:17:31.697 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 22:17:31.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.3273ms
2026-02-12 22:17:31.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 22:17:31.755 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.1656ms
2026-02-12 22:17:31.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 22:17:31.811 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 22:17:31.812 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:17:31.813 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:17:31.818 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.7704ms
2026-02-12 22:17:47.444 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 22:17:47.447 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 22:17:47.449 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 22:17:47.450 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:17:47.452 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:17:47.452 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:17:47.458 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:17:47.470 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:17:47.472 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:17:47.473 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:17:47.474 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:17:47.475 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:17:47.476 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:17:47.478 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:17:47.535 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 22:17:47.540 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:17:47.546 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:17:47.547 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:17:47.549 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:17:47.549 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:17:47.550 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:17:47.553 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:17:47.569 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D0%B8%D1%80&count=1&language=ru
2026-02-12 22:17:47.575 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D0%B8%D1%80&count=1&language=ru
2026-02-12 22:17:47.868 +03:00 [INF] Received HTTP response headers after 291.0301ms - 200
2026-02-12 22:17:47.870 +03:00 [INF] End processing HTTP request after 301.633ms - 200
2026-02-12 22:17:47.880 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=30.06263&longitude=31.24967&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:17:47.880 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=30.06263&longitude=31.24967&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:17:48.177 +03:00 [INF] Received HTTP response headers after 295.5742ms - 200
2026-02-12 22:17:48.178 +03:00 [INF] End processing HTTP request after 298.0412ms - 200
2026-02-12 22:17:48.184 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = FALSEms, CacheHit = 622, StatusCode = 200
2026-02-12 22:17:48.423 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:17:48.449 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:17:48.479 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:17:48.482 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:17:48.484 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:17:48.492 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:17:48.521 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:17:48.533 +03:00 [DBG] Created DbConnection. (11ms).
2026-02-12 22:17:48.535 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.605 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.609 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:17:48.612 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:17:48.616 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-12 22:17:48.619 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:17:48.657 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:17:48.665 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:17:48.669 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.673 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 12ms reading results.
2026-02-12 22:17:48.675 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.678 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 22:17:48.683 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:17:48.685 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:17:48.686 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 1130, StatusCode = 200
2026-02-12 22:17:48.688 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:17:48.689 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:17:48.690 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:17:48.690 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:17:48.691 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:17:48.693 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.693 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.694 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:17:48.695 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:17:48.695 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:17:48.696 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:17:48.701 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:17:48.702 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:17:48.703 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.704 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:17:48.705 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.706 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:17:48.707 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:17:48.708 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:17:48.710 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:17:48.712 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:17:48.713 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:17:48.713 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:17:48.714 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:17:48.715 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 22:17:48.721 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 1242.7154ms
2026-02-12 22:17:48.722 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:17:48.725 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:17:48.727 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:48.729 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:17:48.730 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 1286.8189ms
2026-02-12 22:17:54.880 +03:00 [DBG] Connection id "0HNJADDF71GV3" accepted.
2026-02-12 22:17:54.880 +03:00 [DBG] Connection id "0HNJADDF71GV3" received FIN.
2026-02-12 22:17:54.881 +03:00 [DBG] Connection id "0HNJADDF71GV3" started.
2026-02-12 22:17:54.881 +03:00 [DBG] Connection id "0HNJADDF71GV4" accepted.
2026-02-12 22:17:54.885 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:17:54.885 +03:00 [DBG] Connection id "0HNJADDF71GV4" started.
2026-02-12 22:17:54.887 +03:00 [DBG] Connection id "0HNJADDF71GV3" stopped.
2026-02-12 22:17:54.888 +03:00 [DBG] Connection id "0HNJADDF71GV3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:17:54.889 +03:00 [DBG] Connection 0HNJADDF71GV4 established using the following protocol: "Tls13"
2026-02-12 22:17:54.892 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:17:54.894 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:17:54.895 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:17:54.896 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:17:54.896 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:17:54.897 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:17:54.897 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:17:54.901 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:17:54.902 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:17:54.903 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:17:54.903 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:17:54.904 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:17:54.905 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:17:54.906 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:17:54.907 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:17:54.910 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:17:54.912 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:17:54.913 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:17:54.915 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:17:54.915 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:17:54.916 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:17:54.917 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:17:54.918 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:17:54.919 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:17:54.919 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:17:54.920 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:17:54.921 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:17:54.922 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:17:54.923 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:17:54.923 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:17:54.924 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:17:54.925 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:17:54.926 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:17:54.926 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:17:54.927 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:17:54.962 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:17:54.986 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 22:17:55.067 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 22:17:55.083 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:17:55.084 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:17:55.084 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.085 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.086 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:17:55.087 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:17:55.087 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:17:55.088 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:17:55.091 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:17:55.096 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.097 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 5ms reading results.
2026-02-12 22:17:55.098 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.099 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:17:55.102 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 22:17:55.110 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 22:17:55.114 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.114 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:17:55.116 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:17:55.116 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:17:55.117 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:17:55.119 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:17:55.125 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.125 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 22:17:55.126 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.127 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:17:55.128 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:17:55.129 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:17:55.130 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:17:55.130 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:17:55.131 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:17:55.131 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:17:55.140 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 233.3966ms
2026-02-12 22:17:55.140 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:17:55.142 +03:00 [DBG] Connection id "0HNJADDF71GV4" completed keep alive response.
2026-02-12 22:17:55.142 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:17:55.143 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:17:55.144 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:17:55.145 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 252.9689ms
2026-02-12 22:18:15.564 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 22:18:15.654 +03:00 [DBG] Hosting starting
2026-02-12 22:18:15.761 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 22:18:15.762 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 22:18:15.763 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 22:18:15.763 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 22:18:15.764 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 22:18:15.765 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 22:18:15.795 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 22:18:15.796 +03:00 [INF] Hosting environment: Development
2026-02-12 22:18:15.797 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 22:18:15.800 +03:00 [DBG] Hosting started
2026-02-12 22:18:15.956 +03:00 [DBG] Connection id "0HNJADDSI5NJR" accepted.
2026-02-12 22:18:15.957 +03:00 [DBG] Connection id "0HNJADDSI5NJR" started.
2026-02-12 22:18:15.966 +03:00 [DBG] Connection id "0HNJADDSI5NJS" accepted.
2026-02-12 22:18:15.967 +03:00 [DBG] Connection id "0HNJADDSI5NJS" started.
2026-02-12 22:18:15.997 +03:00 [DBG] Connection id "0HNJADDSI5NJR" received FIN.
2026-02-12 22:18:15.997 +03:00 [DBG] Connection id "0HNJADDSI5NJS" received FIN.
2026-02-12 22:18:16.002 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:18:16.002 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:18:16.020 +03:00 [DBG] Connection id "0HNJADDSI5NJS" stopped.
2026-02-12 22:18:16.020 +03:00 [DBG] Connection id "0HNJADDSI5NJR" stopped.
2026-02-12 22:18:16.023 +03:00 [DBG] Connection id "0HNJADDSI5NJR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:18:16.023 +03:00 [DBG] Connection id "0HNJADDSI5NJS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:18:16.232 +03:00 [DBG] Connection id "0HNJADDSI5NJT" accepted.
2026-02-12 22:18:16.236 +03:00 [DBG] Connection id "0HNJADDSI5NJT" started.
2026-02-12 22:18:16.265 +03:00 [DBG] Connection 0HNJADDSI5NJT established using the following protocol: "Tls13"
2026-02-12 22:18:16.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 22:18:16.369 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 22:18:16.380 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 22:18:16.380 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:18:16.382 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:18:16.410 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 22:18:16.412 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 22:18:16.420 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 22:18:16.421 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 22:18:16.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 113.1242ms
2026-02-12 22:18:16.442 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 22:18:16.448 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 6.1441ms
2026-02-12 22:18:16.475 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 22:18:16.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.7667ms
2026-02-12 22:18:16.558 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 22:18:16.560 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 22:18:16.561 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:18:16.561 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:18:16.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.0838ms
2026-02-12 22:18:26.010 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 22:18:26.013 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 22:18:26.015 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 22:18:26.017 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:18:26.018 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:18:26.019 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:18:26.025 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:18:26.038 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:18:26.040 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:18:26.041 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:18:26.042 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:18:26.043 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:18:26.043 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:18:26.045 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:18:26.106 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 22:18:26.111 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:18:26.118 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:18:26.119 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:18:26.120 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:18:26.121 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:18:26.122 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:18:26.125 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:18:26.139 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%8B%D0%B7%D1%8B%D0%BB&count=1&language=ru
2026-02-12 22:18:26.145 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D1%8B%D0%B7%D1%8B%D0%BB&count=1&language=ru
2026-02-12 22:18:26.673 +03:00 [INF] Received HTTP response headers after 526.5183ms - 200
2026-02-12 22:18:26.676 +03:00 [INF] End processing HTTP request after 536.9528ms - 200
2026-02-12 22:18:26.686 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.71081&longitude=94.45338&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:18:26.686 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=51.71081&longitude=94.45338&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:18:27.093 +03:00 [INF] Received HTTP response headers after 405.6331ms - 200
2026-02-12 22:18:27.094 +03:00 [INF] End processing HTTP request after 408.1417ms - 200
2026-02-12 22:18:27.100 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = FALSEms, CacheHit = 967, StatusCode = 200
2026-02-12 22:18:27.344 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:18:27.365 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:18:27.391 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:18:27.394 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:18:27.396 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:18:27.403 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:18:27.434 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:18:27.449 +03:00 [DBG] Created DbConnection. (14ms).
2026-02-12 22:18:27.451 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.522 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.526 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:18:27.530 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:18:27.533 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-12 22:18:27.537 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:18:27.574 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:18:27.583 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:18:27.587 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.591 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 14ms reading results.
2026-02-12 22:18:27.594 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.597 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 22:18:27.602 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:18:27.604 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:18:27.605 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 1477, StatusCode = 200
2026-02-12 22:18:27.607 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:18:27.608 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:18:27.609 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:18:27.609 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:18:27.611 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:18:27.612 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.612 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.613 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:18:27.614 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:18:27.614 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:18:27.615 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:18:27.619 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:18:27.621 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:18:27.622 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.623 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-12 22:18:27.624 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.624 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:18:27.625 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:18:27.626 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:18:27.629 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:18:27.631 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:18:27.631 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:18:27.632 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:18:27.632 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:18:27.633 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 22:18:27.640 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 1594.1961ms
2026-02-12 22:18:27.641 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:18:27.644 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:18:27.646 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:27.647 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:18:27.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 1638.6641ms
2026-02-12 22:18:31.650 +03:00 [DBG] Connection id "0HNJADDSI5NJU" received FIN.
2026-02-12 22:18:31.649 +03:00 [DBG] Connection id "0HNJADDSI5NJU" accepted.
2026-02-12 22:18:31.651 +03:00 [DBG] Connection id "0HNJADDSI5NJU" started.
2026-02-12 22:18:31.651 +03:00 [DBG] Connection id "0HNJADDSI5NJV" accepted.
2026-02-12 22:18:31.652 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:18:31.652 +03:00 [DBG] Connection id "0HNJADDSI5NJV" started.
2026-02-12 22:18:31.654 +03:00 [DBG] Connection id "0HNJADDSI5NJU" stopped.
2026-02-12 22:18:31.655 +03:00 [DBG] Connection id "0HNJADDSI5NJU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:18:31.656 +03:00 [DBG] Connection 0HNJADDSI5NJV established using the following protocol: "Tls13"
2026-02-12 22:18:31.659 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:18:31.661 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:18:31.661 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:18:31.662 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:18:31.663 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:18:31.663 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:18:31.664 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:18:31.667 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:18:31.668 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:18:31.669 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:18:31.670 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:18:31.670 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:18:31.671 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:18:31.672 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:18:31.674 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:18:31.678 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:18:31.681 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:18:31.681 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:18:31.683 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:18:31.684 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:18:31.684 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:18:31.685 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:18:31.687 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:18:31.688 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:18:31.689 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:18:31.691 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:18:31.692 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:18:31.692 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:18:31.694 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:18:31.694 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:18:31.695 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:18:31.696 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:18:31.697 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:18:31.697 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:18:31.698 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:18:31.733 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:18:31.759 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 22:18:31.849 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 22:18:31.869 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:18:31.870 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:18:31.870 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.871 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.872 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:18:31.872 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:18:31.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:18:31.874 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:18:31.876 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:18:31.881 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.883 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 5ms reading results.
2026-02-12 22:18:31.883 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.884 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:18:31.888 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 22:18:31.896 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 22:18:31.899 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.900 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.901 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:18:31.902 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:18:31.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:18:31.903 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:18:31.905 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:18:31.909 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.910 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 22:18:31.911 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.912 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:18:31.913 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:18:31.914 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:18:31.914 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:18:31.914 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:18:31.915 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:18:31.915 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:18:31.923 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 250.6102ms
2026-02-12 22:18:31.924 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:18:31.924 +03:00 [DBG] Connection id "0HNJADDSI5NJV" completed keep alive response.
2026-02-12 22:18:31.925 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:18:31.926 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:18:31.926 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:18:31.927 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 268.3463ms
2026-02-12 22:19:57.711 +03:00 [DBG] Registered model binder providers, in the following order: ["WeatherInfo.API.ModelBinders.DateOnlyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-12 22:19:57.784 +03:00 [DBG] Hosting starting
2026-02-12 22:19:57.915 +03:00 [INF] Now listening on: https://localhost:7198
2026-02-12 22:19:57.921 +03:00 [INF] Now listening on: http://localhost:5288
2026-02-12 22:19:57.922 +03:00 [DBG] Loaded hosting startup assembly WeatherInfo.API
2026-02-12 22:19:57.922 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-12 22:19:57.923 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-12 22:19:57.924 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-12 22:19:57.952 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-12 22:19:57.953 +03:00 [INF] Hosting environment: Development
2026-02-12 22:19:57.954 +03:00 [INF] Content root path: C:\Sergey\WeatherInfo\WeatherInfo.API
2026-02-12 22:19:57.955 +03:00 [DBG] Hosting started
2026-02-12 22:19:58.073 +03:00 [DBG] Connection id "0HNJADER01DDR" accepted.
2026-02-12 22:19:58.073 +03:00 [DBG] Connection id "0HNJADER01DDS" accepted.
2026-02-12 22:19:58.074 +03:00 [DBG] Connection id "0HNJADER01DDR" started.
2026-02-12 22:19:58.075 +03:00 [DBG] Connection id "0HNJADER01DDS" started.
2026-02-12 22:19:58.086 +03:00 [DBG] Connection id "0HNJADER01DDR" received FIN.
2026-02-12 22:19:58.086 +03:00 [DBG] Connection id "0HNJADER01DDS" received FIN.
2026-02-12 22:19:58.092 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:19:58.092 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:19:58.110 +03:00 [DBG] Connection id "0HNJADER01DDS" stopped.
2026-02-12 22:19:58.110 +03:00 [DBG] Connection id "0HNJADER01DDR" stopped.
2026-02-12 22:19:58.112 +03:00 [DBG] Connection id "0HNJADER01DDS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:19:58.112 +03:00 [DBG] Connection id "0HNJADER01DDR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:19:58.224 +03:00 [DBG] Connection id "0HNJADER01DDT" accepted.
2026-02-12 22:19:58.227 +03:00 [DBG] Connection id "0HNJADER01DDT" started.
2026-02-12 22:19:58.253 +03:00 [DBG] Connection 0HNJADER01DDT established using the following protocol: "Tls13"
2026-02-12 22:19:58.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/index.html - null null
2026-02-12 22:19:58.345 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-12 22:19:58.355 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-12 22:19:58.356 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:19:58.358 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:19:58.383 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-12 22:19:58.384 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-12 22:19:58.393 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-12 22:19:58.394 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-12 22:19:58.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/index.html - 200 null text/html;charset=utf-8 113.9141ms
2026-02-12 22:19:58.420 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - null null
2026-02-12 22:19:58.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.9852ms
2026-02-12 22:19:58.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/_vs/browserLink - null null
2026-02-12 22:19:58.478 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.5282ms
2026-02-12 22:19:58.535 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - null null
2026-02-12 22:19:58.537 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-12 22:19:58.538 +03:00 [DBG] Request did not match any endpoints
2026-02-12 22:19:58.539 +03:00 [DBG] The request path  does not match the path filter
2026-02-12 22:19:58.543 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0429ms
2026-02-12 22:20:13.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 22:20:13.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 22:20:13.358 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 22:20:13.360 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:20:13.361 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:13.362 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:13.367 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:20:13.380 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:20:13.382 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:20:13.383 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:20:13.384 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:20:13.385 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:20:13.386 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:20:13.388 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:20:13.452 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-12 22:20:13.458 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:20:13.464 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:20:13.466 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:20:13.467 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:20:13.468 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:20:13.469 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:20:13.472 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:20:13.486 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-12 22:20:13.492 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9F%D0%BE%D1%80%D1%82%D1%83&count=1&language=ru
2026-02-12 22:20:13.733 +03:00 [INF] Received HTTP response headers after 238.5485ms - 200
2026-02-12 22:20:13.735 +03:00 [INF] End processing HTTP request after 249.4407ms - 200
2026-02-12 22:20:13.745 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:20:13.746 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.14961&longitude=-8.61099&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:20:13.983 +03:00 [INF] Received HTTP response headers after 236.3024ms - 200
2026-02-12 22:20:13.984 +03:00 [INF] End processing HTTP request after 239.5373ms - 200
2026-02-12 22:20:13.991 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 516, StatusCode = 200
2026-02-12 22:20:14.227 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:20:14.244 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:14.274 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:14.277 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:20:14.279 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:20:14.286 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:20:14.317 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:20:14.329 +03:00 [DBG] Created DbConnection. (11ms).
2026-02-12 22:20:14.332 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:14.405 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:14.410 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:14.413 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-02-12 22:20:14.417 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-12 22:20:14.421 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:20:14.470 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:20:14.478 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:20:14.483 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:14.487 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 13ms reading results.
2026-02-12 22:20:14.490 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:14.493 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (2ms).
2026-02-12 22:20:14.498 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:14.500 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:20:14.502 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:20:14.505 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:20:14.505 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:20:14.506 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:20:14.506 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:20:14.508 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 22:20:14.515 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 1126.2276ms
2026-02-12 22:20:14.516 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:20:14.518 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:20:14.520 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:14.522 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:20:14.523 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 1172.0014ms
2026-02-12 22:20:17.683 +03:00 [DBG] Connection id "0HNJADER01DDU" accepted.
2026-02-12 22:20:17.683 +03:00 [DBG] Connection id "0HNJADER01DDU" received FIN.
2026-02-12 22:20:17.684 +03:00 [DBG] Connection id "0HNJADER01DDU" started.
2026-02-12 22:20:17.684 +03:00 [DBG] Connection id "0HNJADER01DDV" accepted.
2026-02-12 22:20:17.686 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-12 22:20:17.686 +03:00 [DBG] Connection id "0HNJADER01DDV" started.
2026-02-12 22:20:17.687 +03:00 [DBG] Connection id "0HNJADER01DDU" stopped.
2026-02-12 22:20:17.688 +03:00 [DBG] Connection id "0HNJADER01DDU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-12 22:20:17.690 +03:00 [DBG] Connection 0HNJADER01DDV established using the following protocol: "Tls13"
2026-02-12 22:20:17.693 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:20:17.695 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:20:17.696 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:20:17.696 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:17.697 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:17.698 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:17.698 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:17.702 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:20:17.703 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:20:17.704 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:20:17.705 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:20:17.706 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:20:17.707 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:20:17.708 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:20:17.709 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:20:17.712 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:17.715 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:17.715 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:17.716 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:17.717 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:17.718 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:17.719 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:17.719 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:17.720 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:20:17.721 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:20:17.722 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:17.722 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:17.723 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:20:17.725 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:17.725 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:20:17.726 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:20:17.727 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:17.728 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:17.728 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:20:17.729 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:17.764 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:20:17.792 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Count()'
2026-02-12 22:20:17.887 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM WeatherRequests AS w
            WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        WeatherInfo.API.DbContexts.WeatherInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-12 22:20:17.904 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:20:17.905 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:20:17.905 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.906 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.907 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:17.908 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:17.909 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:17.909 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:20:17.914 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:20:17.919 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.920 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 22:20:17.921 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.922 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:17.926 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .OrderByDescending(x => x.TimestampUtc)
    .Skip(__p_2)
    .Take(__p_3)
    .Select(x => new WeatherRequestDto{ 
        TimestampUtc = x.TimestampUtc, 
        Endpoint = x.Endpoint, 
        City = x.City, 
        Date = x.Date, 
        CacheHit = x.CacheHit, 
        StatusCode = x.StatusCode, 
        LatencyMs = x.LatencyMs 
    }
    )'
2026-02-12 22:20:17.934 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<WeatherRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            TimestampUtc -> 0
            Endpoint -> 1
            City -> 2
            Date -> 3
            CacheHit -> 4
            StatusCode -> 5
            LatencyMs -> 6
        SELECT w.TimestampUtc, w.Endpoint, w.City, w.Date, w.CacheHit, w.StatusCode, w.LatencyMs
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        ORDER BY w.TimestampUtc DESC
        OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, WeatherRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 22:20:17.937 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.937 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.938 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:17.939 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:17.939 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:17.940 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:20:17.943 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:20:17.948 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.949 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-12 22:20:17.950 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.951 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:17.952 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:20:17.953 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:20:17.954 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:20:17.954 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:20:17.955 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:20:17.956 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:20:17.966 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 257.9667ms
2026-02-12 22:20:17.967 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:17.967 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:20:17.968 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:20:17.969 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:17.970 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:17.970 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 277.6847ms
2026-02-12 22:20:25.559 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 22:20:25.560 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 22:20:25.562 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 22:20:25.562 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:20:25.563 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:25.563 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:25.564 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:20:25.565 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:20:25.566 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:20:25.566 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:20:25.567 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:20:25.568 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:20:25.569 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:20:25.570 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:20:25.571 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:20:25.572 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:20:25.573 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:20:25.574 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:20:25.575 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:20:25.575 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:20:25.576 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:20:25.577 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-12 22:20:25.585 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:20:25.586 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:25.587 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:25.588 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:20:25.589 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:20:25.590 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:20:25.591 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:20:25.591 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:20:25.592 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:25.592 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:25.593 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:25.594 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:25.594 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:25.595 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:20:25.597 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:20:25.600 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:20:25.601 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:25.601 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:20:25.602 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:25.603 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:25.604 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:25.605 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:20:25.605 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:20:25.607 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:20:25.607 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:20:25.608 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:20:25.608 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:20:25.609 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 22:20:25.610 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 39.8537ms
2026-02-12 22:20:25.611 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:20:25.611 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:20:25.612 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:25.612 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:25.614 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 55.5739ms
2026-02-12 22:20:28.685 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:20:28.687 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:20:28.688 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:20:28.689 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:28.689 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:28.690 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:28.690 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:28.691 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:20:28.692 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:20:28.693 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:20:28.694 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:20:28.694 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:20:28.695 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:20:28.696 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:20:28.697 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:20:28.698 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:28.698 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:28.699 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:28.700 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:28.700 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:28.701 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:28.702 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:28.702 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:28.703 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:20:28.703 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:20:28.704 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:28.705 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:28.705 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:20:28.706 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:28.707 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:20:28.707 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:20:28.708 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:28.709 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:28.710 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:20:28.711 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:28.712 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:20:28.715 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:20:28.716 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:20:28.716 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.717 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.718 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:28.719 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:28.720 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:28.720 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:20:28.723 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:20:28.725 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.726 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:20:28.727 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.728 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:28.730 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.731 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.732 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:28.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:28.733 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:28.734 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:20:28.736 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:20:28.738 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.739 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:20:28.740 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.741 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:20:28.742 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:20:28.744 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:20:28.744 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:20:28.745 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:20:28.745 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:20:28.746 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:20:28.747 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 51.4439ms
2026-02-12 22:20:28.748 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:28.749 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:20:28.750 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:20:28.750 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:28.751 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:28.752 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 67.1294ms
2026-02-12 22:20:44.174 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week - null null
2026-02-12 22:20:44.177 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week'
2026-02-12 22:20:44.178 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather//week'
2026-02-12 22:20:44.179 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:20:44.179 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:44.180 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:44.180 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:20:44.183 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:20:44.184 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:20:44.185 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:20:44.187 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:20:44.188 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:20:44.189 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:20:44.190 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:20:44.193 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:20:44.194 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:20:44.195 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:20:44.195 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:20:44.196 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:20:44.197 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:20:44.198 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:20:44.199 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-12 22:20:44.201 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:20:44.202 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:44.203 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:44.203 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:20:44.204 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:20:44.205 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:20:44.205 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:20:44.206 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:20:44.207 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:44.207 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:44.208 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:44.209 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:44.209 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:44.210 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:20:44.212 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:20:44.215 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:20:44.216 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:44.216 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:20:44.217 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:44.218 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:44.219 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:20:44.220 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:20:44.225 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:20:44.227 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:20:44.227 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:20:44.228 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:20:44.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:20:44.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 22:20:44.231 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 41.5493ms
2026-02-12 22:20:44.232 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:20:44.233 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:20:44.233 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:44.234 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:44.235 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week - 200 null application/json; charset=utf-8 60.6827ms
2026-02-12 22:20:48.416 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:20:48.418 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:20:48.418 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:20:48.419 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:48.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:48.420 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:20:48.421 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:48.421 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:20:48.422 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:20:48.423 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:20:48.424 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:20:48.425 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:20:48.426 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:20:48.427 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:20:48.428 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:20:48.429 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:48.429 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:48.430 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:48.431 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:48.431 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:48.432 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:48.433 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:20:48.434 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:20:48.434 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:20:48.435 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:20:48.436 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:48.437 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:48.437 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:20:48.438 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:20:48.438 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:20:48.439 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:20:48.440 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:48.441 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:48.441 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:20:48.442 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:20:48.443 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:20:48.444 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:20:48.445 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:20:48.445 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.446 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.447 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:48.447 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:48.448 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:48.449 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:20:48.451 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:20:48.453 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.453 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:20:48.454 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.455 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:48.456 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.457 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.458 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:20:48.458 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:20:48.459 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:20:48.460 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:20:48.462 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:20:48.463 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.464 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:20:48.465 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.466 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:48.466 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:20:48.468 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:20:48.468 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:20:48.468 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:20:48.469 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:20:48.470 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:20:48.470 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 43.5935ms
2026-02-12 22:20:48.471 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:20:48.472 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:20:48.473 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:20:48.473 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:20:48.474 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:20:48.475 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 58.8571ms
2026-02-12 22:21:17.935 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week - null null
2026-02-12 22:21:17.941 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week'
2026-02-12 22:21:17.941 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather//week'
2026-02-12 22:21:17.943 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:21:17.943 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:17.944 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:17.944 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:21:17.945 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:21:17.946 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:21:17.947 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:21:17.947 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:21:17.948 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:21:17.949 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:21:17.950 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:21:17.951 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:21:17.952 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:21:17.953 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:21:17.954 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:21:17.955 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:21:17.956 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:21:17.957 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:21:17.959 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A7%D0%B8%D0%BA%D0%B0%D0%B3%D0%BE&count=1&language=ru
2026-02-12 22:21:17.959 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%A7%D0%B8%D0%BA%D0%B0%D0%B3%D0%BE&count=1&language=ru
2026-02-12 22:21:18.028 +03:00 [INF] Received HTTP response headers after 67.5848ms - 200
2026-02-12 22:21:18.029 +03:00 [INF] End processing HTTP request after 70.1337ms - 200
2026-02-12 22:21:18.030 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.85003&longitude=-87.65005&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:21:18.030 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=41.85003&longitude=-87.65005&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:21:18.652 +03:00 [INF] Received HTTP response headers after 621.3313ms - 200
2026-02-12 22:21:18.653 +03:00 [INF] End processing HTTP request after 623.6634ms - 200
2026-02-12 22:21:18.654 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = FALSEms, CacheHit = 696, StatusCode = 200
2026-02-12 22:21:18.656 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:21:18.657 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:21:18.659 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:21:18.660 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:21:18.660 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:21:18.661 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:21:18.662 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:21:18.663 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:21:18.663 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:18.664 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:18.665 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:21:18.666 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:21:18.667 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:21:18.668 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:21:18.671 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:21:18.672 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:21:18.673 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:18.674 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:21:18.675 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:18.676 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (1ms).
2026-02-12 22:21:18.678 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:21:18.679 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:21:18.680 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:21:18.682 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:21:18.682 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:21:18.683 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:21:18.684 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:21:18.684 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 22:21:18.685 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 735.2401ms
2026-02-12 22:21:18.686 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:21:18.687 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:21:18.688 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:18.689 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:18.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week - 200 null application/json; charset=utf-8 755.7883ms
2026-02-12 22:21:22.457 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:21:22.459 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:21:22.460 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:21:22.460 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:21:22.461 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:22.462 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:22.462 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:21:22.463 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:21:22.464 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:21:22.464 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:21:22.465 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:21:22.466 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:21:22.467 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:21:22.468 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:21:22.469 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:21:22.470 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:22.471 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:22.471 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:22.472 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:22.473 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:22.473 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:22.474 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:22.475 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:22.476 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:21:22.476 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:21:22.477 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:21:22.478 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:21:22.479 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:21:22.479 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:21:22.480 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:21:22.481 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:21:22.481 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:21:22.482 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:21:22.483 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:21:22.484 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:21:22.485 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:21:22.486 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:21:22.486 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:21:22.487 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.487 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.488 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:21:22.488 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:21:22.489 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:21:22.490 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:21:22.492 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:21:22.494 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.494 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:21:22.495 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.496 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:22.497 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.498 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.498 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:21:22.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:21:22.500 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:21:22.501 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:21:22.502 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:21:22.504 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.504 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:21:22.505 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.506 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:22.507 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:21:22.508 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:21:22.508 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:21:22.509 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:21:22.509 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:21:22.510 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:21:22.511 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 42.7844ms
2026-02-12 22:21:22.512 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:21:22.512 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:21:22.513 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:21:22.514 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:22.515 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:22.516 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 58.2503ms
2026-02-12 22:21:34.425 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 22:21:34.427 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 22:21:34.428 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 22:21:34.429 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:21:34.430 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:34.430 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:34.431 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:21:34.431 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:21:34.432 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:21:34.433 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:21:34.434 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:21:34.435 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:21:34.435 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:21:34.436 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:21:34.437 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:21:34.438 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:21:34.438 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:21:34.439 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:21:34.440 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:21:34.440 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:21:34.441 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:21:34.442 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 0, StatusCode = 200
2026-02-12 22:21:34.444 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:21:34.445 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:21:34.446 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:21:34.447 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:21:34.448 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:21:34.448 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:21:34.449 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:21:34.449 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:21:34.450 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:34.451 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:34.451 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:21:34.452 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:21:34.453 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:21:34.454 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:21:34.456 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:21:34.458 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:21:34.459 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:34.460 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:21:34.461 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:34.462 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:34.462 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:21:34.463 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:21:34.464 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:21:34.465 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:21:34.466 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:21:34.466 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:21:34.466 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:21:34.467 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 22:21:34.468 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 31.6081ms
2026-02-12 22:21:34.469 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:21:34.469 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:21:34.470 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:34.470 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:34.471 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 46.2153ms
2026-02-12 22:21:39.305 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:21:39.307 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:21:39.307 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:21:39.308 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:21:39.309 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:39.309 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:21:39.310 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:21:39.310 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:21:39.311 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:21:39.312 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:21:39.313 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:21:39.314 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:21:39.315 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:21:39.316 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:21:39.316 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:21:39.317 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:39.318 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:39.319 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:39.319 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:39.320 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:39.321 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:39.321 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:21:39.322 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:21:39.323 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:21:39.324 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:21:39.324 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:21:39.325 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:21:39.326 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:21:39.327 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:21:39.327 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:21:39.328 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:21:39.329 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:21:39.330 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:21:39.331 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:21:39.331 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:21:39.333 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:21:39.334 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:21:39.335 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:21:39.335 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.336 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.337 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:21:39.338 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:21:39.339 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:21:39.339 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:21:39.341 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:21:39.343 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.344 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:21:39.345 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.346 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:39.347 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.348 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.349 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:21:39.349 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:21:39.350 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:21:39.350 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:21:39.352 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:21:39.353 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.354 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:21:39.355 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.356 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:39.356 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:21:39.358 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:21:39.358 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:21:39.359 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:21:39.359 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:21:39.360 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:21:39.361 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 45.4832ms
2026-02-12 22:21:39.362 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:21:39.362 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:21:39.363 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:21:39.364 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:21:39.364 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:21:39.365 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 60.0179ms
2026-02-12 22:22:13.504 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'WeatherClient'
2026-02-12 22:22:18.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week/chart - null null
2026-02-12 22:22:18.270 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week/chart'
2026-02-12 22:22:18.271 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)' with route pattern 'api/weather/{city}/week/chart' is valid for the request path '/api/weather//week/chart'
2026-02-12 22:22:18.272 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:22:18.272 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:18.273 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:18.273 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:22:18.274 +03:00 [INF] Route matched with {action = "GetWeatherWeekChart", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherWeekChart(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:22:18.275 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:22:18.276 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:22:18.277 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:22:18.278 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:22:18.279 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:22:18.280 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:22:18.281 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:22:18.281 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:22:18.282 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:22:18.283 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:22:18.284 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:22:18.284 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:22:18.285 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:22:18.286 +03:00 [INF] Start processing HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D0%B7%D0%B0%D0%BD%D1%8C&count=1&language=ru
2026-02-12 22:22:18.287 +03:00 [INF] Sending HTTP request GET https://geocoding-api.open-meteo.com/v1/search?name=%D0%9A%D0%B0%D0%B7%D0%B0%D0%BD%D1%8C&count=1&language=ru
2026-02-12 22:22:18.573 +03:00 [INF] Received HTTP response headers after 285.2833ms - 200
2026-02-12 22:22:18.573 +03:00 [INF] End processing HTTP request after 287.4012ms - 200
2026-02-12 22:22:18.574 +03:00 [INF] Start processing HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.78874&longitude=49.12214&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:22:18.575 +03:00 [INF] Sending HTTP request GET https://api.open-meteo.com/v1/forecast?latitude=55.78874&longitude=49.12214&daily=temperature_2m_max,weathercode&timezone=Europe/London
2026-02-12 22:22:18.805 +03:00 [INF] Received HTTP response headers after 229.723ms - 200
2026-02-12 22:22:18.806 +03:00 [INF] End processing HTTP request after 231.939ms - 200
2026-02-12 22:22:18.807 +03:00 [INF] Endpoint = week-chart, City = , Date = -, Latency = FALSEms, CacheHit = 521, StatusCode = 200
2026-02-12 22:22:18.808 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:22:18.810 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:22:18.811 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:22:18.811 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:22:18.812 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:22:18.812 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:22:18.813 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:22:18.814 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:22:18.814 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:18.815 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:18.815 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:18.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:18.817 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:18.817 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:22:18.819 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:22:18.821 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:22:18.821 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:18.822 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:22:18.823 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:18.824 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:18.825 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:22:18.826 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:22:18.827 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:22:18.828 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:22:18.828 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:22:18.829 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:22:18.829 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:22:18.830 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekChartDto'.
2026-02-12 22:22:18.831 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API) in 550.769ms
2026-02-12 22:22:18.831 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherWeekChart (WeatherInfo.API)'
2026-02-12 22:22:18.832 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:22:18.832 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:18.833 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:18.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week/chart - 200 null application/json; charset=utf-8 569.1413ms
2026-02-12 22:22:22.409 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:22:22.411 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:22:22.412 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:22:22.413 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:22:22.413 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:22.414 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:22.414 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:22:22.415 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:22:22.416 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:22:22.416 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:22:22.417 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:22:22.418 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:22:22.419 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:22:22.419 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:22:22.420 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:22:22.421 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:22.421 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:22.422 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:22.423 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:22.423 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:22.424 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:22.425 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:22.425 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:22.426 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:22:22.427 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:22:22.428 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:22:22.428 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:22:22.429 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:22:22.430 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:22:22.430 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:22:22.431 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:22:22.432 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:22:22.432 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:22:22.433 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:22:22.434 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:22:22.435 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:22:22.436 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:22:22.436 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:22:22.437 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.438 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.438 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:22.439 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:22.439 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:22.440 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:22:22.442 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:22:22.444 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.445 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:22:22.446 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.446 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:22.448 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.448 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.449 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:22.450 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:22.451 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:22.451 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:22:22.453 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:22:22.454 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.455 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:22:22.456 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.456 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:22.457 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:22:22.458 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:22:22.459 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:22:22.459 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:22:22.460 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:22:22.461 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:22:22.461 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 42.1231ms
2026-02-12 22:22:22.462 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:22:22.463 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:22:22.464 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:22:22.464 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:22.465 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:22.466 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 56.6599ms
2026-02-12 22:22:23.508 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:22:23.510 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0366ms - processed: 0 items - remaining: 1 items
2026-02-12 22:22:31.677 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - null null
2026-02-12 22:22:31.678 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 22:22:31.679 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 22:22:31.680 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 22:22:31.680 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:31.681 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:31.681 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 22:22:31.684 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:22:31.685 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:22:31.686 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:22:31.687 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:22:31.688 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:22:31.689 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:22:31.689 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:22:31.690 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:22:31.691 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:31.691 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:31.692 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:31.693 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:31.693 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:31.694 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:31.695 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:31.695 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:31.696 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 22:22:31.697 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 22:22:31.697 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 22:22:31.698 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 22:22:31.698 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 22:22:31.699 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 22:22:31.701 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:22:31.703 +03:00 [DBG] Compiling query expression: 
'DbSet<WeatherRequestLog>()
    .Where(x => x.TimestampUtc >= __fromUtc_0 && x.TimestampUtc <= __toUtc_1)
    .GroupBy(x => x.City)
    .Select(g => new StatsRequestDto{ 
        City = g.Key, 
        RequestsCount = g
            .Count() 
    }
    )
    .OrderByDescending(x => x.RequestsCount)
    .Take(__p_2)'
2026-02-12 22:22:31.717 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StatsRequestDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            City -> 0
            RequestsCount -> 1
        SELECT TOP(@__p_2) w.City, CAST(count(*) AS integer) AS RequestsCount
        FROM WeatherRequests AS w
        WHERE (w.TimestampUtc >= @__fromUtc_0) && (w.TimestampUtc <= @__toUtc_1)
        GROUP BY w.City
        ORDER BY CAST(count(*) AS integer) DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StatsRequestDto>, 
    WeatherInfo.API.DbContexts.WeatherInfoContext, 
    False, 
    False, 
    True
)'
2026-02-12 22:22:31.718 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:22:31.719 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:22:31.720 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:31.720 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:31.721 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:31.721 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:31.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:31.723 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 22:22:31.724 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 22:22:31.727 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:31.728 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:22:31.728 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:31.729 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:31.730 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:22:31.731 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:22:31.731 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:22:31.732 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:22:31.732 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:22:31.733 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 22:22:31.734 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 44.5516ms
2026-02-12 22:22:31.735 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 22:22:31.735 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:22:31.736 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:22:31.736 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:31.737 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:31.738 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - 200 null application/json; charset=utf-8 61.052ms
2026-02-12 22:22:33.522 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:22:33.523 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-12 22:22:43.538 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:22:43.539 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2026-02-12 22:22:48.026 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7198/api/weather//week - null null
2026-02-12 22:22:48.028 +03:00 [DBG] 1 candidate(s) found for the request path '/api/weather//week'
2026-02-12 22:22:48.028 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)' with route pattern 'api/weather/{city}/week' is valid for the request path '/api/weather//week'
2026-02-12 22:22:48.029 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:22:48.030 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:48.030 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:48.031 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:22:48.031 +03:00 [INF] Route matched with {action = "GetWeatherByWeek", controller = "Weather"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWeatherByWeek(System.String) on controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API).
2026-02-12 22:22:48.032 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:22:48.033 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:22:48.034 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:22:48.035 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:22:48.036 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:22:48.036 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:22:48.037 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.WeatherController (WeatherInfo.API)
2026-02-12 22:22:48.038 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' ...
2026-02-12 22:22:48.039 +03:00 [DBG] Attempting to bind parameter 'city' of type 'System.String' using the name 'city' in request data ...
2026-02-12 22:22:48.040 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:22:48.040 +03:00 [DBG] Done attempting to bind parameter 'city' of type 'System.String'.
2026-02-12 22:22:48.041 +03:00 [DBG] Attempting to validate the bound parameter 'city' of type 'System.String' ...
2026-02-12 22:22:48.042 +03:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'System.String'.
2026-02-12 22:22:48.042 +03:00 [INF] Endpoint = week, City = , Date = -, Latency = TRUEms, CacheHit = 0, StatusCode = 200
2026-02-12 22:22:48.044 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:22:48.045 +03:00 [DBG] 'WeatherInfoContext' generated a temporary value for the property 'WeatherRequestLog.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:22:48.046 +03:00 [DBG] Context 'WeatherInfoContext' started tracking 'WeatherRequestLog' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:22:48.046 +03:00 [DBG] SaveChanges starting for 'WeatherInfoContext'.
2026-02-12 22:22:48.047 +03:00 [DBG] DetectChanges starting for 'WeatherInfoContext'.
2026-02-12 22:22:48.047 +03:00 [DBG] DetectChanges completed for 'WeatherInfoContext'.
2026-02-12 22:22:48.048 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:22:48.049 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:22:48.049 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:48.050 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:48.051 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:48.051 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:48.052 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:48.052 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:22:48.054 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = Date), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WeatherRequests" ("CacheHit", "City", "Date", "Endpoint", "LatencyMs", "StatusCode", "TimestampUtc")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2026-02-12 22:22:48.057 +03:00 [DBG] The foreign key property 'WeatherRequestLog.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-12 22:22:48.057 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:48.058 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-12 22:22:48.059 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:48.060 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:48.061 +03:00 [DBG] An entity of type 'WeatherRequestLog' tracked by 'WeatherInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-12 22:22:48.062 +03:00 [DBG] SaveChanges completed for 'WeatherInfoContext' with 1 entities written to the database.
2026-02-12 22:22:48.062 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:22:48.064 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:22:48.064 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:22:48.065 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:22:48.065 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:22:48.066 +03:00 [INF] Executing OkObjectResult, writing value of type 'WeatherInfo.API.Dtos.WeatherWeekDto'.
2026-02-12 22:22:48.067 +03:00 [INF] Executed action WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API) in 30.25ms
2026-02-12 22:22:48.067 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.WeatherController.GetWeatherByWeek (WeatherInfo.API)'
2026-02-12 22:22:48.068 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:22:48.069 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:48.069 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:48.070 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7198/api/weather//week - 200 null application/json; charset=utf-8 44.715ms
2026-02-12 22:22:51.173 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - null null
2026-02-12 22:22:51.175 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/requests'
2026-02-12 22:22:51.175 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)' with route pattern 'api/stats/requests' is valid for the request path '/api/stats/requests'
2026-02-12 22:22:51.176 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:22:51.177 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:51.177 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:22:51.178 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:22:51.178 +03:00 [INF] Route matched with {action = "GetResult", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetResult(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32, Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:22:51.180 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:22:51.180 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:22:51.181 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:22:51.182 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:22:51.183 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:22:51.184 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:22:51.185 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:22:51.186 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:51.186 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:51.187 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:51.188 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:51.188 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:51.189 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:51.190 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:22:51.190 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:22:51.191 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2026-02-12 22:22:51.192 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2026-02-12 22:22:51.192 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:22:51.193 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2026-02-12 22:22:51.194 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2026-02-12 22:22:51.195 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2026-02-12 22:22:51.195 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:22:51.196 +03:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2026-02-12 22:22:51.197 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:22:51.198 +03:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:22:51.198 +03:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2026-02-12 22:22:51.199 +03:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2026-02-12 22:22:51.200 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:22:51.201 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:22:51.201 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:22:51.202 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.203 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.203 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:51.204 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:51.205 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:51.205 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:22:51.207 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
2026-02-12 22:22:51.209 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.209 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:22:51.211 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.211 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:51.212 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.213 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.214 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:22:51.214 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:22:51.215 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:22:51.216 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:22:51.218 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."TimestampUtc", w."Endpoint", w."City", w."Date", w."CacheHit", w."StatusCode", w."LatencyMs"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
ORDER BY w."TimestampUtc" DESC
LIMIT @__p_3 OFFSET @__p_2
2026-02-12 22:22:51.219 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.219 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:22:51.220 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.221 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:51.222 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:22:51.223 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:22:51.223 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:22:51.224 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:22:51.224 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:22:51.225 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.WeatherRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-12 22:22:51.226 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API) in 41.5827ms
2026-02-12 22:22:51.226 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetResult (WeatherInfo.API)'
2026-02-12 22:22:51.227 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:22:51.228 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:22:51.228 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:22:51.229 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:22:51.230 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/requests?from=2026-02-12&to=2026-02-12&page=1&pageSize=10 - 200 null application/json; charset=utf-8 56.9788ms
2026-02-12 22:22:53.550 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:22:53.551 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2026-02-12 22:23:00.069 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - null null
2026-02-12 22:23:00.071 +03:00 [DBG] 1 candidate(s) found for the request path '/api/stats/top-cities'
2026-02-12 22:23:00.071 +03:00 [DBG] Endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)' with route pattern 'api/stats/top-cities' is valid for the request path '/api/stats/top-cities'
2026-02-12 22:23:00.072 +03:00 [DBG] Request matched endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 22:23:00.073 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:23:00.073 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-12 22:23:00.074 +03:00 [INF] Executing endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 22:23:00.074 +03:00 [INF] Route matched with {action = "GetTopCities", controller = "Stats"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopCities(System.Nullable`1[System.DateOnly], System.Nullable`1[System.DateOnly], Int32) on controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API).
2026-02-12 22:23:00.075 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-12 22:23:00.076 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-12 22:23:00.077 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-12 22:23:00.078 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-12 22:23:00.079 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-12 22:23:00.080 +03:00 [DBG] Executing controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:23:00.080 +03:00 [DBG] Executed controller factory for controller WeatherInfo.API.Controllers.StatsController (WeatherInfo.API)
2026-02-12 22:23:00.081 +03:00 [DBG] Attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:23:00.082 +03:00 [DBG] Done attempting to bind parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:23:00.083 +03:00 [DBG] Attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:23:00.083 +03:00 [DBG] Done attempting to validate the bound parameter 'from' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:23:00.084 +03:00 [DBG] Attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:23:00.085 +03:00 [DBG] Done attempting to bind parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:23:00.085 +03:00 [DBG] Attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]' ...
2026-02-12 22:23:00.086 +03:00 [DBG] Done attempting to validate the bound parameter 'to' of type 'System.Nullable`1[System.DateOnly]'.
2026-02-12 22:23:00.086 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' ...
2026-02-12 22:23:00.087 +03:00 [DBG] Attempting to bind parameter 'limit' of type 'System.Int32' using the name 'limit' in request data ...
2026-02-12 22:23:00.088 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 22:23:00.088 +03:00 [DBG] Done attempting to bind parameter 'limit' of type 'System.Int32'.
2026-02-12 22:23:00.089 +03:00 [DBG] Attempting to validate the bound parameter 'limit' of type 'System.Int32' ...
2026-02-12 22:23:00.090 +03:00 [DBG] Done attempting to validate the bound parameter 'limit' of type 'System.Int32'.
2026-02-12 22:23:00.091 +03:00 [DBG] Entity Framework Core 8.0.0 initialized 'WeatherInfoContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2026-02-12 22:23:00.092 +03:00 [DBG] Creating DbConnection.
2026-02-12 22:23:00.092 +03:00 [DBG] Created DbConnection. (0ms).
2026-02-12 22:23:00.093 +03:00 [DBG] Opening connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:23:00.094 +03:00 [DBG] Opened connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:23:00.094 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-12 22:23:00.095 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-12 22:23:00.096 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-12 22:23:00.096 +03:00 [DBG] Executing DbCommand [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 22:23:00.099 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fromUtc_0='?' (DbType = DateTime), @__toUtc_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT w."City", count(*)::int AS "RequestsCount"
FROM "WeatherRequests" AS w
WHERE w."TimestampUtc" >= @__fromUtc_0 AND w."TimestampUtc" <= @__toUtc_1
GROUP BY w."City"
ORDER BY count(*)::int DESC
LIMIT @__p_2
2026-02-12 22:23:00.104 +03:00 [DBG] Closing data reader to 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:23:00.105 +03:00 [DBG] A data reader for 'WeatherInfoDb' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-12 22:23:00.105 +03:00 [DBG] Closing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:23:00.106 +03:00 [DBG] Closed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:23:00.107 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-12 22:23:00.108 +03:00 [DBG] No information found on request to perform content negotiation.
2026-02-12 22:23:00.108 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-12 22:23:00.109 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-12 22:23:00.109 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-12 22:23:00.110 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WeatherInfo.API.Dtos.StatsRequestDto, WeatherInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-12 22:23:00.111 +03:00 [INF] Executed action WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API) in 31.6631ms
2026-02-12 22:23:00.112 +03:00 [INF] Executed endpoint 'WeatherInfo.API.Controllers.StatsController.GetTopCities (WeatherInfo.API)'
2026-02-12 22:23:00.113 +03:00 [DBG] Connection id "0HNJADER01DDV" completed keep alive response.
2026-02-12 22:23:00.113 +03:00 [DBG] 'WeatherInfoContext' disposed.
2026-02-12 22:23:00.114 +03:00 [DBG] Disposing connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432'.
2026-02-12 22:23:00.115 +03:00 [DBG] Disposed connection to database 'WeatherInfoDb' on server 'tcp://localhost:5432' (0ms).
2026-02-12 22:23:00.116 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7198/api/stats/top-cities?from=2026-02-12&to=2026-02-12&limit=10 - 200 null application/json; charset=utf-8 46.2514ms
2026-02-12 22:23:03.560 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:23:03.561 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2026-02-12 22:23:13.564 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:23:13.565 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-12 22:23:23.578 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:23:23.579 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2026-02-12 22:23:33.591 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:23:33.592 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-12 22:23:43.597 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:23:43.598 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2026-02-12 22:23:53.606 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2026-02-12 22:23:53.606 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
